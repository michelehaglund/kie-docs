<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE book [
<!ENTITY % BOOK_ENTITIES SYSTEM "master.ent">
%BOOK_ENTITIES;
<!ENTITY % sgml.features "IGNORE">
<!ENTITY % xml.features "INCLUDE">
<!ENTITY % DOCBOOK_ENTS PUBLIC "-//OASIS//ENTITIES DocBook Character Entities V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/dbcentx.mod">
%DOCBOOK_ENTS;
]>
<book version="5.0" xml:lang="en-US" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
	<?asciidoc-toc ?><?asciidoc-numbered ?>
	<info>
		<title>Developing solvers with Red Hat Business Optimizer in Red Hat Decision Manager</title>
		<subtitle></subtitle>
		 <date>2021-01-26</date>
		<productname>Red Hat Decision Manager</productname>
		<productnumber>7.10</productnumber>
		<abstract>
			<para>
				This document describes how to develop solvers with Red Hat Business Optimizer in Red Hat Decision Manager to find the optimal solution to planning problems.
			</para>
		</abstract>
		<xi:include href="Common_Content/Legal_Notice.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	</info>
	<preface>
		<title>Preface</title>
		<simpara>
			As a developer of business decisions , you can use Red Hat Business Optimizer to develop solvers that determine the optimal solution to planning problems. Red Hat Business Optimizer is a built-in component of Red Hat Decision Manager. You can use solvers as part of your services in Red Hat Decision Manager to optimize limited resources with specific constraints.
		</simpara>
	</preface>
	<preface xml:id="snip-conscious-language_developing-solvers">
		<title>Making open source more inclusive</title>
		<simpara>
			Red Hat is committed to replacing problematic language in our code, documentation, and web properties. We are beginning with these four terms: master, slave, blacklist, and whitelist. Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases. For more details, see <link xlink:href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language"><emphasis>our CTO Chris Wright’s message</emphasis></link>.
		</simpara>
	</preface>
	<part xml:id="assembly-getting-started-business-optimizer_developing-solvers">
		<title>Getting started with Red Hat Business Optimizer</title>
		<partintro>
			<simpara>
				As a business rules developer, you can use the Red Hat Business Optimizer to find the optimal solution to planning problems based on a set of limited resources and under specific constraints.
			</simpara>
			<simpara>
				Use this document to start developing solvers with Red Hat Business Optimizer.
			</simpara>
		</partintro>
		<chapter xml:id="optimizer-about-optimizer-con_getting-started-business-optimizer">
			<title>Introduction to Red Hat Business Optimizer</title>
			<simpara>
				Red Hat Business Optimizer is a lightweight, embeddable planning engine that optimizes planning problems. It helps normal Java programmers solve planning problems efficiently, and it combines optimization heuristics and metaheuristics with very efficient score calculations.
			</simpara>
			<simpara>
				For example, Red Hat Business Optimizer helps solve various use cases:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<emphasis>Employee/Patient Rosters</emphasis>: It helps create timetables for nurses and keeps track of patient bed management.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis>Educational Timetables</emphasis>: It helps schedule lessons, courses, exams, and conference presentations.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis>Shop Schedules</emphasis>: It tracks car assembly lines, machine queue planning, and workforce task planning.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis>Cutting Stock</emphasis>: It minimizes waste by reducing the consumption of resources such as paper and steel.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Every organization faces planning problems; that is, they provide products and services with a limited set of constrained resources (employees, assets, time, and money).
			</simpara>
			<simpara>
				Red Hat Business Optimizer is open source software under the Apache Software License 2.0. It is 100% pure Java and runs on most Java virtual machines.
			</simpara>
			<section xml:id="optimizer-planning-problem-con">
				<title>Planning problems</title>
				<simpara>
					A <emphasis>planning problem</emphasis> has an optimal goal, based on limited resources and under specific constraints. Optimal goals can be any number of things, such as:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Maximized profits - the optimal goal results in the highest possible profit.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Minimized ecological footprint - the optimal goal has the least amount of environmental impact.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Maximized satisfaction for employees or customers - the optimal goal prioritizes the needs of employees or customers.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The ability to achieve these goals relies on the number of resources available. For example, the following resources might be limited:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							The number of people
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Amount of time
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Budget
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Physical assets, for example, machinery, vehicles, computers, buildings, and so on
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					You must also take into account the specific constraints related to these resources, such as the number of hours a person works, their ability to use certain machines, or compatibility between pieces of equipment.
				</simpara>
				<simpara>
					Red Hat Business Optimizer helps Java programmers solve constraint satisfaction problems efficiently. It combines optimization heuristics and metaheuristics with efficient score calculation.
				</simpara>
			</section>
			<section xml:id="optimizer-NP-complete-vs-NP-hard-con">
				<title>NP-completeness in planning problems</title>
				<simpara>
					The provided use cases are <emphasis>probably</emphasis> <link xlink:href="http://en.wikipedia.org/wiki/NP-complete">NP-complete or NP-hard</link>, which means the following statements apply:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							It is easy to verify a given solution to a problem in reasonable time.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							There is no simple way to find the optimal solution of a problem in reasonable time.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The implication is that solving your problem is probably harder than you anticipated, because the two common techniques do not suffice:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							A brute force algorithm (even a more advanced variant) takes too long.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A quick algorithm, for example in the <link xlink:href="https://en.wikipedia.org/wiki/Bin_packing_problem">bin packing problem</link>, <emphasis>putting in the largest items first</emphasis> returns a solution that is far from optimal.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					By using advanced optimization algorithms, Business Optimizer finds a good solution in reasonable time for such planning problems.
				</simpara>
			</section>
			<section xml:id="optimizer-planning-problem-search-space-con">
				<title>Solutions to planning problems</title>
				<simpara>
					A planning problem has a number of solutions.
				</simpara>
				<simpara>
					Several categories of solutions are:
				</simpara>
				<variablelist>
					<varlistentry>
						<term>Possible solution</term>
						<listitem>
							<simpara>
								A possible solution is any solution, whether or not it breaks any number of constraints. Planning problems often have an incredibly large number of possible solutions. Many of those solutions are not useful.
							</simpara>
						</listitem>
					</varlistentry>
					<varlistentry>
						<term>Feasible solution</term>
						<listitem>
							<simpara>
								A feasible solution is a solution that does not break any (negative) hard constraints. The number of feasible solutions are relative to the number of possible solutions. Sometimes there are no feasible solutions. Every feasible solution is a possible solution.
							</simpara>
						</listitem>
					</varlistentry>
					<varlistentry>
						<term>Optimal solution</term>
						<listitem>
							<simpara>
								An optimal solution is a solution with the highest score. Planning problems usually have a few optimal solutions. They always have at least one optimal solution, even in the case that there are no feasible solutions and the optimal solution is not feasible.
							</simpara>
						</listitem>
					</varlistentry>
					<varlistentry>
						<term>Best solution found</term>
						<listitem>
							<simpara>
								The best solution is the solution with the highest score found by an implementation in a given amount of time. The best solution found is likely to be feasible and, given enough time, it’s an optimal solution.
							</simpara>
						</listitem>
					</varlistentry>
				</variablelist>
				<simpara>
					Counterintuitively, the number of possible solutions is huge (if calculated correctly), even with a small data set.
				</simpara>
				<simpara>
					In the examples provided in the <literal>planner-engine</literal> distribution folder, most instances have a large number of possible solutions. As there is no guaranteed way to find the optimal solution, any implementation is forced to evaluate at least a subset of all those possible solutions.
				</simpara>
				<simpara>
					Business Optimizer supports several optimization algorithms to efficiently wade through that incredibly large number of possible solutions.
				</simpara>
				<simpara>
					Depending on the use case, some optimization algorithms perform better than others, but it is impossible to know in advance. Using Business Optimizer, you can switch the optimization algorithm by changing the solver configuration in a few lines of XML or code.
				</simpara>
			</section>
			<section xml:id="optimizer-hard-vs-soft-constraints-con">
				<title>Constraints on planning problems</title>
				<simpara>
					Usually, a planning problem has minimum two levels of constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							A <emphasis>(negative) hard constraint</emphasis> must not be broken.
						</simpara>
						<simpara>
							For example, one teacher can not teach two different lessons at the same time.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A <emphasis>(negative) soft constraint</emphasis> should not be broken if it can be avoided.
						</simpara>
						<simpara>
							For example, Teacher A does not like to teach on Friday afternoons.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Some problems also have positive constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							A <emphasis>positive soft constraint (or reward)</emphasis> should be fulfilled if possible.
						</simpara>
						<simpara>
							For example, Teacher B likes to teach on Monday mornings.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Some basic problems only have hard constraints. Some problems have three or more levels of constraints, for example, hard, medium, and soft constraints.
				</simpara>
				<simpara>
					These constraints define the <emphasis>score calculation</emphasis> (otherwise known as the <emphasis>fitness function</emphasis>) of a planning problem. Each solution of a planning problem is graded with a score. With Business Optimizer, score constraints are written in an object oriented language such as Java, or in Drools rules.
				</simpara>
				<simpara>
					This type of code is flexible and scalable.
				</simpara>
			</section>
		</chapter>
		<chapter xml:id="workbench-er-tutorial-con">
			<title>Getting started with solvers in Business Central: An employee rostering example</title>
			<simpara>
				You can build and deploy the <literal>employee-rostering</literal> sample project in Business Central. The project demonstrates how to create each of the Business Central assets required to solve the shift rostering planning problem and use Red Hat Business Optimizer to find the best possible solution.
			</simpara>
			<simpara>
				You can deploy the preconfigured <literal>employee-rostering</literal> project in Business Central. Alternatively, you can create the project yourself using Business Central.
			</simpara>
			<note>
				<simpara>
					The <literal>employee-rostering</literal> sample project in Business Central does not include a data set. You must supply a data set in XML format using a REST API call.
				</simpara>
			</note>
			<section xml:id="wb-employee-rostering-example-deploying-in-central-proc">
				<title>Deploying the employee rostering sample project in Business Central</title>
				<simpara>
					Business Central includes a number of sample projects that you can use to get familiar with the product and its features. The employee rostering sample project is designed and created to demonstrate the shift rostering use case for Red Hat Business Optimizer. Use the following procedure to deploy and run the employee rostering sample in Business Central.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							Red Hat Decision Manager has been downloaded and installed. For installation options, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/installing_and_configuring_red_hat_decision_manager#assembly-planning"><emphasis>Planning a Red Hat Decision Manager installation</emphasis></link>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							You have started the KIE Server and logged in to Business Central with a user that has <literal>admin</literal> permissions. For more information about getting started, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/getting_started_with_red_hat_decision_manager#assembly-getting-started-decision-services"><emphasis>Getting started with decision services</emphasis></link>.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In Business Central, click <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the preconfigured <literal>MySpace</literal> space, click <emphasis role="strong">Try Samples</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Select <emphasis role="strong">employee-rostering</emphasis> from the list of sample projects and click <emphasis role="strong">Ok</emphasis> in the upper-right corner to import the project.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							After the asset list has complied, click <emphasis role="strong">Build &amp; Deploy</emphasis> to deploy the employee rostering example.
						</simpara>
					</listitem>
				</orderedlist>
				<simpara>
					The rest of this document explains each of the project assets and their configuration.
				</simpara>
			</section>
			<section xml:id="wb-employee-rostering-example-recreate-con">
				<title>Re-creating the employee rostering sample project</title>
				<simpara>
					The employee rostering sample project is a preconfigured project available in Business Central. You can learn about how to deploy this project in <xref linkend="wb-employee-rostering-example-deploying-in-central-proc" />.
				</simpara>
				<simpara>
					You can create the employee rostering example "from scratch". You can use the workflow in this example to create a similar project of your own in Business Central.
				</simpara>
				<section xml:id="wb-employee-rostering-example-setup-proc">
					<title>Setting up the employee rostering project</title>
					<simpara>
						To start developing a solver in Business Central, you must set up the project.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								Red Hat Decision Manager has been downloaded and installed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								You have deployed Business Central and logged in with a user that has the <literal>admin</literal> role.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Create a new project in Business Central by clicking <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis> → <emphasis role="strong">Add Project</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Add Project</emphasis> window, fill out the following fields:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Name</emphasis>: <literal>employee-rostering</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Description</emphasis>(optional): Employee rostering problem optimization using Business Optimizer. Assigns employees to shifts based on their skill.
									</simpara>
								</listitem>
							</itemizedlist>
							<simpara>
								Optionally, click <emphasis role="strong">Configure Advanced Options</emphasis> to populate the <literal>Group ID</literal>, <literal>Artifact ID</literal>, and <literal>Version</literal> information.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Group ID</emphasis>: <literal>employeerostering</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Artifact ID</emphasis>: <literal>employeerostering</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Version</emphasis>: <literal>1.0.0-SNAPSHOT</literal>
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Add</emphasis> to add the project to the Business Central project repository.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="wb-employee-rostering-facts-vs-entities-con">
					<title>Problem facts and planning entities</title>
					<simpara>
						Each of the domain classes in the employee rostering planning problem is categorized as one of the following:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								An unrelated class: not used by any of the score constraints. From a planning standpoint, this data is obsolete.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								A <emphasis>problem fact</emphasis> class: used by the score constraints, but does not change during planning (as long as the problem stays the same), for example, <literal>Shift</literal> and <literal>Employee</literal>. All the properties of a problem fact class are problem properties.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								A <emphasis>planning entity</emphasis> class: used by the score constraints and changes during planning, for example, <literal>ShiftAssignment</literal>. The properties that change during planning are <emphasis>planning variables</emphasis>. The other properties are problem properties.
							</simpara>
							<simpara>
								Ask yourself the following questions:
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis>What class changes during planning?</emphasis>
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis>Which class has variables that I want the <literal>Solver</literal> to change?</emphasis>
							</simpara>
							<simpara>
								That class is a planning entity.
							</simpara>
							<simpara>
								A planning entity class needs to be annotated with the <literal>@PlanningEntity</literal> annotation, or defined in Business Central using the Red Hat Business Optimizer dock in the domain designer.
							</simpara>
							<simpara>
								Each planning entity class has one or more <emphasis>planning variables</emphasis>, and must also have one or more defining properties.
							</simpara>
							<simpara>
								Most use cases have only one planning entity class, and only one planning variable per planning entity class.
							</simpara>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="wb-employee-rostering-data-model-proc">
					<title>Creating the data model for the employee rostering project</title>
					<simpara>
						Use this section to create the data objects required to run the employee rostering sample project in Business Central.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								You have completed the project setup described in <xref linkend="wb-employee-rostering-example-setup-proc" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								With your new project, either click <emphasis role="strong">Data Object</emphasis> in the project perspective, or click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">Data Object</emphasis> to create a new data object.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Name the first data object <literal>Timeslot</literal>, and select <literal>employeerostering.employeerostering</literal> as the <emphasis role="strong">Package</emphasis>.
							</simpara>
							<simpara>
								Click <emphasis role="strong">Ok</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Data Objects</emphasis> perspective, click <emphasis role="strong">+add field</emphasis> to add fields to the <literal>Timeslot</literal> data object.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">id</emphasis> field, type <literal>endTime</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the drop-down menu next to <emphasis role="strong">Type</emphasis> and select <literal>LocalDateTime</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create and continue</emphasis> to add another field.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add another field with the <emphasis role="strong">id</emphasis> <literal>startTime</literal> and <emphasis role="strong">Type</emphasis> <literal>LocalDateTime</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis> in the upper-right corner to save the <literal>Timeslot</literal> data object.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">x</emphasis> in the upper-right corner to close the <emphasis role="strong">Data Objects</emphasis> perspective and return to the <emphasis role="strong">Assets</emphasis> menu.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Using the previous steps, create the following data objects and their attributes:
							</simpara>
							<table colsep="1" frame="all" rowsep="1">
								<title>Skill</title>
								<tgroup cols="2">
									<colspec colname="col_1" colwidth="50*"></colspec>
									<colspec colname="col_2" colwidth="50*"></colspec>
									<thead>
										<row>
											<entry align="left" valign="top">id</entry>
											<entry align="left" valign="top">Type</entry>
										</row>
									</thead>
									<tbody>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>name</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>String</literal>
											</simpara>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</table>
							<table colsep="1" frame="all" rowsep="1">
								<title>Employee</title>
								<tgroup cols="2">
									<colspec colname="col_1" colwidth="50*"></colspec>
									<colspec colname="col_2" colwidth="50*"></colspec>
									<thead>
										<row>
											<entry align="left" valign="top">id</entry>
											<entry align="left" valign="top">Type</entry>
										</row>
									</thead>
									<tbody>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>name</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>String</literal>
											</simpara>
											</entry>
										</row>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>skills</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>employeerostering.employeerostering.Skill[List]</literal>
											</simpara>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</table>
							<table colsep="1" frame="all" rowsep="1">
								<title>Shift</title>
								<tgroup cols="2">
									<colspec colname="col_1" colwidth="50*"></colspec>
									<colspec colname="col_2" colwidth="50*"></colspec>
									<thead>
										<row>
											<entry align="left" valign="top">id</entry>
											<entry align="left" valign="top">Type</entry>
										</row>
									</thead>
									<tbody>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>requiredSkill</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>employeerostering.employeerostering.Skill</literal>
											</simpara>
											</entry>
										</row>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>timeslot</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>employeerostering.employeerostering.Timeslot</literal>
											</simpara>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</table>
							<table colsep="1" frame="all" rowsep="1">
								<title>DayOffRequest</title>
								<tgroup cols="2">
									<colspec colname="col_1" colwidth="50*"></colspec>
									<colspec colname="col_2" colwidth="50*"></colspec>
									<thead>
										<row>
											<entry align="left" valign="top">id</entry>
											<entry align="left" valign="top">Type</entry>
										</row>
									</thead>
									<tbody>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>date</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>LocalDate</literal>
											</simpara>
											</entry>
										</row>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>employee</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>employeerostering.employeerostering.Employee</literal>
											</simpara>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</table>
							<table colsep="1" frame="all" rowsep="1">
								<title>ShiftAssignment</title>
								<tgroup cols="2">
									<colspec colname="col_1" colwidth="50*"></colspec>
									<colspec colname="col_2" colwidth="50*"></colspec>
									<thead>
										<row>
											<entry align="left" valign="top">id</entry>
											<entry align="left" valign="top">Type</entry>
										</row>
									</thead>
									<tbody>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>employee</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>employeerostering.employeerostering.Employee</literal>
											</simpara>
											</entry>
										</row>
										<row>
											<entry align="left" valign="top">
											<simpara>
												<literal>shift</literal>
											</simpara>
											</entry>
											<entry align="left" valign="top">
											<simpara>
												<literal>employeerostering.employeerostering.Shift</literal>
											</simpara>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</table>
						</listitem>
					</orderedlist>
					<simpara>
						For more examples of creating data objects, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/getting_started_with_red_hat_decision_manager#assembly-getting-started-decision-services"><emphasis>Getting started with decision services</emphasis></link>.
					</simpara>
					<section xml:id="wb-employee-rostering-planning-entity-proc">
						<title>Creating the employee roster planning entity</title>
						<simpara>
							In order to solve the employee rostering planning problem, you must create a planning entity and a solver. The planning entity is defined in the domain designer using the attributes available in the Red Hat Business Optimizer dock.
						</simpara>
						<simpara>
							Use the following procedure to define the <literal>ShiftAssignment</literal> data object as the planning entity for the employee rostering example.
						</simpara>
						<itemizedlist>
							<title>Prerequisites</title>
							<listitem>
								<simpara>
									You have created the relevant data objects and planning entity required to run the employee rostering example by completing the procedures in <xref linkend="wb-employee-rostering-data-model-proc" />.
								</simpara>
							</listitem>
						</itemizedlist>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									From the project <emphasis role="strong">Assets</emphasis> menu, open the <literal>ShiftAssignment</literal> data object.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the <emphasis role="strong">Data Objects</emphasis> perspective, open the Red Hat Business Optimizer dock by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/optimizer-icon.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>Red Hat Business Optimizer icon</phrase>
										</textobject>
									</inlinemediaobject>
									 on the right.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <emphasis role="strong">Planning Entity</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <literal>employee</literal> from the list of fields under the <literal>ShiftAssignment</literal> data object.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the Red Hat Business Optimizer dock, select <emphasis role="strong">Planning Variable</emphasis>.
								</simpara>
								<simpara>
									In the <emphasis role="strong">Value Range Id</emphasis> input field, type <literal>employeeRange</literal>. This adds the <literal>@ValueRangeProvider</literal> annotation to the planning entity, which you can view by clicking the <literal>Source</literal> tab in the designer.
								</simpara>
								<simpara>
									The value range of a planning variable is defined with the <literal>@ValueRangeProvider</literal> annotation. A <literal>@ValueRangeProvider</literal> annotation always has a property <literal>id</literal>, which is referenced by the <literal>@PlanningVariable</literal> property <literal>valueRangeProviderRefs</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Close the dock and click <emphasis role="strong">Save</emphasis> to save the data object.
								</simpara>
							</listitem>
						</orderedlist>
					</section>
					<section xml:id="wb-employee-rostering-planning-solution-proc">
						<title>Creating the employee roster planning solution</title>
						<simpara>
							The employee roster problem relies on a defined planning solution. The planning solution is defined in the domain designer using the attributes available in the Red Hat Business Optimizer dock.
						</simpara>
						<itemizedlist>
							<title>Prerequisites</title>
							<listitem>
								<simpara>
									You have created the relevant data objects and planning entity required to run the employee rostering example by completing the procedures in <xref linkend="wb-employee-rostering-data-model-proc" /> and <xref linkend="wb-employee-rostering-planning-entity-proc" />.
								</simpara>
							</listitem>
						</itemizedlist>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									Create a new data object with the identifier <literal>EmployeeRoster</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Create the following fields:
								</simpara>
								<table colsep="1" frame="all" rowsep="1">
									<title>EmployeeRoster</title>
									<tgroup cols="2">
										<colspec colname="col_1" colwidth="50*"></colspec>
										<colspec colname="col_2" colwidth="50*"></colspec>
										<thead>
											<row>
												<entry align="left" valign="top">id</entry>
												<entry align="left" valign="top">Type</entry>
											</row>
										</thead>
										<tbody>
											<row>
												<entry align="left" valign="top">
												<simpara>
													<literal>dayOffRequestList</literal>
												</simpara>
												</entry>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeerostering.employeerostering.DayOffRequest[List]</literal>
												</simpara>
												</entry>
											</row>
											<row>
												<entry align="left" valign="top">
												<simpara>
													<literal>shiftAssignmentList</literal>
												</simpara>
												</entry>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeerostering.employeerostering.ShiftAssignment[List]</literal>
												</simpara>
												</entry>
											</row>
											<row>
												<entry align="left" valign="top">
												<simpara>
													<literal>shiftList</literal>
												</simpara>
												</entry>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeerostering.employeerostering.Shift[List]</literal>
												</simpara>
												</entry>
											</row>
											<row>
												<entry align="left" valign="top">
												<simpara>
													<literal>skillList</literal>
												</simpara>
												</entry>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeerostering.employeerostering.Skill[List]</literal>
												</simpara>
												</entry>
											</row>
											<row>
												<entry align="left" valign="top">
												<simpara>
													<literal>timeslotList</literal>
												</simpara>
												</entry>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeerostering.employeerostering.Timeslot[List]</literal>
												</simpara>
												</entry>
											</row>
										</tbody>
									</tgroup>
								</table>
							</listitem>
							<listitem>
								<simpara>
									In the <emphasis role="strong">Data Objects</emphasis> perspective, open the Red Hat Business Optimizer dock by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/optimizer-icon.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>Red Hat Business Optimizer icon</phrase>
										</textobject>
									</inlinemediaobject>
									 on the right.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <emphasis role="strong">Planning Solution</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Leave the default <literal>Hard soft score</literal> as the <emphasis role="strong">Solution Score Type</emphasis>. This automatically generates a <literal>score</literal> field in the <literal>EmployeeRoster</literal> data object with the solution score as the type.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add a new field with the following attributes:
								</simpara>
								<informaltable colsep="1" frame="all" rowsep="1">
									<tgroup cols="2">
										<colspec colname="col_1" colwidth="50*"></colspec>
										<colspec colname="col_2" colwidth="50*"></colspec>
										<thead>
											<row>
												<entry align="left" valign="top">id</entry>
												<entry align="left" valign="top">Type</entry>
											</row>
										</thead>
										<tbody>
											<row>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeeList</literal>
												</simpara>
												</entry>
												<entry align="left" valign="top">
												<simpara>
													<literal>employeerostering.employeerostering.Employee[List]</literal>
												</simpara>
												</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</listitem>
							<listitem>
								<simpara>
									With the <literal>employeeList</literal> field selected, open the Red Hat Business Optimizer dock and select the <emphasis role="strong">Planning Value Range Provider</emphasis> box.
								</simpara>
								<simpara>
									In the <emphasis role="strong">id</emphasis> field, type <literal>employeeRange</literal>. Close the dock.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Save</emphasis> in the upper-right corner to save the asset.
								</simpara>
							</listitem>
						</orderedlist>
					</section>
				</section>
				<section xml:id="wb-employee-rostering-constraints-con">
					<title>Employee rostering constraints</title>
					<simpara>
						Employee rostering is a planning problem. All planning problems include constraints that must be satisfied in order to find an optimal solution.
					</simpara>
					<simpara>
						The employee rostering sample project in Business Central includes the following hard and soft constraints:
					</simpara>
					<variablelist>
						<varlistentry>
							<term>Hard constraint</term>
							<listitem>
								<itemizedlist>
									<listitem>
										<simpara>
											Employees are only assigned one shift per day.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											All shifts that require a particular employee skill are assigned an employee with that particular skill.
										</simpara>
									</listitem>
								</itemizedlist>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>Soft constraints</term>
							<listitem>
								<itemizedlist>
									<listitem>
										<simpara>
											All employees are assigned a shift.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If an employee requests a day off, their shift is reassigned to another employee.
										</simpara>
									</listitem>
								</itemizedlist>
							</listitem>
						</varlistentry>
					</variablelist>
					<simpara>
						Hard and soft constraints are defined in Business Central using either the free-form DRL designer, or using guided rules.
					</simpara>
					<section xml:id="drl-rules-con_getting-started-business-optimizer">
						<title>DRL (Drools Rule Language) rules</title>
						<simpara>
							DRL (Drools Rule Language) rules are business rules that you define directly in <literal>.drl</literal> text files. These DRL files are the source in which all other rule assets in Business Central are ultimately rendered. You can create and manage DRL files within the Business Central interface, or create them externally as part of a Maven or Java project using Red Hat CodeReady Studio or another integrated development environment (IDE). A DRL file can contain one or more rules that define at a minimum the rule conditions (<literal>when</literal>) and actions (<literal>then</literal>). The DRL designer in Business Central provides syntax highlighting for Java, DRL, and XML.
						</simpara>
						<simpara>
							DRL files consist of the following components:
						</simpara>
						<formalpara>
							<title>Components in a DRL file</title>
							<para>
								
<screen>package

import

function  // Optional

query  // Optional

declare   // Optional

global   // Optional

rule "rule name"
    // Attributes
    when
        // Conditions
    then
        // Actions
end

rule "rule2 name"

...</screen>
							</para>
						</formalpara>
						<simpara>
							The following example DRL rule determines the age limit in a loan application decision service:
						</simpara>
						<formalpara>
							<title>Example rule for loan application age limit</title>
							<para>
								
<screen>rule "Underage"
  salience 15
  agenda-group "applicationGroup"
  when
    $application : LoanApplication()
    Applicant( age &lt; 21 )
  then
    $application.setApproved( false );
    $application.setExplanation( "Underage" );
end</screen>
							</para>
						</formalpara>
						<simpara>
							A DRL file can contain single or multiple rules, queries, and functions, and can define resource declarations such as imports, globals, and attributes that are assigned and used by your rules and queries. The DRL package must be listed at the top of a DRL file and the rules are typically listed last. All other DRL components can follow any order.
						</simpara>
						<simpara>
							Each rule must have a unique name within the rule package. If you use the same rule name more than once in any DRL file in the package, the rules fail to compile. Always enclose rule names with double quotation marks (<literal>rule "rule name"</literal>) to prevent possible compilation errors, especially if you use spaces in rule names.
						</simpara>
						<simpara>
							All data objects related to a DRL rule must be in the same project package as the DRL file in Business Central. Assets in the same package are imported by default. Existing assets in other packages can be imported with the DRL rule.
						</simpara>
					</section>
					<section xml:id="wb-employee-rostering-optimizer-drools-rules-proc">
						<title>Defining constraints for employee rostering using the DRL designer</title>
						<simpara>
							You can create constraint definitions for the employee rostering example using the free-form DRL designer in Business Central.
						</simpara>
						<simpara>
							Use this procedure to create a <emphasis>hard constraint</emphasis> where no employee is assigned a shift that begins less than 10 hours after their previous shift ended.
						</simpara>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									In Business Central, go to <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis> and click the project name.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">DRL file</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the <emphasis role="strong">DRL file</emphasis> name field, type <literal>ComplexScoreRules</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select the <literal>employeerostering.employeerostering</literal> package.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">+Ok</emphasis> to create the DRL file.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the <emphasis role="strong">Model</emphasis> tab of the DRL designer, define the <literal>Employee10HourShiftSpace</literal> rule as a DRL file:
								</simpara>
								
<screen>package employeerostering.employeerostering;

rule "Employee10HourShiftSpace"
    when
        $shiftAssignment : ShiftAssignment( $employee : employee != null, $shiftEndDateTime : shift.timeslot.endTime)
        ShiftAssignment( this != $shiftAssignment, $employee == employee, $shiftEndDateTime &lt;= shift.timeslot.endTime,
                $shiftEndDateTime.until(shift.timeslot.startTime, java.time.temporal.ChronoUnit.HOURS) &lt;10)
    then
        scoreHolder.addHardConstraintMatch(kcontext, -1);
end</screen>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Save</emphasis> to save the DRL file.
								</simpara>
							</listitem>
						</orderedlist>
						<simpara>
							For more information about creating DRL files, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/developing_decision_services_in_red_hat_decision_manager#assembly-drl-rules"><emphasis>Designing a decision service using DRL rules</emphasis></link>.
						</simpara>
					</section>
				</section>
				<section xml:id="wb-employee-rostering-guided-rule-editor-proc">
					<title>Creating rules for employee rostering using guided rules</title>
					<simpara>
						You can create rules that define hard and soft constraints for employee rostering using the guided rules designer in Business Central.
					</simpara>
					<section xml:id="guided-rules-con">
						<title>Guided rules</title>
						<simpara>
							Guided rules are business rules that you create in a UI-based guided rules designer in Business Central that leads you through the rule-creation process. The guided rules designer provides fields and options for acceptable input based on the data objects for the rule being defined. The guided rules that you define are compiled into Drools Rule Language (DRL) rules as with all other rule assets.
						</simpara>
						<simpara>
							All data objects related to a guided rule must be in the same project package as the guided rule. Assets in the same package are imported by default. After you create the necessary data objects and the guided rule, you can use the <emphasis role="strong">Data Objects</emphasis> tab of the guided rules designer to verify that all required data objects are listed or to import other existing data objects by adding a <emphasis role="strong">New item</emphasis>.
						</simpara>
					</section>
					<section xml:id="wb-employee-rostering-balance-employees-shift-rule-proc">
						<title>Creating a guided rule to balance employee shift numbers</title>
						<simpara>
							The <literal>BalanceEmployeesShiftNumber</literal> guided rule creates a soft constraint that ensures shifts are assigned to employees in a way that is balanced as evenly as possible. It does this by creating a score penalty that increases when shift distribution is less even. The score formula, implemented by the rule, incentivizes the Solver to distribute shifts in a more balanced way.
						</simpara>
						<informalfigure>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/_images/employee-rostering/BalanceEmployeesShiftNumber.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>BalanceEmployeesShiftNumber Guided Rule</phrase>
							</textobject>
						</mediaobject>
						</informalfigure>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									In Business Central, go to <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis> and click the project name.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">Guided Rule</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter <literal>BalanceEmployeesShiftNumber</literal> as the <emphasis role="strong">Guided Rule</emphasis> name and select the <literal>employeerostering.employeerostering</literal> <emphasis role="strong">Package</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Ok</emphasis> to create the rule asset.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add a <emphasis role="strong">WHEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">WHEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <literal>Employee</literal> in the <emphasis role="strong">Add a condition to the rule</emphasis> window. Click <emphasis role="strong">+Ok</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the <literal>Employee</literal> condition to modify the constraints and add the variable name <literal>$employee</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add the <emphasis role="strong">WHEN</emphasis> condition <literal>From Accumulate</literal>.
								</simpara>
								<orderedlist numeration="loweralpha">
									<listitem>
										<simpara>
											Above the <literal>From Accumulate</literal> condition, click <emphasis role="strong">click to add pattern</emphasis> and select <literal>Number</literal> as the fact type from the drop-down list.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Add the variable name <literal>$shiftCount</literal> to the <literal>Number</literal> condition.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Below the <literal>From Accumulate</literal> condition, click <emphasis role="strong">click to add pattern</emphasis> and select the <literal>ShiftAssignment</literal> fact type from the drop-down list.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Add the variable name <literal>$shiftAssignment</literal> to the <literal>ShiftAssignment</literal> fact type.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Click the <literal>ShiftAssignment</literal> condition again and from the <emphasis role="strong">Add a restriction on a field</emphasis> drop-down list, select <literal>employee</literal>.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Select <literal>equal to</literal> from the drop-down list next to the <literal>employee</literal> constraint.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Click the 
											<inlinemediaobject>
												<imageobject>
													<imagedata fileref="images/_images/employee-rostering/6191.png" format="PNG" />
												</imageobject>
												<textobject>
													<phrase>edit</phrase>
												</textobject>
											</inlinemediaobject>
											 icon next to the drop-down button to add a variable, and click <emphasis role="strong">Bound variable</emphasis> in the <emphasis role="strong">Field value</emphasis> window.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Select <literal>$employee</literal> from the drop-down list.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											In the <emphasis role="strong">Function</emphasis> box type <literal>count($shiftAssignment)</literal>.
										</simpara>
									</listitem>
								</orderedlist>
							</listitem>
							<listitem>
								<simpara>
									Add the <emphasis role="strong">THEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">THEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <literal>Modify Soft Score</literal> in the <emphasis role="strong">Add a new action</emphasis> window. Click <emphasis role="strong">+Ok</emphasis>.
								</simpara>
								<orderedlist numeration="loweralpha">
									<listitem>
										<simpara>
											Type the following expression into the box: <literal>-($shiftCount.intValue()*$shiftCount.intValue())</literal>
										</simpara>
									</listitem>
								</orderedlist>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Validate</emphasis> in the upper-right corner to check all rule conditions are valid. If the rule validation fails, address any problems described in the error message, review all components in the rule, and try again to validate the rule until the rule passes.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Save</emphasis> to save the rule.
								</simpara>
							</listitem>
						</orderedlist>
						<simpara>
							For more information about creating guided rules, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/developing_decision_services_in_red_hat_decision_manager#assembly-guided-rules"><emphasis>Designing a decision service using guided rules</emphasis></link>.
						</simpara>
					</section>
					<section xml:id="wb-employee-rostering-one-shift-per-day-rule-proc">
						<title>Creating a guided rule for no more than one shift per day</title>
						<simpara>
							The <literal>OneEmployeeShiftPerDay</literal> guided rule creates a hard constraint that employees are not assigned more than one shift per day. In the employee rostering example, this constraint is created using the guided rule designer.
						</simpara>
						<informalfigure>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/_images/employee-rostering/OneEmployeeShiftPerDay.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>OneEmployeeShiftPerDay Guided Rule</phrase>
							</textobject>
						</mediaobject>
						</informalfigure>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									In Business Central, go to <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis> and click the project name.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">Guided Rule</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter <literal>OneEmployeeShiftPerDay</literal> as the <emphasis role="strong">Guided Rule</emphasis> name and select the <literal>employeerostering.employeerostering</literal> <emphasis role="strong">Package</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Ok</emphasis> to create the rule asset.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add a <emphasis role="strong">WHEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">WHEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <emphasis role="strong">Free form DRL</emphasis> from the <emphasis role="strong">Add a condition to the rule</emphasis> window.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the free form DRL box, type the following condition:
								</simpara>
								
<programlisting language="java" linenumbering="unnumbered">$shiftAssignment : ShiftAssignment( employee != null )
		ShiftAssignment( this != $shiftAssignment , employee == $shiftAssignment.employee , shift.timeslot.startTime.toLocalDate() == $shiftAssignment.shift.timeslot.startTime.toLocalDate() )</programlisting>
								<simpara>
									This condition states that a shift cannot be assigned to an employee that already has another shift assignment on the same day.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add the <emphasis role="strong">THEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">THEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <emphasis role="strong">Add free form DRL</emphasis> from the <emphasis role="strong">Add a new action</emphasis> window.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the free form DRL box, type the following condition:
								</simpara>
								
<programlisting language="java" linenumbering="unnumbered">scoreHolder.addHardConstraintMatch(kcontext, -1);</programlisting>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Validate</emphasis> in the upper-right corner to check all rule conditions are valid. If the rule validation fails, address any problems described in the error message, review all components in the rule, and try again to validate the rule until the rule passes.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Save</emphasis> to save the rule.
								</simpara>
							</listitem>
						</orderedlist>
						<simpara>
							For more information about creating guided rules, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/developing_decision_services_in_red_hat_decision_manager#assembly-guided-rules"><emphasis>Designing a decision service using guided rules</emphasis></link>.
						</simpara>
					</section>
					<section xml:id="wb-employee-rostering-shift-required-skills-met-proc">
						<title>Creating a guided rule to match skills to shift requirements</title>
						<simpara>
							The <literal>ShiftReqiredSkillsAreMet</literal> guided rule creates a hard constraint that ensures all shifts are assigned an employee with the correct set of skills. In the employee rostering example, this constraint is created using the guided rule designer.
						</simpara>
						<informalfigure>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/_images/employee-rostering/ShiftRequiredSkillsAreMet.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>ShiftRequiredSkillsAreMet Guided Rule</phrase>
							</textobject>
						</mediaobject>
						</informalfigure>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									In Business Central, go to <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis> and click the project name.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">Guided Rule</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter <literal>ShiftReqiredSkillsAreMet</literal> as the <emphasis role="strong">Guided Rule</emphasis> name and select the <literal>employeerostering.employeerostering</literal> <emphasis role="strong">Package</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Ok</emphasis> to create the rule asset.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add a <emphasis role="strong">WHEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">WHEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <literal>ShiftAssignment</literal> in the <emphasis role="strong">Add a condition to the rule</emphasis> window. Click <emphasis role="strong">+Ok</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the <literal>ShiftAssignment</literal> condition, and select <literal>employee</literal> from the <emphasis role="strong">Add a restriction on a field</emphasis> drop-down list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the designer, click the drop-down list next to <literal>employee</literal> and select <literal>is not null</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the <literal>ShiftAssignment</literal> condition, and click <emphasis role="strong">Expression editor</emphasis>.
								</simpara>
								<orderedlist numeration="loweralpha">
									<listitem>
										<simpara>
											In the designer, click <literal>[not bound]</literal> to open the <emphasis role="strong">Expression editor</emphasis>, and bind the expression to the variable <literal>$requiredSkill</literal>. Click <emphasis role="strong">Set</emphasis>.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											In the designer, next to <literal>$requiredSkill</literal>, select <literal>shift</literal> from the first drop-down list, then <literal>requiredSkill</literal> from the next drop-down list.
										</simpara>
									</listitem>
								</orderedlist>
							</listitem>
							<listitem>
								<simpara>
									Click the <literal>ShiftAssignment</literal> condition, and click <emphasis role="strong">Expression editor</emphasis>.
								</simpara>
								<orderedlist numeration="loweralpha">
									<listitem>
										<simpara>
											In the designer, next to <literal>[not bound]</literal>, select <literal>employee</literal> from the first drop-down list, then <literal>skills</literal> from the next drop-down list.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Leave the next drop-down list as <literal>Choose</literal>.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											In the next drop-down box, change <literal>please choose</literal> to <literal>excludes</literal>.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Click the 
											<inlinemediaobject>
												<imageobject>
													<imagedata fileref="images/_images/employee-rostering/6191.png" format="PNG" />
												</imageobject>
												<textobject>
													<phrase>edit</phrase>
												</textobject>
											</inlinemediaobject>
											 icon next to <literal>excludes</literal>, and in the <emphasis role="strong">Field value</emphasis> window, click the <emphasis role="strong">New formula</emphasis> button.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											Type <literal>$requiredSkill</literal> into the formula box.
										</simpara>
									</listitem>
								</orderedlist>
							</listitem>
							<listitem>
								<simpara>
									Add the <emphasis role="strong">THEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">THEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <literal>Modify Hard Score</literal> in the <emphasis role="strong">Add a new action</emphasis> window. Click <emphasis role="strong">+Ok</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Type <literal>-1</literal> into the score actions box.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Validate</emphasis> in the upper-right corner to check all rule conditions are valid. If the rule validation fails, address any problems described in the error message, review all components in the rule, and try again to validate the rule until the rule passes.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Save</emphasis> to save the rule.
								</simpara>
							</listitem>
						</orderedlist>
						<simpara>
							For more information about creating guided rules, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/developing_decision_services_in_red_hat_decision_manager#assembly-guided-rules"><emphasis>Designing a decision service using guided rules</emphasis></link>.
						</simpara>
					</section>
					<section xml:id="wb-employee-rostering-day-off-request-rule-proc">
						<title>Creating a guided rule to manage day off requests</title>
						<simpara>
							The <literal>DayOffRequest</literal> guided rule creates a soft constraint. This constraint allows a shift to be reassigned to another employee in the event the employee who was originally assigned the shift is no longer able to work that day. In the employee rostering example, this constraint is created using the guided rule designer.
						</simpara>
						<informalfigure>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/_images/employee-rostering/DayOffRequest.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>DayOffRequest Guided Rule</phrase>
							</textobject>
						</mediaobject>
						</informalfigure>
						<orderedlist numeration="arabic">
							<title>Procedure</title>
							<listitem>
								<simpara>
									In Business Central, go to <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Design</emphasis> → <emphasis role="strong">Projects</emphasis> and click the project name.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">Guided Rule</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter <literal>DayOffRequest</literal> as the <emphasis role="strong">Guided Rule</emphasis> name and select the <literal>employeerostering.employeerostering</literal> <emphasis role="strong">Package</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Ok</emphasis> to create the rule asset.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add a <emphasis role="strong">WHEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">WHEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <emphasis role="strong">Free form DRL</emphasis> from the <emphasis role="strong">Add a condition to the rule</emphasis> window.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the free form DRL box, type the following condition:
								</simpara>
								
<programlisting language="java" linenumbering="unnumbered">$dayOffRequest : DayOffRequest( )
		ShiftAssignment( employee == $dayOffRequest.employee , shift.timeslot.startTime.toLocalDate() == $dayOffRequest.date )</programlisting>
								<simpara>
									This condition states if a shift is assigned to an employee who has made a day off request, the employee can be unassigned the shift on that day.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Add the <emphasis role="strong">THEN</emphasis> condition by clicking the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/5686.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>5686</phrase>
										</textobject>
									</inlinemediaobject>
									 in the <emphasis role="strong">THEN</emphasis> field.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select <emphasis role="strong">Add free form DRL</emphasis> from the <emphasis role="strong">Add a new action</emphasis> window.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									In the free form DRL box, type the following condition:
								</simpara>
								
<programlisting language="java" linenumbering="unnumbered">scoreHolder.addSoftConstraintMatch(kcontext, -100);</programlisting>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Validate</emphasis> in the upper-right corner to check all rule conditions are valid. If the rule validation fails, address any problems described in the error message, review all components in the rule, and try again to validate the rule until the rule passes.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click <emphasis role="strong">Save</emphasis> to save the rule.
								</simpara>
							</listitem>
						</orderedlist>
						<simpara>
							For more information about creating guided rules, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/developing_decision_services_in_red_hat_decision_manager#assembly-guided-rules"><emphasis>Designing a decision service using guided rules</emphasis></link>.
						</simpara>
					</section>
				</section>
				<section xml:id="wb-employee-rostering-solver-configuration-proc">
					<title>Creating a solver configuration for employee rostering</title>
					<simpara>
						You can create and edit Solver configurations in Business Central. The Solver configuration designer creates a solver configuration that can be run after the project is deployed.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								Red Hat Decision Manager has been downloaded and installed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								You have created and configured all of the relevant assets for the employee rostering example.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In Business Central, click <emphasis role="strong">Menu</emphasis> → <emphasis role="strong">Projects</emphasis>, and click your project to open it.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Assets</emphasis> perspective, click <emphasis role="strong">Add Asset</emphasis> → <emphasis role="strong">Solver configuration</emphasis>
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Create new Solver configuration</emphasis> window, type the name <literal>EmployeeRosteringSolverConfig</literal> for your Solver and click <emphasis role="strong">Ok</emphasis>.
							</simpara>
							<simpara>
								This opens the <emphasis role="strong">Solver configuration</emphasis> designer.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Score Director Factory</emphasis> configuration section, define a KIE base that contains scoring rule definitions. The employee rostering sample project uses <literal>defaultKieBase</literal>.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										Select one of the KIE sessions defined within the KIE base. The employee rostering sample project uses <literal>defaultKieSession</literal>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Validate</emphasis> in the upper-right corner to check the <emphasis role="strong">Score Director Factory</emphasis> configuration is correct. If validation fails, address any problems described in the error message, and try again to validate until the configuration passes.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis> to save the Solver configuration.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="wb-employee-rostering-solver-termination-configuration-proc">
					<title>Configuring Solver termination for the employee rostering project</title>
					<simpara>
						You can configure the Solver to terminate after a specified amount of time. By default, the planning engine is given an unlimited time period to solve a problem instance.
					</simpara>
					<simpara>
						The employee rostering sample project is set up to run for 30 seconds.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								You have created all relevant assets for the employee rostering project and created the <literal>EmployeeRosteringSolverConfig</literal> solver configuration in Business Central as described in <xref linkend="wb-employee-rostering-solver-configuration-proc" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Open the <literal>EmployeeRosteringSolverConfig</literal> from the <emphasis role="strong">Assets</emphasis> perspective. This will open the <emphasis role="strong">Solver configuration</emphasis> designer.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Termination</emphasis> section, click <emphasis role="strong">Add</emphasis> to create new termination element within the selected logical group.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Select the <literal>Time spent</literal> termination type from the drop-down list. This is added as an input field in the termination configuration.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Use the arrows next to the time elements to adjust the amount of time spent to 30 seconds.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Validate</emphasis> in the upper-right corner to check the <emphasis role="strong">Score Director Factory</emphasis> configuration is correct. If validation fails, address any problems described in the error message, and try again to validate until the configuration passes.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis> to save the Solver configuration.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
			<section xml:id="wb-employee-rostering-using-rest-proc">
				<title>Accessing the solver using the REST API</title>
				<simpara>
					After deploying or re-creating the sample solver, you can access it using the REST API.
				</simpara>
				<simpara>
					You must register a solver instance using the REST API. Then you can supply data sets and retrieve optimized solutions.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							The employee rostering project is set up and deployed according to the previous sections in this document. You can either deploy the sample project, as described in <xref linkend="wb-employee-rostering-example-deploying-in-central-proc" />, or re-create the project, as described in <xref linkend="wb-employee-rostering-example-recreate-con" />.
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="wb-employee-rostering-register-solver-proc">
					<title>Registering the Solver using the REST API</title>
					<simpara>
						You must register the solver instance using the REST API before you can use the solver.
					</simpara>
					<simpara>
						Each solver instance is capable of optimizing one planning problem at a time.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Create a HTTP request using the following header:
							</simpara>
							
<screen>authorization: admin:admin
X-KIE-ContentType: xstream
content-type: application/xml</screen>
						</listitem>
						<listitem>
							<simpara>
								Register the Solver using the following request:
							</simpara>
							<variablelist>
								<varlistentry>
									<term>PUT</term>
									<listitem>
										<simpara>
											<literal>http://localhost:8080/kie-server/services/rest/server/containers/employeerostering_1.0.0-SNAPSHOT/solvers/EmployeeRosteringSolver</literal>
										</simpara>
									</listitem>
								</varlistentry>
								<varlistentry>
									<term>Request body</term>
									<listitem>
										
<programlisting language="xml" linenumbering="unnumbered">&lt;solver-instance&gt;
  &lt;solver-config-file&gt;employeerostering/employeerostering/EmployeeRosteringSolverConfig.solver.xml&lt;/solver-config-file&gt;
&lt;/solver-instance&gt;</programlisting>
									</listitem>
								</varlistentry>
							</variablelist>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="wb-employee-rostering-call-solver-proc">
					<title>Calling the Solver using the REST API</title>
					<simpara>
						After registering the solver instance, you can use the REST API to submit a data set to the solver and to retrieve an optimized solution.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Create a HTTP request using the following header:
							</simpara>
							
<screen>authorization: admin:admin
X-KIE-ContentType: xstream
content-type: application/xml</screen>
						</listitem>
						<listitem>
							<simpara>
								Submit a request to the Solver with a data set, as in the following example:
							</simpara>
							<variablelist>
								<varlistentry>
									<term>POST</term>
									<listitem>
										<simpara>
											<literal>http://localhost:8080/kie-server/services/rest/server/containers/employeerostering_1.0.0-SNAPSHOT/solvers/EmployeeRosteringSolver/state/solving</literal>
										</simpara>
									</listitem>
								</varlistentry>
								<varlistentry>
									<term>Request body</term>
									<listitem>
										
<programlisting language="xml" linenumbering="unnumbered">&lt;employeerostering.employeerostering.EmployeeRoster&gt;
  &lt;employeeList&gt;
    &lt;employeerostering.employeerostering.Employee&gt;
      &lt;name&gt;John&lt;/name&gt;
      &lt;skills&gt;
        &lt;employeerostering.employeerostering.Skill&gt;
          &lt;name&gt;reading&lt;/name&gt;
        &lt;/employeerostering.employeerostering.Skill&gt;
      &lt;/skills&gt;
    &lt;/employeerostering.employeerostering.Employee&gt;
    &lt;employeerostering.employeerostering.Employee&gt;
      &lt;name&gt;Mary&lt;/name&gt;
      &lt;skills&gt;
        &lt;employeerostering.employeerostering.Skill&gt;
          &lt;name&gt;writing&lt;/name&gt;
        &lt;/employeerostering.employeerostering.Skill&gt;
      &lt;/skills&gt;
    &lt;/employeerostering.employeerostering.Employee&gt;
    &lt;employeerostering.employeerostering.Employee&gt;
      &lt;name&gt;Petr&lt;/name&gt;
      &lt;skills&gt;
        &lt;employeerostering.employeerostering.Skill&gt;
          &lt;name&gt;speaking&lt;/name&gt;
        &lt;/employeerostering.employeerostering.Skill&gt;
      &lt;/skills&gt;
    &lt;/employeerostering.employeerostering.Employee&gt;
  &lt;/employeeList&gt;
  &lt;shiftList&gt;
    &lt;employeerostering.employeerostering.Shift&gt;
      &lt;timeslot&gt;
        &lt;startTime&gt;2017-01-01T00:00:00&lt;/startTime&gt;
        &lt;endTime&gt;2017-01-01T01:00:00&lt;/endTime&gt;
      &lt;/timeslot&gt;
      &lt;requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee/skills/employeerostering.employeerostering.Skill"/&gt;
    &lt;/employeerostering.employeerostering.Shift&gt;
    &lt;employeerostering.employeerostering.Shift&gt;
      &lt;timeslot reference="../../employeerostering.employeerostering.Shift/timeslot"/&gt;
      &lt;requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee[3]/skills/employeerostering.employeerostering.Skill"/&gt;
    &lt;/employeerostering.employeerostering.Shift&gt;
    &lt;employeerostering.employeerostering.Shift&gt;
      &lt;timeslot reference="../../employeerostering.employeerostering.Shift/timeslot"/&gt;
      &lt;requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee[2]/skills/employeerostering.employeerostering.Skill"/&gt;
    &lt;/employeerostering.employeerostering.Shift&gt;
  &lt;/shiftList&gt;
  &lt;skillList&gt;
    &lt;employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee/skills/employeerostering.employeerostering.Skill"/&gt;
    &lt;employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee[3]/skills/employeerostering.employeerostering.Skill"/&gt;
    &lt;employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee[2]/skills/employeerostering.employeerostering.Skill"/&gt;
  &lt;/skillList&gt;
  &lt;timeslotList&gt;
    &lt;employeerostering.employeerostering.Timeslot reference="../../shiftList/employeerostering.employeerostering.Shift/timeslot"/&gt;
  &lt;/timeslotList&gt;
  &lt;dayOffRequestList/&gt;
  &lt;shiftAssignmentList&gt;
    &lt;employeerostering.employeerostering.ShiftAssignment&gt;
      &lt;shift reference="../../../shiftList/employeerostering.employeerostering.Shift"/&gt;
    &lt;/employeerostering.employeerostering.ShiftAssignment&gt;
    &lt;employeerostering.employeerostering.ShiftAssignment&gt;
      &lt;shift reference="../../../shiftList/employeerostering.employeerostering.Shift[3]"/&gt;
    &lt;/employeerostering.employeerostering.ShiftAssignment&gt;
    &lt;employeerostering.employeerostering.ShiftAssignment&gt;
      &lt;shift reference="../../../shiftList/employeerostering.employeerostering.Shift[2]"/&gt;
    &lt;/employeerostering.employeerostering.ShiftAssignment&gt;
  &lt;/shiftAssignmentList&gt;
&lt;/employeerostering.employeerostering.EmployeeRoster&gt;</programlisting>
									</listitem>
								</varlistentry>
							</variablelist>
						</listitem>
						<listitem>
							<simpara>
								Request the best solution to the planning problem:
							</simpara>
							<variablelist>
								<varlistentry>
									<term>GET</term>
									<listitem>
										<simpara>
											<literal>http://localhost:8080/kie-server/services/rest/server/containers/employeerostering_1.0.0-SNAPSHOT/solvers/EmployeeRosteringSolver/bestsolution</literal>
										</simpara>
										<formalpara>
											<title>Example response</title>
											<para>
												
<programlisting language="xml" linenumbering="unnumbered">&lt;solver-instance&gt;
  &lt;container-id&gt;employee-rostering&lt;/container-id&gt;
  &lt;solver-id&gt;solver1&lt;/solver-id&gt;
  &lt;solver-config-file&gt;employeerostering/employeerostering/EmployeeRosteringSolverConfig.solver.xml&lt;/solver-config-file&gt;
  &lt;status&gt;NOT_SOLVING&lt;/status&gt;
  &lt;score scoreClass="org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore"&gt;0hard/0soft&lt;/score&gt;
  &lt;best-solution class="employeerostering.employeerostering.EmployeeRoster"&gt;
    &lt;employeeList&gt;
      &lt;employeerostering.employeerostering.Employee&gt;
        &lt;name&gt;John&lt;/name&gt;
        &lt;skills&gt;
          &lt;employeerostering.employeerostering.Skill&gt;
            &lt;name&gt;reading&lt;/name&gt;
          &lt;/employeerostering.employeerostering.Skill&gt;
        &lt;/skills&gt;
      &lt;/employeerostering.employeerostering.Employee&gt;
      &lt;employeerostering.employeerostering.Employee&gt;
        &lt;name&gt;Mary&lt;/name&gt;
        &lt;skills&gt;
          &lt;employeerostering.employeerostering.Skill&gt;
            &lt;name&gt;writing&lt;/name&gt;
          &lt;/employeerostering.employeerostering.Skill&gt;
        &lt;/skills&gt;
      &lt;/employeerostering.employeerostering.Employee&gt;
      &lt;employeerostering.employeerostering.Employee&gt;
        &lt;name&gt;Petr&lt;/name&gt;
        &lt;skills&gt;
          &lt;employeerostering.employeerostering.Skill&gt;
            &lt;name&gt;speaking&lt;/name&gt;
          &lt;/employeerostering.employeerostering.Skill&gt;
        &lt;/skills&gt;
      &lt;/employeerostering.employeerostering.Employee&gt;
    &lt;/employeeList&gt;
    &lt;shiftList&gt;
      &lt;employeerostering.employeerostering.Shift&gt;
        &lt;timeslot&gt;
          &lt;startTime&gt;2017-01-01T00:00:00&lt;/startTime&gt;
          &lt;endTime&gt;2017-01-01T01:00:00&lt;/endTime&gt;
        &lt;/timeslot&gt;
        &lt;requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee/skills/employeerostering.employeerostering.Skill"/&gt;
      &lt;/employeerostering.employeerostering.Shift&gt;
      &lt;employeerostering.employeerostering.Shift&gt;
        &lt;timeslot reference="../../employeerostering.employeerostering.Shift/timeslot"/&gt;
        &lt;requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee[3]/skills/employeerostering.employeerostering.Skill"/&gt;
      &lt;/employeerostering.employeerostering.Shift&gt;
      &lt;employeerostering.employeerostering.Shift&gt;
        &lt;timeslot reference="../../employeerostering.employeerostering.Shift/timeslot"/&gt;
        &lt;requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee[2]/skills/employeerostering.employeerostering.Skill"/&gt;
      &lt;/employeerostering.employeerostering.Shift&gt;
    &lt;/shiftList&gt;
    &lt;skillList&gt;
      &lt;employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee/skills/employeerostering.employeerostering.Skill"/&gt;
      &lt;employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee[3]/skills/employeerostering.employeerostering.Skill"/&gt;
      &lt;employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee[2]/skills/employeerostering.employeerostering.Skill"/&gt;
    &lt;/skillList&gt;
    &lt;timeslotList&gt;
      &lt;employeerostering.employeerostering.Timeslot reference="../../shiftList/employeerostering.employeerostering.Shift/timeslot"/&gt;
    &lt;/timeslotList&gt;
    &lt;dayOffRequestList/&gt;
    &lt;shiftAssignmentList/&gt;
    &lt;score&gt;0hard/0soft&lt;/score&gt;
  &lt;/best-solution&gt;
&lt;/solver-instance&gt;</programlisting>
											</para>
										</formalpara>
									</listitem>
								</varlistentry>
							</variablelist>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</chapter>
		<chapter xml:id="cloudbal-tutorial-con">
			<title>Getting started with Java solvers: A cloud balancing example</title>
			<simpara>
				An example demonstrates development of a basic Red Hat Business Optimizer solver using Java code.
			</simpara>
			<simpara>
				Suppose your company owns a number of cloud computers and needs to run a number of processes on those computers. You must assign each process to a computer.
			</simpara>
			<simpara>
				The following hard constraints must be fulfilled:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Every computer must be able to handle the minimum hardware requirements of the sum of its processes:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">CPU capacity</emphasis>: The CPU power of a computer must be at least the sum of the CPU power required by the processes assigned to that computer.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Memory capacity</emphasis>: The RAM memory of a computer must be at least the sum of the RAM memory required by the processes assigned to that computer.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Network capacity</emphasis>: The network bandwidth of a computer must be at least the sum of the network bandwidth required by the processes assigned to that computer.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<simpara>
				The following soft constraints should be optimized:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Each computer that has one or more processes assigned incurs a maintenance cost (which is fixed per computer).
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Cost</emphasis>: Minimize the total maintenance cost.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<simpara>
				This problem is a form of <emphasis>bin packing</emphasis>. In the following simplified example, we assign four processes to two computers with two constraints (CPU and RAM) with a simple algorithm:
			</simpara>
			<informalfigure>
			<mediaobject>
				<imageobject>
					<imagedata align="center" fileref="images/_images/QuickStart/CloudBalancingTutorial/cloudBalanceUseCase.png" format="PNG" />
				</imageobject>
				<textobject>
					<phrase>cloudBalanceUseCase</phrase>
				</textobject>
			</mediaobject>
			</informalfigure>
			<simpara>
				The simple algorithm used here is the <emphasis>First Fit Decreasing</emphasis> algorithm, which assigns the bigger processes first and assigns the smaller processes to the remaining space. As you can see, it is not optimal, as it does not leave enough room to assign the yellow process <literal>D</literal>.
			</simpara>
			<simpara>
				Business Optimizer finds a more optimal solution by using additional, smarter algorithms. It also scales: both in data (more processes, more computers) and constraints (more hardware requirements, other constraints).
			</simpara>
			<simpara>
				The following summary applies to this example, as well as to an advanced implementation with more constraints that is described in <xref linkend="ex-machineReassignment-ref" />:
			</simpara>
			<informalfigure>
			<mediaobject>
				<imageobject>
					<imagedata align="center" fileref="images/_images/shared/cloudOptimizationValueProposition.png" format="PNG" />
				</imageobject>
				<textobject>
					<phrase>cloudOptimizationValueProposition</phrase>
				</textobject>
			</mediaobject>
			</informalfigure>
			<table colsep="1" frame="all" rowsep="1">
				<title>Cloud balancing problem size</title>
				<tgroup cols="4">
					<colspec colname="col_1" colwidth="25*"></colspec>
					<colspec colname="col_2" colwidth="25*"></colspec>
					<colspec colname="col_3" colwidth="25*"></colspec>
					<colspec colname="col_4" colwidth="25*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Problem size</entry>
							<entry align="left" valign="top">Computers</entry>
							<entry align="left" valign="top">Processes</entry>
							<entry align="left" valign="top">Search space</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								2computers-6processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								2
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								6
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								64
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								3computers-9processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								3
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								9
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								10^4
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								4computers-012processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								4
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								12
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								10^7
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								100computers-300processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								100
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								300
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								10^600
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								200computers-600processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								200
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								600
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								10^1380
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								400computers-1200processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								400
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								1200
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								10^3122
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								800computers-2400processes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								800
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								2400
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								10^6967
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<section xml:id="domainmodel-con">
				<title>Domain Model Design</title>
				<simpara>
					Using a <emphasis>domain model</emphasis> helps determine which classes are planning entities and which of their properties are planning variables. It also helps to simplify constraints, improve performance, and increase flexibility for future needs.
				</simpara>
				<section xml:id="cloudbal-domainmodel-proc">
					<title>Designing a domain model</title>
					<simpara>
						To create a domain model, define all the objects that represent the input data for the problem. In this example, the objects are processes and computers.
					</simpara>
					<simpara>
						A separate object in the domain model must represent a full data set of the problem, which contains the input data as well as a solution. In this example, this object holds a list of computers and a list of processes. Each process is assigned to a computer; the distribution of processes between computers is the solution.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Draw a class diagram of your domain model.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Normalize it to remove duplicate data.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Write down some <emphasis>sample instances</emphasis> for each class. Sample instances are entity properties that are relevant for planning purposes.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>Computer</literal>: Represents a computer with certain hardware and maintenance costs.
									</simpara>
									<simpara>
										In this example, the sample instances for the <literal>Computer</literal> class are <literal>cpuPower</literal>, <literal>memory</literal>, <literal>networkBandwidth</literal>, <literal>cost</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>Process</literal>: Represents a process with a demand. Needs to be assigned to a <literal>Computer</literal> by Planner.
									</simpara>
									<simpara>
										Sample instances for <literal>Process</literal> are <literal>requiredCpuPower</literal>, <literal>requiredMemory</literal>, and <literal>requiredNetworkBandwidth</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>CloudBalance</literal>: Represents the distribution of processes between computers. Contains every <literal>Computer</literal> and <literal>Process</literal> for a certain data set.
									</simpara>
									<simpara>
										For an object representing the full data set and solution, a sample instance holding the <emphasis>score</emphasis> must be present. Business Optimizer can calculate and compare the scores for different solutions; the solution with the highest score is the optimal solution. Therefore, the sample instance for <literal>CloudBalance</literal> is <literal>score</literal>.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Determine which relationships (or fields) change during planning:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis>Planning entity</emphasis>: The class (or classes) that Business Optimizer can change during solving. In this example, it is the class <literal>Process</literal>, because we can move processes to different computers.
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												A class representing input data that Business Optimizer can not change is known as a <emphasis>problem fact</emphasis>.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										<emphasis>Planning variable</emphasis>: The property (or properties) of a planning entity class that changes during solving. In this example, it is the property <literal>computer</literal> on the class <literal>Process</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis>Planning solution</emphasis>: The class that represents a solution to the problem. This class must represent the full data set and contain all planning entities. In this example that is the class <literal>CloudBalance</literal>.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</orderedlist>
					<simpara>
						In the UML class diagram below, the Business Optimizer concepts are already annotated:
					</simpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/QuickStart/CloudBalancingDomainModel/cloudBalanceClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>cloudBalanceClassDiagram</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						You can find the class definitions for this example in the <literal>examples/sources/src/main/java/org/optaplanner/examples/cloudbalancing/domain</literal> directory.
					</simpara>
				</section>
				<section xml:id="cloudbal-class-computer-ref">
					<title>The <literal>Computer</literal> Class</title>
					<simpara>
						The <literal>Computer</literal> class is a Java object that stores data, sometimes known as a POJO (Plain Old Java Object). Usually, you will have more of this kind of classes with input data.
					</simpara>
					<example>
						<title>CloudComputer.java</title>
						
<programlisting language="java" linenumbering="unnumbered">public class CloudComputer ... {

    private int cpuPower;
    private int memory;
    private int networkBandwidth;
    private int cost;

    ... // getters
}</programlisting>
					</example>
				</section>
				<section xml:id="cloudbal-class-process-ref">
					<title>The <literal>Process</literal> Class</title>
					<simpara>
						The <literal>Process</literal> class is the class that is modified during solving.
					</simpara>
					<simpara>
						We need to tell Business Optimizer that it can change the property <literal>computer</literal>. To do this, annotate the class with <literal>@PlanningEntity</literal> and annotate the <literal>getComputer()</literal> getter with <literal>@PlanningVariable</literal>.
					</simpara>
					<simpara>
						Of course, the property <literal>computer</literal> needs a setter too, so Business Optimizer can change it during solving.
					</simpara>
					<example>
						<title>CloudProcess.java</title>
						
<programlisting language="java" linenumbering="unnumbered">@PlanningEntity(...)
public class CloudProcess ... {

    private int requiredCpuPower;
    private int requiredMemory;
    private int requiredNetworkBandwidth;

    private CloudComputer computer;

    ... // getters

    @PlanningVariable(valueRangeProviderRefs = {"computerRange"})
    public CloudComputer getComputer() {
        return computer;
    }

    public void setComputer(CloudComputer computer) {
        computer = computer;
    }

    // ************************************************************************
    // Complex methods
    // ************************************************************************

    ...

}</programlisting>
					</example>
					<simpara>
						Business Optimizer needs to know which values it can choose from to assign to the property <literal>computer</literal>. Those values are retrieved from the method <literal>CloudBalance.getComputerList()</literal> on the planning solution, which returns a list of all computers in the current data set.
					</simpara>
					<simpara>
						The <literal>@PlanningVariable</literal>'s <literal>valueRangeProviderRefs</literal> parameter on <literal>CloudProcess.getComputer()</literal> needs to match with the <literal>@ValueRangeProvider</literal>'s <literal>id</literal> on <literal>CloudBalance.getComputerList()</literal>.
					</simpara>
					<note>
						<simpara>
							You can also use annotations on fields instead of getters.
						</simpara>
					</note>
				</section>
				<section xml:id="cloudbal-class-cloudbalance-ref">
					<title>The <literal>CloudBalance</literal> Class</title>
					<simpara>
						The <literal>CloudBalance</literal> class has a <emphasis><phrase role="path">@PlanningSolution</phrase></emphasis> annotation.
					</simpara>
					<simpara>
						This class holds a list of all computers and processes. It represents both the planning problem and (if it is initialized) the planning solution.
					</simpara>
					<simpara>
						The <literal>CloudBalance</literal> class has the following key attributes:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								It holds a collection of processes that Business Optimizer can change. We annotate the getter <literal>getProcessList()</literal> with <literal>@PlanningEntityCollectionProperty</literal>, so that Business Optimizer can retrieve the processes that it can change. To save a solution, Business Optimizer initializes a new instance of the class with the list of changed processes.
							</simpara>
							<orderedlist numeration="arabic">
								<listitem>
									<simpara>
										It also has a <literal>@PlanningScore</literal> annotated property <literal>score</literal>, which is the <literal>Score</literal> of that solution in its current state. Business Optimizer automatically updates it when it calculates a <literal>Score</literal> for a solution instance; therefore, this property needs a setter.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Especially for score calculation with Drools, the property <literal>computerList</literal> needs to be annotated with a <literal>@ProblemFactCollectionProperty</literal> so that Business Optimizer can retrieve a list of computers (problem facts) and make it available to the decision engine.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
					<example>
						<title>CloudBalance.java</title>
						
<programlisting language="java" linenumbering="unnumbered">@PlanningSolution
public class CloudBalance ... {

    private List&lt;CloudComputer&gt; computerList;

    private List&lt;CloudProcess&gt; processList;

    private HardSoftScore score;

    @ValueRangeProvider(id = "computerRange")
    @ProblemFactCollectionProperty
    public List&lt;CloudComputer&gt; getComputerList() {
        return computerList;
    }

    @PlanningEntityCollectionProperty
    public List&lt;CloudProcess&gt; getProcessList() {
        return processList;
    }

    @PlanningScore
    public HardSoftScore getScore() {
        return score;
    }

    public void setScore(HardSoftScore score) {
        this.score = score;
    }

    ...
}</programlisting>
					</example>
				</section>
			</section>
			<section xml:id="cloudbal-helloworld-proc">
				<title>Running the Cloud Balancing Hello World</title>
				<simpara>
					You can run a sample "hello world" application to demonstrate the solver.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Download and configure the examples in your preferred IDE. For instructions on downloading and configuring examples in an IDE, see <xref linkend="optimizer-running-the-examples-in-an-IDE-proc" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Create a run configuration with the following main class: <literal>org.optaplanner.examples.cloudbalancing.app.CloudBalancingHelloWorld</literal>
						</simpara>
						<simpara>
							By default, the Cloud Balancing Hello World is configured to run for 120 seconds.
						</simpara>
					</listitem>
				</orderedlist>
				<formalpara>
					<title>Result</title>
					<para>
						The application executes the following code:
					</para>
				</formalpara>
				<example>
					<title>CloudBalancingHelloWorld.java</title>
					
<programlisting language="java" linenumbering="unnumbered">public class CloudBalancingHelloWorld {

    public static void main(String[] args) {
        // Build the Solver
        SolverFactory&lt;CloudBalance&gt; solverFactory = SolverFactory.createFromXmlResource("org/optaplanner/examples/cloudbalancing/solver/cloudBalancingSolverConfig.xml");
        Solver&lt;CloudBalance&gt; solver = solverFactory.buildSolver();

        // Load a problem with 400 computers and 1200 processes
        CloudBalance unsolvedCloudBalance = new CloudBalancingGenerator().createCloudBalance(400, 1200);

        // Solve the problem
        CloudBalance solvedCloudBalance = solver.solve(unsolvedCloudBalance);

        // Display the result
        System.out.println("\nSolved cloudBalance with 400 computers and 1200 processes:\n" + toDisplayString(solvedCloudBalance));
    }

    ...
}</programlisting>
				</example>
				<simpara>
					The code example does the following:
				</simpara>
				<orderedlist numeration="arabic">
					<listitem>
						<simpara>
							Build the <literal>Solver</literal> based on a solver configuration (in this case an XML file, <literal>cloudBalancingSolverConfig.xml</literal>, from the classpath).
						</simpara>
						<simpara>
							Building the <literal>Solver</literal> is the most complicated part of this procedure. For more details, see <xref linkend="cloudbal-solver-configuraton-ref" />.
						</simpara>
						
<programlisting language="java" linenumbering="unnumbered">        SolverFactory&lt;CloudBalance&gt; solverFactory = SolverFactory.createFromXmlResource(
                "org/optaplanner/examples/cloudbalancing/solver/cloudBalancingSolverConfig.xml");
        Solver solver&lt;CloudBalance&gt; = solverFactory.buildSolver();</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Load the problem.
						</simpara>
						<simpara>
							<literal>CloudBalancingGenerator</literal> generates a random problem: you will replace this with a class that loads a real problem, for example from a database.
						</simpara>
						
<programlisting language="java" linenumbering="unnumbered">        CloudBalance unsolvedCloudBalance = new CloudBalancingGenerator().createCloudBalance(400, 1200);</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Solve the problem.
						</simpara>
						
<programlisting language="java" linenumbering="unnumbered">        CloudBalance solvedCloudBalance = solver.solve(unsolvedCloudBalance);</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Display the result.
						</simpara>
						
<programlisting language="java" linenumbering="unnumbered">        System.out.println("\nSolved cloudBalance with 400 computers and 1200 processes:\n"
                + toDisplayString(solvedCloudBalance));</programlisting>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="cloudbal-solver-configuraton-ref">
				<title>Solver Configuration</title>
				<simpara>
					The solver configuration file determines how the solving process works; it is considered a part of the code. The file is named <literal>examples/sources/src/main/resources/org/optaplanner/examples/cloudbalancing/solver/cloudBalancingSolverConfig.xml</literal>.
				</simpara>
				<example>
					<title>cloudBalancingSolverConfig.xml</title>
					
<programlisting language="xml" linenumbering="unnumbered">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;solver&gt;
  &lt;!-- Domain model configuration --&gt;
  &lt;scanAnnotatedClasses/&gt;

  &lt;!-- Score configuration --&gt;
  &lt;scoreDirectorFactory&gt;
    &lt;easyScoreCalculatorClass&gt;org.optaplanner.examples.cloudbalancing.optional.score.CloudBalancingEasyScoreCalculator&lt;/easyScoreCalculatorClass&gt;
    &lt;!--&lt;scoreDrl&gt;org/optaplanner/examples/cloudbalancing/solver/cloudBalancingScoreRules.drl&lt;/scoreDrl&gt;--&gt;
  &lt;/scoreDirectorFactory&gt;

  &lt;!-- Optimization algorithms configuration --&gt;
  &lt;termination&gt;
    &lt;secondsSpentLimit&gt;30&lt;/secondsSpentLimit&gt;
  &lt;/termination&gt;
&lt;/solver&gt;</programlisting>
				</example>
				<simpara>
					This solver configuration consists of three parts:
				</simpara>
				<orderedlist numeration="arabic">
					<listitem>
						<simpara>
							<emphasis role="strong">Domain model configuration</emphasis>: <emphasis>What can Business Optimizer change?</emphasis>
						</simpara>
						<simpara>
							We need to make Business Optimizer aware of our domain classes. In this configuration, it will automatically scan all classes in your classpath (for a <literal>@PlanningEntity</literal> or <literal>@PlanningSolution</literal> annotation):
						</simpara>
						
<programlisting language="xml" linenumbering="unnumbered">  &lt;scanAnnotatedClasses/&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Score configuration</emphasis>: <emphasis>How should Business Optimizer optimize the planning variables? What is our goal?</emphasis>
						</simpara>
						<simpara>
							Since we have hard and soft constraints, we use a <literal>HardSoftScore</literal>. But we need to tell Business Optimizer how to calculate the score, depending on our business requirements. Further down, we will look into two alternatives to calculate the score: using a basic Java implementation and using Drools DRL.
						</simpara>
						
<programlisting language="xml" linenumbering="unnumbered">  &lt;scoreDirectorFactory&gt;
    &lt;easyScoreCalculatorClass&gt;org.optaplanner.examples.cloudbalancing.optional.score.CloudBalancingEasyScoreCalculator&lt;/easyScoreCalculatorClass&gt;
    &lt;!--&lt;scoreDrl&gt;org/optaplanner/examples/cloudbalancing/solver/cloudBalancingScoreRules.drl&lt;/scoreDrl&gt;--&gt;
  &lt;/scoreDirectorFactory&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Optimization algorithms configuration</emphasis>: <emphasis>How should Business Optimizer optimize it?</emphasis> In this case, we use the default optimization algorithms (because no explicit optimization algorithms are configured) for 30 seconds:
						</simpara>
						
<programlisting language="xml" linenumbering="unnumbered">  &lt;termination&gt;
    &lt;secondsSpentLimit&gt;30&lt;/secondsSpentLimit&gt;
  &lt;/termination&gt;</programlisting>
						<simpara>
							Business Optimizer should get a good result in seconds (and even in less than 15 milliseconds if the real-time planning feature is used), but the more time it has, the better the result will be. Advanced use cases might use different termination criteria than a hard time limit.
						</simpara>
						<simpara>
							The default algorithms will already easily surpass human planners and most in-house implementations. You can use the advanced Benchmarker feature to power tweak to get even better results.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="cloudbal-score-con">
				<title>Score Configuration</title>
				<simpara>
					Business Optimizer will search for the <literal>Solution</literal> with the highest <literal>Score</literal>. This example uses a <literal>HardSoftScore</literal>, which means Business Optimizer will look for the solution with no hard constraints broken (fulfill hardware requirements) and as little as possible soft constraints broken (minimize maintenance cost).
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/QuickStart/CloudBalancingScoreConfiguration/scoreComparisonCloudBalancing.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>scoreComparisonCloudBalancing</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Of course, Business Optimizer needs to be told about these domain-specific score constraints. You can define constraints using the Java or Drools languages.
				</simpara>
				<section xml:id="cloudbal-score-java-proc">
					<title>Configuring score calculation using Java</title>
					<simpara>
						One way to define a score function is to implement the interface <literal>EasyScoreCalculator</literal> in plain Java.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the <literal>cloudBalancingSolverConfig.xml</literal> file, add or uncomment the setting:
							</simpara>
							
<programlisting language="xml" linenumbering="unnumbered">  &lt;scoreDirectorFactory&gt;
    &lt;easyScoreCalculatorClass&gt;org.optaplanner.examples.cloudbalancing.optional.score.CloudBalancingEasyScoreCalculator&lt;/easyScoreCalculatorClass&gt;
  &lt;/scoreDirectorFactory&gt;</programlisting>
						</listitem>
						<listitem>
							<simpara>
								Implement the <literal>calculateScore(Solution)</literal> method to return a <literal>HardSoftScore</literal> instance.
							</simpara>
							<example>
								<title>CloudBalancingEasyScoreCalculator.java</title>
								
<programlisting language="java" linenumbering="unnumbered">public class CloudBalancingEasyScoreCalculator implements EasyScoreCalculator&lt;CloudBalance&gt; {

    /**
     * A very simple implementation. The double loop can easily be removed by using Maps as shown in
     * {@link CloudBalancingMapBasedEasyScoreCalculator#calculateScore(CloudBalance)}.
     */
    public HardSoftScore calculateScore(CloudBalance cloudBalance) {
        int hardScore = 0;
        int softScore = 0;
        for (CloudComputer computer : cloudBalance.getComputerList()) {
            int cpuPowerUsage = 0;
            int memoryUsage = 0;
            int networkBandwidthUsage = 0;
            boolean used = false;

            // Calculate usage
            for (CloudProcess process : cloudBalance.getProcessList()) {
                if (computer.equals(process.getComputer())) {
                    cpuPowerUsage += process.getRequiredCpuPower();
                    memoryUsage += process.getRequiredMemory();
                    networkBandwidthUsage += process.getRequiredNetworkBandwidth();
                    used = true;
                }
            }

            // Hard constraints
            int cpuPowerAvailable = computer.getCpuPower() - cpuPowerUsage;
            if (cpuPowerAvailable &lt; 0) {
                hardScore += cpuPowerAvailable;
            }
            int memoryAvailable = computer.getMemory() - memoryUsage;
            if (memoryAvailable &lt; 0) {
                hardScore += memoryAvailable;
            }
            int networkBandwidthAvailable = computer.getNetworkBandwidth() - networkBandwidthUsage;
            if (networkBandwidthAvailable &lt; 0) {
                hardScore += networkBandwidthAvailable;
            }

            // Soft constraints
            if (used) {
                softScore -= computer.getCost();
            }
        }
        return HardSoftScore.valueOf(hardScore, softScore);
    }

}</programlisting>
							</example>
						</listitem>
					</orderedlist>
					<simpara>
						Even if we optimize the code above to use <literal>Map</literal>s to iterate through the <literal>processList</literal> only once, <emphasis>it is still slow</emphasis> because it does not do incremental score calculation.
					</simpara>
					<simpara>
						To fix that, either use incremental Java score calculation or Drools score calculation. Incremental Java score calculation is not covered in this guide.
					</simpara>
				</section>
				<section xml:id="cloudbal-score-drools-proc">
					<title>Configuring score calculation using Drools</title>
					<simpara>
						You can use Drools rule language (DRL) to define constraints. Drools score calculation uses incremental calculation, where every score constraint is written as one or more score rules.
					</simpara>
					<simpara>
						Using the decision engine for score calculation enables you to integrate with other Drools technologies, such as decision tables (XLS or web based), Business Central, and other supported features.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Add a <literal>scoreDrl</literal> resource in the classpath to use the decision engine as a score function. In the <literal>cloudBalancingSolverConfig.xml</literal> file, add or uncomment the setting:
							</simpara>
							
<programlisting language="xml" linenumbering="unnumbered">  &lt;scoreDirectorFactory&gt;
    &lt;scoreDrl&gt;org/optaplanner/examples/cloudbalancing/solver/cloudBalancingScoreRules.drl&lt;/scoreDrl&gt;
  &lt;/scoreDirectorFactory&gt;</programlisting>
						</listitem>
						<listitem>
							<simpara>
								Create the hard constraints. These constraints ensure that all computers have enough CPU, RAM and network bandwidth to support all their processes:
							</simpara>
							<example>
								<title>cloudBalancingScoreRules.drl - Hard Constraints</title>
								
<screen>...

import org.optaplanner.examples.cloudbalancing.domain.CloudBalance;
import org.optaplanner.examples.cloudbalancing.domain.CloudComputer;
import org.optaplanner.examples.cloudbalancing.domain.CloudProcess;

global HardSoftScoreHolder scoreHolder;

// ############################################################################
// Hard constraints
// ############################################################################

rule "requiredCpuPowerTotal"
    when
        $computer : CloudComputer($cpuPower : cpuPower)
        accumulate(
            CloudProcess(
                computer == $computer,
                $requiredCpuPower : requiredCpuPower);
            $requiredCpuPowerTotal : sum($requiredCpuPower);
            $requiredCpuPowerTotal &gt; $cpuPower
        )
    then
        scoreHolder.addHardConstraintMatch(kcontext, $cpuPower - $requiredCpuPowerTotal);
end

rule "requiredMemoryTotal"
    ...
end

rule "requiredNetworkBandwidthTotal"
    ...
end</screen>
							</example>
						</listitem>
						<listitem>
							<simpara>
								Create a soft constraint. This constraint minimizes the maintenance cost. It is applied only if hard constraints are met:
							</simpara>
							<example>
								<title>cloudBalancingScoreRules.drl - Soft Constraints</title>
								
<screen>// ############################################################################
// Soft constraints
// ############################################################################

rule "computerCost"
    when
        $computer : CloudComputer($cost : cost)
        exists CloudProcess(computer == $computer)
    then
        scoreHolder.addSoftConstraintMatch(kcontext, - $cost);
end</screen>
							</example>
						</listitem>
					</orderedlist>
				</section>
			</section>
			<section xml:id="cloudbal-further-con">
				<title>Further development of the solver</title>
				<simpara>
					Now that this example works, you can try developing it further. For example, you can enrich the domain model and add extra constraints such as these:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Each <literal>Process</literal> belongs to a <literal>Service</literal>. A computer might crash, so processes running the same service should (or must) be assigned to different computers.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Each <literal>Computer</literal> is located in a <literal>Building</literal>. A building might burn down, so processes of the same services should (or must) be assigned to computers in different buildings.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
		</chapter>
		<chapter xml:id="examples-con">
			<title>Examples provided with Red Hat Business Optimizer</title>
			<simpara>
				Several Red Hat Business Optimizer examples are shipped with Red Hat Decision Manager. You can review the code for examples and modify it as necessary to suit your needs.
			</simpara>
			<note>
				<simpara>
					Red Hat does not provide support for the example code included in the Red Hat Decision Manager distribution.
				</simpara>
			</note>
			<section xml:id="examples-download-run-con">
				<title>Downloading and running the examples</title>
				<simpara>
					You can download the Red Hat Business Optimizer examples from the Red Hat Software Downloads website and run them.
				</simpara>
				<section xml:id="examples-download-proc">
					<title>Downloading Red Hat Business Optimizer examples</title>
					<simpara>
						You can download the examples as a part of the Red Hat Decision Manager add-ons package.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Download the <literal>rhdm-7.10.0-add-ons.zip</literal> file from the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhdm&amp;productChanged=yes">Software Downloads</link> page.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Decompress the file.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Decompress the <literal>rhdm-7.10-planner-engine.zip</literal> file from the decompressed directory.
							</simpara>
						</listitem>
					</orderedlist>
					<formalpara>
						<title>Result</title>
						<para>
							In the decompressed <literal>rhdm-7.10-planner-engine</literal> directory, you can find example source code under the following subdirectories: * <literal>examples/sources/src/main/java/org/optaplanner/examples</literal> * <literal>examples/sources/src/main/resources/org/optaplanner/examples</literal> * <literal>webexamples/sources/src/main/java/org/optaplanner/examples</literal> * <literal>webexamples/sources/src/main/resources/org/optaplanner/examples</literal>
						</para>
					</formalpara>
					<simpara>
						The table of examples in <xref linkend="examples-table-ref" /> lists directory names that are used for individual examples.
					</simpara>
				</section>
				<section xml:id="optimizer-running-the-examples-proc">
					<title>Running Business Optimizer examples</title>
					<simpara>
						Red Hat Business Optimizer includes a number of examples to demonstrate a variety of use cases.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								You have downloaded and decompressed the examples. For instructions about these actions, see <xref linkend="examples-download-proc" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the <literal>rhdm-7.10.0-planner-engine</literal> folder, open the <literal>examples</literal> directory and use the appropriate script to run the examples:
							</simpara>
							<simpara>
								Linux or Mac:
							</simpara>
							
<screen>$ cd examples
$ ./runExamples.sh</screen>
							<simpara>
								Windows:
							</simpara>
							
<screen>$ cd examples
$ runExamples.bat</screen>
						</listitem>
					</orderedlist>
					<simpara>
						Select and run an example from the GUI application window:
					</simpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/_images/PlannerIntroduction/DownloadAndRunTheExamples/plannerExamplesAppScreenshot.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>plannerExamplesAppScreenshot</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<note>
						<simpara>
							Red Hat Business Optimizer itself has no GUI dependencies. It runs just as well on a server or a mobile JVM as it does on the desktop.
						</simpara>
					</note>
				</section>
				<section xml:id="optimizer-running-the-examples-in-an-IDE-proc">
					<title>Running the Red Hat Business Optimizer examples in an IDE (IntelliJ, Eclipse, or Netbeans)</title>
					<simpara>
						If you use an integrated development environment (IDE), such as IntelliJ, Eclipse, or Netbeans, you can run your downloaded Red Hat Business Optimizer examples within your development environment.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								You have downloaded and extracted the examples. For instructions about these actions, see <xref linkend="examples-download-proc" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Open the Red Hat Business Optimizer examples as a new project:
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										For IntelliJ or Netbeans, open <literal>examples/sources/pom.xml</literal> as the new project. The Maven integration guides you through the rest of the installation; skip the rest of the steps in this procedure.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										For Eclipse, open a new project for the directory <literal>examples/sources</literal>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								Add all the JARs to the classpath from the directory <literal>binaries</literal> and the directory <literal>examples/binaries</literal> , except for the <literal>examples/binaries/optaplanner-examples-*.jar</literal> file.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add the Java source directory <literal>src/main/java</literal> and the Java resources directory <literal>src/main/resources</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Create a run configuration:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										Main class: <literal>org.optaplanner.examples.app.OptaPlannerExamplesApp</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										VM parameters (optional): <literal>-Xmx512M -server -Dorg.optaplanner.examples.dataDir=examples/sources/data</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Working directory: <literal>examples/sources</literal>
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Run the run configuration.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="optimizer-running-webexamples-proc">
					<title>Running the web examples</title>
					<simpara>
						Besides the GUI examples, Red Hat Decision Manager also includes a set of web examples for Red Hat Business Optimizer. The web examples include:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Vehicle routing: Calculating the shortest possible route to pick up all items required for a number of different customers using either <link xlink:href="http://leafletjs.com/">Leaflet</link> or <link xlink:href="http://google.com/maps">Google Maps</link> visualizations.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Cloud balancing: Assigning processes across computers with different specifications and costs.
							</simpara>
						</listitem>
					</itemizedlist>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								You have downloaded and extracted the Red Hat Business Optimizer examples from the Red Hat Decision Manager add-ons package. For instructions, see <xref linkend="examples-download-proc" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<simpara>
						The web examples require several JEE APIs to run, such as the following APIs:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Servlet
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								JAX-RS
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								CDI
							</simpara>
						</listitem>
					</itemizedlist>
					<simpara>
						These APIs are not required for Business Optimizer itself.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Download a JEE application server, such as JBoss EAP or <link xlink:href="http://www.wildfly.org/">WildFly</link> and unzip it.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the decompressed <literal>rhdm-7.10.0-planner-engine</literal> directory, open the subdirectory <literal>webexamples/binaries</literal> and deploy the <literal>optaplanner-webexamples-*.war</literal> file on the JEE application server.
							</simpara>
							<simpara>
								If using JBoss EAP in standalone mode, this can be done by adding the <literal>optaplanner-webexamples-*.war</literal> file to the <literal>JBOSS_home/standalone/deployments</literal> folder.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Open the following address in a web browser: http://localhost:8080/optaplanner-webexamples/.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
			<section xml:id="examples-table-ref">
				<title>Table of Business Optimizer examples</title>
				<simpara>
					Some of the Business Optimizer examples solve problems that are presented in academic contests. The <literal>Contest</literal> column in the following table lists the contests. It also identifies an example as being either <emphasis>realistic</emphasis> or <emphasis>unrealistic</emphasis> for the purpose of a contest. A <emphasis>realistic contest</emphasis> is <emphasis>an official, independent contest</emphasis>:
				</simpara>
				<simpara>
					A <emphasis>realistic contest</emphasis> is an official, independent contest that meets the following standards:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Clearly defined real-world use cases
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Real-world constraints
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Multiple real-world datasets
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Reproducible results within a specific time limit on specific hardware
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Serious participation from the academic and/or enterprise Operations Research community.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Realistic contests provide an objective comparison of Business Optimizer with competitive software and academic research.
				</simpara>
				<table colsep="1" frame="all" rowsep="1">
					<title>Examples overview</title>
					<tgroup cols="5">
						<colspec colname="col_1" colwidth="13*"></colspec>
						<colspec colname="col_2" colwidth="25*"></colspec>
						<colspec colname="col_3" colwidth="25*"></colspec>
						<colspec colname="col_4" colwidth="13*"></colspec>
						<colspec colname="col_5" colwidth="25*"></colspec>
						<thead>
							<row>
								<entry align="left" valign="top">Example</entry>
								<entry align="left" valign="top">Domain</entry>
								<entry align="left" valign="top">Size</entry>
								<entry align="left" valign="top">Contest</entry>
								<entry align="left" valign="top">Directory name</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-nQueens-ref">N queens</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>256</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>256</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^616</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Pointless (cheatable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>nqueens</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-cloudBalancing-ref">Cloud balancing</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>2400</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>800</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^6967</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No (Defined by us)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>cloudbalancing</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-tsp-ref">Traveling salesman</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 chained variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>980</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>980</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^2504</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Unrealistic <link xlink:href="http://www.math.uwaterloo.ca/tsp/">TSP web</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>tsp</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-dinnerParty-ref">Dinner party</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>144</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>72</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^310</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Unrealistic
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>dinnerParty</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-tennis-ref">Tennis club scheduling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>72</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>7</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^60</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No (Defined by us)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>tennis</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-meetingScheduling-ref">Meeting scheduling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(2 variables)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>10</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>320</literal> and ⇐ <literal>5</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^320</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No (Defined by us)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>meetingscheduling</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-curriculumCourse-ref">Course timetabling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(2 variables)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>434</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>25</literal> and ⇐ <literal>20</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^1171</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Realistic <link xlink:href="http://www.cs.qub.ac.uk/itc2007/curriculmcourse/course_curriculm_index.htm">ITC 2007 track 3</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>curriculumCourse</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-machineReassignment-ref">Machine reassignment</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>50000</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>5000</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^184948</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Nearly realistic <link xlink:href="http://challenge.roadef.org/2012/en/">ROADEF 2012</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>machineReassignment</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-vehicleRouting-ref">Vehicle routing</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 chained variable)
								</simpara>
								<simpara>
									1 shadow entity class
								</simpara>
								<simpara>
									(1 automatic shadow variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>2740</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>2795</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^8380</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Unrealistic <link xlink:href="http://neo.lcc.uma.es/vrp/">VRP web</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>vehiclerouting</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-vehicleRouting-ref">Vehicle routing</link> with time windows
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									All of Vehicle routing
								</simpara>
								<simpara>
									(1 shadow variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>2740</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>2795</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^8380</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Unrealistic <link xlink:href="http://neo.lcc.uma.es/vrp/">VRP web</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>vehiclerouting</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-projectJobScheduling-ref">Project job scheduling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(2 variables)
								</simpara>
								<simpara>
									(1 shadow variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>640</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>?</literal> and ⇐ <literal>?</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>?</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Nearly realistic <link xlink:href="http://gent.cs.kuleuven.be/mista2013challenge/">MISTA 2013</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>projectjobscheduling</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-taskAssigning-ref">Task assigning</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 chained variable)
								</simpara>
								<simpara>
									(1 shadow variable)
								</simpara>
								<simpara>
									1 shadow entity class
								</simpara>
								<simpara>
									(1 automatic shadow variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>500</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>520</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^1168</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No Defined by us
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>taskassigning</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-examination-ref">Exam timetabling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									2 entity classes (same hierarchy)
								</simpara>
								<simpara>
									(2 variables)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>1096</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>80</literal> and ⇐ <literal>49</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^3374</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Realistic <link xlink:href="http://www.cs.qub.ac.uk/itc2007/examtrack/exam_track_index.htm">ITC 2007 track 1</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>examination</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-nurseRostering-ref">Nurse rostering</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>752</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>50</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^1277</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Realistic <link xlink:href="http://www.kuleuven-kortrijk.be/nrpcompetition">INRC 2010</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>nurserostering</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-travelingTournament-ref">Traveling tournament</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>1560</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>78</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^2301</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Unrealistic <link xlink:href="http://mat.tepper.cmu.edu/TOURN/">TTP</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>travelingtournament</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-cheapTimeScheduling-ref">Cheap time scheduling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(2 variables)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>500</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>100</literal> and ⇐ <literal>288</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^20078</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Nearly realistic <link xlink:href="https://web.archive.org/web/20170223060433/http://iconchallenge.insight-centre.org/challenge-energy">ICON Energy</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>cheaptimescheduling</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-investment-ref">Investment</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>11</literal>
								</simpara>
								<simpara>
									Value = <literal>1000</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^4</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No Defined by us
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>investment</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-conferenceScheduling-ref">Conference scheduling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(2 variables)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>216</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>18</literal> and ⇐ <literal>20</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^552</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No Defined by us
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>conferencescheduling</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-rockTour-ref">Rock tour</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 chained variable)
								</simpara>
								<simpara>
									(4 shadow variables)
								</simpara>
								<simpara>
									1 shadow entity class
								</simpara>
								<simpara>
									(1 automatic shadow variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>47</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>48</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^59</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No Defined by us
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>rocktour</literal>
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<link linkend="ex-flightCrewScheduling-ref">Flight crew scheduling</link>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									1 entity class
								</simpara>
								<simpara>
									(1 variable)
								</simpara>
								<simpara>
									1 shadow entity class
								</simpara>
								<simpara>
									(1 automatic shadow variable)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Entity ⇐ <literal>4375</literal>
								</simpara>
								<simpara>
									Value ⇐ <literal>750</literal>
								</simpara>
								<simpara>
									Search space ⇐ <literal>10^12578</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									No Defined by us
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>flightcrewscheduling</literal>
								</simpara>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section xml:id="ex-nQueens-ref">
				<title>N queens</title>
				<simpara>
					Place <emphasis>n</emphasis> queens on a <emphasis>n</emphasis> sized chessboard so that no two queens can attack each other. The most common <emphasis>n</emphasis> queens puzzle is the eight queens puzzle, with <emphasis>n = 8</emphasis>:
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NQueens/nQueensScreenshot.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>nQueensScreenshot</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Use a chessboard of <emphasis>n</emphasis> columns and <emphasis>n</emphasis> rows.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Place <emphasis>n</emphasis> queens on the chessboard.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							No two queens can attack each other. A queen can attack any other queen on the same horizontal, vertical or diagonal line.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					This documentation heavily uses the four queens puzzle as the primary example.
				</simpara>
				<simpara>
					A proposed solution could be:
				</simpara>
				<figure>
					<title>A wrong solution for the Four queens puzzle</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NQueens/partiallySolvedNQueens04Explained.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>partiallySolvedNQueens04Explained</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<simpara>
					The above solution is wrong because queens <literal>A1</literal> and <literal>B0</literal> can attack each other (so can queens <literal>B0</literal> and <literal>D0</literal>). Removing queen <literal>B0</literal> would respect the "no two queens can attack each other" constraint, but would break the "place <emphasis>n</emphasis> queens" constraint.
				</simpara>
				<simpara>
					Below is a correct solution:
				</simpara>
				<figure>
					<title>A correct solution for the Four queens puzzle</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NQueens/solvedNQueens04.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>solvedNQueens04</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<simpara>
					All the constraints have been met, so the solution is correct.
				</simpara>
				<simpara>
					Note that most <emphasis>n</emphasis> queens puzzles have multiple correct solutions. We will focus on finding a single correct solution for a given <emphasis>n</emphasis>, not on finding the number of possible correct solutions for a given <emphasis>n</emphasis>.
				</simpara>
				<formalpara xml:id="nQueensProblemSize">
					<title>Problem size</title>
					<para>
						
<screen>4queens   has   4 queens with a search space of    256.
8queens   has   8 queens with a search space of   10^7.
16queens  has  16 queens with a search space of  10^19.
32queens  has  32 queens with a search space of  10^48.
64queens  has  64 queens with a search space of 10^115.
256queens has 256 queens with a search space of 10^616.</screen>
					</para>
				</formalpara>
				<simpara>
					The implementation of the <emphasis>n</emphasis> queens example has not been optimized because it functions as a beginner example. Nevertheless, it can easily handle 64 queens. With a few changes it has been shown to easily handle 5000 queens and more.
				</simpara>
				<section xml:id="nQueensDomainModel">
					<title>Domain model for N queens</title>
					<simpara>
						This example uses the domain model to solve the four queens problem.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Creating a Domain Model</emphasis>
							</simpara>
							<simpara>
								A good domain model will make it easier to understand and solve your planning problem.
							</simpara>
							<simpara>
								This is the domain model for the <emphasis>n</emphasis> queens example:
							</simpara>
							
<programlisting language="java" linenumbering="unnumbered">public class Column {

    private int index;

    // ... getters and setters
}</programlisting>
							
<programlisting language="java" linenumbering="unnumbered">public class Row {

    private int index;

    // ... getters and setters
}</programlisting>
							
<programlisting language="java" linenumbering="unnumbered">public class Queen {

    private Column column;
    private Row row;

    public int getAscendingDiagonalIndex() {...}
    public int getDescendingDiagonalIndex() {...}

    // ... getters and setters
}</programlisting>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Calculating the Search Space.</emphasis>
							</simpara>
							<simpara>
								A <literal>Queen</literal> instance has a <literal>Column</literal> (for example: 0 is column A, 1 is column B, …​) and a <literal>Row</literal> (its row, for example: 0 is row 0, 1 is row 1, …​).
							</simpara>
							<simpara>
								The ascending diagonal line and the descending diagonal line can be calculated based on the column and the row.
							</simpara>
							<simpara>
								The column and row indexes start from the upper left corner of the chessboard.
							</simpara>
							
<programlisting language="java" linenumbering="unnumbered">public class NQueens {

    private int n;
    private List&lt;Column&gt; columnList;
    private List&lt;Row&gt; rowList;

    private List&lt;Queen&gt; queenList;

    private SimpleScore score;

    // ... getters and setters
}</programlisting>
							<orderedlist numeration="arabic">
								<listitem>
									<simpara>
										<emphasis role="strong">Finding the Solution</emphasis>
									</simpara>
									<simpara>
										A single <literal>NQueens</literal> instance contains a list of all <literal>Queen</literal> instances. It is the <literal>Solution</literal> implementation which will be supplied to, solved by, and retrieved from the Solver.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
					<simpara>
						Notice that in the four queens example, NQueens’s <literal>getN()</literal> method will always return four.
					</simpara>
					<figure>
						<title>A solution for Four Queens</title>
						<mediaobject>
							<imageobject>
								<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NQueens/partiallySolvedNQueens04Explained.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>partiallySolvedNQueens04Explained</phrase>
							</textobject>
						</mediaobject>
					</figure>
					<table colsep="1" frame="all" rowsep="1">
						<title>Details of the solution in the domain model</title>
						<tgroup cols="5">
							<colspec colname="col_1" colwidth="9*"></colspec>
							<colspec colname="col_2" colwidth="18*"></colspec>
							<colspec colname="col_3" colwidth="18*"></colspec>
							<colspec colname="col_4" colwidth="27*"></colspec>
							<colspec colname="col_5" colwidth="27*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top"></entry>
									<entry align="left" valign="top">columnIndex</entry>
									<entry align="left" valign="top">rowIndex</entry>
									<entry align="left" valign="top">ascendingDiagonalIndex (columnIndex + rowIndex)</entry>
									<entry align="left" valign="top">descendingDiagonalIndex (columnIndex - rowIndex)</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										A1
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										0
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										<emphasis role="strong">1 (**)</emphasis>
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										-1
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										B0
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										<emphasis role="strong">0 (*)</emphasis>
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										<emphasis role="strong">1 (**)</emphasis>
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										C2
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										4
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										0
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										D0
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										<emphasis role="strong">0 (*)</emphasis>
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										3
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
					<simpara>
						When two queens share the same column, row or diagonal line, such as (*) and (**), they can attack each other.
					</simpara>
				</section>
			</section>
			<section xml:id="ex-cloudBalancing-ref">
				<title>Cloud balancing</title>
				<simpara>
					For information about this example, see <xref linkend="cloudbal-tutorial-con" />.
				</simpara>
			</section>
			<section xml:id="ex-tsp-ref">
				<title>Traveling salesman (TSP - Traveling Salesman Problem)</title>
				<simpara>
					Given a list of cities, find the shortest tour for a salesman that visits each city exactly once.
				</simpara>
				<simpara>
					The problem is defined by <link xlink:href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">Wikipedia</link>. It is <link xlink:href="http://www.math.uwaterloo.ca/tsp/">one of the most intensively studied problems</link> in computational mathematics. Yet, in the real world, it is often only part of a planning problem, along with other constraints, such as employee shift rostering constraints.
				</simpara>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>dj38     has  38 cities with a search space of   10^43.
europe40 has  40 cities with a search space of   10^46.
st70     has  70 cities with a search space of   10^98.
pcb442   has 442 cities with a search space of  10^976.
lu980    has 980 cities with a search space of 10^2504.</screen>
					</para>
				</formalpara>
				<formalpara>
					<title>Problem difficulty</title>
					<para>
						Despite TSP’s simple definition, the problem is surprisingly hard to solve. Because it is an NP-hard problem (like most planning problems), the optimal solution for a specific problem dataset can change a lot when that problem dataset is slightly altered:
					</para>
				</formalpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/TravellingSalesman/tspOptimalSolutionVolatility.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>tspOptimalSolutionVolatility</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
			</section>
			<section xml:id="ex-dinnerParty-ref">
				<title>Dinner party</title>
				<simpara>
					Miss Manners is throwing another dinner party.
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							This time she invited 144 guests and prepared 12 round tables with 12 seats each.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Every guest should sit next to someone (left and right) of the opposite gender.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							And that neighbour should have at least one hobby in common with the guest.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							At every table, there should be two politicians, two doctors, two socialites, two coaches, two teachers and two programmers.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							And the two politicians, two doctors, two coaches and two programmers should not be the same kind at a table.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Drools Expert also has the normal Miss Manners example (which is much smaller) and employs an exhaustive heuristic to solve it. Planner’s implementation is far more scalable because it uses heuristics to find the best solution and Drools Expert to calculate the score of each solution.
				</simpara>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>wedding01 has 18 jobs, 144 guests, 288 hobby practicians, 12 tables and 144 seats with a search space of 10^310.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-tennis-ref">
				<title>Tennis club scheduling</title>
				<simpara>
					Every week the tennis club has four teams playing round robin against each other. Assign those four spots to the teams fairly.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Conflict: A team can only play once per day.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Unavailability: Some teams are unavailable on some dates.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Medium constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Fair assignment: All teams should play an (almost) equal number of times.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Evenly confrontation: Each team should play against every other team an equal number of times.
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>munich-7teams has 7 teams, 18 days, 12 unavailabilityPenalties and 72 teamAssignments with a search space of 10^60.</screen>
					</para>
				</formalpara>
				<figure>
					<title>Domain model</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/TennisScheduling/tennisClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>tennisClassDiagram</phrase>
						</textobject>
					</mediaobject>
				</figure>
			</section>
			<section xml:id="ex-meetingScheduling-ref">
				<title>Meeting scheduling</title>
				<simpara>
					Assign each meeting to a starting time and a room. Meetings have different durations.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Room conflict: two meetings must not use the same room at the same time.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Required attendance: A person cannot have two required meetings at the same time.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Required room capacity: A meeting must not be in a room that doesn’t fit all of the meeting’s attendees.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Start and end on same day: A meeting shouldn’t be scheduled over multiple days.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Medium constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Preferred attendance: A person cannot have two preferred meetings at the same time, nor a preferred and a required meeting at the same time.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Sooner rather than later: Schedule all meetings as soon as possible.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A break between meetings: Any two meetings should have at least one time grain break between them.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Overlapping meetings: To minimize the number of meetings in parallel so people don’t have to choose one meeting over the other.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Assign larger rooms first: If a larger room is available any meeting should be assigned to that room in order to accommodate as many people as possible even if they haven’t signed up to that meeting.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room stability: If a person has two consecutive meetings with two or less time grains break between them they better be in the same room.
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>50meetings-160timegrains-5rooms  has  50 meetings, 160 timeGrains and 5 rooms with a search space of 10^145.
100meetings-320timegrains-5rooms has 100 meetings, 320 timeGrains and 5 rooms with a search space of 10^320.
200meetings-640timegrains-5rooms has 200 meetings, 640 timeGrains and 5 rooms with a search space of 10^701.
400meetings-1280timegrains-5rooms has 400 meetings, 1280 timeGrains and 5 rooms with a search space of 10^1522.
800meetings-2560timegrains-5rooms has 800 meetings, 2560 timeGrains and 5 rooms with a search space of 10^3285.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-curriculumCourse-ref">
				<title>Course timetabling (ITC 2007 Track 3 - Curriculum Course Scheduling)</title>
				<simpara>
					Schedule each lecture into a timeslot and into a room.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Teacher conflict: A teacher must not have two lectures in the same period.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Curriculum conflict: A curriculum must not have two lectures in the same period.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room occupancy: Two lectures must not be in the same room in the same period.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Unavailable period (specified per dataset): A specific lecture must not be assigned to a specific period.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Room capacity: A room’s capacity should not be less than the number of students in its lecture.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Minimum working days: Lectures of the same course should be spread out into a minimum number of days.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Curriculum compactness: Lectures belonging to the same curriculum should be adjacent to each other (so in consecutive periods).
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room stability: Lectures of the same course should be assigned to the same room.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The problem is defined by <link xlink:href="http://www.cs.qub.ac.uk/itc2007/curriculmcourse/course_curriculm_index.htm">the International Timetabling Competition 2007 track 3</link>.
				</simpara>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>comp01 has 24 teachers,  14 curricula,  30 courses, 160 lectures, 30 periods,  6 rooms and   53 unavailable period constraints with a search space of  10^360.
comp02 has 71 teachers,  70 curricula,  82 courses, 283 lectures, 25 periods, 16 rooms and  513 unavailable period constraints with a search space of  10^736.
comp03 has 61 teachers,  68 curricula,  72 courses, 251 lectures, 25 periods, 16 rooms and  382 unavailable period constraints with a search space of  10^653.
comp04 has 70 teachers,  57 curricula,  79 courses, 286 lectures, 25 periods, 18 rooms and  396 unavailable period constraints with a search space of  10^758.
comp05 has 47 teachers, 139 curricula,  54 courses, 152 lectures, 36 periods,  9 rooms and  771 unavailable period constraints with a search space of  10^381.
comp06 has 87 teachers,  70 curricula, 108 courses, 361 lectures, 25 periods, 18 rooms and  632 unavailable period constraints with a search space of  10^957.
comp07 has 99 teachers,  77 curricula, 131 courses, 434 lectures, 25 periods, 20 rooms and  667 unavailable period constraints with a search space of 10^1171.
comp08 has 76 teachers,  61 curricula,  86 courses, 324 lectures, 25 periods, 18 rooms and  478 unavailable period constraints with a search space of  10^859.
comp09 has 68 teachers,  75 curricula,  76 courses, 279 lectures, 25 periods, 18 rooms and  405 unavailable period constraints with a search space of  10^740.
comp10 has 88 teachers,  67 curricula, 115 courses, 370 lectures, 25 periods, 18 rooms and  694 unavailable period constraints with a search space of  10^981.
comp11 has 24 teachers,  13 curricula,  30 courses, 162 lectures, 45 periods,  5 rooms and   94 unavailable period constraints with a search space of  10^381.
comp12 has 74 teachers, 150 curricula,  88 courses, 218 lectures, 36 periods, 11 rooms and 1368 unavailable period constraints with a search space of  10^566.
comp13 has 77 teachers,  66 curricula,  82 courses, 308 lectures, 25 periods, 19 rooms and  468 unavailable period constraints with a search space of  10^824.
comp14 has 68 teachers,  60 curricula,  85 courses, 275 lectures, 25 periods, 17 rooms and  486 unavailable period constraints with a search space of  10^722.</screen>
					</para>
				</formalpara>
				<figure>
					<title>Domain model</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/CourseTimetabling/curriculumCourseClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>curriculumCourseClassDiagram</phrase>
						</textobject>
					</mediaobject>
				</figure>
			</section>
			<section xml:id="ex-machineReassignment-ref">
				<title>Machine reassignment (Google ROADEF 2012)</title>
				<simpara>
					Assign each process to a machine. All processes already have an original (unoptimized) assignment. Each process requires an amount of each resource (such as CPU or RAM). This is a more complex version of the Cloud Balancing example.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Maximum capacity: The maximum capacity for each resource for each machine must not be exceeded.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Conflict: Processes of the same service must run on distinct machines.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Spread: Processes of the same service must be spread out across locations.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Dependency: The processes of a service depending on another service must run in the neighborhood of a process of the other service.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Transient usage: Some resources are transient and count towards the maximum capacity of both the original machine as the newly assigned machine.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Load: The safety capacity for each resource for each machine should not be exceeded.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Balance: Leave room for future assignments by balancing the available resources on each machine.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Process move cost: A process has a move cost.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Service move cost: A service has a move cost.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Machine move cost: Moving a process from machine A to machine B has another A-B specific move cost.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The problem is defined by <link xlink:href="http://challenge.roadef.org/2012/en/">the Google ROADEF/EURO Challenge 2012</link>.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/MachineReassignment/cloudOptimizationIsLikeTetris.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>cloudOptimizationIsLikeTetris</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<figure xml:id="machineReassignmentValueProposition">
					<title>Value proposition</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/shared/cloudOptimizationValueProposition.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>cloudOptimizationValueProposition</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>model_a1_1 has  2 resources,  1 neighborhoods,   4 locations,    4 machines,    79 services,   100 processes and 1 balancePenalties with a search space of     10^60.
model_a1_2 has  4 resources,  2 neighborhoods,   4 locations,  100 machines,   980 services,  1000 processes and 0 balancePenalties with a search space of   10^2000.
model_a1_3 has  3 resources,  5 neighborhoods,  25 locations,  100 machines,   216 services,  1000 processes and 0 balancePenalties with a search space of   10^2000.
model_a1_4 has  3 resources, 50 neighborhoods,  50 locations,   50 machines,   142 services,  1000 processes and 1 balancePenalties with a search space of   10^1698.
model_a1_5 has  4 resources,  2 neighborhoods,   4 locations,   12 machines,   981 services,  1000 processes and 1 balancePenalties with a search space of   10^1079.
model_a2_1 has  3 resources,  1 neighborhoods,   1 locations,  100 machines,  1000 services,  1000 processes and 0 balancePenalties with a search space of   10^2000.
model_a2_2 has 12 resources,  5 neighborhoods,  25 locations,  100 machines,   170 services,  1000 processes and 0 balancePenalties with a search space of   10^2000.
model_a2_3 has 12 resources,  5 neighborhoods,  25 locations,  100 machines,   129 services,  1000 processes and 0 balancePenalties with a search space of   10^2000.
model_a2_4 has 12 resources,  5 neighborhoods,  25 locations,   50 machines,   180 services,  1000 processes and 1 balancePenalties with a search space of   10^1698.
model_a2_5 has 12 resources,  5 neighborhoods,  25 locations,   50 machines,   153 services,  1000 processes and 0 balancePenalties with a search space of   10^1698.
model_b_1  has 12 resources,  5 neighborhoods,  10 locations,  100 machines,  2512 services,  5000 processes and 0 balancePenalties with a search space of  10^10000.
model_b_2  has 12 resources,  5 neighborhoods,  10 locations,  100 machines,  2462 services,  5000 processes and 1 balancePenalties with a search space of  10^10000.
model_b_3  has  6 resources,  5 neighborhoods,  10 locations,  100 machines, 15025 services, 20000 processes and 0 balancePenalties with a search space of  10^40000.
model_b_4  has  6 resources,  5 neighborhoods,  50 locations,  500 machines,  1732 services, 20000 processes and 1 balancePenalties with a search space of  10^53979.
model_b_5  has  6 resources,  5 neighborhoods,  10 locations,  100 machines, 35082 services, 40000 processes and 0 balancePenalties with a search space of  10^80000.
model_b_6  has  6 resources,  5 neighborhoods,  50 locations,  200 machines, 14680 services, 40000 processes and 1 balancePenalties with a search space of  10^92041.
model_b_7  has  6 resources,  5 neighborhoods,  50 locations, 4000 machines, 15050 services, 40000 processes and 1 balancePenalties with a search space of 10^144082.
model_b_8  has  3 resources,  5 neighborhoods,  10 locations,  100 machines, 45030 services, 50000 processes and 0 balancePenalties with a search space of 10^100000.
model_b_9  has  3 resources,  5 neighborhoods, 100 locations, 1000 machines,  4609 services, 50000 processes and 1 balancePenalties with a search space of 10^150000.
model_b_10 has  3 resources,  5 neighborhoods, 100 locations, 5000 machines,  4896 services, 50000 processes and 1 balancePenalties with a search space of 10^184948.</screen>
					</para>
				</formalpara>
				<figure>
					<title>Domain model</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/MachineReassignment/machineReassignmentClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>machineReassignmentClassDiagram</phrase>
						</textobject>
					</mediaobject>
				</figure>
			</section>
			<section xml:id="ex-vehicleRouting-ref">
				<title>Vehicle routing</title>
				<simpara>
					Using a fleet of vehicles, pick up the objects of each customer and bring them to the depot. Each vehicle can service multiple customers, but it has a limited capacity.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/vehicleRoutingUseCase.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>vehicleRoutingUseCase</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Besides the basic case (CVRP), there is also a variant with time windows (CVRPTW).
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Vehicle capacity: a vehicle cannot carry more items then its capacity.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Time windows (only in CVRPTW):
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Travel time: Traveling from one location to another takes time.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Customer service duration: a vehicle must stay at the customer for the length of the service duration.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Customer ready time: a vehicle may arrive before the customer’s ready time, but it must wait until the ready time before servicing.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Customer due time: a vehicle must arrive on time, before the customer’s due time.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Total distance: minimize the total distance driven (fuel consumption) of all vehicles.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The capacitated vehicle routing problem (CVRP) and its timewindowed variant (CVRPTW) are defined by <link xlink:href="http://neo.lcc.uma.es/vrp/">the VRP web</link>.
				</simpara>
				<figure>
					<title>Value proposition</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/vehicleRoutingValueProposition.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>vehicleRoutingValueProposition</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<formalpara>
					<title>Problem size</title>
					<para>
						CVRP instances (without time windows):
					</para>
				</formalpara>
				
<screen>belgium-n50-k10             has  1 depots, 10 vehicles and   49 customers with a search space of   10^74.
belgium-n100-k10            has  1 depots, 10 vehicles and   99 customers with a search space of  10^170.
belgium-n500-k20            has  1 depots, 20 vehicles and  499 customers with a search space of 10^1168.
belgium-n1000-k20           has  1 depots, 20 vehicles and  999 customers with a search space of 10^2607.
belgium-n2750-k55           has  1 depots, 55 vehicles and 2749 customers with a search space of 10^8380.
belgium-road-km-n50-k10     has  1 depots, 10 vehicles and   49 customers with a search space of   10^74.
belgium-road-km-n100-k10    has  1 depots, 10 vehicles and   99 customers with a search space of  10^170.
belgium-road-km-n500-k20    has  1 depots, 20 vehicles and  499 customers with a search space of 10^1168.
belgium-road-km-n1000-k20   has  1 depots, 20 vehicles and  999 customers with a search space of 10^2607.
belgium-road-km-n2750-k55   has  1 depots, 55 vehicles and 2749 customers with a search space of 10^8380.
belgium-road-time-n50-k10   has  1 depots, 10 vehicles and   49 customers with a search space of   10^74.
belgium-road-time-n100-k10  has  1 depots, 10 vehicles and   99 customers with a search space of  10^170.
belgium-road-time-n500-k20  has  1 depots, 20 vehicles and  499 customers with a search space of 10^1168.
belgium-road-time-n1000-k20 has  1 depots, 20 vehicles and  999 customers with a search space of 10^2607.
belgium-road-time-n2750-k55 has  1 depots, 55 vehicles and 2749 customers with a search space of 10^8380.
belgium-d2-n50-k10          has  2 depots, 10 vehicles and   48 customers with a search space of   10^74.
belgium-d3-n100-k10         has  3 depots, 10 vehicles and   97 customers with a search space of  10^170.
belgium-d5-n500-k20         has  5 depots, 20 vehicles and  495 customers with a search space of 10^1168.
belgium-d8-n1000-k20        has  8 depots, 20 vehicles and  992 customers with a search space of 10^2607.
belgium-d10-n2750-k55       has 10 depots, 55 vehicles and 2740 customers with a search space of 10^8380.

A-n32-k5  has 1 depots,  5 vehicles and  31 customers with a search space of  10^40.
A-n33-k5  has 1 depots,  5 vehicles and  32 customers with a search space of  10^41.
A-n33-k6  has 1 depots,  6 vehicles and  32 customers with a search space of  10^42.
A-n34-k5  has 1 depots,  5 vehicles and  33 customers with a search space of  10^43.
A-n36-k5  has 1 depots,  5 vehicles and  35 customers with a search space of  10^46.
A-n37-k5  has 1 depots,  5 vehicles and  36 customers with a search space of  10^48.
A-n37-k6  has 1 depots,  6 vehicles and  36 customers with a search space of  10^49.
A-n38-k5  has 1 depots,  5 vehicles and  37 customers with a search space of  10^49.
A-n39-k5  has 1 depots,  5 vehicles and  38 customers with a search space of  10^51.
A-n39-k6  has 1 depots,  6 vehicles and  38 customers with a search space of  10^52.
A-n44-k7  has 1 depots,  7 vehicles and  43 customers with a search space of  10^61.
A-n45-k6  has 1 depots,  6 vehicles and  44 customers with a search space of  10^62.
A-n45-k7  has 1 depots,  7 vehicles and  44 customers with a search space of  10^63.
A-n46-k7  has 1 depots,  7 vehicles and  45 customers with a search space of  10^65.
A-n48-k7  has 1 depots,  7 vehicles and  47 customers with a search space of  10^68.
A-n53-k7  has 1 depots,  7 vehicles and  52 customers with a search space of  10^77.
A-n54-k7  has 1 depots,  7 vehicles and  53 customers with a search space of  10^79.
A-n55-k9  has 1 depots,  9 vehicles and  54 customers with a search space of  10^82.
A-n60-k9  has 1 depots,  9 vehicles and  59 customers with a search space of  10^91.
A-n61-k9  has 1 depots,  9 vehicles and  60 customers with a search space of  10^93.
A-n62-k8  has 1 depots,  8 vehicles and  61 customers with a search space of  10^94.
A-n63-k9  has 1 depots,  9 vehicles and  62 customers with a search space of  10^97.
A-n63-k10 has 1 depots, 10 vehicles and  62 customers with a search space of  10^98.
A-n64-k9  has 1 depots,  9 vehicles and  63 customers with a search space of  10^99.
A-n65-k9  has 1 depots,  9 vehicles and  64 customers with a search space of 10^101.
A-n69-k9  has 1 depots,  9 vehicles and  68 customers with a search space of 10^108.
A-n80-k10 has 1 depots, 10 vehicles and  79 customers with a search space of 10^130.
F-n45-k4  has 1 depots,  4 vehicles and  44 customers with a search space of  10^60.
F-n72-k4  has 1 depots,  4 vehicles and  71 customers with a search space of 10^108.
F-n135-k7 has 1 depots,  7 vehicles and 134 customers with a search space of 10^240.</screen>
				<simpara>
					CVRPTW instances (with time windows):
				</simpara>
				
<screen>belgium-tw-d2-n50-k10    has  2 depots, 10 vehicles and   48 customers with a search space of   10^74.
belgium-tw-d3-n100-k10   has  3 depots, 10 vehicles and   97 customers with a search space of  10^170.
belgium-tw-d5-n500-k20   has  5 depots, 20 vehicles and  495 customers with a search space of 10^1168.
belgium-tw-d8-n1000-k20  has  8 depots, 20 vehicles and  992 customers with a search space of 10^2607.
belgium-tw-d10-n2750-k55 has 10 depots, 55 vehicles and 2740 customers with a search space of 10^8380.
belgium-tw-n50-k10       has  1 depots, 10 vehicles and   49 customers with a search space of   10^74.
belgium-tw-n100-k10      has  1 depots, 10 vehicles and   99 customers with a search space of  10^170.
belgium-tw-n500-k20      has  1 depots, 20 vehicles and  499 customers with a search space of 10^1168.
belgium-tw-n1000-k20     has  1 depots, 20 vehicles and  999 customers with a search space of 10^2607.
belgium-tw-n2750-k55     has  1 depots, 55 vehicles and 2749 customers with a search space of 10^8380.

Solomon_025_C101       has 1 depots,  25 vehicles and   25 customers with a search space of   10^40.
Solomon_025_C201       has 1 depots,  25 vehicles and   25 customers with a search space of   10^40.
Solomon_025_R101       has 1 depots,  25 vehicles and   25 customers with a search space of   10^40.
Solomon_025_R201       has 1 depots,  25 vehicles and   25 customers with a search space of   10^40.
Solomon_025_RC101      has 1 depots,  25 vehicles and   25 customers with a search space of   10^40.
Solomon_025_RC201      has 1 depots,  25 vehicles and   25 customers with a search space of   10^40.
Solomon_100_C101       has 1 depots,  25 vehicles and  100 customers with a search space of  10^185.
Solomon_100_C201       has 1 depots,  25 vehicles and  100 customers with a search space of  10^185.
Solomon_100_R101       has 1 depots,  25 vehicles and  100 customers with a search space of  10^185.
Solomon_100_R201       has 1 depots,  25 vehicles and  100 customers with a search space of  10^185.
Solomon_100_RC101      has 1 depots,  25 vehicles and  100 customers with a search space of  10^185.
Solomon_100_RC201      has 1 depots,  25 vehicles and  100 customers with a search space of  10^185.
Homberger_0200_C1_2_1  has 1 depots,  50 vehicles and  200 customers with a search space of  10^429.
Homberger_0200_C2_2_1  has 1 depots,  50 vehicles and  200 customers with a search space of  10^429.
Homberger_0200_R1_2_1  has 1 depots,  50 vehicles and  200 customers with a search space of  10^429.
Homberger_0200_R2_2_1  has 1 depots,  50 vehicles and  200 customers with a search space of  10^429.
Homberger_0200_RC1_2_1 has 1 depots,  50 vehicles and  200 customers with a search space of  10^429.
Homberger_0200_RC2_2_1 has 1 depots,  50 vehicles and  200 customers with a search space of  10^429.
Homberger_0400_C1_4_1  has 1 depots, 100 vehicles and  400 customers with a search space of  10^978.
Homberger_0400_C2_4_1  has 1 depots, 100 vehicles and  400 customers with a search space of  10^978.
Homberger_0400_R1_4_1  has 1 depots, 100 vehicles and  400 customers with a search space of  10^978.
Homberger_0400_R2_4_1  has 1 depots, 100 vehicles and  400 customers with a search space of  10^978.
Homberger_0400_RC1_4_1 has 1 depots, 100 vehicles and  400 customers with a search space of  10^978.
Homberger_0400_RC2_4_1 has 1 depots, 100 vehicles and  400 customers with a search space of  10^978.
Homberger_0600_C1_6_1  has 1 depots, 150 vehicles and  600 customers with a search space of 10^1571.
Homberger_0600_C2_6_1  has 1 depots, 150 vehicles and  600 customers with a search space of 10^1571.
Homberger_0600_R1_6_1  has 1 depots, 150 vehicles and  600 customers with a search space of 10^1571.
Homberger_0600_R2_6_1  has 1 depots, 150 vehicles and  600 customers with a search space of 10^1571.
Homberger_0600_RC1_6_1 has 1 depots, 150 vehicles and  600 customers with a search space of 10^1571.
Homberger_0600_RC2_6_1 has 1 depots, 150 vehicles and  600 customers with a search space of 10^1571.
Homberger_0800_C1_8_1  has 1 depots, 200 vehicles and  800 customers with a search space of 10^2195.
Homberger_0800_C2_8_1  has 1 depots, 200 vehicles and  800 customers with a search space of 10^2195.
Homberger_0800_R1_8_1  has 1 depots, 200 vehicles and  800 customers with a search space of 10^2195.
Homberger_0800_R2_8_1  has 1 depots, 200 vehicles and  800 customers with a search space of 10^2195.
Homberger_0800_RC1_8_1 has 1 depots, 200 vehicles and  800 customers with a search space of 10^2195.
Homberger_0800_RC2_8_1 has 1 depots, 200 vehicles and  800 customers with a search space of 10^2195.
Homberger_1000_C110_1  has 1 depots, 250 vehicles and 1000 customers with a search space of 10^2840.
Homberger_1000_C210_1  has 1 depots, 250 vehicles and 1000 customers with a search space of 10^2840.
Homberger_1000_R110_1  has 1 depots, 250 vehicles and 1000 customers with a search space of 10^2840.
Homberger_1000_R210_1  has 1 depots, 250 vehicles and 1000 customers with a search space of 10^2840.
Homberger_1000_RC110_1 has 1 depots, 250 vehicles and 1000 customers with a search space of 10^2840.
Homberger_1000_RC210_1 has 1 depots, 250 vehicles and 1000 customers with a search space of 10^2840.</screen>
				<section xml:id="vehicleRoutingDomainModel">
					<title>Domain model for Vehicle routing</title>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/vehicleRoutingClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>vehicleRoutingClassDiagram</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						The vehicle routing with timewindows domain model makes heavily use of the shadow variable feature. This allows it to express its constraints more naturally, because properties such as <literal>arrivalTime</literal> and <literal>departureTime</literal>, are directly available on the domain model.
					</simpara>
					<formalpara>
						<title>Road Distances Instead of Air Distances</title>
						<para>
							In the real world, vehicles cannot follow a straight line from location to location: they have to use roads and highways. From a business point of view, this matters a lot:
						</para>
					</formalpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/vehicleRoutingDistanceType.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>vehicleRoutingDistanceType</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						For the optimization algorithm, this does not matter much, as long as the distance between two points can be looked up (and are preferably precalculated). The road cost does not even need to be a distance, it can also be travel time, fuel cost, or a weighted function of those. There are several technologies available to precalculate road costs, such as <link xlink:href="https://graphhopper.com/">GraphHopper</link> (embeddable, offline Java engine), <link xlink:href="http://open.mapquestapi.com/directions/#matrix">Open MapQuest</link> (web service) and <link xlink:href="https://developers.google.com/maps/documentation/webservices/client-library">Google Maps Client API</link> (web service).
					</simpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/integrationWithRealMaps.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>integrationWithRealMaps</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						There are also several technologies to render it, such as <link xlink:href="http://leafletjs.com">Leaflet</link> and <link xlink:href="https://developers.google.com/maps/">Google Maps for developers</link>: the <literal>optaplanner-webexamples-*.war</literal> has an example which demonstrates such rendering:
					</simpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/vehicleRoutingLeafletAndGoogleMaps.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>vehicleRoutingLeafletAndGoogleMaps</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						It is even possible to render the actual road routes with GraphHopper or Google Map Directions, but because of route overlaps on highways, it can become harder to see the standstill order:
					</simpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/vehicleRoutingGoogleMapsDirections.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>vehicleRoutingGoogleMapsDirections</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						Take special care that the road costs between two points use the same optimization criteria as the one used in Planner. For example, GraphHopper etc will by default return the fastest route, not the shortest route. Don’t use the km (or miles) distances of the fastest GPS routes to optimize the shortest trip in Planner: this leads to a suboptimal solution as shown below:
					</simpara>
					<informalfigure>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/VehicleRouting/roadDistanceTriangleInequality.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>roadDistanceTriangleInequality</phrase>
						</textobject>
					</mediaobject>
					</informalfigure>
					<simpara>
						Contrary to popular belief, most users do not want the shortest route: they want the fastest route instead. They prefer highways over normal roads. They prefer normal roads over dirt roads. In the real world, the fastest and shortest route are rarely the same.
					</simpara>
				</section>
			</section>
			<section xml:id="ex-projectJobScheduling-ref">
				<title>Project job scheduling</title>
				<simpara>
					Schedule all jobs in time and execution mode to minimize project delays. Each job is part of a project. A job can be executed in different ways: each way is an execution mode that implies a different duration but also different resource usages. This is a form of flexible <emphasis>job shop scheduling</emphasis>.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/ProjectJobScheduling/projectJobSchedulingUseCase.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>projectJobSchedulingUseCase</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Job precedence: a job can only start when all its predecessor jobs are finished.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Resource capacity: do not use more resources than available.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Resources are local (shared between jobs of the same project) or global (shared between all jobs)
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Resources are renewable (capacity available per day) or nonrenewable (capacity available for all days)
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					Medium constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Total project delay: minimize the duration (makespan) of each project.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Total makespan: minimize the duration of the whole multi-project schedule.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The problem is defined by <link xlink:href="http://gent.cs.kuleuven.be/mista2013challenge/">the MISTA 2013 challenge</link>.
				</simpara>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>Schedule A-1  has  2 projects,  24 jobs,   64 execution modes,  7 resources and  150 resource requirements.
Schedule A-2  has  2 projects,  44 jobs,  124 execution modes,  7 resources and  420 resource requirements.
Schedule A-3  has  2 projects,  64 jobs,  184 execution modes,  7 resources and  630 resource requirements.
Schedule A-4  has  5 projects,  60 jobs,  160 execution modes, 16 resources and  390 resource requirements.
Schedule A-5  has  5 projects, 110 jobs,  310 execution modes, 16 resources and  900 resource requirements.
Schedule A-6  has  5 projects, 160 jobs,  460 execution modes, 16 resources and 1440 resource requirements.
Schedule A-7  has 10 projects, 120 jobs,  320 execution modes, 22 resources and  900 resource requirements.
Schedule A-8  has 10 projects, 220 jobs,  620 execution modes, 22 resources and 1860 resource requirements.
Schedule A-9  has 10 projects, 320 jobs,  920 execution modes, 31 resources and 2880 resource requirements.
Schedule A-10 has 10 projects, 320 jobs,  920 execution modes, 31 resources and 2970 resource requirements.
Schedule B-1  has 10 projects, 120 jobs,  320 execution modes, 31 resources and  900 resource requirements.
Schedule B-2  has 10 projects, 220 jobs,  620 execution modes, 22 resources and 1740 resource requirements.
Schedule B-3  has 10 projects, 320 jobs,  920 execution modes, 31 resources and 3060 resource requirements.
Schedule B-4  has 15 projects, 180 jobs,  480 execution modes, 46 resources and 1530 resource requirements.
Schedule B-5  has 15 projects, 330 jobs,  930 execution modes, 46 resources and 2760 resource requirements.
Schedule B-6  has 15 projects, 480 jobs, 1380 execution modes, 46 resources and 4500 resource requirements.
Schedule B-7  has 20 projects, 240 jobs,  640 execution modes, 61 resources and 1710 resource requirements.
Schedule B-8  has 20 projects, 440 jobs, 1240 execution modes, 42 resources and 3180 resource requirements.
Schedule B-9  has 20 projects, 640 jobs, 1840 execution modes, 61 resources and 5940 resource requirements.
Schedule B-10 has 20 projects, 460 jobs, 1300 execution modes, 42 resources and 4260 resource requirements.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-taskAssigning-ref">
				<title>Task assigning</title>
				<simpara>
					Assign each task to a spot in an employee’s queue. Each task has a duration which is affected by the employee’s affinity level with the task’s customer.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Skill: Each task requires one or more skills. The employee must possess all these skills.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft level 0 constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Critical tasks: Complete critical tasks first, sooner than major and minor tasks.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft level 1 constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Minimize makespan: Reduce the time to complete all tasks.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Start with the longest working employee first, then the second longest working employee and so forth, to create fairness and load balancing.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft level 2 constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Major tasks: Complete major tasks as soon as possible, sooner than minor tasks.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft level 3 constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Minor tasks: Complete minor tasks as soon as possible.
						</simpara>
					</listitem>
				</itemizedlist>
				<figure>
					<title>Value proposition</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/TaskAssigning/taskAssigningValueProposition.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>taskAssigningValueProposition</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>24tasks-8employees   has  24 tasks, 6 skills,  8 employees,   4 task types and  4 customers with a search space of   10^30.
50tasks-5employees   has  50 tasks, 5 skills,  5 employees,  10 task types and 10 customers with a search space of   10^69.
100tasks-5employees  has 100 tasks, 5 skills,  5 employees,  20 task types and 15 customers with a search space of  10^164.
500tasks-20employees has 500 tasks, 6 skills, 20 employees, 100 task types and 60 customers with a search space of 10^1168.</screen>
					</para>
				</formalpara>
				<figure>
					<title>Domain model</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/TaskAssigning/taskAssigningClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>taskAssigningClassDiagram</phrase>
						</textobject>
					</mediaobject>
				</figure>
			</section>
			<section xml:id="ex-examination-ref">
				<title>Exam timetabling (ITC 2007 track 1 - Examination)</title>
				<simpara>
					Schedule each exam into a period and into a room. Multiple exams can share the same room during the same period.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/ExamTimetabling/examinationTimetablingUseCase.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>examinationTimetablingUseCase</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Exam conflict: Two exams that share students must not occur in the same period.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room capacity: A room’s seating capacity must suffice at all times.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Period duration: A period’s duration must suffice for all of its exams.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Period related hard constraints (specified per dataset):
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Coincidence: Two specified exams must use the same period (but possibly another room).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Exclusion: Two specified exams must not use the same period.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									After: A specified exam must occur in a period after another specified exam’s period.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Room related hard constraints (specified per dataset):
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Exclusive: One specified exam should not have to share its room with any other exam.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints (each of which has a parametrized penalty):
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							The same student should not have two exams in a row.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The same student should not have two exams on the same day.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Period spread: Two exams that share students should be a number of periods apart.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Mixed durations: Two exams that share a room should not have different durations.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Front load: Large exams should be scheduled earlier in the schedule.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Period penalty (specified per dataset): Some periods have a penalty when used.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room penalty (specified per dataset): Some rooms have a penalty when used.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					It uses large test data sets of real-life universities.
				</simpara>
				<simpara>
					The problem is defined by <link xlink:href="http://www.cs.qub.ac.uk/itc2007/examtrack/exam_track_index.htm">the International Timetabling Competition 2007 track 1</link>. Geoffrey De Smet finished 4th in that competition with a very early version of Planner. Many improvements have been made since then.
				</simpara>
				<formalpara xml:id="examinationProblemSize">
					<title>Problem Size</title>
					<para>
						
<screen>exam_comp_set1 has  7883 students,  607 exams, 54 periods,  7 rooms,  12 period constraints and  0 room constraints with a search space of 10^1564.
exam_comp_set2 has 12484 students,  870 exams, 40 periods, 49 rooms,  12 period constraints and  2 room constraints with a search space of 10^2864.
exam_comp_set3 has 16365 students,  934 exams, 36 periods, 48 rooms, 168 period constraints and 15 room constraints with a search space of 10^3023.
exam_comp_set4 has  4421 students,  273 exams, 21 periods,  1 rooms,  40 period constraints and  0 room constraints with a search space of  10^360.
exam_comp_set5 has  8719 students, 1018 exams, 42 periods,  3 rooms,  27 period constraints and  0 room constraints with a search space of 10^2138.
exam_comp_set6 has  7909 students,  242 exams, 16 periods,  8 rooms,  22 period constraints and  0 room constraints with a search space of  10^509.
exam_comp_set7 has 13795 students, 1096 exams, 80 periods, 15 rooms,  28 period constraints and  0 room constraints with a search space of 10^3374.
exam_comp_set8 has  7718 students,  598 exams, 80 periods,  8 rooms,  20 period constraints and  1 room constraints with a search space of 10^1678.</screen>
					</para>
				</formalpara>
				<section remap="_domain_model_for_exam_timetabling" xml:id="domain_model_for_exam_timetabling">
					<title>Domain model for Exam timetabling</title>
					<simpara>
						The following diagram shows the main examination domain classes:
					</simpara>
					<figure>
						<title>Examination domain class diagram</title>
						<mediaobject>
							<imageobject>
								<imagedata align="center" fileref="images/_images/UseCasesAndExamples/ExamTimetabling/examinationDomainDiagram.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>examinationDomainDiagram</phrase>
							</textobject>
						</mediaobject>
					</figure>
					<simpara>
						Notice that we’ve split up the exam concept into an <literal>Exam</literal> class and a <literal>Topic</literal> class. The <literal>Exam</literal> instances change during solving (this is the planning entity class), when their period or room property changes. The <literal>Topic</literal>, <literal>Period</literal> and <literal>Room</literal> instances never change during solving (these are problem facts, just like some other classes).
					</simpara>
				</section>
			</section>
			<section xml:id="ex-nurseRostering-ref">
				<title>Nurse rostering (INRC 2010)</title>
				<simpara>
					For each shift, assign a nurse to work that shift.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NurseRostering/employeeShiftRosteringUseCase.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>employeeShiftRosteringUseCase</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis role="strong">No unassigned shifts</emphasis> (built-in): Every shift need to be assigned to an employee.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Shift conflict</emphasis>: An employee can have only one shift per day.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Contract obligations. The business frequently violates these, so they decided to define these as soft constraints instead of hard constraints.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<emphasis role="strong">Minimum and maximum assignments</emphasis>: Each employee needs to work more than x shifts and less than y shifts (depending on their contract).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Minimum and maximum consecutive working days</emphasis>: Each employee needs to work between x and y days in a row (depending on their contract).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Minimum and maximum consecutive free days</emphasis>: Each employee needs to be free between x and y days in a row (depending on their contract).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Minimum and maximum consecutive working weekends</emphasis>: Each employee needs to work between x and y weekends in a row (depending on their contract).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Complete weekends</emphasis>: Each employee needs to work every day in a weekend or not at all.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Identical shift types during weekend</emphasis>: Each weekend shift for the same weekend of the same employee must be the same shift type.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Unwanted patterns</emphasis>: A combination of unwanted shift types in a row. For example: a late shift followed by an early shift followed by a late shift.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Employee wishes:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<emphasis role="strong">Day on request</emphasis>: An employee wants to work on a specific day.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Day off request</emphasis>: An employee does not want to work on a specific day.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Shift on request</emphasis>: An employee wants to be assigned to a specific shift.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Shift off request</emphasis>: An employee does not want to be assigned to a specific shift.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Alternative skill</emphasis>: An employee assigned to a skill should have a proficiency in every skill required by that shift.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The problem is defined by <link xlink:href="http://www.kuleuven-kortrijk.be/nrpcompetition">the International Nurse Rostering Competition 2010</link>.
				</simpara>
				<figure>
					<title>Value proposition</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NurseRostering/employeeRosteringValueProposition.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>employeeRosteringValueProposition</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<formalpara>
					<title>Problem size</title>
					<para>
						There are three dataset types:
					</para>
				</formalpara>
				<itemizedlist>
					<listitem>
						<simpara>
							sprint: must be solved in seconds.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							medium: must be solved in minutes.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							long: must be solved in hours.
						</simpara>
					</listitem>
				</itemizedlist>
				
<screen>toy1          has 1 skills, 3 shiftTypes, 2 patterns, 1 contracts,  6 employees,  7 shiftDates,  35 shiftAssignments and   0 requests with a search space of   10^27.
toy2          has 1 skills, 3 shiftTypes, 3 patterns, 2 contracts, 20 employees, 28 shiftDates, 180 shiftAssignments and 140 requests with a search space of  10^234.

sprint01      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint02      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint03      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint04      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint05      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint06      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint07      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint08      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint09      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint10      has 1 skills, 4 shiftTypes, 3 patterns, 4 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_hint01 has 1 skills, 4 shiftTypes, 8 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_hint02 has 1 skills, 4 shiftTypes, 0 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_hint03 has 1 skills, 4 shiftTypes, 8 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_late01 has 1 skills, 4 shiftTypes, 8 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_late02 has 1 skills, 3 shiftTypes, 4 patterns, 3 contracts, 10 employees, 28 shiftDates, 144 shiftAssignments and 139 requests with a search space of  10^144.
sprint_late03 has 1 skills, 4 shiftTypes, 8 patterns, 3 contracts, 10 employees, 28 shiftDates, 160 shiftAssignments and 150 requests with a search space of  10^160.
sprint_late04 has 1 skills, 4 shiftTypes, 8 patterns, 3 contracts, 10 employees, 28 shiftDates, 160 shiftAssignments and 150 requests with a search space of  10^160.
sprint_late05 has 1 skills, 4 shiftTypes, 8 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_late06 has 1 skills, 4 shiftTypes, 0 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_late07 has 1 skills, 4 shiftTypes, 0 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.
sprint_late08 has 1 skills, 4 shiftTypes, 0 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and   0 requests with a search space of  10^152.
sprint_late09 has 1 skills, 4 shiftTypes, 0 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and   0 requests with a search space of  10^152.
sprint_late10 has 1 skills, 4 shiftTypes, 0 patterns, 3 contracts, 10 employees, 28 shiftDates, 152 shiftAssignments and 150 requests with a search space of  10^152.

medium01      has 1 skills, 4 shiftTypes, 0 patterns, 4 contracts, 31 employees, 28 shiftDates, 608 shiftAssignments and 403 requests with a search space of  10^906.
medium02      has 1 skills, 4 shiftTypes, 0 patterns, 4 contracts, 31 employees, 28 shiftDates, 608 shiftAssignments and 403 requests with a search space of  10^906.
medium03      has 1 skills, 4 shiftTypes, 0 patterns, 4 contracts, 31 employees, 28 shiftDates, 608 shiftAssignments and 403 requests with a search space of  10^906.
medium04      has 1 skills, 4 shiftTypes, 0 patterns, 4 contracts, 31 employees, 28 shiftDates, 608 shiftAssignments and 403 requests with a search space of  10^906.
medium05      has 1 skills, 4 shiftTypes, 0 patterns, 4 contracts, 31 employees, 28 shiftDates, 608 shiftAssignments and 403 requests with a search space of  10^906.
medium_hint01 has 1 skills, 4 shiftTypes, 7 patterns, 4 contracts, 30 employees, 28 shiftDates, 428 shiftAssignments and 390 requests with a search space of  10^632.
medium_hint02 has 1 skills, 4 shiftTypes, 7 patterns, 3 contracts, 30 employees, 28 shiftDates, 428 shiftAssignments and 390 requests with a search space of  10^632.
medium_hint03 has 1 skills, 4 shiftTypes, 7 patterns, 4 contracts, 30 employees, 28 shiftDates, 428 shiftAssignments and 390 requests with a search space of  10^632.
medium_late01 has 1 skills, 4 shiftTypes, 7 patterns, 4 contracts, 30 employees, 28 shiftDates, 424 shiftAssignments and 390 requests with a search space of  10^626.
medium_late02 has 1 skills, 4 shiftTypes, 7 patterns, 3 contracts, 30 employees, 28 shiftDates, 428 shiftAssignments and 390 requests with a search space of  10^632.
medium_late03 has 1 skills, 4 shiftTypes, 0 patterns, 4 contracts, 30 employees, 28 shiftDates, 428 shiftAssignments and 390 requests with a search space of  10^632.
medium_late04 has 1 skills, 4 shiftTypes, 7 patterns, 3 contracts, 30 employees, 28 shiftDates, 416 shiftAssignments and 390 requests with a search space of  10^614.
medium_late05 has 2 skills, 5 shiftTypes, 7 patterns, 4 contracts, 30 employees, 28 shiftDates, 452 shiftAssignments and 390 requests with a search space of  10^667.

long01        has 2 skills, 5 shiftTypes, 3 patterns, 3 contracts, 49 employees, 28 shiftDates, 740 shiftAssignments and 735 requests with a search space of 10^1250.
long02        has 2 skills, 5 shiftTypes, 3 patterns, 3 contracts, 49 employees, 28 shiftDates, 740 shiftAssignments and 735 requests with a search space of 10^1250.
long03        has 2 skills, 5 shiftTypes, 3 patterns, 3 contracts, 49 employees, 28 shiftDates, 740 shiftAssignments and 735 requests with a search space of 10^1250.
long04        has 2 skills, 5 shiftTypes, 3 patterns, 3 contracts, 49 employees, 28 shiftDates, 740 shiftAssignments and 735 requests with a search space of 10^1250.
long05        has 2 skills, 5 shiftTypes, 3 patterns, 3 contracts, 49 employees, 28 shiftDates, 740 shiftAssignments and 735 requests with a search space of 10^1250.
long_hint01   has 2 skills, 5 shiftTypes, 9 patterns, 3 contracts, 50 employees, 28 shiftDates, 740 shiftAssignments and   0 requests with a search space of 10^1257.
long_hint02   has 2 skills, 5 shiftTypes, 7 patterns, 3 contracts, 50 employees, 28 shiftDates, 740 shiftAssignments and   0 requests with a search space of 10^1257.
long_hint03   has 2 skills, 5 shiftTypes, 7 patterns, 3 contracts, 50 employees, 28 shiftDates, 740 shiftAssignments and   0 requests with a search space of 10^1257.
long_late01   has 2 skills, 5 shiftTypes, 9 patterns, 3 contracts, 50 employees, 28 shiftDates, 752 shiftAssignments and   0 requests with a search space of 10^1277.
long_late02   has 2 skills, 5 shiftTypes, 9 patterns, 4 contracts, 50 employees, 28 shiftDates, 752 shiftAssignments and   0 requests with a search space of 10^1277.
long_late03   has 2 skills, 5 shiftTypes, 9 patterns, 3 contracts, 50 employees, 28 shiftDates, 752 shiftAssignments and   0 requests with a search space of 10^1277.
long_late04   has 2 skills, 5 shiftTypes, 9 patterns, 4 contracts, 50 employees, 28 shiftDates, 752 shiftAssignments and   0 requests with a search space of 10^1277.
long_late05   has 2 skills, 5 shiftTypes, 9 patterns, 3 contracts, 50 employees, 28 shiftDates, 740 shiftAssignments and   0 requests with a search space of 10^1257.</screen>
				<figure>
					<title>Domain model</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/NurseRostering/nurseRosteringClassDiagram.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>nurseRosteringClassDiagram</phrase>
						</textobject>
					</mediaobject>
				</figure>
			</section>
			<section xml:id="ex-travelingTournament-ref">
				<title>Traveling tournament problem (TTP)</title>
				<simpara>
					Schedule matches between <emphasis>n</emphasis> teams.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/UseCasesAndExamples/TravellingTournament/travelingTournamentUseCase.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>travelingTournamentUseCase</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Each team plays twice against every other team: once home and once away.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Each team has exactly one match on each timeslot.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							No team must have more than three consecutive home or three consecutive away matches.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							No repeaters: no two consecutive matches of the same two opposing teams.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Minimize the total distance traveled by all teams.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The problem is defined on <link xlink:href="http://mat.tepper.cmu.edu/TOURN/">Michael Trick’s website (which contains the world records too)</link>.
				</simpara>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>1-nl04     has  6 days,  4 teams and   12 matches with a search space of    10^5.
1-nl06     has 10 days,  6 teams and   30 matches with a search space of   10^19.
1-nl08     has 14 days,  8 teams and   56 matches with a search space of   10^43.
1-nl10     has 18 days, 10 teams and   90 matches with a search space of   10^79.
1-nl12     has 22 days, 12 teams and  132 matches with a search space of  10^126.
1-nl14     has 26 days, 14 teams and  182 matches with a search space of  10^186.
1-nl16     has 30 days, 16 teams and  240 matches with a search space of  10^259.
2-bra24    has 46 days, 24 teams and  552 matches with a search space of  10^692.
3-nfl16    has 30 days, 16 teams and  240 matches with a search space of  10^259.
3-nfl18    has 34 days, 18 teams and  306 matches with a search space of  10^346.
3-nfl20    has 38 days, 20 teams and  380 matches with a search space of  10^447.
3-nfl22    has 42 days, 22 teams and  462 matches with a search space of  10^562.
3-nfl24    has 46 days, 24 teams and  552 matches with a search space of  10^692.
3-nfl26    has 50 days, 26 teams and  650 matches with a search space of  10^838.
3-nfl28    has 54 days, 28 teams and  756 matches with a search space of  10^999.
3-nfl30    has 58 days, 30 teams and  870 matches with a search space of 10^1175.
3-nfl32    has 62 days, 32 teams and  992 matches with a search space of 10^1367.
4-super04  has  6 days,  4 teams and   12 matches with a search space of    10^5.
4-super06  has 10 days,  6 teams and   30 matches with a search space of   10^19.
4-super08  has 14 days,  8 teams and   56 matches with a search space of   10^43.
4-super10  has 18 days, 10 teams and   90 matches with a search space of   10^79.
4-super12  has 22 days, 12 teams and  132 matches with a search space of  10^126.
4-super14  has 26 days, 14 teams and  182 matches with a search space of  10^186.
5-galaxy04 has  6 days,  4 teams and   12 matches with a search space of    10^5.
5-galaxy06 has 10 days,  6 teams and   30 matches with a search space of   10^19.
5-galaxy08 has 14 days,  8 teams and   56 matches with a search space of   10^43.
5-galaxy10 has 18 days, 10 teams and   90 matches with a search space of   10^79.
5-galaxy12 has 22 days, 12 teams and  132 matches with a search space of  10^126.
5-galaxy14 has 26 days, 14 teams and  182 matches with a search space of  10^186.
5-galaxy16 has 30 days, 16 teams and  240 matches with a search space of  10^259.
5-galaxy18 has 34 days, 18 teams and  306 matches with a search space of  10^346.
5-galaxy20 has 38 days, 20 teams and  380 matches with a search space of  10^447.
5-galaxy22 has 42 days, 22 teams and  462 matches with a search space of  10^562.
5-galaxy24 has 46 days, 24 teams and  552 matches with a search space of  10^692.
5-galaxy26 has 50 days, 26 teams and  650 matches with a search space of  10^838.
5-galaxy28 has 54 days, 28 teams and  756 matches with a search space of  10^999.
5-galaxy30 has 58 days, 30 teams and  870 matches with a search space of 10^1175.
5-galaxy32 has 62 days, 32 teams and  992 matches with a search space of 10^1367.
5-galaxy34 has 66 days, 34 teams and 1122 matches with a search space of 10^1576.
5-galaxy36 has 70 days, 36 teams and 1260 matches with a search space of 10^1801.
5-galaxy38 has 74 days, 38 teams and 1406 matches with a search space of 10^2042.
5-galaxy40 has 78 days, 40 teams and 1560 matches with a search space of 10^2301.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-cheapTimeScheduling-ref">
				<title>Cheap time scheduling</title>
				<simpara>
					Schedule all tasks in time and on a machine to minimize power cost. Power prices differs in time. This is a form of <emphasis>job shop scheduling</emphasis>.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Start time limits: Each task must start between its earliest start and latest start limit.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Maximum capacity: The maximum capacity for each resource for each machine must not be exceeded.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Startup and shutdown: Each machine must be active in the periods during which it has assigned tasks. Between tasks it is allowed to be idle to avoid startup and shutdown costs.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Medium constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Power cost: Minimize the total power cost of the whole schedule.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Machine power cost: Each active or idle machine consumes power, which infers a power cost (depending on the power price during that time).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Task power cost: Each task consumes power too, which infers a power cost (depending on the power price during its time).
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Machine startup and shutdown cost: Every time a machine starts up or shuts down, an extra cost is inflicted.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints (addendum to the original problem definition):
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Start early: Prefer starting a task sooner rather than later.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					The problem is defined by <link xlink:href="https://web.archive.org/web/20180318013828/http://iconchallenge.insight-centre.org/">the ICON challenge</link>.
				</simpara>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>sample01   has 3 resources,   2 machines, 288 periods and   25 tasks with a search space of    10^53.
sample02   has 3 resources,   2 machines, 288 periods and   50 tasks with a search space of   10^114.
sample03   has 3 resources,   2 machines, 288 periods and  100 tasks with a search space of   10^226.
sample04   has 3 resources,   5 machines, 288 periods and  100 tasks with a search space of   10^266.
sample05   has 3 resources,   2 machines, 288 periods and  250 tasks with a search space of   10^584.
sample06   has 3 resources,   5 machines, 288 periods and  250 tasks with a search space of   10^673.
sample07   has 3 resources,   2 machines, 288 periods and 1000 tasks with a search space of  10^2388.
sample08   has 3 resources,   5 machines, 288 periods and 1000 tasks with a search space of  10^2748.
sample09   has 4 resources,  20 machines, 288 periods and 2000 tasks with a search space of  10^6668.
instance00 has 1 resources,  10 machines, 288 periods and  200 tasks with a search space of   10^595.
instance01 has 1 resources,  10 machines, 288 periods and  200 tasks with a search space of   10^599.
instance02 has 1 resources,  10 machines, 288 periods and  200 tasks with a search space of   10^599.
instance03 has 1 resources,  10 machines, 288 periods and  200 tasks with a search space of   10^591.
instance04 has 1 resources,  10 machines, 288 periods and  200 tasks with a search space of   10^590.
instance05 has 2 resources,  25 machines, 288 periods and  200 tasks with a search space of   10^667.
instance06 has 2 resources,  25 machines, 288 periods and  200 tasks with a search space of   10^660.
instance07 has 2 resources,  25 machines, 288 periods and  200 tasks with a search space of   10^662.
instance08 has 2 resources,  25 machines, 288 periods and  200 tasks with a search space of   10^651.
instance09 has 2 resources,  25 machines, 288 periods and  200 tasks with a search space of   10^659.
instance10 has 2 resources,  20 machines, 288 periods and  500 tasks with a search space of  10^1657.
instance11 has 2 resources,  20 machines, 288 periods and  500 tasks with a search space of  10^1644.
instance12 has 2 resources,  20 machines, 288 periods and  500 tasks with a search space of  10^1637.
instance13 has 2 resources,  20 machines, 288 periods and  500 tasks with a search space of  10^1659.
instance14 has 2 resources,  20 machines, 288 periods and  500 tasks with a search space of  10^1643.
instance15 has 3 resources,  40 machines, 288 periods and  500 tasks with a search space of  10^1782.
instance16 has 3 resources,  40 machines, 288 periods and  500 tasks with a search space of  10^1778.
instance17 has 3 resources,  40 machines, 288 periods and  500 tasks with a search space of  10^1764.
instance18 has 3 resources,  40 machines, 288 periods and  500 tasks with a search space of  10^1769.
instance19 has 3 resources,  40 machines, 288 periods and  500 tasks with a search space of  10^1778.
instance20 has 3 resources,  50 machines, 288 periods and 1000 tasks with a search space of  10^3689.
instance21 has 3 resources,  50 machines, 288 periods and 1000 tasks with a search space of  10^3678.
instance22 has 3 resources,  50 machines, 288 periods and 1000 tasks with a search space of  10^3706.
instance23 has 3 resources,  50 machines, 288 periods and 1000 tasks with a search space of  10^3676.
instance24 has 3 resources,  50 machines, 288 periods and 1000 tasks with a search space of  10^3681.
instance25 has 3 resources,  60 machines, 288 periods and 1000 tasks with a search space of  10^3774.
instance26 has 3 resources,  60 machines, 288 periods and 1000 tasks with a search space of  10^3737.
instance27 has 3 resources,  60 machines, 288 periods and 1000 tasks with a search space of  10^3744.
instance28 has 3 resources,  60 machines, 288 periods and 1000 tasks with a search space of  10^3731.
instance29 has 3 resources,  60 machines, 288 periods and 1000 tasks with a search space of  10^3746.
instance30 has 4 resources,  70 machines, 288 periods and 2000 tasks with a search space of  10^7718.
instance31 has 4 resources,  70 machines, 288 periods and 2000 tasks with a search space of  10^7740.
instance32 has 4 resources,  70 machines, 288 periods and 2000 tasks with a search space of  10^7686.
instance33 has 4 resources,  70 machines, 288 periods and 2000 tasks with a search space of  10^7672.
instance34 has 4 resources,  70 machines, 288 periods and 2000 tasks with a search space of  10^7695.
instance35 has 4 resources,  80 machines, 288 periods and 2000 tasks with a search space of  10^7807.
instance36 has 4 resources,  80 machines, 288 periods and 2000 tasks with a search space of  10^7814.
instance37 has 4 resources,  80 machines, 288 periods and 2000 tasks with a search space of  10^7764.
instance38 has 4 resources,  80 machines, 288 periods and 2000 tasks with a search space of  10^7736.
instance39 has 4 resources,  80 machines, 288 periods and 2000 tasks with a search space of  10^7783.
instance40 has 4 resources,  90 machines, 288 periods and 4000 tasks with a search space of 10^15976.
instance41 has 4 resources,  90 machines, 288 periods and 4000 tasks with a search space of 10^15935.
instance42 has 4 resources,  90 machines, 288 periods and 4000 tasks with a search space of 10^15887.
instance43 has 4 resources,  90 machines, 288 periods and 4000 tasks with a search space of 10^15896.
instance44 has 4 resources,  90 machines, 288 periods and 4000 tasks with a search space of 10^15885.
instance45 has 4 resources, 100 machines, 288 periods and 5000 tasks with a search space of 10^20173.
instance46 has 4 resources, 100 machines, 288 periods and 5000 tasks with a search space of 10^20132.
instance47 has 4 resources, 100 machines, 288 periods and 5000 tasks with a search space of 10^20126.
instance48 has 4 resources, 100 machines, 288 periods and 5000 tasks with a search space of 10^20110.
instance49 has 4 resources, 100 machines, 288 periods and 5000 tasks with a search space of 10^20078.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-investment-ref">
				<title>Investment asset class allocation (Portfolio Optimization)</title>
				<simpara>
					Decide the relative quantity to invest in each asset class.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Risk maximum: the total standard deviation must not be higher than the standard deviation maximum.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Total standard deviation calculation takes asset class correlations into account by applying <link xlink:href="https://en.wikipedia.org/wiki/Modern_portfolio_theory">Markowitz Portfolio Theory</link>.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Region maximum: Each region has a quantity maximum.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Sector maximum: Each sector has a quantity maximum.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Maximize expected return.
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>de_smet_1 has 1 regions, 3 sectors and 11 asset classes with a search space of 10^4.
irrinki_1 has 2 regions, 3 sectors and 6 asset classes with a search space of 10^3.</screen>
					</para>
				</formalpara>
				<simpara>
					Larger datasets have not been created or tested yet, but should not pose a problem. A good source of data is <link xlink:href="https://www.portfoliovisualizer.com/asset-correlations">this Asset Correlation website</link>.
				</simpara>
			</section>
			<section xml:id="ex-conferenceScheduling-ref">
				<title>Conference scheduling</title>
				<simpara>
					Assign each conference talk to a timeslot and a room. Timeslots can overlap. Read/write to/from an <literal>*.xlsx</literal> file that can be edited with LibreOffice or Excel too.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Talk type of timeslot: The type of a talk must match the timeslot’s talk type.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room unavailable timeslots: A talk’s room must be available during the talk’s timeslot.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Room conflict: Two talks can’t use the same room during overlapping timeslots.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Speaker unavailable timeslots: Every talk’s speaker must be available during the talk’s timeslot.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Speaker conflict: Two talks can’t share a speaker during overlapping timeslots.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Generic purpose timeslot and room tags
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Speaker required timeslot tag: If a speaker has a required timeslot tag, then all his/her talks must be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Speaker prohibited timeslot tag: If a speaker has a prohibited timeslot tag, then all his/her talks cannot be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk required timeslot tag: If a talk has a required timeslot tag, then it must be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk prohibited timeslot tag: If a talk has a prohibited timeslot tag, then it cannot be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Speaker required room tag: If a speaker has a required room tag, then all his/her talks must be assigned to a room with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Speaker prohibited room tag: If a speaker has a prohibited room tag, then all his/her talks cannot be assigned to a room with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk required room tag: If a talk has a required room tag, then it must be assigned to a room with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk prohibited room tag: If a talk has a prohibited room tag, then it cannot be assigned to a room with that tag.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Talk mutually-exclusive-talks tag: Talks that share such a tag must not be scheduled in overlapping timeslots.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Talk prerequisite talks: A talk must be scheduled after all its prerequisite talks.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Theme track conflict: Minimize the number of talks that share a same theme tag during overlapping timeslots.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Sector conflict: Minimize the number of talks that share a same sector tag during overlapping timeslots.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Content audience level flow violation: For every content tag, schedule the introductory talks before the advanced talks.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Audience level diversity: For every timeslot, maximize the number of talks with a different audience level.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Language diversity: For every timeslot, maximize the number of talks with a different language.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Generic purpose timeslot and room tags
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Speaker preferred timeslot tag: If a speaker has a preferred timeslot tag, then all his/her talks should be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Speaker undesired timeslot tag: If a speaker has an undesired timeslot tag, then all his/her talks should not be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk preferred timeslot tag: If a talk has a preferred timeslot tag, then it should be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk undesired timeslot tag: If a talk has an undesired timeslot tag, then it should not be assigned to a timeslot with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Speaker preferred room tag: If a speaker has a preferred room tag, then all his/her talks should be assigned to a room with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Speaker undesired room tag: If a speaker has an undesired room tag, then all his/her talks should not be assigned to a room with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk preferred room tag: If a talk has a preferred room tag, then it should be assigned to a room with that tag.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Talk undesired room tag: If a talk has an undesired room tag, then it should not be assigned to a room with that tag.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Same day talks: All talks that share a same theme tag or content tag should be scheduled in the minimum number of days (ideally in the same day).
						</simpara>
					</listitem>
				</itemizedlist>
				<figure>
					<title>Value proposition</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/UseCasesAndExamples/ConferenceScheduling/conferenceSchedulingValueProposition.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>conferenceSchedulingValueProposition</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>18talks-6timeslots-5rooms    has  18 talks,  6 timeslots and  5 rooms with a search space of  10^26.
36talks-12timeslots-5rooms   has  36 talks, 12 timeslots and  5 rooms with a search space of  10^64.
72talks-12timeslots-10rooms  has  72 talks, 12 timeslots and 10 rooms with a search space of 10^149.
108talks-18timeslots-10rooms has 108 talks, 18 timeslots and 10 rooms with a search space of 10^243.
216talks-18timeslots-20rooms has 216 talks, 18 timeslots and 20 rooms with a search space of 10^552.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-rockTour-ref">
				<title>Rock tour</title>
				<simpara>
					Drive the rock bus from show to show, but schedule shows only on available days.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Schedule every required show.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Schedule as many shows as possible.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Medium constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Maximize revenue opportunity.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Minimize driving time.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Visit sooner than later.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Avoid long driving times.
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>47shows has 47 shows with a search space of 10^59.</screen>
					</para>
				</formalpara>
			</section>
			<section xml:id="ex-flightCrewScheduling-ref">
				<title>Flight crew scheduling</title>
				<simpara>
					Assign flights to pilots and flight attendants.
				</simpara>
				<simpara>
					Hard constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Required skill: each flight assignment has a required skill. For example, flight AB0001 requires 2 pilots and 3 flight attendants.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Flight conflict: each employee can only attend one flight at the same time
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Transfer between two flights: between two flights, an employee must be able to transfer from the arrival airport to the departure airport. For example, Ann arrives in Brussels at 10:00 and departs in Amsterdam at 15:00.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Employee unavailability: the employee must be available on the day of the flight. For example, Ann is on PTO on 1-Feb.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					Soft constraints:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							First assignment departing from home
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Last assignment arriving at home
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Load balance flight duration total per employee
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Problem size</title>
					<para>
						
<screen>175flights-7days-Europe  has 2 skills, 50 airports, 150 employees, 175 flights and  875 flight assignments with a search space of  10^1904.
700flights-28days-Europe has 2 skills, 50 airports, 150 employees, 700 flights and 3500 flight assignments with a search space of  10^7616.
875flights-7days-Europe  has 2 skills, 50 airports, 750 employees, 875 flights and 4375 flight assignments with a search space of 10^12578.
175flights-7days-US      has 2 skills, 48 airports, 150 employees, 175 flights and  875 flight assignments with a search space of  10^1904.</screen>
					</para>
				</formalpara>
			</section>
		</chapter>
	</part>
	<part xml:id="assembly-business-optimizer-vrp">
		<title>Deploying and using the vehicle route planning starter application for Red Hat Business Optimizer</title>
		<partintro>
			<simpara>
				As a developer, you can use the OptaWeb Vehicle Routing starter application to optimize your vehicle fleet deliveries.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						OpenJDK (JDK) 8 is installed. Red Hat build of Open JDK is available from the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</link> page in the Red Hat Customer Portal (login required).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Apache Maven 3.6 or higher is installed. Maven is available from the <link xlink:href="https://maven.apache.org/">Apache Maven Project</link> website.
					</simpara>
				</listitem>
			</itemizedlist>
		</partintro>
		<chapter xml:id="vrp-con_business-optimizer-vrp">
			<title>What is OptaWeb Vehicle Routing?</title>
			<simpara>
				The main purpose of many businesses is to transport various types of cargo. The goal of these businesses is to deliver a piece of cargo from the loading point to a destination and use its vehicle fleet in the most efficient way. One of the main objectives is to minimize travel costs which are measured in either time or distance.
			</simpara>
			<simpara>
				This type of optimization problem is referred to as the vehicle routing problem (VRP) and has many variations.
			</simpara>
			<simpara>
				Red Hat Business Optimizer can solve many of these vehicle routing variations and provides solution examples. Red Hat Business Optimizer enables developers to focus on modeling business rules and requirements instead of learning <link xlink:href="https://en.wikipedia.org/wiki/Constraint_programming">constraint programming</link> theory. OptaWeb Vehicle Routing expands the vehicle routing capabilities of Red Hat Business Optimizer by providing a reference implementation that answers questions such as these:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Where do I get the distances and travel times?
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						How do I visualize the solution on a map?
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						How do I build an application that runs in the cloud?
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				OptaWeb Vehicle Routing uses OpenStreetMap (OSM) data files. For information about OpenStreetMap, see the <link xlink:href="https://wiki.openstreetmap.org/wiki/About_OpenStreetMap">OpenStreetMap</link> web site.
			</simpara>
			<simpara>
				Use the following definitions when working with OptaWeb Vehicle Routing:
			</simpara>
			<simpara>
				<emphasis role="strong">Region</emphasis>: An arbitrary area on the map of Earth, represented by an OSM file. A region can be a country, a city, a continent, or a group of countries that are frequently used together. For example, the DACH region includes Germany (DE), Austria (AT), and Switzerland (CH).
			</simpara>
			<simpara>
				<emphasis role="strong">Country code</emphasis>: A two-letter code assigned to a country by the ISO-3166 standard. You can use a country code to filter geosearch results. Because you can work with a region that spans multiple countries (for example, the DACH region), OptaWeb Vehicle Routing accepts a list of country codes so that geosearch filtering can be used with such regions. For a list of country codes, see <link xlink:href="https://www.iso.org/iso-3166-country-codes.html"><emphasis>ISO 3166 Country Codes</emphasis></link>
			</simpara>
			<simpara>
				<emphasis role="strong">Geosearch</emphasis>: A type of query where you provide an address or a place name of a region as the search keyword and receive a number of GPS locations as a result. The number of locations returned depends on how unique the search keyword is. Because most place names are not unique, filter out nonrelevant results by including only places in the country or countries that are in your working region.
			</simpara>
		</chapter>
		<chapter xml:id="download-ref-imp-proc_business-optimizer-vrp">
			<title>Download and build the OptaWeb Vehicle Routing deployment files</title>
			<simpara>
				You must download and prepare the deployment files before building and deploying OptaWeb Vehicle Routing.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Navigate to the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</link> page in the Red Hat Customer Portal (login required), and select the product and version from the drop-down options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Product: Red Hat Decision Manager
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Version: 7.10
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Download <emphasis role="strong">Red Hat Decision Manager 7.10 Reference Implementations</emphasis> (<literal>rhdm-7.10.0-reference-implementation.zip</literal>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Download <emphasis role="strong">Red Hat Decision Manager 7.10 Maven Repository</emphasis> (<literal>rhdm-7.10.0-maven-repository.zip</literal>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Extract the <literal>rhdm-7.10.0-maven-repository.zip</literal> file.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Copy the contents of the <literal>rhdm-7.10.0-maven-repository/maven-repository</literal> subdirectory into the <literal>~/.m2/repository</literal> directory.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Extract the <literal>rhdm-7.10.0-reference-implementation.zip</literal> file. This archive contains three reference implementation ZIP files.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Extract the <literal>rhdm-7.10.0-optaweb-vehicle-routing.zip</literal> file.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Navigate to the <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources</literal> directory.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the following command to build OptaWeb Vehicle Routing:
					</simpara>
					
<screen>mvn clean package -DskipTests</screen>
				</listitem>
			</orderedlist>
		</chapter>
		<chapter xml:id="runlocally-con_business-optimizer-vrp">
			<title>Run OptaWeb Vehicle Routing locally using the runLocally.sh script</title>
			<simpara>
				Linux users can use the <literal>runLocally.sh</literal> Bash script to run OptaWeb Vehicle Routing.
			</simpara>
			<note>
				<simpara>
					The <literal>runLocally.sh</literal> script does not run on macOS. If you cannot use the <literal>runLocally.sh</literal> script, see <xref linkend="run-vrp-manually-proc_business-optimizer-vrp" />.
				</simpara>
			</note>
			<simpara>
				The <literal>runLocally.sh</literal> script automates the following setup steps that otherwise must be carried out manually:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Create the data directory.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Download selected OpenStreetMap (OSM) files from Geofabrik.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Try to associate a country code with each downloaded OSM file automatically.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Build the project if the standalone JAR file does not exist.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Launch OptaWeb Vehicle Routing by taking a single region argument or by selecting the region interactively.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				See the following sections for instructions about executing the <literal>runLocally.sh</literal> script:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<xref linkend="run-locally-qs-proc_business-optimizer-vrp" />
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<xref linkend="run-locally-interactive-proc_business-optimizer-vrp" />
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<xref linkend="run-locally-noninteractive-proc_business-optimizer-vrp" />
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<xref linkend="run-locally-airdistance-proc_business-optimizer-vrp" />
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="run-locally-qs-proc_business-optimizer-vrp">
				<title>Run the OptaWeb Vehicle Routing runLocally.sh script in quick start mode</title>
				<simpara>
					The easiest way to get started with OptaWeb Vehicle Routing is to run the <literal>runLocally.sh</literal> script without any arguments.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Internet access is available.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Enter the following command in the <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources</literal> directory.
						</simpara>
						
<screen> ./runLocally.sh</screen>
					</listitem>
					<listitem>
						<simpara>
							If prompted to create the <literal>.optaweb-vehicle-routing</literal> directory, enter <literal>y</literal>. You are prompted to create this directory the first time you run the script.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If prompted to download an OSM file, enter <literal>y</literal>. The first time that you run the script, OptaWeb Vehicle Routing downloads the Belgium OSM file.
						</simpara>
						<simpara>
							The application starts after the OSM file is downloaded.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To open the OptaWeb Vehicle Routing user interface, enter the following URL in a web browser:
						</simpara>
						
<screen>http://localhost:8080</screen>
					</listitem>
				</orderedlist>
				<note>
					<simpara>
						The first time that you run the script, it will take a few minutes to start because the OSM file must be imported by GraphHopper and stored as a road network graph. The next time you run the <literal>runlocally.sh</literal> script, load times will be significantly faster.
					</simpara>
				</note>
				<formalpara>
					<title>Next steps</title>
					<para>
						<xref linkend="use-vrp-con_business-optimizer-vrp" />
					</para>
				</formalpara>
			</section>
			<section xml:id="run-locally-interactive-proc_business-optimizer-vrp">
				<title>Run the OptaWeb Vehicle Routing runLocally.sh script in interactive mode</title>
				<simpara>
					Use interactive mode to see the list of downloaded OSM files and country codes assigned to each region. You can use the interactive mode to download additional OSM files from Geofabrik without visiting the website and choosing a destination for the download.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Internet access is available.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command to run the script in interactive mode:
						</simpara>
						
<screen>./runLocally.sh -i</screen>
					</listitem>
					<listitem>
						<simpara>
							At the <literal>Your choice</literal> prompt, enter <literal>d</literal> to display the download menu. A list of previously downloaded regions appears followed by a list of regions that you can download.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Optional: Select a region from the list of previously downloaded regions:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Enter the number associated with a region in the list of downloaded regions.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Press the Enter key.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							Optional: Download a region:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Enter the number associated with the region that you want to download. For example, to select the map of Europe, enter <literal>5</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									To download the map, enter <literal>d</literal> then press the Enter key.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									To download a specific region within the map, enter <literal>e</literal> then enter the number associated with the region that you want to download, and press the Enter key.
								</simpara>
								<warning>
									<title>Using large OSM files</title>
									<simpara>
										For the best user experience, use smaller regions such as individual European or US states. Using OSM files larger than 1 GB will require significant RAM size and take a lot of time (up to several hours) for the initial processing.
									</simpara>
								</warning>
								<simpara>
									The application starts after the OSM file is downloaded.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							To open the OptaWeb Vehicle Routing user interface, enter the following URL in a web browser:
						</simpara>
						
<screen>http://localhost:8080</screen>
					</listitem>
				</orderedlist>
				<formalpara>
					<title>Next steps</title>
					<para>
						<xref linkend="use-vrp-con_business-optimizer-vrp" />
					</para>
				</formalpara>
			</section>
			<section xml:id="run-locally-noninteractive-proc_business-optimizer-vrp">
				<title>Run the OptaWeb Vehicle Routing runLocally.sh script in non-interactive mode</title>
				<simpara>
					Use OptaWeb Vehicle Routing in non-interactive mode to start OptaWeb Vehicle Routing with a single command that includes an OSM file that you downloaded previously. This is useful when you want to switch between regions quickly or when doing a demo.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The OSM file for the region that you want to use has been downloaded. For information about downloading OSM files, see <xref linkend="run-locally-interactive-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Internet access is available.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Execute the following command where <literal>&lt;OSM_FILE_NAME&gt;</literal> is an OSM file that you downloaded previously:
						</simpara>
						
<screen>./runLocally.sh &lt;OSM_FILE_NAME&gt;</screen>
					</listitem>
				</orderedlist>
				<formalpara>
					<title>Next steps</title>
					<para>
						<xref linkend="use-vrp-con_business-optimizer-vrp" />
					</para>
				</formalpara>
			</section>
			<section xml:id="run-locally-airdistance-proc_business-optimizer-vrp">
				<title>Run the OptaWeb Vehicle Routing runLocally.sh script in air distance mode</title>
				<simpara>
					OptaWeb Vehicle Routing can work in air distance mode that calculates travel times based on the distance between two coordinates. Use this mode in situations where you need to get OptaWeb Vehicle Routing up and running as quickly as possible and do not want to use an OSM (OpenStreetMap) file. Air distance mode is only useful if you need to smoke-test OptaWeb Vehicle Routing and you do not need accurate travel times.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Internet access is available.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Run the <literal>runLocally.sh</literal> script with the <literal>--air</literal> argument to start OptaWeb Vehicle Routing in air distance mode:
						</simpara>
						
<programlisting language="bash" linenumbering="unnumbered">./runLocally.sh --air</programlisting>
					</listitem>
				</orderedlist>
				<formalpara>
					<title>Next steps</title>
					<para>
						<xref linkend="use-vrp-con_business-optimizer-vrp" />
					</para>
				</formalpara>
			</section>
			<section xml:id="adjust-data-dir-proc_business-optimizer-vrp">
				<title>Update the data directory</title>
				<simpara>
					You can update the data directory that OptaWeb Vehicle Routing uses if you want to use a different data directory. The default data directory is <literal>$HOME/.optaweb-vehicle-routing</literal>.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
				</itemizedlist>
				<itemizedlist>
					<title>Procedure</title>
					<listitem>
						<simpara>
							To use a different data directory, at its absolute path to the <literal>.DATA_DIR_LAST</literal> file in the current data directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To change country codes associated with a region, edit the corresponding file in the <literal>country_codes</literal> directory, in the current data directory.
						</simpara>
						<simpara>
							For example, if you downloaded an OSM file for Scotland and the script fails to guess the country code, set the content of <literal>country_codes/scotland-latest</literal> to GB.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To remove a region, delete the corresponding OSM file from <literal>openstreetmap</literal> directory in the data directory and delete the region’s directory in the <literal>graphhopper</literal> directory.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
		</chapter>
		<chapter xml:id="run-vrp-manually-proc_business-optimizer-vrp">
			<title>Configure and run OptaWeb Vehicle Routing manually</title>
			<simpara>
				The easiest way to run OptaWeb Vehicle Routing is to use the <literal>runlocally.sh</literal> script. However, if Bash is not available on your system you can manually complete the steps that the <literal>runlocally.sh</literal> script performs.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Internet access is available.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Download routing data.
					</simpara>
					<simpara>
						The routing engine requires geographical data to calculate the time it takes vehicles to travel between locations. You must download and store OpenStreetMap (OSM) data files on the local file system before you run OptaWeb Vehicle Routing.
					</simpara>
					<note>
						<simpara>
							The OSM data files are typically between 100 MB to 1 GB and take time to download so it is a good idea to download the files before building or starting the OptaWeb Vehicle Routing application.
						</simpara>
					</note>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Open <literal><link xlink:href="http://download.geofabrik.de/">http://download.geofabrik.de/</link></literal> in a web browser.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click a region in the <emphasis role="strong">Sub Region</emphasis> list, for example <emphasis role="strong">Europe</emphasis>. The subregion page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Sub Regions</emphasis> table, download the OSM file (<literal>.osm.pbf</literal>) for a country, for example Belgium.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Create the data directory structure.
					</simpara>
					<simpara>
						OptaWeb Vehicle Routing reads and writes several types of data on the file system. It reads OSM (OpenStreetMap) files from the <literal>openstreetmap</literal> directory, writes a road network graph to the <literal>graphhopper</literal> directory, and persists user data in a directory called <literal>db</literal>. Create a new directory dedicated to storing all of these data to make it easier to upgrade to a newer version of OptaWeb Vehicle Routing in the future and continue working with the data you created previously.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Create the <literal>$HOME/{VRP-DATA-DIR}</literal> directory.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Create the <literal>openstreetmap</literal> directory in the <literal>$HOME/{VRP-DATA-DIR}</literal> directory:
							</simpara>
							
<screen>$HOME/{VRP-DATA-DIR}
└── openstreetmap</screen>
						</listitem>
						<listitem>
							<simpara>
								Move all of your downloaded OSM files (files with the extension <literal>.osm.pbf</literal>) to the <literal>openstreetmap</literal> directory.
							</simpara>
							<simpara>
								The rest of the directory structure is created by the OptaWeb Vehicle Routing application when it runs for the first time. After that, your directory structure is similar to the following example:
							</simpara>
							
<screen>$HOME/{VRP-DATA-DIR}

├── db
│   └── vrp.mv.db
├── graphhopper
│   └── belgium-latest
└── openstreetmap
    └── belgium-latest.osm.pbf</screen>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources/optaweb-vehicle-routing-standalone/target</literal>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To run OptaWeb Vehicle Routing, enter the following command:
					</simpara>
					
<screen>java -jar optaweb-vehicle-routing-standalone-7.48.0.Final-redhat-00002.jar \
--app.persistence.h2-dir=$HOME/{VRP-DATA-DIR}/db \
--app.routing.gh-dir=$HOME/{VRP-DATA-DIR}/graphhopper \
--app.routing.osm-dir=$HOME/{VRP-DATA-DIR}/openstreetmap \
--app.routing.osm-file=&lt;OSM_FILE_NAME&gt; \
--app.region.country-codes=&lt;COUNTRY_CODE_LIST&gt; \</screen>
					<simpara>
						In this command, replace the following variables:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<literal>&lt;OSM_FILE_NAME&gt;</literal>: The OSM file for the region that you want to use and that you downloaded previously
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>&lt;COUNTRY_CODE_LIST&gt;</literal>: A comma-separated list of country codes used to filter geosearch queries. For a list of country codes, see <link xlink:href="https://www.iso.org/iso-3166-country-codes.html"><emphasis>ISO 3166 Country Codes</emphasis></link>.
							</simpara>
							<simpara>
								The application starts after the OSM file is downloaded.
							</simpara>
							<simpara>
								In the following example, OptaWeb Vehicle Routing downloads the OSM map of Central America (<literal>central-america-latest.osm.pbf</literal>) and searches in the countries Belize (BZ) and Guatemala (GT).
							</simpara>
							
<screen>java -jar optaweb-vehicle-routing-standalone-7.48.0.Final-redhat-00002.jar \
--app.persistence.h2-dir=/home/user/.optaweb-vehicle-routing/db \
--app.routing.osm-dir=/home/user/.optaweb-vehicle-routing/openstreetmap \
--app.routing.gh-dir=/home/user/.optaweb-vehicle-routing/graphhopper \
--app.routing.osm-file=central-america-latest.osm.pbf \
--app.region.country-codes=BZ,GT</screen>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						To open the OptaWeb Vehicle Routing user interface, enter the following URL in a web browser:
					</simpara>
					
<screen>http://localhost:8080</screen>
				</listitem>
			</orderedlist>
			<formalpara>
				<title>Next steps</title>
				<para>
					<xref linkend="use-vrp-con_business-optimizer-vrp" />
				</para>
			</formalpara>
		</chapter>
		<chapter xml:id="vrp-run-openshift-proc_business-optimizer-vrp">
			<title>Run OptaWeb Vehicle Routing on Red Hat OpenShift Container Platform</title>
			<simpara>
				Linux users can use the <literal>runOnOpenShift.sh</literal> Bash script to install OptaWeb Vehicle Routing on Red Hat OpenShift Container Platform.
			</simpara>
			<note>
				<simpara>
					The <literal>runOnOpenShift.sh</literal> script does not run on macOS.
				</simpara>
			</note>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You have access to an OpenShift cluster and the OpenShift command-line interface (<literal>oc</literal>) has been installed. For information about Red Hat OpenShift Container Platform, see <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.5/html-single/installing/index"><emphasis>Installing OpenShift Container Platform</emphasis></link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						OptaWeb Vehicle Routing has been successfully built with Maven as described in <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Internet access is available.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Log in to or start a Red Hat OpenShift Container Platform cluster.
					</simpara>
				</listitem>
			</orderedlist>
			<orderedlist numeration="loweralpha">
				<listitem>
					<simpara>
						Enter the following command where <literal>&lt;PROJECT_NAME&gt;</literal> is the name of your new project:
					</simpara>
					
<screen>oc new-project &lt;PROJECT_NAME&gt;</screen>
				</listitem>
				<listitem>
					<simpara>
						If necessary, change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources</literal>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the following command to execute the <literal>runOnOpenShift.sh</literal> script and download an OpenStreetMap (OSM) file:
					</simpara>
					
<screen>./runOnOpenShift.sh &lt;OSM_FILE_NAME&gt; &lt;COUNTRY_CODE_LIST&gt; &lt;OSM_FILE_DOWNLOAD_URL&gt;</screen>
					<simpara>
						In this command, replace the following variables:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<literal>&lt;OSM_FILE_NAME&gt;</literal>: The name of a file downloaded from <literal>&lt;OSM_FILE_DOWNLOAD_URL&gt;</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>&lt;COUNTRY_CODE_LIST&gt;</literal>: A comma-separated list of country codes used to filter geosearch queries. For a list of country codes, see <link xlink:href="https://www.iso.org/iso-3166-country-codes.html"><emphasis>ISO 3166 Country Codes</emphasis></link>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>&lt;OSM_FILE_DOWNLOAD_URL&gt;</literal>: The URL of an OSM data file in PBF format accessible from OpenShift. The file will be downloaded during backend startup and saved as <literal>/deployments/local/&lt;OSM_FILE_NAME&gt;</literal>.
							</simpara>
							<simpara>
								The following example configures OptaWeb Vehicle Routing to filter geosearch results to Belgium and downloads the latest Belgium OSM extract from Geofabrik:
							</simpara>
							<simpara>
								In the following example, OptaWeb Vehicle Routing downloads the OSM map of Central America (<literal>central-america-latest.osm.pbf</literal>) and searches in the countries Belize (BZ) and Guatemala (GT).
							</simpara>
							
<screen>./runOnOpenShift.sh central-america-latest.osm.pbf BZ,GT http://download.geofabrik.de/europe/central-america-latest.osm.pbf</screen>
						</listitem>
					</itemizedlist>
				</listitem>
			</orderedlist>
			<note>
				<simpara>
					For help with the <literal>runOnOpenShift.sh</literal> script, enter <literal>./runOnOpenShift.sh --help</literal>.
				</simpara>
			</note>
			<section xml:id="vrp-update-deployed-changes-proc_business-optimizer-vrp">
				<title>Updating the deployed OptaWeb Vehicle Routing application with local changes</title>
				<simpara>
					After you deploy your OptaWeb Vehicle Routing application on Red Hat OpenShift Container Platform, you can update the back end and front end.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing has been successfully built with Maven and deployed on OpenShift.
						</simpara>
					</listitem>
				</itemizedlist>
				<itemizedlist>
					<title>Procedure</title>
					<listitem>
						<simpara>
							To update the back end, perform the following steps:
						</simpara>
						<orderedlist numeration="arabic">
							<listitem>
								<simpara>
									Change the source code and build the back end module with Maven.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources/optaweb-vehicle-routing-backend</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the following command to start the OpenShift build:
								</simpara>
								
<programlisting language="shell" linenumbering="unnumbered">oc start-build backend --from-dir=. --follow</programlisting>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							To update the front end, perform the following steps:
						</simpara>
						<orderedlist numeration="arabic">
							<listitem>
								<simpara>
									Change the source code and build the front end module with the <literal>npm</literal> utility.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Change directory to <literal>sources/optaweb-vehicle-routing-frontend</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the following command to start the OpenShift build:
								</simpara>
								
<programlisting language="shell" linenumbering="unnumbered">oc start-build frontend --from-dir=docker --follow</programlisting>
							</listitem>
						</orderedlist>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Next steps</title>
					<para>
						<xref linkend="use-vrp-con_business-optimizer-vrp" />
					</para>
				</formalpara>
			</section>
		</chapter>
		<chapter xml:id="use-vrp-con_business-optimizer-vrp">
			<title>Using OptaWeb Vehicle Routing</title>
			<simpara>
				In the OptaWeb Vehicle Routing application, you can mark a number of locations on the map. The first location is assumed to be the depot. Vehicles must deliver goods from this depot to every other location that you marked.
			</simpara>
			<simpara>
				You can set the number of vehicles and the carrying capacity of every vehicle. However, the route is not guaranteed to use all vehicles. The application uses as many vehicles as required for an optimal route.
			</simpara>
			<simpara>
				The current version has certain limitations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Every delivery to a location is supposed to take one point of vehicle capacity. For example, a vehicle with a capacity of 10 can visit up to 10 locations before returning to the depot.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Setting custom names of vehicles and locations is not supported.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="vrp-create-route-proc_business-optimizer-vrp">
				<title>Creating a route</title>
				<simpara>
					To create an optimal route, use the <emphasis role="strong">Demo</emphasis> tab of the OptaWeb Vehicle Routing user interface.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing is running and you have access to the user interface.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In OptaWeb Vehicle Routing, click <emphasis role="strong">Demo</emphasis> to open the <emphasis role="strong">Demo</emphasis> tab.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Use the blue minus and plus buttons above the map to set the number of vehicles. Each vehicle has a default capacity of 10.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Use the plus button in a square on the map to zoom in as required.
						</simpara>
						<note>
							<simpara>
								Do not double-click to zoom in. A double click also creates a location.
							</simpara>
						</note>
					</listitem>
					<listitem>
						<simpara>
							Click a location for the depot.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click other locations on the map for delivery points.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you want to delete a location:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Hover the mouse cursor over the location to see the location name.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Find the location name in the list in the left part of the screen.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the <emphasis role="strong">X</emphasis> icon next to the name.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
				</orderedlist>
				<simpara>
					Every time you add or remove a location or change the number of vehicles, the application creates and displays a new optimal route. If the solution uses several vehicles, the application shows the route for every vehicle in a different color.
				</simpara>
			</section>
			<section xml:id="vrp-other-actions-proc_business-optimizer-vrp">
				<title>Viewing and setting other details</title>
				<simpara>
					You can use other tabs in OptaWeb Vehicle Routing user interface to view and set additional details.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing is running and you have access to the user interface.
						</simpara>
					</listitem>
				</itemizedlist>
				<itemizedlist>
					<title>Procedure</title>
					<listitem>
						<simpara>
							Click the <emphasis role="strong">Vehicles</emphasis> tab to view, add, and remove vehicles, and also set the capacity for every vehicle.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click the <emphasis role="strong">Visits</emphasis> tab to view and remove locations.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click the <emphasis role="strong">Route</emphasis> tab to select each vehicle and view the route for the selected vehicle.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
			<section xml:id="vrp-custom-data-sets-proc_business-optimizer-vrp">
				<title>Creating custom data sets with OptaWeb Vehicle Routing</title>
				<simpara>
					There is a built-in demo data set consisting of a several large Belgian cities. If you want to have more demos available in the <emphasis role="strong">Load demo</emphasis> menu, you can prepare your own data sets.
				</simpara>
				<formalpara>
					<title>Procedure</title>
					<para>
						To do that, follow these steps:
					</para>
				</formalpara>
				<orderedlist numeration="arabic">
					<listitem>
						<simpara>
							In OptaWeb Vehicle Routing, add a depot and a number of visits by clicking on the map or using geosearch.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Export</emphasis> and save the file in the data set_directory.
						</simpara>
						<note>
							<simpara>
								The data set directory is the directory specified in the <literal>app.demo.data-set-dir</literal> property.
							</simpara>
							<simpara>
								If the application is running through the <literal>runLocally.sh</literal> script, the data set directory is set to <literal>$HOME/{VRP-DATA-DIR}/dataset</literal>.
							</simpara>
							<simpara>
								Otherwise, the property is from <literal>application.properties</literal> and defaults to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources/optaweb-vehicle-routing-standalone/target/local/dataset</literal>.
							</simpara>
							<simpara>
								You can edit the <literal>app.demo.data-set-dir</literal> property to specify a diffent data directory.
							</simpara>
						</note>
					</listitem>
					<listitem>
						<simpara>
							Edit the YAML file and choose a unique name for the data set.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Restart the back end.
						</simpara>
					</listitem>
				</orderedlist>
				<simpara>
					After you restart the back end, files in the data set directory appear in the <emphasis role="strong">Load demo</emphasis> menu.
				</simpara>
			</section>
			<section xml:id="vrp-troubleshooting-proc_business-optimizer-vrp">
				<title>Troubleshooting OptaWeb Vehicle Routing</title>
				<simpara>
					If the OptaWeb Vehicle Routing behaves unexpectedly, follow this procedure to trouble-shoot.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							OptaWeb Vehicle Routing is running and behaving unexpectedly.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To identify issues, review the back end terminal output log.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To resolve issues, remove the back end database:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Stop the back end by pressing kbd:[Ctrl+C] in the back end terminal window.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Remove the directory <literal>optaweb-vehicle-routing/optaweb-vehicle-routing-backend/local/db</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Restart OptaWeb Vehicle Routing.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
				</orderedlist>
			</section>
		</chapter>
		<chapter remap="_optaweb_vehicle_routing_development_guide" xml:id="optaweb_vehicle_routing_development_guide">
			<title>OptaWeb Vehicle Routing development guide</title>
			<simpara>
				This section describes how to configure and run the back and front end modules in development mode.
			</simpara>
			<section xml:id="vrp-structure-con_business-optimizer-vrp">
				<title>OptaWeb Vehicle Routing project structure</title>
				<simpara>
					The OptaWeb Vehicle Routing project is a multi-module Maven project.
				</simpara>
				<figure>
					<title>Module dependency tree diagram</title>
					<mediaobject>
						<imageobject>
							<imagedata align="center" fileref="images/_images/vrp/modules.dot.svg" format="SVG" />
						</imageobject>
						<textobject>
							<phrase>modules.dot</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<simpara>
					The back end and front end modules are at the bottom of the module tree. These modules contain the application source code.
				</simpara>
				<simpara>
					The standalone module is an assembly module that combines the back end and front end into a single executable JAR file.
				</simpara>
				<simpara>
					The distribution module represents the final assembly step. It takes the standalone application and the documentation and wraps them in an archive that is easy to distribute.
				</simpara>
				<simpara>
					The back end and front end are separate projects that you can build and deploy separately. In fact, they are written in completely different languages and built with different tools. Both projects have tools that provide a modern developer experience with fast turn-around between code changes and the running application.
				</simpara>
				<simpara>
					The next sections describe how to run both back end and front end projects in development mode.
				</simpara>
			</section>
			<section xml:id="vrp-backend-con_business-optimizer-vrp">
				<title>The OptaWeb Vehicle Routing back end module</title>
				<simpara>
					The back end module contains a server-side application that uses Red Hat Business Optimizer to optimize vehicle routes. Optimization is a CPU-intensive computation that must avoid any I/O operations in order to perform to its full potential. Because one of the chief objectives is to minimize travel cost, either time or distance, OptaWeb Vehicle Routing keeps the travel cost information in RAM memory. While solving, Red Hat Business Optimizer needs to know the travel cost between every pair of locations entered by the user. This information is stored in a structure called the <emphasis>distance matrix</emphasis>.
				</simpara>
				<simpara>
					When you enter a new location, OptaWeb Vehicle Routing calculates the travel cost between the new location and every other location that has been entered so far, and stores the travel cost in the distance matrix. The travel cost calculation is performed by the <link xlink:href="https://github.com/graphhopper/graphhopper">GraphHopper</link> routing engine.
				</simpara>
				<simpara>
					The back end module implements the following additional supporting functionality:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Persistence
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							WebSocket connection for the front end
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Data set loading, export, and import
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					To learn more about the back end code architecture, see <xref linkend="backend-architecture-con_business-optimizer-vrp" />.
				</simpara>
				<simpara>
					The next sections describe how to configure and run the back end in development mode.
				</simpara>
				<section xml:id="vrp-backend-spring-proc_business-optimizer-vrp">
					<title>Running the OptaWeb Vehicle Routing back end module using the Spring Boot Maven plugin</title>
					<simpara>
						You can use the Spring Boot plug-in to run the OptaWeb Vehicle Routing back end module in development mode.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								OptaWeb Vehicle Routing has been configured as described in <xref linkend="run-vrp-manually-proc_business-optimizer-vrp" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources/optaweb-vehicle-routing-backend</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To run the back end in development mode, enter the following command:
							</simpara>
							
<programlisting language="shell" linenumbering="unnumbered">mvn spring-boot:run</programlisting>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="vrp-backend-intellij-proc_business-optimizer-vrp">
					<title>Running the OptaWeb Vehicle Routing back end module from IntelliJ IDEA</title>
					<simpara>
						You can use the IntelliJ IDEA to run the OptaWeb Vehicle Routing back end module to make it easier to develop your project.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In IntelliJ IDEA, enter <literal>org.optaweb.vehiclerouting.OptaWebVehicleRoutingApplication</literal>. This creates a run configuration that you will edit in the next step.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										Open the <literal>OptaWebVehicleRoutingApplication</literal> class in the <emphasis role="strong">Editor</emphasis> window.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click the green symbol in the editor window gutter and select <emphasis role="strong">Run OptaWebVehicleRoutingApplication</emphasis>. The run fails because the working directory is set to the root of the project where the back end module directory is expected.
									</simpara>
									<note>
										<simpara>
											See the <link xlink:href="https://www.jetbrains.com/help/idea/running-applications.html"><emphasis>Run Applications</emphasis></link> page on the IntelliJ IDEA web site to learn more about running applications in IntelliJ IDEA.
										</simpara>
									</note>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								Select <emphasis role="strong">Run→Edit Configurations</emphasis> and then select <emphasis role="strong">Spring Boot→OptaWebVehicleRoutingApplication</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Set <emphasis role="strong">Program arguments</emphasis> to <literal>--spring.profiles.active=local</literal> to activate the Spring profile called <literal>local</literal>. This directs the application to use configurations in the <literal>application-local.properties</literal> file.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Change <emphasis role="strong">Working directory</emphasis> to the back end module (<literal>optaweb-vehicle-routing-backend</literal>).
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Set <emphasis role="strong">On Update action</emphasis> to <emphasis role="strong">Hot swap classes and update trigger file if failed</emphasis>. This enables you to use the <emphasis role="strong">Update</emphasis> action to quickly restart the application.
							</simpara>
							<simpara>
								For more information, see <link xlink:href="https://blog.jetbrains.com/idea/2018/04/spring-and-spring-boot-in-intellij-idea-2018-1/"><emphasis>Spring and Spring Boot in IntelliJ IDEA 2018.1</emphasis></link>.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="vrp-auto-restart-con_business-optimizer-vrp">
					<title>Spring Boot automatic restart</title>
					<simpara>
						<link xlink:href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-restart">Automatic restart</link> is provided by Spring Boot DevTools. When you run the OptaWeb Vehicle Routing back end with the Spring Boot Maven plug-in, the application automatically restarts whenever files on the classpath change. Automatic restart scans files on the classpath, so you only need to recompile your changes to trigger application restart. No IDE configuration is needed.
					</simpara>
					<simpara>
						If your IDE has a compile-on-save feature (for example Eclipse or NetBeans), you just need to save the files that have changed since the last compilation.
					</simpara>
					<simpara>
						IntelliJ IDEA saves changes automatically and you need to select either <emphasis role="strong">Build[Recompile]</emphasis>, which recompiles the file in the active tab, or <emphasis role="strong">Build[Build Project]</emphasis> which recompiles all changes. For more information, see <link xlink:href="https://www.jetbrains.com/help/idea/compiling-applications.html">Compile and build applications with IntelliJ IDEA</link>.
					</simpara>
				</section>
				<section xml:id="vrp-backend-config-proc_business-optimizer-vrp">
					<title>Setting OptaWeb Vehicle Routing back end module configuration properties</title>
					<simpara>
						There are several ways that you can set OptaWeb Vehicle Routing back end module configuration properties. The methods in this section are useful if you are running OptaWeb Vehicle Routing locally.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								The OptaWeb Vehicle Routing reference implementation has been downloaded and extracted. For information, see <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Set configuration properties in the <literal>application.properties</literal> file:
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Change directory to <literal>rhdm-7.48.0.Final-redhat-00002-optaweb-vehicle-routing/sources/optaweb-vehicle-routing-backend/src/main/resources</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Open the <literal>application.properties</literal> file in a text editor.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit or add properties and then save the file.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										Use a command line argument when running the packaged application. In the following example, <literal>&lt;PROPERTY&gt;</literal> is the name of a property and <literal>&lt;VALUE&gt;</literal> is the value of that property:
									</simpara>
									
<screen>java -jar optaweb-vehicle-routing-backend.jar --app.&lt;PROPERTY&gt;=&lt;VALUE&gt;</screen>
								</listitem>
								<listitem>
									<simpara>
										Use an environment variable when running the application with <literal>spring-boot:run</literal>:
									</simpara>
									
<screen>&lt;PROPERTY&gt;=&lt;VALUE&gt; ./mvnw spring-boot:run</screen>
									<note>
										<simpara>
											This method requires <link xlink:href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-relaxed-binding">relaxed binding</link> which only works if the property is defined using <literal>@ConfigurationProperties</literal>.
										</simpara>
									</note>
								</listitem>
							</itemizedlist>
						</listitem>
					</orderedlist>
					<simpara>
						It is not possible to set properties by specifying <literal>-D</literal> when running the application using the Spring Boot Maven plugin (<literal>./mvnw spring-boot:run -D&lt;PROPERTY</literal>). Any system properties to be set by the plugin to the forked Java process in which the application runs must be specified in the <literal>pom.xml</literal> file using the <literal>systemPropertiesVariables</literal> attribute. For information about this attribute, see <link xlink:href="https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/html/#run-example-system-properties"><emphasis>Using System Properties</emphasis></link> on the Spring web site.
					</simpara>
					<simpara>
						You can learn more about configuring a Spring Boot application on the <link xlink:href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config">Spring Boot Externalized Configuration</link> page.
					</simpara>
					<tip>
					<simpara>
						Use <literal>src/main/resources/application-local.properties</literal> to store your personal configuration without affecting the Git working tree.
					</simpara>
					</tip>
					<simpara>
						For a complete list of OptaWeb Vehicle Routing configuration properties, see <xref linkend="backend-properties-ref_business-optimizer-vrp" />.
					</simpara>
					<simpara>
						For a complete list of application properties available in Spring Boot, see the <link xlink:href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html"><emphasis>Common Application Properties</emphasis></link> page on the Spring web site.
					</simpara>
				</section>
				<section xml:id="vrp-backend-logging-con_business-optimizer-vrp">
					<title>OptaWeb Vehicle Routing backend logging</title>
					<simpara>
						OptaWeb Vehicle Routing uses the SLF4J API and Logback as the logging framework. The Spring environment enables you to configure most logging aspects, including levels, patterns, and log files, in the same way as other configuration properties. The most common ways to set logging properties are by editing the <literal>application.properties</literal> file or using arguments such as <literal>&lt;PROPERTY&gt;=&lt;VALUE&gt;</literal> where <literal>&lt;PROPERTY&gt;</literal> is the name of a property and <literal>&lt;VALUE&gt;</literal> is the value of that property. See the <link xlink:href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-custom-log-levels">Spring Boot Logging</link> documentation for more information.
					</simpara>
					<simpara>
						The following examples are properties that you can use to control logging level of some parts of the application:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<literal>logging.level.org.optaweb.vehiclerouting=debug</literal>: Enables the debug level for the back end code
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>logging.level.org.optaplanner.core=warn</literal>: Reduces Red Hat Business Optimizer logging
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>logging.level.org.springframework.web.socket=trace</literal>: Accesses more details when investigating problems with WebSocket connection
							</simpara>
						</listitem>
					</itemizedlist>
				</section>
			</section>
			<section xml:id="vrp-frontend-proc_business-optimizer-vrp">
				<title>Working with the OptaWeb Vehicle Routing front end module</title>
				<simpara>
					The front end project was bootstrapped with <link xlink:href="https://create-react-app.dev/">Create React App</link>. Create React App provides a number of scripts and dependencies that help with development and with building the application for production.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							The OptaWeb Vehicle Routing reference implementation has been downloaded and extracted. For information, see <xref linkend="download-ref-imp-proc_business-optimizer-vrp" />.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							On Fedora, enter the following command to set up the development environment:
						</simpara>
						
<programlisting language="shell" linenumbering="unnumbered">sudo dnf install npm</programlisting>
						<simpara>
							See <link xlink:href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">Downloading and installing Node.js and npm</link> for more information about installing npm.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Change directory to <literal>optaweb-vehicle-routing-distribution-7.48.0.Final-redhat-00002/sources/optaweb-vehicle-routing-frontend</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Install <literal>npm</literal> dependencies:
						</simpara>
						
<programlisting language="shell" linenumbering="unnumbered">npm install</programlisting>
						<simpara>
							Unlike Maven, the <literal>npm</literal> package manager installs dependencies in <literal>node_modules</literal> under the project directory and does that only when you execute <literal>npm install</literal>. Whenever the dependencies listed in <literal>package.json</literal> change, for example when you pull changes to the master branch, you must execute <literal>npm install</literal> before you run the development server.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command to run the development server:
						</simpara>
						
<programlisting language="shell" linenumbering="unnumbered">npm start</programlisting>
					</listitem>
					<listitem>
						<simpara>
							If it does not open automatically, open <literal>http://localhost:3000/</literal> in a web browser.
						</simpara>
						<simpara>
							By default, the <literal>npm start</literal> command attempts to open this URL in your default browser.
						</simpara>
						<note>
							<simpara>
								If you do not want the <literal>npm start</literal> command to open a new browser tab each time you run it, export the <literal>BROWSER=none</literal> environment variable. You can use <literal>.env.local</literal> file to make this preference permanent. To do that, enter the following command:
							</simpara>
							
<programlisting language="shell" linenumbering="unnumbered">echo BROWSER=none &gt;&gt; .env.local</programlisting>
						</note>
						<simpara>
							The browser refreshes the page whenever you make changes in the front end source code. The development server process running in the terminal picks up the changes as well and prints compilation and lint errors to the console.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command to run tests:
						</simpara>
						
<screen>npm test</screen>
					</listitem>
					<listitem>
						<simpara>
							Change the value of the <literal>REACT_APP_BACKEND_URL</literal> environment variable to specify the location of the back end project to be used by <literal>npm</literal> when you execute <literal>npm start</literal> or <literal>npm run build</literal>, for example:
						</simpara>
						
<screen>REACT_APP_BACKEND_URL=http://10.0.0.123:8081</screen>
						<note>
							<simpara>
								Environment variables are hard coded inside the JavaScript bundle during the <literal>npm</literal> build process, so you must specify the back end location before you build and deploy the front end.
							</simpara>
						</note>
						<simpara>
							To learn more about the React environment variables, see <link xlink:href="https://create-react-app.dev/docs/adding-custom-environment-variables/"><emphasis>Adding Custom Environment Variables</emphasis></link>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To build the front end, enter one of the following commands:
						</simpara>
						
<screen>./mvnw install</screen>
						
<screen>mvn install</screen>
					</listitem>
				</orderedlist>
			</section>
		</chapter>
		<chapter xml:id="backend-architecture-con_business-optimizer-vrp">
			<title>OptaWeb Vehicle Routing back end architecture</title>
			<simpara>
				Domain model and use cases are essential for the application. The OptaWeb Vehicle Routing domain model is at the center of the architecture and is surround by the application layer that embeds use cases. Functions such as route optimization, distance calculation, persistence, and network communication are considered implementation details and are placed at the outermost layer of the architecture.
			</simpara>
			<figure>
				<title>Diagram of application layers</title>
				<mediaobject>
					<imageobject>
						<imagedata align="center" fileref="images/_images/vrp/backend-layers.svg" format="SVG" />
					</imageobject>
					<textobject>
						<phrase>backend layers</phrase>
					</textobject>
				</mediaobject>
			</figure>
			<section remap="_code_organization" xml:id="code_organization">
				<title>Code organization</title>
				<simpara>
					The back end code is organized in three layers, illustrated in the preceding graphic.
				</simpara>
				
<literallayout class="monospaced">org.optaweb.vehiclerouting
├── domain
├── plugin          # Infrastructure layer
│   ├── persistence
│   ├── planner
│   ├── routing
│   └── websocket
└── service         # Application layer
    ├── demo
    ├── distance
    ├── location
    ├── region
    ├── reload
    ├── route
    └── vehicle</literallayout>
				<simpara>
					The <literal>service</literal> package contains the application layer that implements use cases. The <literal>plugin</literal> package contains the infrastructure layer.
				</simpara>
				<simpara>
					Code in each layer is further organized by function. This means that each service or plug-in has its own package.
				</simpara>
			</section>
			<section remap="_dependency_rules" xml:id="dependency_rules">
				<title>Dependency rules</title>
				<simpara>
					Compile-time dependencies are only allowed to point from outer layers towards the center. Following this rule helps to keep the domain model independent of underlying frameworks and other implementation details and models the behavior of business entities more precisely. With presentation and persistence being pushed out to the periphery, it is easier to test the behavior of business entities and use cases.
				</simpara>
				<simpara>
					The domain has no dependencies.
				</simpara>
				<simpara>
					Services only depend on the domain. If a service needs to send a result (for example to the database or to the client), it uses an output boundary interface. Its implementation is injected by the <link xlink:href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans">Inversion of Control</link> (IoC) container.
				</simpara>
				<simpara>
					Plug-ins depend on services in two ways. First, they invoke services based on events such as a user input or a route update coming from the optimization engine. Services are injected into plug-ins which moves the burden of their construction and dependency resolution to the IoC container. Second, plug-ins implement service output boundary interfaces to handle use case results, for example persisting changes to the database or sending a response to the web UI.
				</simpara>
			</section>
			<section remap="_the_domain_package" xml:id="the_domain_package">
				<title>The domain package</title>
				<simpara>
					The <literal>domain</literal> package contains <emphasis>business objects</emphasis> that model the domain of this project, for example <literal>Location</literal>, <literal>Vehicle</literal>, <literal>Route</literal>. These objects are strictly business-oriented and must not be influenced by any tools and frameworks, for example object-relational mapping tools and web service frameworks.
				</simpara>
			</section>
			<section remap="_the_service_package" xml:id="the_service_package">
				<title>The service package</title>
				<simpara>
					The <literal>service</literal> package contains classes that implement <emphasis>use cases</emphasis>. A use case describes something that you want to do, for example adding a new location, changing vehicle capacity, or finding coordinates for an address. The business rules that govern use cases are expressed using the domain objects.
				</simpara>
				<simpara>
					Services often need to interact with plug-ins in the outer layer, such as persistence, web, and optimization. To satisfy the dependency rules between layers, the interaction between services and plug-ins is expressed in terms of interfaces that define the dependencies of a service. A plug-in can satisfy a dependency of a service by providing a bean that implements the boundary interface of the service. The Spring IoC container creates an instance of the plug-in bean and injects it to the service at runtime. This is an example of the inversion of control principle.
				</simpara>
			</section>
			<section remap="_the_plugin_package" xml:id="the_plugin_package">
				<title>The plugin package</title>
				<simpara>
					The <literal>plugin</literal> package contains infrastructure functions such as optimization, persistence, routing, and network.
				</simpara>
			</section>
		</chapter>
		<chapter xml:id="backend-properties-ref_business-optimizer-vrp">
			<title>OptaWeb Vehicle Routing back end configuration properties</title>
			<simpara>
				You can set the OptaWeb Vehicle Routing application properties listed in the following table.
			</simpara>
			<informaltable colsep="1" frame="all" rowsep="1">
				<tgroup cols="4">
					<colspec colname="col_1" colwidth="25*"></colspec>
					<colspec colname="col_2" colwidth="25*"></colspec>
					<colspec colname="col_3" colwidth="25*"></colspec>
					<colspec colname="col_4" colwidth="25*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Property</entry>
							<entry align="left" valign="top">Type</entry>
							<entry align="left" valign="top">Example</entry>
							<entry align="left" valign="top">Description</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.demo.data-set-dir</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Relative or absolute path
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>/home/user/{VRP-DATA-DIR}/dataset</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Custom data sets are loaded from this directory. Defaults to <literal>local/dataset</literal>.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.persistence.h2-dir</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Relative or absolute path
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>/home/user/{VRP-DATA-DIR}/db</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The directory used by H2 to store the database file. Defaults to <literal>local/db</literal>.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.region.country-codes</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								List of <literal><link xlink:href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2</link></literal> country codes
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>US</literal>, <literal>GB,IE</literal>, <literal>DE,AT,CH</literal>, may be empty
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Restricts geosearch results.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.routing.engine</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Enumeration
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>air</literal>, <literal>graphhopper</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Routing engine implementation. Defaults to <literal>graphhopper</literal>.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.routing.gh-dir</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Relative or absolute path
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>/home/user/{VRP-DATA-DIR}/graphhopper</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The directory used by GraphHopper to store road network graphs. Defaults to <literal>local/graphhopper</literal>.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.routing.osm-dir</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Relative or absolute path
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>/home/user/{VRP-DATA-DIR}/openstreetmap</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The directory that contains OSM files. Defaults to <literal>local/openstreetmap</literal>.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>app.routing.osm-file</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								File name
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>belgium-latest.osm.pbf</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Name of the OSM file to be loaded by GraphHopper. The file must be placed under <literal>app.routing.osm-dir</literal>.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>optaplanner.solver.termination.spent-limit</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>java.time.Duration</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>1m</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>150s</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>P2dT21h</literal> (<literal>PnDTnHnMn.nS</literal>)
									</simpara>
								</listitem>
							</itemizedlist>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								How long the solver should run after a location change occurs.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>server.address</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								IP address or hostname
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>10.0.0.123</literal>, <literal>my-vrp.geo-1.openshiftapps.com</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Network address to which to bind the server.
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal><literal>server.port</literal></literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Port number
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>4000</literal>, <literal>8081</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Server HTTP port.
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</chapter>
	</part>
	<part xml:id="assembly-optimizer-modifying-ER-template-IDE">
		<title>Running and modifying the employee rostering starter application for Red Hat Business Optimizer using an IDE</title>
		<partintro>
			<simpara>
				As a business rules developer, you can use an IDE to build, run, and modify the <literal>optaweb-employee-rostering</literal> starter application that uses the Red Hat Business Optimizer functionality.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You use an integrated development environment, such as Red Hat CodeReady Studio or IntelliJ IDEA.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You have an understanding of the Java language.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You have an understanding of React and TypeScript. This requirement is necessary to develop the OptaWeb UI.
					</simpara>
				</listitem>
			</itemizedlist>
		</partintro>
		<chapter xml:id="optashift-ER-overview-con_employee-rostering-ide">
			<title>Overview of the employee rostering starter application</title>
			<simpara>
				The employee rostering starter application assigns employees to shifts on various positions in an organization. For example, you can use the application to distribute shifts in a hospital between nurses, guard duty shifts across a number of locations, or shifts on an assembly line between workers.
			</simpara>
			<simpara>
				Optimal employee rostering must take a number of variables into account. For example, different skills can be required for shifts in different positions. Also, some employees might be unavailable for some time slots or might prefer a particular time slot. Moreover, an employee can have a contract that limits the number of hours that the employee can work in a single time period.
			</simpara>
			<simpara>
				The Red Hat Business Optimizer rules for this starter application use both hard and soft constraints. During an optimization, the planning engine may not violate hard constraints, for example, if an employee is unavailable (out sick), or that an employee cannot work two spots in a single shift. The planning engine tries to adhere to soft constraints, such as an employee’s preference to not work a specific shift, but can violate them if the optimal solution requires it.
			</simpara>
		</chapter>
		<chapter xml:id="optashift-ER-building-con">
			<title>Building and running the employee rostering starter application</title>
			<simpara>
				You can build the employee rostering starter application from the source code and run it as a JAR file.
			</simpara>
			<simpara>
				Alternatively, you can use your IDE, for example, Eclipse (including Red Hat CodeReady Studio), to build and run the application.
			</simpara>
			<section xml:id="er-deploy-prepare-proc">
				<title>Preparing deployment files</title>
				<simpara>
					You must download and prepare the deployment files before building and deploying the application.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Download the <literal>rhdm-7.10.0-reference-implementation.zip</literal> file from the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhdm&amp;productChanged=yes">Software Downloads</link> page for Red Hat Decision Manager 7.10.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Unzip the downloaded archive.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Copy the contents of the <literal>jboss-rhba-7.10.0.GA-maven-repository/maven-repository</literal> subdirectory into the <literal>~/.m2/repository</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Expand the <literal>rhdm-7.10.0-optaweb-employee-rostering.zip</literal> file that is extracted from the reference implementation archive.
						</simpara>
						<simpara>
							The <literal>optaweb-employee-rostering-distribution-7.48.0.Final-redhat-00002</literal> folder is created. This folder is the base folder in subsequent parts of this document.
						</simpara>
						<note>
							<simpara>
								File and folder names might have higher version numbers than specifically noted in this document.
							</simpara>
						</note>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="optashift-ER-running-jar-proc">
				<title>Running the Employee Rostering starter application JAR file</title>
				<simpara>
					You can run the Employee Rostering starter application from a JAR file included in the reference implementation download.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							You have downloaded and extracted the <literal>rhdm-7.10.0-reference-implementation.zip</literal> file as described in <xref linkend="er-deploy-prepare-proc" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A Java Development Kit is installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Maven is installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The host has access to the Internet. The build process uses the Internet for downloading Maven packages from external repositories.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In a command terminal, change to the <literal>sources</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command:
						</simpara>
						
<programlisting language="bash" linenumbering="unnumbered">mvn clean install -DskipTests</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Wait for the build process to complete.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Navigate to the <literal>optaweb-employee-rostering-distribution-7.48.0.Final-redhat-00002/sources/optaweb-employee-rostering-standalone/target</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command to run the Employee Rostering JAR file:
						</simpara>
						
<programlisting language="xml" linenumbering="unnumbered">java -jar optaweb-employee-rostering-standalone-*-exec.jar</programlisting>
						<note>
							<simpara>
								This command starts the employee rostering application with a non-production database. To start the employee rostering application with a production database, add the <literal>--spring.profiles.active=production</literal> argument to the preceding command.
							</simpara>
						</note>
					</listitem>
					<listitem>
						<simpara>
							To access the application, enter <literal>http://localhost:8080/</literal> in a web browser.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="optashift-ER-building-commandline-proc">
				<title>Building and running the Employee Rostering starter application using Maven</title>
				<simpara>
					You can use the command line to build and run the employee rostering starter application.
				</simpara>
				<simpara>
					If you use this procedure, the data is stored in memory and is lost when the server is stopped. To build and run the application with a database server for persistent storage, see <xref linkend="optashift-ER-building-commandline-db-proc" />.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							You prepared the deployment files as described in <xref linkend="er-deploy-prepare-proc" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A Java Development Kit is installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Maven is installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The host has access to the Internet. The build process uses the Internet for downloading Maven packages from external repositories.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Navigate to the <literal>optaweb-employee-rostering-backend</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command:
						</simpara>
						
<programlisting language="bash" linenumbering="unnumbered">mvn spring-boot:run</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Navigate to the <literal>optaweb-employee-rostering-frontend</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command:
						</simpara>
						
<programlisting language="bash" linenumbering="unnumbered">npm start</programlisting>
						<note>
							<simpara>
								If you use <literal>npm</literal> to start the server, <literal>npm</literal> monitors code changes.
							</simpara>
						</note>
					</listitem>
					<listitem>
						<simpara>
							To access the application, enter <literal>http://localhost:3000/</literal> in a web browser.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="optashift-ER-building-commandline-db-proc">
				<title>Building and running the employee rostering starter application with persistent data storage from the command line</title>
				<simpara>
					If you use the command line to build the employee rostering starter application and run it, you can provide a database server for persistent data storage.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							You prepared the deployment files as described in <xref linkend="er-deploy-prepare-proc" />.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A Java Development Kit is installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Maven is installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The host has access to the Internet. The build process uses the Internet for downloading Maven packages from external repositories.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							You have a deployed MySQL or PostrgeSQL database server.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In a command terminal, navigate to the <literal>optaweb-employee-rostering-standalone/target</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command to run the Employee Rostering JAR file:
						</simpara>
						
<programlisting language="bash" linenumbering="unnumbered">java -jar optaweb-employee-rostering-standalone-*-exec.jar --spring.profiles.active=production
spring.datasource.url=&lt;DATABASE_URL&gt; --spring.datasource.username=&lt;DATABASE_USER&gt; --spring.datasource.password=&lt;DATABASE_PASSWORD&gt;</programlisting>
						<simpara>
							In this example, replace the following placeholders:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<literal>&lt;DATABASE_URL&gt;</literal>: URL to connect to the database, for example <literal>jdbc:postgresql://postgresql:5432/MY_DATABASE</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<literal>&lt;DATABASE_USER&gt;</literal>: The user to connect to the database
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<literal>&lt;DATABASE_PASSWORD&gt;</literal>: The password for <literal>&lt;DATABASE_USER&gt;</literal>
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="optashift-ER-building-IntelliJ-IDEA-proc">
				<title>Building and running the employee rostering starter application using IntelliJ IDEA</title>
				<simpara>
					You can use IntelliJ IDEA to build and run the employee rostering starter application.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							You have downloaded the Employee Rostering source code, available from the <link xlink:href="https://github.com/kiegroup/optaweb-employee-rostering">Employee Rostering</link> GitHub page.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							IntelliJ IDEA, Maven, and Node.js are installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The host has access to the Internet. The build process uses the Internet for downloading Maven packages from external repositories.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Start IntelliJ IDEA.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							From the IntelliJ IDEA main menu, select <emphasis role="strong">File</emphasis> → <emphasis role="strong">Open</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Select the root directory of the application source and click <emphasis role="strong">OK</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							From the main menu, select <emphasis role="strong">Run</emphasis> → <emphasis role="strong">Edit Configurations</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the window that appears, expand <emphasis role="strong">Templates</emphasis> and select <emphasis role="strong">Maven</emphasis>. The Maven sidebar appears.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the Maven sidebar, select <literal>optaweb-employee-rostering-backend</literal> from the <emphasis role="strong">Working Directory</emphasis> menu.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In <emphasis role="strong">Command Line</emphasis>, enter <literal>spring-boot:run</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To start the back end, click <emphasis role="strong">OK</emphasis> .
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In a command terminal, navigate to the <literal>optaweb-employee-rostering-frontend</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the following command to start the front end:
						</simpara>
						
<screen>npm start</screen>
					</listitem>
					<listitem>
						<simpara>
							To access the application, enter <literal>http://localhost:3000/</literal> in a web browser.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</chapter>
		<chapter xml:id="er-overview-source-con">
			<title>Overview of the source code of the employee rostering starter application</title>
			<simpara>
				The employee rostering starter application consists of the following principal components:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						A <literal>backend</literal> that implements the rostering logic using Red Hat Business Optimizer and provides a REST API
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						A <literal>frontend</literal> module that implements a user interface using React and interacts with the <literal>backend</literal> module through the REST API
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				You can build and use these components independently. In particular, you can implement a different user interface and use the REST API to call the server.
			</simpara>
			<simpara>
				In addition to the two main components, the employee rostering template contains a generator of random source data (useful for demonstration and testing purposes) and a benchmarking application.
			</simpara>
			<formalpara>
				<title>Modules and key classes</title>
				<para>
					The Java source code of the employee rostering template contains several Maven modules. Each of these modules includes a separate Maven project file (<literal>pom.xml</literal>), but they are intended for building in a common project.
				</para>
			</formalpara>
			<simpara>
				The modules contain a number of files, including Java classes. This document lists all the modules, as well as the classes and other files that contain the key information for the employee rostering calculations.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<literal>optaweb-employee-rostering-benchmark</literal> module: Contains an additional application that generates random data and benchmarks the solution.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<literal>optaweb-employee-rostering-distribution</literal> module: Contains README files.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<literal>optaweb-employee-rostering-docs</literal> module: Contains documentation files.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<literal>optaweb-employee-rostering-frontend</literal> module: Contains the client application with the user interface, developed in React.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<literal>optaweb-employee-rostering-backend</literal> module: Contains the server application that uses Red Hat Business Optimizer to perform the rostering calculation.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.service.roster/rosterGenerator.java</literal>: Generates random input data for demonstration and testing purposes. If you change the required input data, change the generator accordingly.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.employee/EmployeeAvailability.java</literal>: Defines availability information for an employee. For every time slot an employee can be unavailable, available, or it can be designated a preferred time slot for the employee.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.employee/Employee.java</literal>: Defines an employee. An employee has a name, a list of skills, and works under a contract. Skills are represented by skill objects.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.roster/Roster.java</literal>: Defines the calculated rostering information.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.shift/Shift.java</literal>: Defines a shift to which an employee can be assigned. A shift is defined by a time slot and a spot. For example, in a diner there could be a shift in the <emphasis role="strong">Kitchen</emphasis> spot for the February 20 8AM-4PM time slot. Multiple shifts can be defined for a given spot and time slot. In this case, multiple employees are required for this spot and time slot.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.skill/Skill.java</literal>: Defines a skill that an employee can have.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.spot/Spot.java</literal>: Defines a spot where employees can be placed. For example, a <literal>Kitchen</literal> can be a spot.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.contract/Contract.java</literal>: Defines a contract that sets limits on work time for an employee in various time periods.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>src/main/java/org.optaweb.employeerostering.domain.tenant/Tenant.java</literal>: Defines a tenant. Each tenant represents an independent set of data. Changes in the data for one tenant do not affect any other tenants.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>*View.java</literal>: Classes related to domain objects that define value sets that are calculated from other information; the client application can read these values through the REST API, but not write them.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>*Service.java</literal>: Interfaces located in the service package that define the REST API. Both the server and the client application separately define implementations of these interfaces.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
		</chapter>
		<chapter xml:id="optashift-ER-modifying-proc">
			<title>Modifying the employee rostering starter application</title>
			<simpara>
				To modify the employee rostering starter application to suit your needs, you must change the rules that govern the optimization process. You must also ensure that the data structures include the required data and provide the required calculations for the rules. If the required data is not present in the user interface, you must also modify the user interface.
			</simpara>
			<simpara>
				The following procedure outlines the general approach to modifying the employee rostering starter application.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You have a build environment that successfully builds the application.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You can read and modify Java code.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Plan the required changes. Answer the following questions:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								What are the additional scenarios that <emphasis>must</emphasis> be avoided? These scenarios are <emphasis>hard constraints</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								What are the additional scenarios that the optimizer must <emphasis>try to avoid</emphasis> when possible? These scenarios are <emphasis>soft constraints</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								What data is required to calculate if each scenario is happening in a potential solution?
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Which of the data can be derived from the information that the user enters in the existing version?
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Which of the data can be hardcoded?
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Which of the data must be entered by the user and is not entered in the current version?
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						If any required data can be calculated from the current data or can be hardcoded, add the calculations or hardcoding to existing view or utility classes. If the data must be calculated on the server side, add REST API endpoints to read it.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If any required data must be entered by the user, add the data to the classes representing the data entities (for example, the <literal>Employee</literal> class), add REST API endpoints to read and write the data, and modify the user interface to enter the data.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						When all the data is available, modify the rules. For most modifications, you must add a new rule. The rules are located in the <literal>src/main/resources/org/optaweb/employeerostering/service/solver/employeeRosteringScoreRules.drl</literal> file of the <literal>optaweb-employee-rostering-backend</literal> module.
					</simpara>
					<simpara>
						Use the Drools language for the rules. For reference information about the Drools rule language, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.10/html-single/developing_decision_services_in_red_hat_decision_manager#assembly-drl-rules"><emphasis>Designing a decision service using DRL rules</emphasis></link>. Classes defined in the <literal>optaweb-employee-rostering-backend</literal> modules are available to the decision engine.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						After modifying the application, build and run it.
					</simpara>
				</listitem>
			</orderedlist>
		</chapter>
	</part>
	<part xml:id="assembly-optimizer-running-employee-rostering-openshift">
		<title>Deploying and using the employee rostering starter application for Red Hat Business Optimizer on Red Hat OpenShift Container Platform</title>
		<partintro>
			<simpara>
				As a business rules developer, you can test and interact with the Red Hat Business Optimizer functionality by quickly deploying the <literal>optaweb-employee-rostering</literal> starter project included in the Red Hat Decision Manager distribution to OpenShift.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You have access to a deployed OpenShift environment. For details, see the documentation for the OpenShift product that you use.
					</simpara>
				</listitem>
			</itemizedlist>
		</partintro>
		<chapter xml:id="optashift-ER-overview-con_employee-rostering-openshift">
			<title>Overview of the employee rostering starter application</title>
			<simpara>
				The employee rostering starter application assigns employees to shifts on various positions in an organization. For example, you can use the application to distribute shifts in a hospital between nurses, guard duty shifts across a number of locations, or shifts on an assembly line between workers.
			</simpara>
			<simpara>
				Optimal employee rostering must take a number of variables into account. For example, different skills can be required for shifts in different positions. Also, some employees might be unavailable for some time slots or might prefer a particular time slot. Moreover, an employee can have a contract that limits the number of hours that the employee can work in a single time period.
			</simpara>
			<simpara>
				The Red Hat Business Optimizer rules for this starter application use both hard and soft constraints. During an optimization, the planning engine may not violate hard constraints, for example, if an employee is unavailable (out sick), or that an employee cannot work two spots in a single shift. The planning engine tries to adhere to soft constraints, such as an employee’s preference to not work a specific shift, but can violate them if the optimal solution requires it.
			</simpara>
		</chapter>
		<chapter xml:id="optashift-ER-openshift-deploy-con">
			<title>Installing and starting the employee rostering starter application on OpenShift</title>
			<simpara>
				You can deploy the Employee Rostering starter application to Red Hat OpenShift Container Platform using an OpenShift template or using the <literal>provision.sh</literal> shell script that is provided in the reference implementation distribution.
			</simpara>
			<simpara>
				If you use an OpenShift template, Red Hat OpenShift Container Platform loads an image with the application from the Red Hat repository and deploys it. This method of deployment is a technological preview.
			</simpara>
			<simpara>
				If you use the script, it builds and packages the application source code locally and uploads it to the OpenShift environment for deployment. You can use this method when Java developer tools (Java Development Kit and Maven) and a bash shell command line are available.
			</simpara>
			<section xml:id="er-deploy-script-proc">
				<title>Deploying the application using the provided script</title>
				<simpara>
					You can deploy the Employee Rostering starter application to Red Hat OpenShift Container Platform using the provided script. The script builds and packages the application source code locally and uploads it to the OpenShift environment for deployment.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							You are logged in to the target OpenShift environment using the <literal>oc</literal> command line tool. For more information about this tool, see <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html-single/cli_reference/">CLI Reference</link>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Maven and a Java Development Kit are installed on your local system.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A <literal>bash</literal> shell environment is available on your local system.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Download the <literal>rhdm-7.10.0-maven-repository.zip</literal> file from the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhdm&amp;productChanged=yes">Software Downloads</link> page of the Red Hat Customer Portal.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Expand the downloaded archive.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Copy the contents of the <literal>jboss-rhba-7.10.0.GA-maven-repository/maven-repository</literal> subdirectory into the <literal>~/.m2/repository</literal> directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Download the <literal>rhdm-7.10.0-reference-implementation.zip</literal> file from the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhdm&amp;productChanged=yes">Software Downloads</link> page of the Red Hat Customer Portal.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Expand the downloaded archive.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Unzip the <literal>rhdm-7.10.0-optaweb-employee-rostering.zip</literal> file that is extracted from the reference implementation archive.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Using the command line, change to the <literal>optaweb-employee-rostering-distribution-7.48.0.Final-redhat-00002/sources</literal> folder.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To build the Employee Rostering application, run the following command:
						</simpara>
						
<screen>mvn clean install -DskipTests -DskipITs</screen>
					</listitem>
					<listitem>
						<simpara>
							Log in to an OpenShift account or a Red Hat Code Ready Container instance. In the following example, <literal>&lt;account-url&gt;</literal> is the URL for an OpenShift account or Red Hat Code Ready Container instance and <literal>&lt;login-token&gt;</literal> is the login token for that account:
						</simpara>
						
<screen>oc login &lt;account-url&gt; --token &lt;login-token&gt;</screen>
					</listitem>
					<listitem>
						<simpara>
							Create a new project to host Employee Rostering:
						</simpara>
						
<screen>oc new-project optaweb-employee-rostering</screen>
					</listitem>
					<listitem>
						<simpara>
							Run the provision script to build and deploy the application:
						</simpara>
						
<screen>./provision.sh</screen>
						<simpara>
							Compilation and packaging might take up to 10 minutes to complete. These processes continually show progress on the command line output.
						</simpara>
						<simpara>
							When the operation completes, the following message is displayed, where <literal>&lt;URL&gt;</literal> is the URL for the deployment:
						</simpara>
						
<screen>You can access the application at &lt;URL&gt; once the deployment is done.</screen>
					</listitem>
					<listitem>
						<simpara>
							Enter the URL that you used earlier in the procedure, for either an OpenShift account or Red Hat Code Ready Container instance, to access the deployed application. The first startup can take up to a minute because additional building is completed on the OpenShift platform.
						</simpara>
						<note>
							<simpara>
								If the application does not open a minute after clicking the link, perform a hard refresh of your browser page.
							</simpara>
						</note>
					</listitem>
				</orderedlist>
			</section>
		</chapter>
		<chapter xml:id="er-using-con">
			<title>Using the employee rostering starter application</title>
			<simpara>
				You can use the Web interface to use the Employee Rostering starter application. The interface is developed in ReactJS. You can also access the REST API to create a custom user interface as necessary.
			</simpara>
			<section xml:id="er-periods-con">
				<title>The draft and published periods</title>
				<simpara>
					At any particular moment, you can use the application to create the roster for a time period called a <emphasis>draft</emphasis> period; by default, the length of a draft period is three weeks.
				</simpara>
				<simpara>
					When the roster is final for the first week of the draft period, you can <emphasis>publish</emphasis> the roster. At this time, the roster for the first week of the current draft period becomes a <emphasis>published</emphasis> period. In a published period, the roster is fixed and you can no longer change it automatically (however, emergency manual changes are still possible). This roster can then be distributed to employees so they can plan their time around it. The draft period is shifted a week later.
				</simpara>
				<simpara>
					For example, assume that a draft period of September 1 to September 21 is set. You can automatically create the employee roster for this period. Then, when you publish the roster, the period up to September 7 becomes published. The new draft period is September 8 to September 28.
				</simpara>
				<simpara>
					For instructions about publishing the roster, see <xref linkend="er-publish-proc" />.
				</simpara>
			</section>
			<section xml:id="er-rotation-con">
				<title>The rotation pattern</title>
				<simpara>
					The employee rostering application supports a <emphasis>rotation pattern</emphasis> for shifts and employees.
				</simpara>
				<simpara>
					The rotation pattern is a "model" period of any time starting from two days. The pattern is not tied to a particular date.
				</simpara>
				<simpara>
					You can create time buckets for every day of the rotation. Every time bucket sets the time of a shift. Optionally, the template can include the name of the default employee for the shift.
				</simpara>
				<simpara>
					When you publish the roster, the application adds a new week to the draft period. At this time, the shifts and, if applicable, default employee names are copied from the rotation pattern to the new part of the draft period.
				</simpara>
				<simpara>
					When the end of the rotation pattern is reached, it is automatically restarted from the beginning.
				</simpara>
				<simpara>
					If weekend shift patterns in your organization are different from weekday shift patterns, use a rotation pattern of one week or a whole number of weeks (for example, 14, 21, or 28 days; the default length is 28 days). Then the pattern is always repeated on the same weekdays and you can set the shifts for different weekdays.
				</simpara>
				<simpara>
					For instructions about editing the rotation pattern, see <xref linkend="er-rotation-edit-proc" />.
				</simpara>
			</section>
			<section xml:id="er-tenants-con">
				<title>Selecting or creating a tenant</title>
				<simpara>
					The application supports multiple <emphasis>tenants</emphasis>. Each tenant is a completely independent set of data, including inputs and roster outputs. Changing data for one tenant does not affect other tenants. You can switch between tenants to use several independent data sets, for example, to prepare employee rosters for different locations.
				</simpara>
				<simpara>
					Several sample tenants are present after installation, representing several typical enterprise types such as a factory or hospital. You can select any of these tenants and modify them to suit your needs. You can also create a new tenant to enter data from a blank slate.
				</simpara>
				<section xml:id="er-tenant-select-proc">
					<title>Selecting a tenant</title>
					<simpara>
						You can select a tenant at any time. After you select a tenant, all the displayed information refers to this tenant and any changes you make affect only this tenant.
					</simpara>
					<formalpara>
						<title>Procedure</title>
						<para>
							To select a tenant in the Employee Rostering application web interface, in the top right part of the browser window click the <emphasis role="strong">Tenant</emphasis> list and select a tenant.
						</para>
					</formalpara>
				</section>
				<section xml:id="er-tenant-create-proc">
					<title>Creating a tenant</title>
					<simpara>
						You can create a new tenant to enter data from a blank slate. When creating a tenant, you can set several parameters that determine how the application prepares the output for this tenant.
					</simpara>
					<important>
						<simpara>
							You cannot change tenant parameters after you create the tenant.
						</simpara>
					</important>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								To create a new tenant in the Employee Rostering application web interface, in the top right corner of the browser window click the settings (gear) icon then click <emphasis role="strong">Add</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Set the following values:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Name</emphasis>: The name of the new tenant. This name is displayed in the list of tenants.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Schedule Start Date</emphasis>: The start date of the initial draft period. After you publish the roster, this date becomes the start date of the published period. The weekday of this date always remains the weekday that starts the draft period, any particular published period, and the first use of the rotation pattern. So it is usually most convenient to set the start date to the start of a week (Sunday or Monday).
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Draft Length (days)</emphasis>: The length of the draft period. The draft period stays the same length for the lifetime of the tenant.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Publish Notice (days)</emphasis>: The length of the publish notice period. Aspire to publish the final roster for any day at least this time in advance, so employees have enough notice to plan their personal life around their shift times. In the current version, this setting is not enforced in any way.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Publish Length (days)</emphasis>: The length of the period that becomes published (fixed) every time you publish the roster. In the current version, this setting is fixed at 7 days.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Rotation Length (days)</emphasis>: The length of the rotation pattern.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Timezone</emphasis>: The timezone of the environment to which the roster applies. This timezone is used to determine the "current" date for user interface display.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis>.
							</simpara>
						</listitem>
					</orderedlist>
					<simpara>
						The tenant is created with blank data.
					</simpara>
				</section>
			</section>
			<section xml:id="er-skills-proc">
				<title>Entering skills</title>
				<simpara>
					You can set all <emphasis>skills</emphasis> that can be necessary in any position within the roster. For example, a 24-hour diner can require cooking, serving, bussing, and hosting skills, in addition to skills such as general human resources and restaurant operations.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To enter or change skills in the Employee Rostering application web interface, click the <emphasis role="strong">Skills</emphasis> tab.
						</simpara>
						<simpara>
							You can see the numbers of currently visible skills in the top right part of the browser window, for example, <literal>1-15 of 34</literal>. You can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons to display other skills in the list.
						</simpara>
						<simpara>
							You can enter any part of a skill name in the <emphasis role="strong">Search</emphasis> box to search for skills.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Complete the following steps to add a new skill:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the name of the new skill in the text field under <emphasis role="strong">Name</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the Save icon.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							To edit the name of a skill, click the <emphasis role="strong">Edit Skill</emphasis> icon (pencil shape) next to the skill.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To delete a skill, click the <emphasis role="strong">Delete Skill</emphasis> icon (trashcan shape) next to the skill.
						</simpara>
					</listitem>
				</orderedlist>
				<note>
					<simpara>
						Within each tenant, skill names must be unique. You cannot delete a skill if the skill is associated with an employee or spot.
					</simpara>
				</note>
			</section>
			<section xml:id="er-spots-proc">
				<title>Entering spots</title>
				<simpara>
					You must enter the list of <emphasis>spots</emphasis>, which represent various positions at the business. For a diner, spots include the bar, the bussing stations, the front counter, the various kitchen stations, the serving areas, and the office.
				</simpara>
				<simpara>
					For each spot, you can select one or more required skills from the list that you entered in the <emphasis role="strong">Skills</emphasis> tab. The application rosters only employees that have all of the required skills for a spot into that spot. If the spot has no required skill, the application can roster any employee into the spot.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To enter or change spots in the Employee Rostering application web interface, click the <emphasis role="strong">Spots</emphasis> tab. You can enter any part of a spot name in the <emphasis role="strong">Search</emphasis> box to search for spots.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Complete the following steps to add a new spot:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add Spot</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the name of the new spot in the text field under <emphasis role="strong">Name</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Optional: Select one or more skills from the drop-down list under <emphasis role="strong">Required skill set</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the Save icon.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							To edit the name and required skills for a spot, click the <emphasis role="strong">Edit Spot</emphasis> icon (pencil shape) next to the spot.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To delete a spot, click the <emphasis role="strong">Delete Spot</emphasis> icon (trashcan shape) next to the spot.
						</simpara>
					</listitem>
				</orderedlist>
				<note>
					<simpara>
						Within each tenant, spot names must be unique. You cannot delete a spot when any shifts are created for it.
					</simpara>
				</note>
			</section>
			<section xml:id="er-contracts-proc">
				<title>Entering the list of contracts</title>
				<simpara>
					You must enter the list of all of the types of contracts that the business uses for employees.
				</simpara>
				<simpara>
					A contract determines the maximum time that the employee can work in a day, calendar week, calendar month, or calendar year.
				</simpara>
				<simpara>
					When creating a contract, you can set any of the limitations or none at all. For example, a part-time employee might not be allowed to work more than 20 hours in a week, while a full-time employee might be limited to 10 hours in a day and 1800 hours in a year. Another contract might include no limitations on worked hours.
				</simpara>
				<simpara>
					You must enter all work time limits for contracts in minutes.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To enter or change the list of contracts in the Employee Rostering application web interface, click the <emphasis role="strong">Contracts</emphasis> tab.
						</simpara>
						<simpara>
							You can see the numbers of currently visible contracts in the top right part of the browser window, for example, <literal>1-15 of 34</literal>. You can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons to display other contracts in the list.
						</simpara>
						<simpara>
							You can enter any part of a contract name in the <emphasis role="strong">Search</emphasis> box to search for contracts.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Complete the following steps to add a new contract:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the name of the contract in the text field under <emphasis role="strong">Name</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the required time limits under <emphasis role="strong">Maximum minutes</emphasis>:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											If the employee must not work more than a set time per day, enable the check box at <emphasis role="strong">Per Day</emphasis> and enter the amount of minutes in the field next to this check box.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If the employee must not work more than a set time per calendar week, enable the check box at <emphasis role="strong">Per Week</emphasis> and enter the amount of minutes in the field next to this check box.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If the employee must not work more than a set time per calendar month, enable the check box at <emphasis role="strong">Per Month</emphasis> and enter the amount of minutes in the field next to this check box.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If the employee must not work more than a set time per calendar year, enable the check box at <emphasis role="strong">Per Year</emphasis> and enter the amount of minutes in the field next to this check box.
										</simpara>
									</listitem>
								</itemizedlist>
							</listitem>
							<listitem>
								<simpara>
									Click the Save icon.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							To edit the name and time limits for a contract, click the <emphasis role="strong">Edit Contract</emphasis> icon (pencil shape) next to the name of the contract.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To delete a contract, click the <emphasis role="strong">Delete Contract</emphasis> icon (trashcan shape) next to the name of the contract.
						</simpara>
					</listitem>
				</orderedlist>
				<note>
					<simpara>
						Within each tenant, contract names must be unique. You cannot delete a contract if it is assigned to any employee.
					</simpara>
				</note>
			</section>
			<section xml:id="er-employees-proc">
				<title>Entering the list of employees</title>
				<simpara>
					You must enter the list of all employees of the business, the skills they possess, and the contracts that apply to them. The application rosters these employees to spots according to their skills and according to the work time limits in the contracts.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To enter or change the list of employees in the Employee Rostering application web interface, click the <emphasis role="strong">Employees</emphasis> tab.
						</simpara>
						<simpara>
							You can see the numbers of currently visible employees in the top right part of the browser window, for example, <literal>1-15 of 34</literal>. You can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons to display other employees in the list.
						</simpara>
						<simpara>
							You can enter any part of an employee name in the <emphasis role="strong">Search</emphasis> box to search for employees.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Complete the following steps to add a new employee:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Click <emphasis role="strong">Add</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the name of the employee in the text field under <emphasis role="strong">Name</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Optional: Select one or more skills from the drop-down list under <emphasis role="strong">Skill set</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Select a contract from the drop-down list under <emphasis role="strong">Contract</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the Save icon.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							To edit the name and skills for an employee, click the <emphasis role="strong">Edit Employee</emphasis> icon (pencil shape) next to the name of the employee.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To delete an employee, click the <emphasis role="strong">Delete Employee</emphasis> icon (trashcan shape) next to the name of the employee.
						</simpara>
					</listitem>
				</orderedlist>
				<note>
					<simpara>
						Within each tenant, employee names must be unique. You cannot delete employees if they are rostered to any shifts.
					</simpara>
				</note>
			</section>
			<section xml:id="er-availability-proc">
				<title>Setting employee availability</title>
				<simpara>
					You can set the availability of employees for particular time spans.
				</simpara>
				<simpara>
					If an employee is <emphasis>unavailable</emphasis> for a particular time span, the employee can never be assigned to any shift during this time span (for example, if the employee has called in sick or is on vacation). <emphasis>Undesired</emphasis> and <emphasis>desired</emphasis> are employee preferences for particular time spans; the application accommodates them when possible.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To view and edit employee availability in the Employee Rostering application web interface, click the <emphasis role="strong">Availability Roster</emphasis> tab.
						</simpara>
						<simpara>
							In the top left part of the window, you can see the dates for which the roster is displayed. To view other weeks, you can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons next to the <emphasis role="strong">Week of</emphasis> field. Alternatively, you can click the date field and change the date to view the week that includes this date.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To create an availability entry for an employee, click empty space on the schedule and then select an employee. Initially, an <literal>Unavailable</literal> entry for the entire day is created.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To change an availability entry, click the entry. You can change the following settings:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<emphasis role="strong">From</emphasis> and <emphasis role="strong">To</emphasis> date and time: The time span to which the availability entry applies.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Status: you can select <emphasis role="strong">Unavailable</emphasis>, <emphasis role="strong">Desired</emphasis>, or <emphasis role="strong">Undesired</emphasis> status from a drop-down list.
								</simpara>
								<simpara>
									To save the entry, click <emphasis role="strong">Apply</emphasis>.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							To delete an availability entry, click the entry, then click <emphasis role="strong">Delete availability</emphasis>.
						</simpara>
						<simpara>
							You can also change or delete an availability entry by moving the mouse pointer over the entry and then clicking one of the icons displayed over the entry:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Click the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/unavailable-icon.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>Unavailable</phrase>
										</textobject>
									</inlinemediaobject>
									 icon to set the status of the entry to <emphasis role="strong">Unavailable</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/undesired-icon.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>Undesired</phrase>
										</textobject>
									</inlinemediaobject>
									 icon to set the status of the entry to <emphasis role="strong">Undesired</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/desired-icon.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>Desired</phrase>
										</textobject>
									</inlinemediaobject>
									 icon to set the status of the entry to <emphasis role="strong">Desired</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Click the 
									<inlinemediaobject>
										<imageobject>
											<imagedata fileref="images/_images/employee-rostering/delete-icon.png" format="PNG" />
										</imageobject>
										<textobject>
											<phrase>Delete</phrase>
										</textobject>
									</inlinemediaobject>
									 icon to delete the entry.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</orderedlist>
				<important>
					<simpara>
						If an employee is already assigned to a shift and then you create or change an availability entry during this shift, the assignment is not changed automatically. You must create the employee shift roster again to apply new or changed availability entries.
					</simpara>
				</important>
			</section>
			<section xml:id="er-shiftroster-proc">
				<title>Viewing and editing shifts in the shift roster</title>
				<simpara>
					The Shift Roster is a table of all spots and all possible time spans.
				</simpara>
				<simpara>
					If an employee must be present in a spot during a time span, a <emphasis>shift</emphasis> must exist for this spot and this time span. If a spot requires several employees at the same time, you can create several shifts for the same spot and time span.
				</simpara>
				<simpara>
					Each shift is represented by a rectangle at the intersection of a spot (row) and time span (column).
				</simpara>
				<simpara>
					When new time is added to the draft period, the application copies the shifts (and default employees, if present) from the rotation pattern into this new part of the draft period. You can also manually add and edit shifts in the draft period.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To view and edit the shift roster in the Employee Rostering application web interface, click the <emphasis role="strong">Shift</emphasis> tab.
						</simpara>
						<simpara>
							In the top left part of the window, you can see the dates for which the roster is displayed. To view other weeks, you can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons next to the <emphasis role="strong">Week of</emphasis> field. Alternatively, you can click the date field and change the date to view the week that includes this date.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To add a shift, click an open area of the schedule. The application adds a shift, determining the slot and time span automatically from the location of the click.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To edit a shift, click the shift. You can set the following values for a shift:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<emphasis role="strong">From</emphasis> and <emphasis role="strong">To</emphasis> date and time: The exact time and duration of the shift.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Employee</emphasis>: The employee assigned to the shift.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Pinned</emphasis>: Whether the employee is <emphasis>pinned</emphasis> to the shift. If an employee is pinned, automatic employee rostering cannot change the assignment of the employee to the shift. A pinned employee is not automatically replicated to any other shift.
								</simpara>
								<simpara>
									To save the changes, click <emphasis role="strong">Apply</emphasis>.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							To delete a shift, click the shift, and then click <emphasis role="strong">Delete shift</emphasis>.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="er-solve-proc">
				<title>Creating and viewing the employee shift roster</title>
				<simpara>
					You can use the application to create and view the optimal shift roster for all employees.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To view and edit the shift roster in the Employee Rostering application web interface, click the <emphasis role="strong">Shift</emphasis> tab.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To create the optimal shift roster, click <emphasis role="strong">Schedule</emphasis>. The application takes 30 seconds to find the optimal solution.
						</simpara>
					</listitem>
				</orderedlist>
				<formalpara>
					<title>Result</title>
					<para>
						When the operation is finished, the Shift Roster view contains the optimal shift roster. The new roster is created for the draft period; the operation does not modify the published periods.
					</para>
				</formalpara>
				<simpara>
					In the top left part of the window, you can see the dates for which the roster is displayed. To view other weeks, you can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons next to the <emphasis role="strong">Week of</emphasis> field. Alternatively, you can click the date field and change the date to view the week that includes this date.
				</simpara>
				<simpara>
					In the draft period, the borders of boxes that represent shifts are dotted lines. In the published periods, the borders are unbroken lines.
				</simpara>
				<simpara>
					The color of the boxes that represent shifts shows the constraint status of every shift:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Strong green: Soft constraint matched; for example, the shift is in a "desired" timeslot for the employee.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Pale green: No constraint broken.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Grey: Soft constraint broken; for example, the shift is in an "undesired" timeslot for the employee.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Yellow: Medium constraint broken; for example, no employee is assigned to the shift.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Red: Hard constraint broken; for example, an employee has two shifts at the same time.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
			<section xml:id="er-individualroster-proc">
				<title>Viewing employee shifts</title>
				<simpara>
					You can view the assigned shifts for particular employees in an employee-centric table. The information is the same as the Shift Roster, but the viewing format might be more convenient for informing employees about their assigned shifts.
				</simpara>
				<formalpara>
					<title>Procedure</title>
					<para>
						To view a table of employees and shifts in the Employee Rostering application web interface, click the <emphasis role="strong">Availability Roster</emphasis> tab.
					</para>
				</formalpara>
				<simpara>
					In the top left part of the window, you can see the dates for which the roster is displayed. To view other weeks, you can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons next to the <emphasis role="strong">Week of</emphasis> field. Alternatively, you can click the date field and change the date to view the week that includes this date.
				</simpara>
				<simpara>
					You can see the numbers of currently visible employees in the top right part of the browser window, for example, <literal>1-10 of 34</literal>. You can use the <emphasis role="strong">&lt;</emphasis> and <emphasis role="strong">&gt;</emphasis> buttons next to the numbers to display other employees in the list.
				</simpara>
				<simpara>
					In the draft period, the borders of boxes representing shifts are dotted lines. In the published periods, the borders are unbroken lines.
				</simpara>
			</section>
			<section xml:id="er-publish-proc">
				<title>Publishing the shift roster</title>
				<simpara>
					When you publish the shift roster, the first week of the draft period becomes published. Automatic employee rostering no longer changes any shift assignments in the published period, though emergency manual changing is still possible. The draft period is shifted one week later. For details about draft and published periods, see <xref linkend="er-periods-con" />.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To view and edit the shift roster in the Employee Rostering application web interface, click the <emphasis role="strong">Shift</emphasis> tab.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Review the shift roster for the first week of the draft period to ensure that it is acceptable.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Publish</emphasis>.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="er-rotation-edit-proc">
				<title>Viewing and editing the rotation pattern</title>
				<simpara>
					The rotation pattern enables you to add, move, and delete shifts so you can manage your employee resources efficiently. It is defined by time buckets and seats.
				</simpara>
				<informalfigure>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/_images/employee-rostering/rotation.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>rotation</phrase>
					</textobject>
				</mediaobject>
				</informalfigure>
				<itemizedlist>
					<listitem>
						<simpara>
							A time bucket describes a time slot (for example, 9:00 a.m. to 5:00 p.m.) for a particular spot or location <emphasis role="strong">(A)</emphasis> (for example, Anaesthetics), over two or more days, and any skills that are required (for example, firearm training).
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							A seat <emphasis role="strong">(B)</emphasis> is an employee assignment for a particular day in a specific time bucket.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							An employee stub is an icon that represents an employee that is available to be assigned to a time bucket. Employee stubs are listed in the <emphasis role="strong">Employee Stub List</emphasis>.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					For more information about the rotation pattern, see <xref linkend="er-rotation-con" />.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							To view and edit the rotation pattern in the Employee Rostering application web interface, click the <emphasis role="strong">Rotation</emphasis> tab.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Select a spot from the <emphasis role="strong">Rotation</emphasis> menu.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To add a time bucket, click <emphasis role="strong">Add New Time Bucket</emphasis>. The <emphasis role="strong">Creating Working Time Bucket</emphasis> dialog appears.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Specify a start and end time, select any additional required skills, select the days for this time bucket, and click <emphasis role="strong">Save</emphasis>. The unassigned seats for that time bucket appears on the <emphasis role="strong">Rotation</emphasis> page organized by time ranges.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To create an employee stub list so that you can add employees to the rotation, click <emphasis role="strong">Edit Employee Stub List</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the <emphasis role="strong">Edit Employee Stub List</emphasis> dialog, click <emphasis role="strong">Add Employee</emphasis> and select an employee from the list.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Add all of the employees required for this stub list and click <emphasis role="strong">Save</emphasis>. The employees appear above the time buckets on the <emphasis role="strong">Rotation</emphasis> page.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click an employee icon to select an employee from the employee stub list.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click and drag the mouse over the seats of a time bucket to assign the selected employee to those seats. The seat is populated with the employee icon.
						</simpara>
						<note>
							<simpara>
								A time bucket can only have one employee assigned to it for each day. To add multiple employees to the same time bucket, copy the time bucket and change the employee name as required.
							</simpara>
						</note>
					</listitem>
					<listitem>
						<simpara>
							To provision the schedule, click <emphasis role="strong">Scheduling</emphasis> and select the spot that you created the rotation for.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Provision</emphasis> and specify the date range.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Deselect the spots that you do not want to include in this schedule.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click the arrow next to the selected spot and deselect any time buckets that you do not want to use in your schedule.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Provision Shifts</emphasis>. The calendar is populated with shifts generated from the time buckets.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							To modify a shift, click a generated shift on the calendar.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</chapter>
	</part>
	<part xml:id="assembly-business-optimizer-springboot">
		<title>Creating a school timetable using Red Hat Business Optimizer with Spring Boot</title>
		<partintro>
			<simpara>
				This guide walks you through the process of creating a Spring Boot application with Red Hat Business Optimizer’s constraint solving artificial intelligence (AI). You will build a REST application that optimizes a school timetable for students and teachers.
			</simpara>
			<informalfigure>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/_images/optimizer/timeTableAppScreenshot.png" format="PNG" />
				</imageobject>
				<textobject>
					<phrase>timeTableAppScreenshot</phrase>
				</textobject>
			</mediaobject>
			</informalfigure>
			<simpara>
				Your service will assign <literal>Lesson</literal> instances to <literal>Timeslot</literal> and <literal>Room</literal> instances automatically by using AI to adhere to the following hard and soft <emphasis>scheduling constraints</emphasis>:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						A room can have at most one lesson at the same time.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						A teacher can teach at most one lesson at the same time.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						A student can attend at most one lesson at the same time.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						A teacher prefers to teach in a single room.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						A teacher prefers to teach sequential lessons and dislikes gaps between lessons.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Mathematically speaking, school timetabling is an <emphasis>NP-hard</emphasis> problem. That means it is difficult to scale. Simply iterating through all possible combinations with brute force would take millions of years for a non-trivial dataset, even on a supercomputer. Fortunately, AI constraint solvers such as Red Hat Business Optimizer have advanced algorithms that deliver a near-optimal solution in a reasonable amount of time. What is considered to be a reasonable amount of time is subjective and depends on the goals of your problem.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						OpenJDK 8 or later is installed. Red Hat build of Open JDK is available from the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</link> page in the Red Hat Customer Portal (login required).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Apache Maven 3.2 or higher is installed. Maven is available from the <link xlink:href="https://maven.apache.org/">Apache Maven Project</link> website.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						An IDE, such as IntelliJ IDEA, VSCode, Eclipse, or NetBeans is available.
					</simpara>
				</listitem>
			</itemizedlist>
		</partintro>
		<chapter xml:id="spring-boot-ref-download-proc_business-optimizer-spring-boot">
			<title>Downloading and building the school timetable reference implementation</title>
			<simpara>
				If you want to see a completed example of the school timetable project for Red Hat Business Optimizer with Spring Boot product, download the starter application from the Red Hat Customer Portal.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Navigate to the <link xlink:href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</link> page in the Red Hat Customer Portal (login required), and select the product and version from the drop-down options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Product: Red Hat Decision Manager
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Version: 7.10
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Download <emphasis role="strong">Red Hat Decision Manager 7.10 Reference Implementations</emphasis> (<literal>rhdm-7.10.0-reference-implementation.zip</literal>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Download <emphasis role="strong">Red Hat Decision Manager 7.10 Maven Repository</emphasis> (<literal>rhdm-7.10.0-maven-repository.zip</literal>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Extract the <literal>rhdm-7.10.0-maven-repository.zip</literal> file.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Copy the contents of the <literal>rhdm-7.10.0-maven-repository/maven-repository</literal> subdirectory into the <literal>~/.m2/repository</literal> directory.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Extract the <literal>rhdm-7.10.0-reference-implementation.zip</literal> file. This archive contains reference implementation ZIP files.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Extract the <literal>rhdm-7.10.0-reference-implementation/rhdm-7.10.0-optaplanner-spring-boot-school-timetabling.zip</literal> file.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Navigate to the <literal>optaplanner-spring-boot-school-timetabling-7.48.0.Final-redhat-00002</literal> directory.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the following command to build the Spring Boot school timetabling project:
					</simpara>
					
<screen>mvn clean install -DskipTests</screen>
				</listitem>
				<listitem>
					<simpara>
						To build the Spring Boot school timetabling project, enter the following command:
					</simpara>
					
<screen>mvn spring-boot:run -DskipTests</screen>
				</listitem>
				<listitem>
					<simpara>
						To view the project, enter the following URL in a web browser:
					</simpara>
					
<screen>http://localhost:8080/</screen>
				</listitem>
			</orderedlist>
		</chapter>
		<chapter xml:id="business-optimizr-domain-objects-proc_business-optimizer-spring-boot">
			<title>Model the domain objects</title>
			<simpara>
				The goal of the Red Hat Business Optimizer timetable project is to assign each lesson to a time slot and a room. To do this, add three classes, <literal>Timeslot</literal>, <literal>Lesson</literal>, and <literal>Room</literal>, as shown in the following diagram:
			</simpara>
			<informalfigure>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/_images/optimizer/timeTableClassDiagramPure.png" format="PNG" />
				</imageobject>
				<textobject>
					<phrase>timeTableClassDiagramPure</phrase>
				</textobject>
			</mediaobject>
			</informalfigure>
			<formalpara>
				<title>Timeslot</title>
				<para>
					The <literal>Timeslot</literal> class represents a time interval when lessons are taught, for example, <literal>Monday 10:30 - 11:30</literal> or <literal>Tuesday 13:30 - 14:30</literal>. In this example, all time slots have the same duration and there are no time slots during lunch or other breaks.
				</para>
			</formalpara>
			<simpara>
				A time slot has no date because a high school schedule just repeats every week. There is no need for <link xlink:href="https://docs.optaplanner.org/latestFinal/optaplanner-docs/html_single/index.html#continuousPlanning">continuous planning</link>. A <literal>Timeslot</literal> is called a <emphasis>problem fact</emphasis> because no <literal>Timeslot</literal> instances change during solving. Such classes do not require any Red Hat Business Optimizer specific annotations.
			</simpara>
			<formalpara>
				<title>Room</title>
				<para>
					The <literal>Room</literal> class represents a location where lessons are taught, for example, <literal>Room A</literal> or <literal>Room B</literal>. In this example, all rooms are without capacity limits and they can accommodate all lessons.
				</para>
			</formalpara>
			<simpara>
				<literal>Room</literal> instances do not change during solving so <literal>Room</literal> is also a <emphasis>problem fact</emphasis>.
			</simpara>
			<formalpara>
				<title>Lesson</title>
				<para>
					During a lesson, represented by the <literal>Lesson</literal> class, a teacher teaches a subject to a group of students, for example, <literal>Math by A.Turing for 9th grade</literal> or <literal>Chemistry by M.Curie for 10th grade</literal>. If a subject is taught multiple times each week by the same teacher to the same student group, there are multiple <literal>Lesson</literal> instances that are only distinguishable by <literal>id</literal>. For example, the 9th grade has six math lessons a week.
				</para>
			</formalpara>
			<simpara>
				During solving, Red Hat Business Optimizer changes the <literal>timeslot</literal> and <literal>room</literal> fields of the <literal>Lesson</literal> class to assign each lesson to a time slot and a room. Because Red Hat Business Optimizer changes these fields, <literal>Lesson</literal> is a <emphasis>planning entity</emphasis>:
			</simpara>
			<informalfigure>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/_images/optimizer/timeTableClassDiagramAnnotated.png" format="PNG" />
				</imageobject>
				<textobject>
					<phrase>timeTableClassDiagramAnnotated</phrase>
				</textobject>
			</mediaobject>
			</informalfigure>
			<simpara>
				Most of the fields in the previous diagram contain input data, except for the orange fields. A lesson’s <literal>timeslot</literal> and <literal>room</literal> fields are unassigned (<literal>null</literal>) in the input data and assigned (not <literal>null</literal>) in the output data. Red Hat Business Optimizer changes these fields during solving. Such fields are called planning variables. In order for Red Hat Business Optimizer to recognize them, both the <literal>timeslot</literal> and <literal>room</literal> fields require an <literal>@PlanningVariable</literal> annotation. Their containing class, <literal>Lesson</literal>, requires an <literal>@PlanningEntity</literal> annotation.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create the <literal>src/main/java/com/example/domain/Timeslot.java</literal> class:
					</simpara>
					
<programlisting language="java" linenumbering="unnumbered">package com.example.domain;

import java.time.DayOfWeek;
import java.time.LocalTime;

public class Timeslot {

    private DayOfWeek dayOfWeek;
    private LocalTime startTime;
    private LocalTime endTime;

    private Timeslot() {
    }

    public Timeslot(DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime) {
        this.dayOfWeek = dayOfWeek;
        this.startTime = startTime;
        this.endTime = endTime;
    }

    @Override
    public String toString() {
        return dayOfWeek + " " + startTime.toString();
    }

    // ********************************
    // Getters and setters
    // ********************************

    public DayOfWeek getDayOfWeek() {
        return dayOfWeek;
    }

    public LocalTime getStartTime() {
        return startTime;
    }

    public LocalTime getEndTime() {
        return endTime;
    }

}</programlisting>
					<simpara>
						Notice the <literal>toString()</literal> method keeps the output short so it is easier to read Red Hat Business Optimizer’s <literal>DEBUG</literal> or <literal>TRACE</literal> log, as shown later.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Create the <literal>src/main/java/com/example/domain/Room.java</literal> class:
					</simpara>
					
<programlisting language="java" linenumbering="unnumbered">package com.example.domain;

public class Room {

    private String name;

    private Room() {
    }

    public Room(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return name;
    }

    // ********************************
    // Getters and setters
    // ********************************

    public String getName() {
        return name;
    }

}</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create the <literal>src/main/java/com/example/domain/Lesson.java</literal> class:
					</simpara>
					
<programlisting language="java" linenumbering="unnumbered">package com.example.domain;

import org.optaplanner.core.api.domain.entity.PlanningEntity;
import org.optaplanner.core.api.domain.variable.PlanningVariable;

@PlanningEntity
public class Lesson {

    private Long id;

    private String subject;
    private String teacher;
    private String studentGroup;

    @PlanningVariable(valueRangeProviderRefs = "timeslotRange")
    private Timeslot timeslot;

    @PlanningVariable(valueRangeProviderRefs = "roomRange")
    private Room room;

    private Lesson() {
    }

    public Lesson(Long id, String subject, String teacher, String studentGroup) {
        this.id = id;
        this.subject = subject;
        this.teacher = teacher;
        this.studentGroup = studentGroup;
    }

    @Override
    public String toString() {
        return subject + "(" + id + ")";
    }

    // ********************************
    // Getters and setters
    // ********************************

    public Long getId() {
        return id;
    }

    public String getSubject() {
        return subject;
    }

    public String getTeacher() {
        return teacher;
    }

    public String getStudentGroup() {
        return studentGroup;
    }

    public Timeslot getTimeslot() {
        return timeslot;
    }

    public void setTimeslot(Timeslot timeslot) {
        this.timeslot = timeslot;
    }

    public Room getRoom() {
        return room;
    }

    public void setRoom(Room room) {
        this.room = room;
    }

}</programlisting>
					<simpara>
						The <literal>Lesson</literal> class has an <literal>@PlanningEntity</literal> annotation, so Red Hat Business Optimizer knows that this class changes during solving because it contains one or more planning variables.
					</simpara>
					<simpara>
						The <literal>timeslot</literal> field has an <literal>@PlanningVariable</literal> annotation, so Red Hat Business Optimizer knows that it can change its value. In order to find potential <literal>Timeslot</literal> instances to assign to this field, Red Hat Business Optimizer uses the <literal>valueRangeProviderRefs</literal> property to connect to a value range provider that provides a <literal>List&lt;Timeslot&gt;</literal> to pick from. See <xref linkend="business-optimizr-gather-objects-proc_business-optimizer-spring-boot" /> for information about value range providers.
					</simpara>
					<simpara>
						The <literal>room</literal> field also has an <literal>@PlanningVariable</literal> annotation for the same reasons.
					</simpara>
				</listitem>
			</orderedlist>
		</chapter>
		<chapter xml:id="business-optimizr-define-contraints-proc_business-optimizer-spring-boot">
			<title>Define the constraints and calculate the score</title>
			<simpara>
				When solving a problem, a <emphasis>score</emphasis> represents the quality of a given solution. The higher the score the better. Red Hat Business Optimizer looks for the best solution, which is the solution with the highest score found in the available time. It might be the <emphasis>optimal</emphasis> solution.
			</simpara>
			<simpara>
				Because the timetable example use case has hard and soft constraints, use the <literal>HardSoftScore</literal> class to represent the score:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Hard constraints must not be broken. For example: <emphasis>A room can have at most one lesson at the same time.</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Soft constraints should not be broken. For example: <emphasis>A teacher prefers to teach in a single room.</emphasis>
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Hard constraints are weighted against other hard constraints. Soft constraints are weighted against other soft constraints. Hard constraints always outweigh soft constraints, regardless of their respective weights.
			</simpara>
			<simpara>
				To calculate the score, you could implement an <literal>EasyScoreCalculator</literal> class:
			</simpara>
			
<programlisting language="java" linenumbering="unnumbered">public class TimeTableEasyScoreCalculator implements EasyScoreCalculator&lt;TimeTable&gt; {

    @Override
    public HardSoftScore calculateScore(TimeTable timeTable) {
        List&lt;Lesson&gt; lessonList = timeTable.getLessonList();
        int hardScore = 0;
        for (Lesson a : lessonList) {
            for (Lesson b : lessonList) {
                if (a.getTimeslot() != null &amp;&amp; a.getTimeslot().equals(b.getTimeslot())
                        &amp;&amp; a.getId() &lt; b.getId()) {
                    // A room can accommodate at most one lesson at the same time.
                    if (a.getRoom() != null &amp;&amp; a.getRoom().equals(b.getRoom())) {
                        hardScore--;
                    }
                    // A teacher can teach at most one lesson at the same time.
                    if (a.getTeacher().equals(b.getTeacher())) {
                        hardScore--;
                    }
                    // A student can attend at most one lesson at the same time.
                    if (a.getStudentGroup().equals(b.getStudentGroup())) {
                        hardScore--;
                    }
                }
            }
        }
        int softScore = 0;
        // Soft constraints are only implemented in the "complete" implementation
        return HardSoftScore.of(hardScore, softScore);
    }

}</programlisting>
			<simpara>
				Unfortunately, this solution does not scale well because it is non-incremental: every time a lesson is assigned to a different time slot or room, all lessons are re-evaluated to calculate the new score.
			</simpara>
			<simpara>
				A better solution is to create a <literal>src/main/java/com/example/solver/TimeTableConstraintProvider.java</literal> class to perform incremental score calculation. This class uses Red Hat Business Optimizer’s ConstraintStream API which is inspired by Java 8 Streams and SQL. The <literal>ConstraintProvider</literal> scales an order of magnitude better than the <literal>EasyScoreCalculator</literal>: <emphasis>O</emphasis>(n) instead of <emphasis>O</emphasis>(n²).
			</simpara>
			<formalpara>
				<title>Procedure</title>
				<para>
					Create the following <literal>src/main/java/com/example/solver/TimeTableConstraintProvider.java</literal> class:
				</para>
			</formalpara>
			
<programlisting language="java" linenumbering="unnumbered">package com.example.solver;

import com.example.domain.Lesson;
import org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore;
import org.optaplanner.core.api.score.stream.Constraint;
import org.optaplanner.core.api.score.stream.ConstraintFactory;
import org.optaplanner.core.api.score.stream.ConstraintProvider;
import org.optaplanner.core.api.score.stream.Joiners;

public class TimeTableConstraintProvider implements ConstraintProvider {

    @Override
    public Constraint[] defineConstraints(ConstraintFactory constraintFactory) {
        return new Constraint[] {
                // Hard constraints
                roomConflict(constraintFactory),
                teacherConflict(constraintFactory),
                studentGroupConflict(constraintFactory),
                // Soft constraints are only implemented in the "complete" implementation
        };
    }

    private Constraint roomConflict(ConstraintFactory constraintFactory) {
        // A room can accommodate at most one lesson at the same time.

        // Select a lesson ...
        return constraintFactory.from(Lesson.class)
                // ... and pair it with another lesson ...
                .join(Lesson.class,
                        // ... in the same timeslot ...
                        Joiners.equal(Lesson::getTimeslot),
                        // ... in the same room ...
                        Joiners.equal(Lesson::getRoom),
                        // ... and the pair is unique (different id, no reverse pairs)
                        Joiners.lessThan(Lesson::getId))
                // then penalize each pair with a hard weight.
                .penalize("Room conflict", HardSoftScore.ONE_HARD);
    }

    private Constraint teacherConflict(ConstraintFactory constraintFactory) {
        // A teacher can teach at most one lesson at the same time.
        return constraintFactory.from(Lesson.class)
                .join(Lesson.class,
                        Joiners.equal(Lesson::getTimeslot),
                        Joiners.equal(Lesson::getTeacher),
                        Joiners.lessThan(Lesson::getId))
                .penalize("Teacher conflict", HardSoftScore.ONE_HARD);
    }

    private Constraint studentGroupConflict(ConstraintFactory constraintFactory) {
        // A student can attend at most one lesson at the same time.
        return constraintFactory.from(Lesson.class)
                .join(Lesson.class,
                        Joiners.equal(Lesson::getTimeslot),
                        Joiners.equal(Lesson::getStudentGroup),
                        Joiners.lessThan(Lesson::getId))
                .penalize("Student group conflict", HardSoftScore.ONE_HARD);
    }

}</programlisting>
		</chapter>
		<chapter xml:id="business-optimizr-gather-objects-proc_business-optimizer-spring-boot">
			<title>Gather the domain objects in a planning solution</title>
			<simpara>
				A <literal>TimeTable</literal> instance wraps all <literal>Timeslot</literal>, <literal>Room</literal>, and <literal>Lesson</literal> instances of a single dataset. Furthermore, because it contains all lessons, each with a specific planning variable state, it is a <emphasis>planning solution</emphasis> and it has a score:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						If lessons are still unassigned, then it is an <emphasis>uninitialized</emphasis> solution, for example, a solution with the score <literal>-4init/0hard/0soft</literal>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If it breaks hard constraints, then it is an <emphasis>infeasible</emphasis> solution, for example, a solution with the score <literal>-2hard/-3soft</literal>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If it adheres to all hard constraints, then it is a <emphasis>feasible</emphasis> solution, for example, a solution with the score <literal>0hard/-7soft</literal>.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				The <literal>TimeTable</literal> class has an <literal>@PlanningSolution</literal> annotation, so Red Hat Business Optimizer knows that this class contains all of the input and output data.
			</simpara>
			<simpara>
				Specifically, this class is the input of the problem:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						A <literal>timeslotList</literal> field with all time slots
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								This is a list of problem facts, because they do not change during solving.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						A <literal>roomList</literal> field with all rooms
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								This is a list of problem facts, because they do not change during solving.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						A <literal>lessonList</literal> field with all lessons
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								This is a list of planning entities because they change during solving.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Of each <literal>Lesson</literal>:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The values of the <literal>timeslot</literal> and <literal>room</literal> fields are typically still <literal>null</literal>, so unassigned. They are planning variables.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The other fields, such as <literal>subject</literal>, <literal>teacher</literal> and <literal>studentGroup</literal>, are filled in. These fields are problem properties.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<simpara>
				However, this class is also the output of the solution:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						A <literal>lessonList</literal> field for which each <literal>Lesson</literal> instance has non-null <literal>timeslot</literal> and <literal>room</literal> fields after solving
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						A <literal>score</literal> field that represents the quality of the output solution, for example, <literal>0hard/-5soft</literal>
					</simpara>
				</listitem>
			</itemizedlist>
			<formalpara>
				<title>Procedure</title>
				<para>
					Create the <literal>src/main/java/com/example/domain/TimeTable.java</literal> class:
				</para>
			</formalpara>
			
<programlisting language="java" linenumbering="unnumbered">package com.example.domain;

import java.util.List;

import org.optaplanner.core.api.domain.solution.PlanningEntityCollectionProperty;
import org.optaplanner.core.api.domain.solution.PlanningScore;
import org.optaplanner.core.api.domain.solution.PlanningSolution;
import org.optaplanner.core.api.domain.solution.drools.ProblemFactCollectionProperty;
import org.optaplanner.core.api.domain.valuerange.ValueRangeProvider;
import org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore;

@PlanningSolution
public class TimeTable {

    @ValueRangeProvider(id = "timeslotRange")
    @ProblemFactCollectionProperty
    private List&lt;Timeslot&gt; timeslotList;

    @ValueRangeProvider(id = "roomRange")
    @ProblemFactCollectionProperty
    private List&lt;Room&gt; roomList;

    @PlanningEntityCollectionProperty
    private List&lt;Lesson&gt; lessonList;

    @PlanningScore
    private HardSoftScore score;

    private TimeTable() {
    }

    public TimeTable(List&lt;Timeslot&gt; timeslotList, List&lt;Room&gt; roomList,
            List&lt;Lesson&gt; lessonList) {
        this.timeslotList = timeslotList;
        this.roomList = roomList;
        this.lessonList = lessonList;
    }

    // ********************************
    // Getters and setters
    // ********************************

    public List&lt;Timeslot&gt; getTimeslotList() {
        return timeslotList;
    }

    public List&lt;Room&gt; getRoomList() {
        return roomList;
    }

    public List&lt;Lesson&gt; getLessonList() {
        return lessonList;
    }

    public HardSoftScore getScore() {
        return score;
    }

}</programlisting>
			<formalpara>
				<title>The value range providers</title>
				<para>
					The <literal>timeslotList</literal> field is a value range provider. It holds the <literal>Timeslot</literal> instances which Red Hat Business Optimizer can pick from to assign to the <literal>timeslot</literal> field of <literal>Lesson</literal> instances. The <literal>timeslotList</literal> field has an <literal>@ValueRangeProvider</literal> annotation to connect those two, by matching the <literal>id</literal> with the <literal>valueRangeProviderRefs</literal> of the <literal>@PlanningVariable</literal> in the <literal>Lesson</literal>.
				</para>
			</formalpara>
			<simpara>
				Following the same logic, the <literal>roomList</literal> field also has an <literal>@ValueRangeProvider</literal> annotation.
			</simpara>
			<formalpara>
				<title>The problem fact and planning entity properties</title>
				<para>
					Furthermore, Red Hat Business Optimizer needs to know which <literal>Lesson</literal> instances it can change as well as how to retrieve the <literal>Timeslot</literal> and <literal>Room</literal> instances used for score calculation by your <literal>TimeTableConstraintProvider</literal>.
				</para>
			</formalpara>
			<simpara>
				The <literal>timeslotList</literal> and <literal>roomList</literal> fields have an <literal>@ProblemFactCollectionProperty</literal> annotation, so your <literal>TimeTableConstraintProvider</literal> can select from those instances.
			</simpara>
			<simpara>
				The <literal>lessonList</literal> has an <literal>@PlanningEntityCollectionProperty</literal> annotation, so Red Hat Business Optimizer can change them during solving and your <literal>TimeTableConstraintProvider</literal> can select from those too.
			</simpara>
		</chapter>
		<chapter xml:id="business-optimizr-create-timetable-service-proc_business-optimizer-spring-boot">
			<title>Create the Timetable service</title>
			<simpara>
				Now you are ready to put everything together and create a REST service. But solving planning problems on REST threads causes HTTP timeout issues. Therefore, the Spring Boot starter injects a <literal>SolverManager</literal>, which runs solvers in a separate thread pool and can solve multiple datasets in parallel.
			</simpara>
			<formalpara>
				<title>Procedure</title>
				<para>
					Create the <literal>src/main/java/com/example/solver/TimeTableController.java</literal> class:
				</para>
			</formalpara>
			
<programlisting language="java" linenumbering="unnumbered">package com.example.solver;

import java.util.UUID;
import java.util.concurrent.ExecutionException;

import com.example.domain.TimeTable;
import org.optaplanner.core.api.solver.SolverJob;
import org.optaplanner.core.api.solver.SolverManager;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/timeTable")
public class TimeTableController {

    @Autowired
    private SolverManager&lt;TimeTable, UUID&gt; solverManager;

    @PostMapping("/solve")
    public TimeTable solve(@RequestBody TimeTable problem) {
        UUID problemId = UUID.randomUUID();
        // Submit the problem to start solving
        SolverJob&lt;TimeTable, UUID&gt; solverJob = solverManager.solve(problemId, problem);
        TimeTable solution;
        try {
            // Wait until the solving ends
            solution = solverJob.getFinalBestSolution();
        } catch (InterruptedException | ExecutionException e) {
            throw new IllegalStateException("Solving failed.", e);
        }
        return solution;
    }

}</programlisting>
			<simpara>
				In this example, the initial implementation waits for the solver to finish, which can still cause an HTTP timeout. The <emphasis>complete</emphasis> implementation avoids HTTP timeouts much more elegantly.
			</simpara>
		</chapter>
		<chapter xml:id="business-optimizr-set-solver-time-proc_business-optimizer-spring-boot">
			<title>Set the solver termination time</title>
			<simpara>
				If your planning application does not have a termination setting or a termination event, it theoretically runs forever and in reality eventually causes an HTTP timeout error. To prevent this from occurring, use the <literal>optaplanner.solver.termination.spent-limit</literal> parameter to specify the length of time after which the application terminates. In most applications, set the time to at least five minutes (<literal>5m</literal>). However, in the Timetable example, limit the solving time to five second, which is short enough to avoid the HTTP timeout.
			</simpara>
			<formalpara>
				<title>Procedure</title>
				<para>
					Create the <literal>src/main/resources/application.properties</literal> file with the following content:
				</para>
			</formalpara>
			
<programlisting language="properties" linenumbering="unnumbered">optaplanner.solver.termination.spent-limit=5s</programlisting>
		</chapter>
		<chapter xml:id="business-optimizer-make-executable-proc_business-optimizer-spring-boot">
			<title>Make the application executable</title>
			<simpara>
				After you complete the Red Hat Business Optimizer Spring Boot timetable project, package everything into a single executable JAR file driven by a standard Java <literal>main()</literal> method.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You have a completed Red Hat Business Optimizer Spring Boot timetable project.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create the <literal>TimeTableSpringBootApp.java</literal> class with the following content:
					</simpara>
					
<programlisting language="java" linenumbering="unnumbered">package com.example;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class TimeTableSpringBootApp {

    public static void main(String[] args) {
        SpringApplication.run(TimeTableSpringBootApp.class, args);
    }

}</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Replace the <literal>src/main/java/com/example/DemoApplication.java</literal> class created by Spring Initializr with the <literal>TimeTableSpringBootApp.java</literal> class.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Run the <literal>TimeTableSpringBootApp.java</literal> class as the main class of a regular Java application.
					</simpara>
				</listitem>
			</orderedlist>
			<section xml:id="business-optimizer-try-application-proc_business-optimizer-spring-boot">
				<title>Try the timetable application</title>
				<simpara>
					After you start the Red Hat Business Optimizer Spring Boot timetable application, you can test the REST service with any REST client that you want. This example uses the Linux <literal>curl</literal> command to send a POST request.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							The Red Hat Business Optimizer Spring Boot timetable application is running.
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Procedure</title>
					<para>
						Enter the following command:
					</para>
				</formalpara>
				
<screen>$ curl -i -X POST http://localhost:8080/timeTable/solve -H "Content-Type:application/json" -d '{"timeslotList":[{"dayOfWeek":"MONDAY","startTime":"08:30:00","endTime":"09:30:00"},{"dayOfWeek":"MONDAY","startTime":"09:30:00","endTime":"10:30:00"}],"roomList":[{"name":"Room A"},{"name":"Room B"}],"lessonList":[{"id":1,"subject":"Math","teacher":"A. Turing","studentGroup":"9th grade"},{"id":2,"subject":"Chemistry","teacher":"M. Curie","studentGroup":"9th grade"},{"id":3,"subject":"French","teacher":"M. Curie","studentGroup":"10th grade"},{"id":4,"subject":"History","teacher":"I. Jones","studentGroup":"10th grade"}]}'</screen>
				<simpara>
					After about five seconds, the termination spent time defined in <literal>application.properties</literal>, the service returns an output similar to the following example:
				</simpara>
				
<screen>HTTP/1.1 200
Content-Type: application/json
...

{"timeslotList":...,"roomList":...,"lessonList":[{"id":1,"subject":"Math","teacher":"A. Turing","studentGroup":"9th grade","timeslot":{"dayOfWeek":"MONDAY","startTime":"08:30:00","endTime":"09:30:00"},"room":{"name":"Room A"}},{"id":2,"subject":"Chemistry","teacher":"M. Curie","studentGroup":"9th grade","timeslot":{"dayOfWeek":"MONDAY","startTime":"09:30:00","endTime":"10:30:00"},"room":{"name":"Room A"}},{"id":3,"subject":"French","teacher":"M. Curie","studentGroup":"10th grade","timeslot":{"dayOfWeek":"MONDAY","startTime":"08:30:00","endTime":"09:30:00"},"room":{"name":"Room B"}},{"id":4,"subject":"History","teacher":"I. Jones","studentGroup":"10th grade","timeslot":{"dayOfWeek":"MONDAY","startTime":"09:30:00","endTime":"10:30:00"},"room":{"name":"Room B"}}],"score":"0hard/0soft"}</screen>
				<simpara>
					Notice that the application assigned all four lessons to one of the two time slots and one of the two rooms. Also notice that it conforms to all hard constraints. For example, M. Curie’s two lessons are in different time slots.
				</simpara>
				<simpara>
					On the server side, the <literal>info</literal> log shows what Red Hat Business Optimizer did in those five seconds:
				</simpara>
				
<screen>... Solving started: time spent (33), best score (-8init/0hard/0soft), environment mode (REPRODUCIBLE), random (JDK with seed 0).
... Construction Heuristic phase (0) ended: time spent (73), best score (0hard/0soft), score calculation speed (459/sec), step total (4).
... Local Search phase (1) ended: time spent (5000), best score (0hard/0soft), score calculation speed (28949/sec), step total (28398).
... Solving ended: time spent (5000), best score (0hard/0soft), score calculation speed (28524/sec), phase total (2), environment mode (REPRODUCIBLE).</screen>
			</section>
			<section xml:id="business-optimizer-test-application-proc_business-optimizer-spring-boot">
				<title>Test the application</title>
				<simpara>
					A good application includes test coverage. This example tests the Timetable Red Hat Business Optimizer Spring Boot application. It uses a JUnit test to generate a test dataset and send it to the <literal>TimeTableController</literal> to solve.
				</simpara>
				<formalpara>
					<title>Procedure</title>
					<para>
						Create the <literal>src/test/java/com/example/solver/TimeTableControllerTest.java</literal> class with the following content:
					</para>
				</formalpara>
				
<programlisting language="java" linenumbering="unnumbered">package com.example.solver;

import java.time.DayOfWeek;
import java.time.LocalTime;
import java.util.ArrayList;
import java.util.List;

import com.example.domain.Lesson;
import com.example.domain.Room;
import com.example.domain.TimeTable;
import com.example.domain.Timeslot;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.Timeout;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertTrue;

@SpringBootTest(properties = {
        "optaplanner.solver.termination.spent-limit=1h", // Effectively disable this termination in favor of the best-score-limit
        "optaplanner.solver.termination.best-score-limit=0hard/*soft"})
public class TimeTableControllerTest {

    @Autowired
    private TimeTableController timeTableController;

    @Test
    @Timeout(600_000)
    public void solve() {
        TimeTable problem = generateProblem();
        TimeTable solution = timeTableController.solve(problem);
        assertFalse(solution.getLessonList().isEmpty());
        for (Lesson lesson : solution.getLessonList()) {
            assertNotNull(lesson.getTimeslot());
            assertNotNull(lesson.getRoom());
        }
        assertTrue(solution.getScore().isFeasible());
    }

    private TimeTable generateProblem() {
        List&lt;Timeslot&gt; timeslotList = new ArrayList&lt;&gt;();
        timeslotList.add(new Timeslot(DayOfWeek.MONDAY, LocalTime.of(8, 30), LocalTime.of(9, 30)));
        timeslotList.add(new Timeslot(DayOfWeek.MONDAY, LocalTime.of(9, 30), LocalTime.of(10, 30)));
        timeslotList.add(new Timeslot(DayOfWeek.MONDAY, LocalTime.of(10, 30), LocalTime.of(11, 30)));
        timeslotList.add(new Timeslot(DayOfWeek.MONDAY, LocalTime.of(13, 30), LocalTime.of(14, 30)));
        timeslotList.add(new Timeslot(DayOfWeek.MONDAY, LocalTime.of(14, 30), LocalTime.of(15, 30)));

        List&lt;Room&gt; roomList = new ArrayList&lt;&gt;();
        roomList.add(new Room("Room A"));
        roomList.add(new Room("Room B"));
        roomList.add(new Room("Room C"));

        List&lt;Lesson&gt; lessonList = new ArrayList&lt;&gt;();
        lessonList.add(new Lesson(101L, "Math", "B. May", "9th grade"));
        lessonList.add(new Lesson(102L, "Physics", "M. Curie", "9th grade"));
        lessonList.add(new Lesson(103L, "Geography", "M. Polo", "9th grade"));
        lessonList.add(new Lesson(104L, "English", "I. Jones", "9th grade"));
        lessonList.add(new Lesson(105L, "Spanish", "P. Cruz", "9th grade"));

        lessonList.add(new Lesson(201L, "Math", "B. May", "10th grade"));
        lessonList.add(new Lesson(202L, "Chemistry", "M. Curie", "10th grade"));
        lessonList.add(new Lesson(203L, "History", "I. Jones", "10th grade"));
        lessonList.add(new Lesson(204L, "English", "P. Cruz", "10th grade"));
        lessonList.add(new Lesson(205L, "French", "M. Curie", "10th grade"));
        return new TimeTable(timeslotList, roomList, lessonList);
    }

}</programlisting>
				<simpara>
					This test verifies that after solving, all lessons are assigned to a time slot and a room. It also verifies that it found a feasible solution (no hard constraints broken).
				</simpara>
				<simpara>
					Normally, the solver finds a feasible solution in less than 200 milliseconds. Notice how the <literal>@SpringBootTest</literal> annotation’s <literal>properties</literal> overwrites the solver termination to terminate as soon as a feasible solution (<literal>0hard/*soft</literal>) is found. This avoids hard coding a solver time, because the unit test might run on arbitrary hardware. This approach ensures that the test runs long enough to find a feasible solution, even on slow machines. However, it does not run a millisecond longer than it strictly must, even on fast machines.
				</simpara>
			</section>
			<section xml:id="business-optimizer-logging-proc_business-optimizer-spring-boot">
				<title>Logging</title>
				<simpara>
					After you complete the Red Hat Business Optimizer Spring Boot timetable application, you can use logging information to help you fine-tune the constraints in the <literal>ConstraintProvider</literal>. Review the score calculation speed in the <literal>info</literal> log file to assess the impact of changes to your constraints. Run the application in debug mode to show every step that your application takes or use trace logging to log every step and every move.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Run the timetable application for a fixed amount of time, for example, five minutes.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Review the score calculation speed in the <literal>log</literal> file as shown in the following example:
						</simpara>
						
<screen>... Solving ended: ..., score calculation speed (29455/sec), ...</screen>
					</listitem>
					<listitem>
						<simpara>
							Change a constraint, run the planning application again for the same amount of time, and review the score calculation speed recorded in the <literal>log</literal> file.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Run the application in debug mode to log every step:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									To run debug mode from the command line, use the <literal>-D</literal> system property.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									To change logging in the <literal>application.properties</literal> file, add the following line to that file:
								</simpara>
								
<programlisting language="properties" linenumbering="unnumbered">logging.level.org.optaplanner=debug</programlisting>
								<simpara>
									The following example shows output in the <literal>log</literal> file in debug mode:
								</simpara>
								
<screen>... Solving started: time spent (67), best score (-20init/0hard/0soft), environment mode (REPRODUCIBLE), random (JDK with seed 0).
...     CH step (0), time spent (128), score (-18init/0hard/0soft), selected move count (15), picked move ([Math(101) {null -&gt; Room A}, Math(101) {null -&gt; MONDAY 08:30}]).
...     CH step (1), time spent (145), score (-16init/0hard/0soft), selected move count (15), picked move ([Physics(102) {null -&gt; Room A}, Physics(102) {null -&gt; MONDAY 09:30}]).
...</screen>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Use <literal>trace</literal> logging to show every step and every move per step.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</chapter>
		<chapter xml:id="business-optimizer-database-UI-integration-proc_business-optimizer-spring-boot">
			<title>Add Database and UI integration</title>
			<simpara>
				After you create the Red Hat Business Optimizer application example with Spring Boot, add database and UI integration.
			</simpara>
			<itemizedlist>
				<title>Prerequisite</title>
				<listitem>
					<simpara>
						You have created the Red Hat Business Optimizer Spring Boot timetable example.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create Java Persistence API (JPA) repositories for <literal>Timeslot</literal>, <literal>Room</literal>, and <literal>Lesson</literal>. For information about creating JPA repositories, see <link xlink:href="https://spring.io/guides/gs/accessing-data-jpa/"><emphasis>Accessing Data with JPA</emphasis></link> on the Spring website.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Expose the JPA repositories through REST. For information about exposing the repositories, see <link xlink:href="https://spring.io/guides/gs/accessing-data-rest/"><emphasis>Accessing JPA Data with REST</emphasis></link> on the Spring website.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Build a <literal>TimeTableRepository</literal> facade to read and write a <literal>TimeTable</literal> in a single transaction.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Adjust the <literal>TimeTableController</literal> as shown in the following example:
					</simpara>
					<informalexample>
<programlisting language="java" linenumbering="unnumbered">package com.example.solver;

import com.example.domain.TimeTable;
import com.example.persistence.TimeTableRepository;
import org.optaplanner.core.api.score.ScoreManager;
import org.optaplanner.core.api.solver.SolverManager;
import org.optaplanner.core.api.solver.SolverStatus;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/timeTable")
public class TimeTableController {

    @Autowired
    private TimeTableRepository timeTableRepository;
    @Autowired
    private SolverManager&lt;TimeTable, Long&gt; solverManager;
    @Autowired
    private ScoreManager&lt;TimeTable&gt; scoreManager;

    // To try, GET http://localhost:8080/timeTable
    @GetMapping()
    public TimeTable getTimeTable() {
        // Get the solver status before loading the solution
        // to avoid the race condition that the solver terminates between them
        SolverStatus solverStatus = getSolverStatus();
        TimeTable solution = timeTableRepository.findById(TimeTableRepository.SINGLETON_TIME_TABLE_ID);
        scoreManager.updateScore(solution); // Sets the score
        solution.setSolverStatus(solverStatus);
        return solution;
    }

    @PostMapping("/solve")
    public void solve() {
        solverManager.solveAndListen(TimeTableRepository.SINGLETON_TIME_TABLE_ID,
                timeTableRepository::findById,
                timeTableRepository::save);
    }

    public SolverStatus getSolverStatus() {
        return solverManager.getSolverStatus(TimeTableRepository.SINGLETON_TIME_TABLE_ID);
    }

    @PostMapping("/stopSolving")
    public void stopSolving() {
        solverManager.terminateEarly(TimeTableRepository.SINGLETON_TIME_TABLE_ID);
    }

}</programlisting>
					</informalexample>
					<simpara>
						For simplicity, this code handles only one <literal>TimeTable</literal> instance, but it is straightforward to enable multi-tenancy and handle multiple <literal>TimeTable</literal> instances of different high schools in parallel.
					</simpara>
					<simpara>
						The <literal>getTimeTable()</literal> method returns the latest timetable from the database. It uses the <literal>ScoreManager</literal> (which is automatically injected) to calculate the score of that timetable so the UI can show the score.
					</simpara>
					<simpara>
						The <literal>solve()</literal> method starts a job to solve the current timetable and store the time slot and room assignments in the database. It uses the <literal>SolverManager.solveAndListen()</literal> method to listen to intermediate best solutions and update the database accordingly. This enables the UI to show progress while the backend is still solving.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Now that the <literal>solve()</literal> method returns immediately, adjust the <literal>TimeTableControllerTest</literal> as shown in the following example:
					</simpara>
					<informalexample>
<programlisting language="java" linenumbering="unnumbered">package com.example.solver;

import com.example.domain.Lesson;
import com.example.domain.TimeTable;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.Timeout;
import org.optaplanner.core.api.solver.SolverStatus;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertTrue;

@SpringBootTest(properties = {
        "optaplanner.solver.termination.spent-limit=1h", // Effectively disable this termination in favor of the best-score-limit
        "optaplanner.solver.termination.best-score-limit=0hard/*soft"})
public class TimeTableControllerTest {

    @Autowired
    private TimeTableController timeTableController;

    @Test
    @Timeout(600_000)
    public void solveDemoDataUntilFeasible() throws InterruptedException {
        timeTableController.solve();
        TimeTable timeTable = timeTableController.getTimeTable();
        while (timeTable.getSolverStatus() != SolverStatus.NOT_SOLVING) {
            // Quick polling (not a Test Thread Sleep anti-pattern)
            // Test is still fast on fast machines and doesn't randomly fail on slow machines.
            Thread.sleep(20L);
            timeTable = timeTableController.getTimeTable();
        }
        assertFalse(timeTable.getLessonList().isEmpty());
        for (Lesson lesson : timeTable.getLessonList()) {
            assertNotNull(lesson.getTimeslot());
            assertNotNull(lesson.getRoom());
        }
        assertTrue(timeTable.getScore().isFeasible());
    }

}</programlisting>
					</informalexample>
				</listitem>
				<listitem>
					<simpara>
						Poll for the latest solution until the solver finishes solving.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To visualize the timetable, build an attractive web UI on top of these REST methods.
					</simpara>
				</listitem>
			</orderedlist>
		</chapter>
	</part>
	<appendix xml:id="versioning-information">
		<title>Versioning information</title>
		<simpara>
			Documentation last updated on Monday, January 18, 2021.
		</simpara>
	</appendix>
	<appendix xml:id="author-group">
		<title>Contact information</title>
		<simpara>
			Red Hat Decision Manager documentation team: <link xlink:href="mailto:brms-docs@redhat.com">brms-docs@redhat.com</link>
		</simpara>
	</appendix>
</book>

