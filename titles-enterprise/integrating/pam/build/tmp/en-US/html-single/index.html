<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Integrating Red Hat Process Automation Manager with other products and components</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.6"/><meta name="description" content="This document describes how to integrate Red Hat Process Automation Manager with other products and components, such as Spring Boot, Red Hat Fuse, Red Hat Single Sign-On, and other supported products."/><link rel="next" href="#idm139969152786352" title="Preface"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm139969153265632"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Process Automation Manager</span> <span class="productnumber">7.10</span></div><div><h1 class="title">Integrating Red Hat Process Automation Manager with other products and components</h1></div><div><h2 class="subtitle"/></div><div><a href="#idm139969146247632">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document describes how to integrate Red Hat Process Automation Manager with other products and components, such as Spring Boot, Red Hat Fuse, Red Hat Single Sign-On, and other supported products.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="preface"><a href="#idm139969152786352">Preface</a></span></li><li><span class="preface"><a href="#snip-conscious-language_integrating">Making open source more inclusive</a></span></li><li><span class="part"><a href="#assembly-springboot-business-apps">I. Creating Red Hat Process Automation Manager business applications with Spring Boot</a></span><ul><li><span class="chapter"><a href="#bus_app_business-applications">1. Red Hat Process Automation Manager Spring Boot business applications</a></span></li><li><span class="chapter"><a href="#bus-app-create_business-applications">2. Creating a business application</a></span></li><li><span class="chapter"><a href="#maven-con_business-applications">3. Apache Maven and Red Hat Process Automation Manager Spring Boot applications</a></span><ul><li><span class="section"><a href="#online-maven-configure-proc_business-applications">3.1. Configuring a Red Hat Process Automation Manager Spring Boot project for the online Maven repository</a></span></li><li><span class="section"><a href="#download-maven-proc_business-applications">3.2. Downloading and configuring the Red Hat Process Automation Manager Maven repository</a></span></li></ul></li><li><span class="chapter"><a href="#bus-app-security-con_business-applications">4. Spring Security with Red Hat Process Automation Manager</a></span><ul><li><span class="section"><a href="#bus-app-security-authorization-proc_business-applications">4.1. Using Spring Security to authenticate with authorization</a></span></li><li><span class="section"><a href="#bus-app-security-disabling-proc_business-applications">4.2. Disabling Spring Security in a Red Hat Process Automation Manager business application</a></span></li><li><span class="section"><a href="#bus-app-security-preauthenticate-proc_business-applications">4.3. Using Spring Security with preauthenication</a></span></li><li><span class="section"><a href="#bus-app-rh-sso_business-applications">4.4. Configuring the business application with Red Hat Single Sign-On</a></span></li></ul></li><li><span class="chapter"><a href="#bus-app-configure-con_business-applications">5. Red Hat Process Automation Manager Spring Boot configuration</a></span><ul><li><span class="section"><a href="#bus-app-con-rest-proc_business-applications">5.1. Configuring REST endpoints for Spring Boot applications</a></span></li><li><span class="section"><a href="#bus-app-config-kie-server-proc_business-applications">5.2. Configuring the KIE Server identity</a></span></li><li><span class="section"><a href="#spring-boot-kafka-proc_business-applications">5.3. Integrating Apache Kafka with your Red Hat Process Automation Manager Spring Boot project</a></span></li><li><span class="section"><a href="#bus-app-configure-central-proc_business-applications">5.4. Configuring Business Central components to start at runtime</a></span></li><li><span class="section"><a href="#bus-app-async-execution-proc_business-applications">5.5. Configuring your Spring Boot application for asynchronous execution</a></span></li><li><span class="section"><a href="#bus-app-quartz_business-applications">5.6. Configuring the business application for a cluster using Quartz</a></span></li><li><span class="section"><a href="#bus-app-user-group_business-applications">5.7. Configuring business application user group providers</a></span></li><li><span class="section"><a href="#bus-app-config-data-source_business-applications">5.8. Configuring a Spring Boot project with a MySQL or PostgreSQL database</a></span></li><li><span class="section"><a href="#bus-app-config-jpa_business-applications">5.9. Configuring business applications for JPA</a></span></li><li><span class="section"><a href="#bus-app-swagger_business-applications">5.10. Enabling Swagger documentation</a></span></li></ul></li><li><span class="chapter"><a href="#creating-self-contained-image-proc_business-applications">6. Creating a self-contained Red Hat Process Automation Manager Spring Boot JAR file</a></span></li><li><span class="chapter"><a href="#bus-app-run_business-applications">7. Business application execution</a></span><ul><li><span class="section"><a href="#bus-apps-run-standard_business-applications">7.1. Running business applications in standalone mode</a></span></li><li><span class="section"><a href="#bus-apps-run-managed_business-applications">7.2. Running business applications in development mode</a></span></li></ul></li><li><span class="chapter"><a href="#bus-apps-import_business-applications">8. Importing and deploying business assets projects in Business Central</a></span></li><li><span class="chapter"><a href="#spring-boot-jms-audit-proc_business-applications">9. Replicating audit data in a JMS message broker</a></span><ul><li><span class="section"><a href="#audit-replication-parameters-ref_business-applications">9.1. Spring Boot JMS audit replication parameters</a></span></li></ul></li></ul></li><li><span class="part"><a href="#assembly-integrating-fuse">II. Integrating Red Hat Fuse with Red Hat Process Automation Manager</a></span><ul><li><span class="chapter"><a href="#fuse-con">10. Red Hat Fuse and Red Hat Process Automation Manager</a></span><ul><li><span class="section"><a href="#fuse-karaf-ref_fuse">10.1. Red Hat Process Automation Manager Karaf features</a></span></li></ul></li><li><span class="chapter"><a href="#ba-engines-karaf-con">11. Red Hat Process Automation Manager decision and process engines with Fuse on Apache Karaf</a></span><ul><li><span class="section"><a href="#ba-karaf-xml-uninstall-proc">11.1. Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf</a></span></li><li><span class="section"><a href="#ba-karaf-xml-install-proc">11.2. Installing Red Hat Process Automation Manager features on Karaf using XML files</a></span></li><li><span class="section"><a href="#installing-ba-fuse-karaf-maven-proc">11.3. Installing Red Hat Process Automation Manager features on Karaf through maven</a></span></li></ul></li><li><span class="chapter"><a href="#installing-on-fuse-eap-proc">12. Installing Fuse on Red Hat JBoss Enterprise Application Platform</a></span></li><li><span class="chapter"><a href="#kie-camel-con_fuse">13. The <code class="literal">kie-camel</code> component</a></span></li></ul></li><li><span class="part"><a href="#assembly-integrating-sso">III. Integrating Red Hat Process Automation Manager with Red Hat Single Sign-On</a></span><ul><li><span class="chapter"><a href="#sso-int-con">14. Integration Options</a></span></li><li><span class="chapter"><a href="#sso-realm-proc">15. Installing and configuring RH-SSO</a></span></li><li><span class="chapter"><a href="#roles-users-con_integrate-sso">16. Red Hat Process Automation Manager roles and users</a></span><ul><li><span class="section"><a href="#sso-user-add-proc">16.1. Adding Red Hat Process Automation Manager users</a></span></li></ul></li><li><span class="chapter"><a href="#sso-central-proc_integrate-sso">17. Authenticating Business Central through RH-SSO</a></span><ul><li><span class="section"><a href="#sso-central-client-create-proc">17.1. Creating the Business Central client for RH-SSO</a></span></li><li><span class="section"><a href="#sso-client-adapter-proc">17.2. Installing the RH-SSO client adapter for Business Central</a></span></li><li><span class="section"><a href="#sso-remote-services-securing-proc">17.3. Securing Business Central file system services using RH-SSO</a></span></li></ul></li><li><span class="chapter"><a href="#sso-kie-server-con_integrate-sso">18. Authenticating KIE Server through RH-SSO</a></span><ul><li><span class="section"><a href="#sso-kie-server-client-proc">18.1. Creating the KIE Server client on RH-SSO</a></span></li><li><span class="section"><a href="#sso-kie-server-client-adapter-proc">18.2. Installing and configuring KIE Server with the client adapter</a></span></li><li><span class="section"><a href="#sso-kie-server-token-proc">18.3. KIE Server token-based authentication</a></span></li></ul></li><li><span class="chapter"><a href="#sso-third-party-proc_integrate-sso">19. Authenticating third-party clients through RH-SSO</a></span><ul><li><span class="section"><a href="#sso-basic-auth-proc_integrate-sso">19.1. Basic authentication</a></span></li><li><span class="section"><a href="#sso-token-auth-proc">19.2. Token-based authentication</a></span></li></ul></li></ul></li><li><span class="part"><a href="#assembly-integrating-codeready-studio">IV. Integrating Red Hat CodeReady Studio with Red Hat Process Automation Manager</a></span><ul><li><span class="chapter"><a href="#codeready-studio-install-proc">20. Installing Red Hat CodeReady Studio</a></span></li><li><span class="chapter"><a href="#codeready-studio-plug-in-install-proc">21. Installing Red Hat CodeReady Studio plug-ins</a></span></li><li><span class="chapter"><a href="#dm-server-configure-proc">22. Configuring the Red Hat Process Automation Manager server</a></span></li><li><span class="chapter"><a href="#codeready-studio-installing-runtime-environments-proc">23. Installing Red Hat Process Automation Manager runtime environments</a></span></li><li><span class="chapter"><a href="#codeready-studio-creating-a-project-proc">24. Creating a Red Hat Process Automation Manager project</a></span></li><li><span class="chapter"><a href="#codeready-studio-import-projects-from-git-repo">25. Importing projects from a Git repository into Red Hat CodeReady Studio</a></span><ul><li><span class="section"><a href="#codeready-studio-clone-remote-git-repo-proc">25.1. Cloning a remote Git repository</a></span></li><li><span class="section"><a href="#codeready-studio-import-local-git-repo-proc">25.2. Importing a local Git repository</a></span></li></ul></li><li><span class="chapter"><a href="#additional_resources">26. Additional Resources</a></span></li></ul></li><li><span class="part"><a href="#assembly-integrating-amq-streams">V. Integrating Red Hat Process Automation Manager with Red Hat AMQ Streams</a></span><ul><li><span class="chapter"><a href="#integration-kafka-con_integrating-amq-streams">27. Kafka messages in a business process</a></span><ul><li><span class="section"><a href="#message-receive-event-proc_integrating-amq-streams">27.1. Creating an event that receives Kafka messages</a></span></li><li><span class="section"><a href="#message-send-event-proc_integrating-amq-streams">27.2. Creating an event that sends Kafka messages</a></span></li><li><span class="section"><a href="#message-customtask-proc_integrating-amq-streams">27.3. Adding a custom task that sends Kafka messages</a></span></li></ul></li><li><span class="chapter"><a href="#kieserver-kafka-proc_integrating-amq-streams">28. Configuring a KIE Server to send and receive Kafka messages from the process</a></span></li><li><span class="chapter"><a href="#kieserver-kafka-emit-proc_integrating-amq-streams">29. Configuring a service and the KIE Server to emit Kafka messages when a transaction is committed</a></span></li><li><span class="chapter"><a href="#additional_resources_2">30. Additional Resources</a></span></li></ul></li><li><span class="appendix"><a href="#versioning-information">A. Versioning information</a></span></li><li><span class="appendix"><a href="#author-group">B. Contact information</a></span></li></ul></div><section class="preface" id="idm139969152786352"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p>
			As a developer or system administrator, you can integrate Red Hat Process Automation Manager with other products and components, such as Spring Boot, Red Hat Fuse, Red Hat Single Sign-On, and other supported products.
		</p></section><section class="preface" id="snip-conscious-language_integrating"><div class="titlepage"><div><div><h1 class="title">Making open source more inclusive</h1></div></div></div><p>
			Red Hat is committed to replacing problematic language in our code, documentation, and web properties. We are beginning with these four terms: master, slave, blacklist, and whitelist. Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases. For more details, see <a class="link" href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language"><span class="emphasis"><em>our CTO Chris Wright’s message</em></span></a>.
		</p></section><div class="part" id="assembly-springboot-business-apps"><div class="titlepage"><div><div><h1 class="title">Part I. Creating Red Hat Process Automation Manager business applications with Spring Boot</h1></div></div></div><div class="partintro" id="idm139969152781488"><div/><p>
				As a developer, you can use Spring Boot starters through the <a class="link" href="https://start.jbpm.org">business applications</a> website to quickly create Red Hat Process Automation Manager business applications, configure those applications, and deploy them to an existing service or in the cloud.
			</p><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#bus_app_business-applications">1. Red Hat Process Automation Manager Spring Boot business applications</a></span></li><li><span class="chapter"><a href="#bus-app-create_business-applications">2. Creating a business application</a></span></li><li><span class="chapter"><a href="#maven-con_business-applications">3. Apache Maven and Red Hat Process Automation Manager Spring Boot applications</a></span><ul><li><span class="section"><a href="#online-maven-configure-proc_business-applications">3.1. Configuring a Red Hat Process Automation Manager Spring Boot project for the online Maven repository</a></span></li><li><span class="section"><a href="#download-maven-proc_business-applications">3.2. Downloading and configuring the Red Hat Process Automation Manager Maven repository</a></span></li></ul></li><li><span class="chapter"><a href="#bus-app-security-con_business-applications">4. Spring Security with Red Hat Process Automation Manager</a></span><ul><li><span class="section"><a href="#bus-app-security-authorization-proc_business-applications">4.1. Using Spring Security to authenticate with authorization</a></span></li><li><span class="section"><a href="#bus-app-security-disabling-proc_business-applications">4.2. Disabling Spring Security in a Red Hat Process Automation Manager business application</a></span></li><li><span class="section"><a href="#bus-app-security-preauthenticate-proc_business-applications">4.3. Using Spring Security with preauthenication</a></span></li><li><span class="section"><a href="#bus-app-rh-sso_business-applications">4.4. Configuring the business application with Red Hat Single Sign-On</a></span></li></ul></li><li><span class="chapter"><a href="#bus-app-configure-con_business-applications">5. Red Hat Process Automation Manager Spring Boot configuration</a></span><ul><li><span class="section"><a href="#bus-app-con-rest-proc_business-applications">5.1. Configuring REST endpoints for Spring Boot applications</a></span></li><li><span class="section"><a href="#bus-app-config-kie-server-proc_business-applications">5.2. Configuring the KIE Server identity</a></span></li><li><span class="section"><a href="#spring-boot-kafka-proc_business-applications">5.3. Integrating Apache Kafka with your Red Hat Process Automation Manager Spring Boot project</a></span></li><li><span class="section"><a href="#bus-app-configure-central-proc_business-applications">5.4. Configuring Business Central components to start at runtime</a></span></li><li><span class="section"><a href="#bus-app-async-execution-proc_business-applications">5.5. Configuring your Spring Boot application for asynchronous execution</a></span></li><li><span class="section"><a href="#bus-app-quartz_business-applications">5.6. Configuring the business application for a cluster using Quartz</a></span></li><li><span class="section"><a href="#bus-app-user-group_business-applications">5.7. Configuring business application user group providers</a></span></li><li><span class="section"><a href="#bus-app-config-data-source_business-applications">5.8. Configuring a Spring Boot project with a MySQL or PostgreSQL database</a></span></li><li><span class="section"><a href="#bus-app-config-jpa_business-applications">5.9. Configuring business applications for JPA</a></span></li><li><span class="section"><a href="#bus-app-swagger_business-applications">5.10. Enabling Swagger documentation</a></span></li></ul></li><li><span class="chapter"><a href="#creating-self-contained-image-proc_business-applications">6. Creating a self-contained Red Hat Process Automation Manager Spring Boot JAR file</a></span></li><li><span class="chapter"><a href="#bus-app-run_business-applications">7. Business application execution</a></span><ul><li><span class="section"><a href="#bus-apps-run-standard_business-applications">7.1. Running business applications in standalone mode</a></span></li><li><span class="section"><a href="#bus-apps-run-managed_business-applications">7.2. Running business applications in development mode</a></span></li></ul></li><li><span class="chapter"><a href="#bus-apps-import_business-applications">8. Importing and deploying business assets projects in Business Central</a></span></li><li><span class="chapter"><a href="#spring-boot-jms-audit-proc_business-applications">9. Replicating audit data in a JMS message broker</a></span><ul><li><span class="section"><a href="#audit-replication-parameters-ref_business-applications">9.1. Spring Boot JMS audit replication parameters</a></span></li></ul></li></ul></div></div><section class="chapter" id="bus_app_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Red Hat Process Automation Manager Spring Boot business applications</h2></div></div></div><p>
				Spring Framework is a Java platform that provides comprehensive infrastructure support for developing Java applications. Spring Boot is a lightweight framework based on Spring Boot starters. Spring Boot starters are <code class="literal">pom.xml</code> files that contain a set of dependency descriptors that you can include in your Spring Boot project.
			</p><p>
				Red Hat Process Automation Manager Spring Boot business applications are flexible, UI-agnostic logical groupings of individual services that provide certain business capabilities. Business applications are based on Spring Boot starters. They are usually deployed separately and can be versioned individually. A complete business application enables a domain to achieve specific business goals, for example order management or accommodation management.
			</p><p>
				On the <a class="link" href="https://start.jbpm.org">business application</a> website you can create a Process Automation Manager, Decision Manager, or Business Optimizer business application. After you create and configure your business application, you can deploy it to an existing service or to the cloud, through OpenShift.
			</p><p>
				Business applications can contain one or more of the following projects and more than one project of the same type:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Business assets (KJAR): Contains business processes, rules, and forms and are easily imported into Business Central.
					</li><li class="listitem">
						Data model: Data model projects provide common data structures that are shared between the service projects and business assets projects. This enables proper encapsulation, promotes reuse, and reduces shortcuts. Each service project can expose its own public data model.
					</li><li class="listitem">
						Service: A deployable project that provides the actual service with various capabilities. It includes the business logic that operates your business. In most cases, a service project includes business assets and data model projects. A business application can split services into smaller component service projects for better manageability.
					</li></ul></div></section><section class="chapter" id="bus-app-create_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Creating a business application</h2></div></div></div><p>
				You can use the <a class="link" href="https://start.jbpm.org">business application</a> website to quickly and easily create business applications using the Spring Boot framework. Doing this by-passes the need to install and configure Red Hat Process Automation Manager.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following URL in a web browser:
					</p><pre class="screen">https://start.jbpm.org</pre></li><li class="listitem">
						Click <span class="strong strong"><strong>Configure your business application</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Business Automation</strong></span> and click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						Enter a package and application name.
					</li><li class="listitem"><p class="simpara">
						Select <span class="strong strong"><strong>Enterprise 7.10</strong></span> from the <span class="strong strong"><strong>Version</strong></span> menu and click <span class="strong strong"><strong>Next</strong></span>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must select <span class="strong strong"><strong>Enterprise 7.10</strong></span> to create a Red Hat Process Automation Manager business application.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Select the project types that you want to include in your project. You can include more than one project type.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Business Assets</strong></span>: Contains business processes, rules, and forms and are easily imported into Business Central. Select <span class="strong strong"><strong>Dynamic Assets</strong></span> instead if you want to add adaptive and dynamic assets such as cases.
							</li><li class="listitem">
								<span class="strong strong"><strong>Data Model</strong></span>: Provides common data structures that are shared between the service projects and business assets projects. This enables proper encapsulation, promotes reuse, and reduces shortcuts. Each service project can expose its own public data model.
							</li><li class="listitem">
								<span class="strong strong"><strong>Service</strong></span>: Includes business logic that operates your business.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Generate business application</strong></span>.
					</p><p class="simpara">
						The <code class="literal">&lt;BUSINESS-APPLICATION&gt;.zip</code> file downloads, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name that you entered in the <span class="strong strong"><strong>Application Name</strong></span> box.
					</p></li><li class="listitem">
						Extract the <code class="literal">&lt;BUSINESS-APPLICATION&gt;.zip</code> file.
					</li></ol></div></section><section class="chapter" id="maven-con_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Apache Maven and Red Hat Process Automation Manager Spring Boot applications</h2></div></div></div><p>
				Apache Maven is a distributed build automation tool used in Java application development to create, manage, and build software projects. Maven uses standard configuration files called Project Object Model (POM) files to define projects and manage the build process. POM files describe the module and component dependencies, build order, and targets for the resulting project packaging and output using an XML file. This ensures that the project is built in a correct and uniform manner.
			</p><p>
				A Maven repository stores Java libraries, plug-ins, and other build artifacts. The default public repository is the Maven 2 Central Repository, but repositories can be private and internal within a company to share common artifacts among development teams. Repositories are also available from third-parties.
			</p><p>
				You can use the online Maven repository with your Spring Boot projects or you can download the Red Hat Process Automation Manager Maven repository. The recommended approach is to use the online Maven repository with your Spring Boot projects. Maven settings used with a repository manager or repository on a shared server provide better control and manageability of projects.
			</p><section class="section" id="online-maven-configure-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">3.1. Configuring a Red Hat Process Automation Manager Spring Boot project for the online Maven repository</h2></div></div></div><p>
					After you create your Red Hat Process Automation Manager Spring Boot project, configure it with the online Maven Repository to store your application data.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a Red Hat Process Automation Manager Spring Boot project.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the directory that contains your Red Hat Process Automation Manager Spring Boot application, open the <code class="literal">&lt;BUSINESS-APPLICATION&gt;-service/pom.xml</code> file in a text editor or IDE, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem"><p class="simpara">
							Add the following repository to the <code class="literal">repositories</code> element:
						</p><pre class="programlisting language-xml">&lt;repository&gt;
  &lt;id&gt;jboss-enterprise-repository-group&lt;/id&gt;
  &lt;name&gt;Red Hat JBoss Enterprise Maven Repository&lt;/name&gt;
  &lt;url&gt;https://maven.repository.redhat.com/ga/&lt;/url&gt;
  &lt;layout&gt;default&lt;/layout&gt;
  &lt;releases&gt;
    &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
  &lt;/releases&gt;
  &lt;snapshots&gt;
    &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;
  &lt;/snapshots&gt;
&lt;/repository&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the following plug-in repository to the <code class="literal">pluginRepositories</code> element:
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If your <code class="literal">pom.xml</code> file does not have the <code class="literal">pluginRepositories</code> element, add it as well.
							</p></div></div><pre class="programlisting language-xml">&lt;pluginRepository&gt;
  &lt;id&gt;jboss-enterprise-repository-group&lt;/id&gt;
  &lt;name&gt;Red Hat JBoss Enterprise Maven Repository&lt;/name&gt;
  &lt;url&gt;https://maven.repository.redhat.com/ga/&lt;/url&gt;
  &lt;layout&gt;default&lt;/layout&gt;
  &lt;releases&gt;
    &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
  &lt;/releases&gt;
  &lt;snapshots&gt;
    &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;
  &lt;/snapshots&gt;
&lt;/pluginRepository&gt;</pre><p class="simpara">
							Doing this adds the productized Maven repository to your business application.
						</p></li></ol></div></section><section class="section" id="download-maven-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">3.2. Downloading and configuring the Red Hat Process Automation Manager Maven repository</h2></div></div></div><p>
					If you do not want to use the online Maven repository, you can download and configure the Red Hat Process Automation Manager Maven repository. The Red Hat Process Automation Manager Maven repository contains many of the requirements that Java developers typically use to build their applications. This procedure describes how to edit the Maven <code class="literal">settings.xml</code> file to configure the Red Hat Process Automation Manager Maven repository.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When you configure the repository by modifying the Maven <code class="literal">settings.xml</code> file, the changes apply to all of your Maven projects.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a Red Hat Process Automation Manager Spring Boot project.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</a> page in the Red Hat Customer Portal (login required), and select the following product and version from the drop-down options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Product: Red Hat Process Automation Manager
								</li><li class="listitem">
									Version: 7.10
								</li></ul></div></li><li class="listitem">
							Download <span class="strong strong"><strong>Red Hat Process Automation Manager 7.10 Maven Repository</strong></span> (<code class="literal">rhpam-7.10.0-maven-repository.zip</code>).
						</li><li class="listitem">
							Extract the downloaded archive.
						</li><li class="listitem">
							Change to the <code class="literal">~/.m2/</code> directory and open the Maven <code class="literal">settings.xml</code> file in a text editor or integrated development environment (IDE).
						</li><li class="listitem"><p class="simpara">
							Add the following lines to the <code class="literal">&lt;profiles&gt;</code> element of the Maven <code class="literal">settings.xml</code> file, where <code class="literal"><span class="emphasis"><em>&lt;MAVEN_REPOSITORY&gt;</em></span></code> is the path of the Maven repository that you downloaded. The format of <code class="literal"><span class="emphasis"><em>&lt;MAVEN_REPOSITORY&gt;</em></span></code> must be <code class="literal">file://$PATH</code>, for example <code class="literal">file:///home/userX/rhpam-7.10.0.GA-maven-repository/maven-repository</code>.
						</p><pre class="programlisting language-xml">&lt;profile&gt;
  &lt;id&gt;red-hat-enterprise-maven-repository&lt;/id&gt;
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;red-hat-enterprise-maven-repository&lt;/id&gt;
      &lt;url&gt;MAVEN_REPOSITORY&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
  &lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
      &lt;id&gt;red-hat-enterprise-maven-repository&lt;/id&gt;
      &lt;url&gt;&lt;MAVEN_REPOSITORY&gt;&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/pluginRepository&gt;
  &lt;/pluginRepositories&gt;
&lt;/profile&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the following lines to the <code class="literal">&lt;activeProfiles&gt;</code> element of the Maven <code class="literal">settings.xml</code> file and save the file.
						</p><pre class="programlisting language-xml">&lt;activeProfile&gt;red-hat-enterprise-maven-repository&lt;/activeProfile&gt;</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						If your Maven repository contains outdated artifacts, you might encounter one of the following Maven error messages when you build or deploy your project, where <code class="literal"><span class="emphasis"><em>&lt;ARTIFACT_NAME&gt;</em></span></code> is the name of a missing artifact and <code class="literal"><span class="emphasis"><em>&lt;PROJECT_NAME&gt;</em></span></code> is the name of the project you are trying to build:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Missing artifact <span class="emphasis"><em>&lt;PROJECT_NAME&gt;</em></span></code>
							</li><li class="listitem">
								<code class="literal">[ERROR] Failed to execute goal on project <span class="emphasis"><em>&lt;ARTIFACT_NAME&gt;</em></span>; Could not resolve dependencies for <span class="emphasis"><em>&lt;PROJECT_NAME&gt;</em></span></code>
							</li></ul></div><p>
						To resolve the issue, delete the cached version of your local repository located in the <code class="literal">~/.m2/repository</code> directory to force a download of the latest Maven artifacts.
					</p></div></div></section></section><section class="chapter" id="bus-app-security-con_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Spring Security with Red Hat Process Automation Manager</h2></div></div></div><p>
				Spring Security is provided by a collection of servlet filters that make up the <a class="link" href="https://spring.io/projects/spring-security">Spring Security library</a>. These filters provide authentication through user names and passwords and authorization through roles. The default Spring Security implementation generated in a Red Hat Process Automation Manager Spring Boot application provides authorization without authentication. This means that anyone with a user name and password valid for the application can access the application without a role.
			</p><p>
				The servlet filters protect your Spring Boot application against common exploits such as cross-site request forgery (CSRF) and cross-origin resource sharing (CORS). Spring Web relies on the <a class="link" href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-servlet"><code class="literal">DispatcherServlet</code></a> to redirect incoming HTTP requests to your underlying java REST resources annotated with the <code class="literal">@Controller</code> annotation. The <code class="literal">DispatchServlet</code> is agnostic of elements such as security. It is good practice and more efficient to handle implementation details such a security outside of the business application logic. Therefore, Spring uses filters to intercept HTTP requests before routing them to the <code class="literal">DispatchServlet</code>.
			</p><p>
				A typical Spring Security implementation consists of the following steps that use multiple servlet filters:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Extract and decode or decrypt user credentials from the HTTP request.
					</li><li class="listitem">
						Complete authentication by validating the credentials against the corporate identity provider, for example a database, a web service, or Red Hat Single Sign-On.
					</li><li class="listitem">
						Complete authorization by determining whether the authorized user has access rights to perform the request.
					</li><li class="listitem">
						If the user is authenticated and authorized, propagate the request to the <code class="literal">DispatchServlet</code>.
					</li></ol></div><p>
				Spring breaks these steps down into individual filters and chains them together in a FilterChain. This chaining method provides the flexibility required to work with almost any identity provider and security framework. With Spring Security, you can define a FilterChain for your application programmatically. The following section is from the <code class="literal">business-application-service/src/main/java/com/company/service/DefaultWebSecurityConfig.java</code> file generated as part of a business application created on the <code class="literal"><a class="link" href="https://start.jbpm.org">https://start.jbpm.org</a></code> web site.
			</p><pre class="programlisting language-java">@Configuration("kieServerSecurity")
@EnableWebSecurity
public class DefaultWebSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override (1)
    protected void configure(HttpSecurity http) throws Exception {
        http
                .cors().and()
                .csrf().disable()       (2)
                .authorizeRequests()    (3)
                .antMatchers("/rest/*").authenticated().and()
                .httpBasic().and()      (4)
                .headers().frameOptions().disable();    (5)
    }</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>(1)</strong></span> Overrides the default <code class="literal">configure(HttpSecurity http)</code> method and defines a custom FilterChain using the Spring HttpClient fluent API/DSL
					</li><li class="listitem">
						<span class="strong strong"><strong>(2)</strong></span> Disables common exploit filters for CORS and CSRF tokens for local testing
					</li><li class="listitem">
						<span class="strong strong"><strong>(3)</strong></span> Requires authentication for any requests made to the pattern 'rest/*' but no roles are defined
					</li><li class="listitem">
						<span class="strong strong"><strong>(4)</strong></span> Allows basic authentication through the authorization header, for example header 'Authorization: Basic dGVzdF91c2VyOnBhc3N3b3Jk'
					</li><li class="listitem">
						<span class="strong strong"><strong>(5)</strong></span> Removes the 'X-Frame-Options' header from request/response
					</li></ul></div><p>
				This configuration allows any authenticated user to execute the KIE API.
			</p><p>
				Because the default implementation is not integrated into any external identity provider, users are defined in memory, in the same <code class="literal">DefaultWebSecurityConfg</code> class. The following section shows the users that are provided when you create a Red Hat Process Automation Manager Spring Boot business application:
			</p><pre class="programlisting language-java">    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication().withUser("user").password("user").roles("kie-server");
        auth.inMemoryAuthentication().withUser("wbadmin").password("wbadmin").roles("admin");
        auth.inMemoryAuthentication().withUser("kieserver").password("kieserver1!").roles("kie-server");
    }</pre><section class="section" id="bus-app-security-authorization-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">4.1. Using Spring Security to authenticate with authorization</h2></div></div></div><p>
					By default, anyone with a user name and password valid for the Red Hat Process Automation Manager Spring Boot application can access the application without requiring a role. Spring Security authentication and authorization are derived from the <code class="literal">HTTPSecurity</code> filter chain configuration. To protect the REST API from users that do not have a specific role mapping, use the Spring Security <code class="literal">.authorizeRequests()</code> method to match the URLs that you want to authorize.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Red Hat Process Automation Manager Spring Boot application.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the directory that contains your Red Hat Process Automation Manager Spring Boot application, open the <code class="literal">business-application-service/src/main/java/com/company/service/DefaultWebSecurityConfig.java</code> file in a text editor or IDE.
						</li><li class="listitem"><p class="simpara">
							To authorize requests for access by an authenticated user only if they have a specific role, edit the <code class="literal">.antMatchers("/rest/*").authenticated().and()</code> line in one of the following ways:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To authorize for a single role, edit the <code class="literal">antMatchers</code> method as shown in the following example, where <code class="literal">&lt;role&gt;</code> is the role that that the user must have for access:
								</p><pre class="programlisting language-java">@Configuration("kieServerSecurity")
@EnableWebSecurity
public class DefaultWebSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .cors().and().csrf().disable()
            .authorizeRequests()
                .antMatchers("/**").hasRole("&lt;role&gt;")
                .anyRequest().authenticated()
            .and().httpBasic()
            .and().headers().frameOptions().disable();
    }
    ...</pre></li><li class="listitem"><p class="simpara">
									To authorize a user that has one of a range of roles, edit the <code class="literal">antMatchers</code> method as shown in the following example, where <code class="literal">&lt;role&gt;</code> and <code class="literal">&lt;role1&gt;</code> are each roles the user can have for access:
								</p><pre class="programlisting language-java">@Configuration("kieServerSecurity")
@EnableWebSecurity
public class DefaultWebSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .cors().and().csrf().disable()
            .authorizeRequests()
                .antMatchers("/**").hasAnyRole("&lt;role&gt;", "&lt;role1")
                .anyRequest().authenticated()
            .and().httpBasic()
            .and().headers().frameOptions().disable();
    }
    ...</pre></li></ul></div></li></ol></div><p>
					The <code class="literal">authorizeRequests</code> method requires authorization of requests for a specific expression. All requests must be successfully authenticated. Authentication is performed using HTTP basic authentication. If an authenticated user tries to access a resource that is protected for a role that they do not have, the user receives an <code class="literal">HTTP 403 (Forbidden)</code> error.
				</p></section><section class="section" id="bus-app-security-disabling-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">4.2. Disabling Spring Security in a Red Hat Process Automation Manager business application</h2></div></div></div><p>
					You can configure Spring Security in a Red Hat Process Automation Manager business application to provide the security context without authentication.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Red Hat Process Automation Manager Spring Boot application.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the directory that contains your Red Hat Process Automation Manager Spring Boot application, open the <code class="literal">business-application-service/src/main/java/com/company/service/DefaultWebSecurityConfig.java</code> file in a text editor or integrated development environment (IDE).
						</li><li class="listitem"><p class="simpara">
							Edit the <code class="literal">.antMatchers</code> method as shown in the following example:
						</p><pre class="programlisting language-java">    @Override
    protected void configure(HttpSecurity http) throws Exception {

                http
                    .cors().and().csrf().disable()
                    .authorizeRequests()
                    .antMatchers("/*")
                        .permitAll()
                    .and().headers().frameOptions().disable();

    }</pre><p class="simpara">
							The <code class="literal">PermitAll</code> method allows any and all requests for the specified URL pattern.
						</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Because no security context is passed in the <code class="literal">HttpServletRequest</code>, Spring creates an <code class="literal">AnonymousAuthenticationToken</code> and populates the <code class="literal">SecurityContext</code> with the <code class="literal">anonymousUser</code> user with no designated roles other than the <code class="literal">ROLE_ANONYMOUS</code> role. The user will not have access to many of the features of the application, for example they will be unable to assign actions to group assigned tasks.
					</p></div></div></section><section class="section" id="bus-app-security-preauthenticate-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">4.3. Using Spring Security with preauthenication</h2></div></div></div><p>
					If you disable Spring Security authentication by using the <code class="literal">PermitAll</code> method, any user can log in to the application, but users will have limited access and functionality. However, you can preauthenticate a user, for example a designated service account, so a group of users can use the same login but have all of the permissions that they require. That way, you do not need to create credentials for each user.
				</p><p>
					The easiest way to implement preauthentication is to create a custom filter servlet and add it before the security FilterChain in the <code class="literal">DefaultWebSecurityConfig</code> class. This way, you can inject a customized, profile-based security context, control its contents, and keep it simple.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Red Hat Process Automation Manager Spring Boot application and you have disabled Spring Security as <a class="xref" href="#bus-app-security-disabling-proc_business-applications" title="4.2. Disabling Spring Security in a Red Hat Process Automation Manager business application">Section 4.2, “Disabling Spring Security in a Red Hat Process Automation Manager business application”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the following class that extends the <code class="literal">AnonymousAuthenticationFilter</code> class:
						</p><pre class="programlisting language-java">import org.springframework.security.authentication.AnonymousAuthenticationToken;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.web.authentication.AnonymousAuthenticationFilter;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import java.io.IOException;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class &lt;CLASS_NAME&gt; extends AnonymousAuthenticationFilter {
    private static final Logger log = LoggerFactory.getLogger(&lt;CLASS_NAME&gt;.class);

    public AnonymousAuthFilter() {
        super("PROXY_AUTH_FILTER");
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)
            throws IOException, ServletException {

        SecurityContextHolder.getContext().setAuthentication(createAuthentication((HttpServletRequest) req));
        log.info("SecurityContextHolder pre-auth user: {}",  SecurityContextHolder.getContext());

        if (log.isDebugEnabled()) {
            log.debug("Populated SecurityContextHolder with authenticated user: {}",
                    SecurityContextHolder.getContext().getAuthentication());
        }

        chain.doFilter(req, res);
    }

    @Override
    protected Authentication createAuthentication(final HttpServletRequest request)
            throws AuthenticationException {

        log.info("&lt;ANONYMOUS_USER&gt;");


        List&lt;? extends GrantedAuthority&gt; authorities = Collections
                .unmodifiableList(Arrays.asList(new SimpleGrantedAuthority("&lt;ROLE&gt;")
                ));
        return new AnonymousAuthenticationToken("ANONYMOUS", "&lt;ANONYMOUS_USER&gt;", authorities);
    }

}</pre></li><li class="listitem"><p class="simpara">
							Replace the following variables:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Replace <code class="literal">&lt;CLASS_NAME&gt;</code> with a name for this class, for example <code class="literal">AnonymousAuthFilter</code>.
								</li><li class="listitem">
									Replace <code class="literal">&lt;ANONYMOUS_USER&gt;</code> with a user ID, for example <code class="literal">Service_Group</code>.
								</li><li class="listitem">
									Replace <code class="literal">&lt;ROLE&gt;</code> with the role that has the privileges that you want to give to <code class="literal">&lt;ANONYMOUS_USER&gt;</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							If you want to give <code class="literal">&lt;ANONYMOUS_USER&gt;</code> more than one role, add additional roles as shown in the following example:
						</p><pre class="programlisting language-java">.unmodifiableList(Arrays.asList(new SimpleGrantedAuthority("&lt;ROLE&gt;")
, new SimpleGrantedAuthority("&lt;ROLE2&gt;")</pre></li><li class="listitem"><p class="simpara">
							Add <code class="literal">.anonymous().authenticationFilter(new &lt;CLASS_NAME&gt;()).and()</code> to the <code class="literal">business-application-service/src/main/java/com/company/service/DefaultWebSecurityConfig.java</code> file, where <code class="literal">&lt;CLASS_NAME&gt;</code> is the name of the class that you created:
						</p><pre class="programlisting language-java">    @Override
    protected void configure(HttpSecurity http) throws Exception {

                http
                    .anonymous().authenticationFilter(new &lt;CLASS_NAME&gt;()).and() // Override anonymousUser
                    .cors().and().csrf().disable()
                    .authorizeRequests()
                    .antMatchers("/*").permitAll()
                    .and().headers().frameOptions().disable();

    }</pre></li></ol></div></section><section class="section" id="bus-app-rh-sso_business-applications"><div class="titlepage"><div><div><h2 class="title">4.4. Configuring the business application with Red Hat Single Sign-On</h2></div></div></div><p>
					Most organizations provide user and group details through single sign-on (SSO) tokens. You can use Red Hat Single Sign-On (RHSSO) to enable single sign-on between your services and to have a central place to configure and manage your users and roles.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot application ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business applications</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download and install RHSSO. For instructions, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/getting_started_guide/"><span class="emphasis"><em>Red Hat Single Sign-On Getting Started Guide</em></span></a>.
						</li><li class="listitem"><p class="simpara">
							Configure RHSSO:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Either use the default master realm or create a new realm.
								</p><p class="simpara">
									A realm manages a set of users, credentials, roles, and groups. A user belongs to and logs into a realm. Realms are isolated from one another and can only manage and authenticate the users that they control.
								</p></li><li class="listitem">
									Create the <code class="literal">springboot-app</code> client and set the <code class="literal">AccessType</code> to public.
								</li><li class="listitem"><p class="simpara">
									Set a valid redirect URI and web origin according to your local setup, as shown in the following example:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Valid redirect URIs: <code class="literal">http://localhost:8090/*</code>
										</li><li class="listitem">
											Web origin: <code class="literal">http://localhost:8090</code>
										</li></ul></div></li><li class="listitem">
									Create realm roles that are used in the application.
								</li><li class="listitem">
									Create users that are used in the application and assign roles to them.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Add the following element and property to the Spring Boot project <code class="literal">pom.xml</code> file, where <code class="literal">&lt;KEYCLOAK_VERSION&gt;</code> is the version of Keycloak that you are using:
						</p><pre class="programlisting language-xml">&lt;properties&gt;
  &lt;version.org.keycloak&gt;&lt;KEYCLOAK_VERSION&gt;&lt;/version.org.keycloak&gt;
&lt;/properties&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the following dependencies to the Spring Boot project <code class="literal">pom.xml</code> file:
						</p><pre class="programlisting language-xml">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.keycloak.bom&lt;/groupId&gt;
      &lt;artifactId&gt;keycloak-adapter-bom&lt;/artifactId&gt;
      &lt;version&gt;${version.org.keycloak}&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

  ....

&lt;dependency&gt;
  &lt;groupId&gt;org.keycloak&lt;/groupId&gt;
  &lt;artifactId&gt;keycloak-spring-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;</pre></li><li class="listitem"><p class="simpara">
							In your Spring Boot project directory, open the <code class="literal">business-application-service/src/main/resources/application.properties</code> file and add the following lines:
						</p><pre class="screen"># keycloak security setup
keycloak.auth-server-url=http://localhost:8100/auth
keycloak.realm=master
keycloak.resource=springboot-app
keycloak.public-client=true
keycloak.principal-attribute=preferred_username
keycloak.enable-basic-auth=true</pre></li><li class="listitem"><p class="simpara">
							Modify the <code class="literal">business-application-service/src/main/java/com/company/service/DefaultWebSecurityConfig.java</code> file to ensure that Spring Security works correctly with RHSSO:
						</p><pre class="programlisting language-java">import org.keycloak.adapters.KeycloakConfigResolver;
import org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;
import org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;
import org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;
import org.springframework.security.core.session.SessionRegistryImpl;
import org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;
import org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;

@Configuration("kieServerSecurity")
@EnableWebSecurity
public class DefaultWebSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        super.configure(http);
        http
        .csrf().disable()
        .authorizeRequests()
            .anyRequest().authenticated()
            .and()
        .httpBasic();
    }

    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();
        SimpleAuthorityMapper mapper = new SimpleAuthorityMapper();
        mapper.setPrefix("");
        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(mapper);
        auth.authenticationProvider(keycloakAuthenticationProvider);
    }

    @Bean
    public KeycloakConfigResolver KeycloakConfigResolver() {
       return new KeycloakSpringBootConfigResolver();
    }

    @Override
    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {
        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());
    }
}</pre></li></ol></div></section></section><section class="chapter" id="bus-app-configure-con_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Red Hat Process Automation Manager Spring Boot configuration</h2></div></div></div><p>
				After you create your Spring Boot project, you can configure several components to customize your application.
			</p><section class="section" id="bus-app-con-rest-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">5.1. Configuring REST endpoints for Spring Boot applications</h2></div></div></div><p>
					After you create your Spring Boot project, you can configure the host, port, and path for the REST endpoint for your Spring Boot application.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business application</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the Spring Boot project ZIP file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the <code class="literal">application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Configure the host, port, and path for the REST endpoints, where <code class="literal">&lt;ADDRESS&gt;</code> is the server address and <code class="literal">&lt;PORT&gt;</code> is the server port:
						</p><pre class="programlisting language-bash">server.address=&lt;ADDRESS&gt;
server.port=&lt;PORT&gt;
cxf.path=/rest</pre><p class="simpara">
							The following example adds the REST endpoint to the address <code class="literal">localhost</code> on port <code class="literal">8090</code>.
						</p><pre class="programlisting language-bash">server.address=localhost
server.port=8090
cxf.path=/rest</pre></li></ol></div></section><section class="section" id="bus-app-config-kie-server-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">5.2. Configuring the KIE Server identity</h2></div></div></div><p>
					After you create your Spring Boot project, you can configure KIE Server so that it can be easily identified.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot business application ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business application</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the Spring Boot project ZIP file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the <code class="literal">application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Configure the KIE Server parameters as shown in the following example:
						</p><pre class="programlisting language-bash">kieserver.serverId=&lt;BUSINESS-APPLICATION&gt;-service
kieserver.serverName=&lt;BUSINESS-APPLICATION&gt;-service
kieserver.location=http://localhost:8090/rest/server
kieserver.controllers=http://localhost:8080/business-central/rest/controller</pre><p class="simpara">
							The following table describes the KIE Server parameters that you can configure in your business project:
						</p><div class="table" id="idm139969153038912"><p class="title"><strong>Table 5.1. kieserver parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 55%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969153033152" scope="col">Parameter</th><th align="left" valign="top" id="idm139969152627664" scope="col">Values</th><th align="left" valign="top" id="idm139969152626576" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969153033152">
										<p>
											<code class="literal">kieserver.serverId</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969152627664">
										<p>
											string
										</p>
										</td><td align="left" valign="top" headers="idm139969152626576">
										<p>
											The ID used to identify the business application when connecting to the Process Automation Manager controller.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969153033152">
										<p>
											<code class="literal">kieserver.serverName</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969152627664">
										<p>
											string
										</p>
										</td><td align="left" valign="top" headers="idm139969152626576">
										<p>
											The name used to identify the business application when it connects to the Process Automation Manager controller. Can be the same string used for the <code class="literal">kieserver.serverId</code> parameter.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969153033152">
										<p>
											<code class="literal">kieserver.location</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969152627664">
										<p>
											URL
										</p>
										</td><td align="left" valign="top" headers="idm139969152626576">
										<p>
											Used by other components that use the REST API to identify the location of this server. Do not use the location as defined by <code class="literal">server.address</code> and <code class="literal">server.port</code>.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969153033152">
										<p>
											<code class="literal">kieserver.controllers</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969152627664">
										<p>
											URLs
										</p>
										</td><td align="left" valign="top" headers="idm139969152626576">
										<p>
											A comma-separated list of controller URLs.
										</p>
										</td></tr></tbody></table></div></div></li></ol></div></section><section class="section" id="spring-boot-kafka-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">5.3. Integrating Apache Kafka with your Red Hat Process Automation Manager Spring Boot project</h2></div></div></div><p>
					Apache Kafka is a distributed data streaming platform that can publish, subscribe to, store, and process streams of records in real time. It is designed to handle data streams from multiple sources and deliver them to multiple consumers. Apache Kafka is an alternative to a traditional enterprise messaging system.
				</p><p>
					You can integrate Apache Kafka with your Red Hat Process Automation Manager Spring Boot project.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have an existing Red Hat Process Automation Manager Spring Boot project.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In your Spring Boot project directory, open the <code class="literal">business-application-service/src/main/resources/application.properties</code> file.
						</li><li class="listitem"><p class="simpara">
							Add the <code class="literal">kieserver.kafka.enabled</code> system property with value <code class="literal">true</code>:
						</p><pre class="programlisting language-bash">kieserver.kafka.enabled=true</pre></li></ol></div></section><section class="section" id="bus-app-configure-central-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">5.4. Configuring Business Central components to start at runtime</h2></div></div></div><p>
					If you selected <span class="strong strong"><strong>Business Automation</strong></span> when you created your Spring Boot business application, you can specify which Business Central components will start at runtime.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot business application ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business application</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the Spring Boot project ZIP file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the <code class="literal">application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							To set a component to start at runtime, set the value of the component to <code class="literal">true.</code>
						</p><p class="simpara">
							The following table lists the components that you can set to start at runtime:
						</p><div class="table" id="idm139969149471152"><p class="title"><strong>Table 5.2. <code class="literal">kieserver</code> capabilities parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 55%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969148800768" scope="col">Parameter</th><th align="left" valign="top" id="idm139969148799680" scope="col">Values</th><th align="left" valign="top" id="idm139969148798592" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969148800768">
										<p>
											<code class="literal">kieserver.drools.enabled</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148799680">
										<p>
											<code class="literal">true, false</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148798592">
										<p>
											Enables or disables the Decision Manager component.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969148800768">
										<p>
											<code class="literal">kieserver.dmn.enabled</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148799680">
										<p>
											<code class="literal">true, false</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148798592">
										<p>
											Enables or disables the Decision Model and Notation (DMN) component.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969148800768">
										<p>
											<code class="literal">kieserver.jbpm.enabled</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148799680">
										<p>
											<code class="literal">true, false</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148798592">
										<p>
											Enables or disables the Red Hat Process Automation Manager component.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969148800768">
										<p>
											<code class="literal">kieserver.jbpmui.enabled</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148799680">
										<p>
											<code class="literal">true, false</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148798592">
										<p>
											Enables or disables the Red Hat Process Automation Manager UI component.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969148800768">
										<p>
											<code class="literal">kieserver.casemgmt.enabled</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148799680">
										<p>
											<code class="literal">true, false</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969148798592">
										<p>
											Enables or disables the case management component.
										</p>
										</td></tr></tbody></table></div></div></li></ol></div></section><section class="section" id="bus-app-async-execution-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">5.5. Configuring your Spring Boot application for asynchronous execution</h2></div></div></div><p>
					After you create your Spring Boot project, you can use the <code class="literal">jbpm.executor</code> parameters to enable asynchronous execution.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot business application ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business application</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the Spring Boot project ZIP file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the <code class="literal">application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							To enable asynchronous execution, set the value of the <code class="literal">jbpm.executor.enabled</code> parameter to <code class="literal">true</code>, uncomment the other <code class="literal">jbpm.executor</code> parameters, and change the values as required, as shown in the following example:
						</p><pre class="programlisting language-bash">jbpm.executor.enabled=true
jbpm.executor.retries=5
jbpm.executor.interval=0
jbpm.executor.threadPoolSize=1
jbpm.executor.timeUnit=SECONDS</pre><p class="simpara">
							The following table describes the executor parameters that you can configure in your business project:
						</p><div class="table" id="idm139969145106864"><p class="title"><strong>Table 5.3. Executor parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 55%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969145101104" scope="col">Parameter</th><th align="left" valign="top" id="idm139969145100016" scope="col">Values</th><th align="left" valign="top" id="idm139969145098928" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969145101104">
										<p>
											<code class="literal">jbpm.executor.enabled</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969145100016">
										<p>
											<code class="literal">true, false</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969145098928">
										<p>
											Disables or enables the executor component.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969145101104">
										<p>
											<code class="literal">jbpm.executor.retries</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969145100016">
										<p>
											integer
										</p>
										</td><td align="left" valign="top" headers="idm139969145098928">
										<p>
											Specifies the number of retries if errors occur while a job is running.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969145101104">
										<p>
											<code class="literal">jbpm.executor.interval</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969145100016">
										<p>
											integer
										</p>
										</td><td align="left" valign="top" headers="idm139969145098928">
										<p>
											Specifies the length of time that the executor uses to synchronize with the database. The unit of time is specified by the <code class="literal">jbpm.executor.timeUnit</code> parameter. Disabled by default (value <code class="literal">0</code>).
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969145101104">
										<p>
											<code class="literal">jbpm.executor.threadPoolSize</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969145100016">
										<p>
											integer
										</p>
										</td><td align="left" valign="top" headers="idm139969145098928">
										<p>
											Specifies the thread pool size.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm139969145101104">
										<p>
											<code class="literal">jbpm.executor.timeUnit</code>
										</p>
										</td><td align="left" valign="top" headers="idm139969145100016">
										<p>
											string
										</p>
										</td><td align="left" valign="top" headers="idm139969145098928">
										<p>
											Specifies the time unit used to calculate the interval that the executor uses to synchronize with the database. The value must be a valid constant of <code class="literal">java.util.concurrent.TimeUnit</code>. The default value is <code class="literal">SECONDS</code>.
										</p>
										</td></tr></tbody></table></div></div></li></ol></div></section><section class="section" id="bus-app-quartz_business-applications"><div class="titlepage"><div><div><h2 class="title">5.6. Configuring the business application for a cluster using Quartz</h2></div></div></div><p>
					If you plan to run your application in a cluster, you must configure the Quartz timer service.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business application</a> website, that you want to use in a cluster.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">quartz.properties</code> file and add the following content:
						</p><pre class="programlisting language-bash">#============================================================================
# Configure Main Scheduler Properties
#============================================================================
org.quartz.scheduler.instanceName = SpringBootScheduler
org.quartz.scheduler.instanceId = AUTO
org.quartz.scheduler.skipUpdateCheck=true
org.quartz.scheduler.idleWaitTime=1000
#============================================================================
# Configure ThreadPool
#============================================================================
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
org.quartz.threadPool.threadPriority = 5
#============================================================================
# Configure JobStore
#============================================================================
org.quartz.jobStore.misfireThreshold = 60000
org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreCMT
org.quartz.jobStore.driverDelegateClass=org.jbpm.process.core.timer.impl.quartz.DeploymentsAwareStdJDBCDelegate
org.quartz.jobStore.useProperties=false
org.quartz.jobStore.dataSource=myDS
org.quartz.jobStore.nonManagedTXDataSource=notManagedDS
org.quartz.jobStore.tablePrefix=QRTZ_
org.quartz.jobStore.isClustered=true
org.quartz.jobStore.clusterCheckinInterval = 5000
#============================================================================
# Configure Datasources
#============================================================================
org.quartz.dataSource.myDS.connectionProvider.class=org.jbpm.springboot.quartz.SpringConnectionProvider
org.quartz.dataSource.myDS.dataSourceName=quartzDataSource
org.quartz.dataSource.notManagedDS.connectionProvider.class=org.jbpm.springboot.quartz.SpringConnectionProvider
org.quartz.dataSource.notManagedDS.dataSourceName=quartzNotManagedDataSource</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Data source names in the Quartz configuration file refer to Spring beans. The connection provider must be set to <code class="literal">org.jbpm.springboot.quartz.SpringConnectionProvider</code> to enable integration with Spring-based data sources.
							</p></div></div></li><li class="listitem"><p class="simpara">
							To enable the Quartz clustered timers and set the path of the <code class="literal">quartz.properties</code> file that you created in the previous step, include the following properties in the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resourcesapplication.properties</code> file, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</p><pre class="programlisting language-bash">jbpm.quartz.enabled=true
jbpm.quartz.configuration=quartz.properties</pre></li><li class="listitem"><p class="simpara">
							Create a managed and an unmanaged data source by adding the following content to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources/application.properties</code> file:
						</p><pre class="programlisting language-bash"># enable to use database as storage
jbpm.quartz.db=true

quartz.datasource.name=quartz
quartz.datasource.username=sa
quartz.datasource.password=sa
quartz.datasource.url=jdbc:h2:./target/spring-boot-jbpm;MVCC=true
quartz.datasource.driver-class-name=org.h2.Driver

# used to configure connection pool
quartz.datasource.dbcp2.maxTotal=15

# used to initialize quartz schema
quartz.datasource.initialization=true
spring.datasource.schema=classpath*:&lt;QUARTZ_TABLES_H2&gt;.sql
spring.datasource.initialization-mode=always</pre><p class="simpara">
							In the preceding example, replace <code class="literal">&lt;QUARTZ_TABLES_H2&gt;</code> with the name of a Quartz H2 database schema script. The last three lines of the preceding configuration initialize the database schema.
						</p></li></ol></div><p>
					By default, Quartz requires two data sources:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Managed data source to participate in the transaction of the decision engine or process engine
						</li><li class="listitem">
							Unmanaged data source to look up timers to trigger without any transaction handling
						</li></ul></div><p>
					Red Hat Process Automation Manager business applications assume that the Quartz database (schema) will be co-located with Red Hat Process Automation Manager tables and therefore produce data sources used for transactional operations for Quartz.
				</p><p>
					The other (non transactional) data source must be configured but it should point to the same database as the main data source.
				</p></section><section class="section" id="bus-app-user-group_business-applications"><div class="titlepage"><div><div><h2 class="title">5.7. Configuring business application user group providers</h2></div></div></div><p>
					With Red Hat Process Automation Manager, you can manage human-centric activities. To provide integration with user and group repositories, you can use two KIE API entry points:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">UserGroupCallback</code>: Responsible for verifying whether a user or group exists and for collecting groups for a specific user
						</li><li class="listitem">
							<code class="literal">UserInfo</code>: Responsible for collecting additional information about users and groups, for example email addresses and preferred language
						</li></ul></div><p>
					You can configure both of these components by providing alternative code, either code provided out of the box or custom developed code.
				</p><p>
					For the <code class="literal">UserGroupCallback</code> component, retain the default implementation because it is based on the security context of the application. For this reason, it does not matter which backend store is used for authentication and authorisation (for example, RH-SSO). It will be automatically used as a source of information for collecting user and group information.
				</p><p>
					The <code class="literal">UserInfo</code> component is a separate component because it collects more advanced information.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business application</a> website and that contains a business automation project.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To provide an alternative implementation of <code class="literal">UserGroupCallback</code>, add the following code to the Application class or a separate class annotated with <code class="literal">@Configuration</code>:
						</p><pre class="programlisting language-java">@Bean(name = "userGroupCallback")
public UserGroupCallback userGroupCallback(IdentityProvider identityProvider) throws IOException {
    return new MyCustomUserGroupCallback(identityProvider);
}</pre></li><li class="listitem"><p class="simpara">
							To provide an alternative implementation of <code class="literal">UserInfo</code>, add the following code to the Application class or a separate class annotated with <code class="literal">@Configuration</code>:
						</p><pre class="programlisting language-java">@Bean(name = "userInfo")
public UserInfo userInfo() throws IOException {
    return new MyCustomUserInfo();
}</pre></li></ol></div></section><section class="section" id="bus-app-config-data-source_business-applications"><div class="titlepage"><div><div><h2 class="title">5.8. Configuring a Spring Boot project with a MySQL or PostgreSQL database</h2></div></div></div><p>
					Red Hat Process Automation Manager business applications are generated with the default H2 database. You can change the database type to MySQL or PostgreSQL.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot application file that you created using the <a class="link" href="http://start.jbpm.org">business applications</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the Spring Boot project ZIP file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the <code class="literal">application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Configure your Spring Boot project to use a MySQL or PostgreSQL, complete one of the following set of steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									To configure your business application to use a MySQL database, locate the following parameters in the <code class="literal">application.properties</code> file and change the values as shown:
								</p><pre class="programlisting language-bash">spring.datasource.username=jbpm
spring.datasource.password=jbpm
spring.datasource.url=jdbc:mysql://localhost:3306/jbpm
spring.datasource.driver-class-name=com.mysql.jdbc.jdbc2.optional.MysqlXADataSource

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect</pre></li><li class="listitem"><p class="simpara">
									To configure your business application to use a PostgreSQL database, locate the following parameters in the <code class="literal">application.properties</code> file and change the values as shown:
								</p><pre class="programlisting language-bash">spring.datasource.username=jbpm
spring.datasource.password=jbpm
spring.datasource.url=jdbc:postgresql://localhost:5432/jbpm
spring.datasource.driver-class-name=org.postgresql.xa.PGXADataSource

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										To create a PostgreSQL schema that uses the <code class="literal">bytea</code> column type instead of the <code class="literal">oid</code> column type, set the value of the <code class="literal">org.kie.persistence.postgresql.useBytea</code> property to <code class="literal">true</code>:
									</p><pre class="screen">org.kie.persistence.postgresql.useBytea=true</pre></div></div></li></ol></div></li><li class="listitem">
							Save the <code class="literal">application.properties</code> file.
						</li></ol></div></section><section class="section" id="bus-app-config-jpa_business-applications"><div class="titlepage"><div><div><h2 class="title">5.9. Configuring business applications for JPA</h2></div></div></div><p>
					The Java Persistence API (JPA) is a standard technology that enables you to map objects to relational databases. You must configure JPA for your Red Hat Process Automation Manager business application.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business applications</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the <code class="literal">&lt;BUSINESS-APPLICATION&gt;.zip</code> file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the <code class="literal">application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Locate the following parameters in the <code class="literal">application.properties</code> file and verify that they have the values shown:
						</p><pre class="programlisting language-bash">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.show_sql=false
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl</pre></li><li class="listitem"><p class="simpara">
							If your business application has business automation capabilities, you can add entities to the entity manager factory by adding a comma-separated list of packages:
						</p><pre class="programlisting language-bash">spring.jpa.properties.entity-scan-packages=org.jbpm.springboot.samples.entities</pre><p class="simpara">
							Business applications with business automation capabilities create an entity manager factory based on the <code class="literal">persistence.xml</code> file that comes with Red Hat Process Automation Manager. All entities found in the <code class="literal">org.jbpm.springboot.samples.entities</code> package are automatically added to the entity manager factory and used the same as any other JPA entity in the application.
						</p></li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						For more information about configuring JPA, see the <a class="link" href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle"><span class="emphasis"><em>Spring Boot Reference Guide</em></span></a>.
					</p></div></section><section class="section" id="bus-app-swagger_business-applications"><div class="titlepage"><div><div><h2 class="title">5.10. Enabling Swagger documentation</h2></div></div></div><p>
					You can enable Swagger-based documentation for all endpoints available in the service project of your Red Hat Process Automation Manager business application.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot application ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business applications</a> website.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Extract the <code class="literal">&lt;BUSINESS-APPLICATION&gt;.zip</code> file and navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							Open the service project <code class="literal">pom.xml</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Add the following dependencies to the service project <code class="literal">pom.xml</code> file and save the file.
						</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;
  &lt;artifactId&gt;cxf-rt-rs-service-description-swagger&lt;/artifactId&gt;
  &lt;version&gt;3.2.6&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;io.swagger&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;
  &lt;version&gt;1.5.15&lt;/version&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;
      &lt;artifactId&gt;jsr311-api&lt;/artifactId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;</pre></li><li class="listitem"><p class="simpara">
							To enable the Swagger UI (optional), add the following dependency to the <code class="literal">pom.xml</code> file and save the file.
						</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.webjars&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;
  &lt;version&gt;2.2.10&lt;/version&gt;
&lt;/dependency&gt;</pre></li><li class="listitem">
							Open the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service/src/main/resources/application.properties</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Add the following line to the <code class="literal">application.properties</code> file to enable Swagger support:
						</p><pre class="programlisting language-bash">kieserver.swagger.enabled=true</pre></li></ol></div><p>
					After you start the business application, you can view the Swagger document at <code class="literal">http://localhost:8090/rest/swagger.json</code>. The complete set of endpoints is available at <code class="literal">http://localhost:8090/rest/api-docs?url=http://localhost:8090/rest/swagger.json</code>.
				</p></section></section><section class="chapter" id="creating-self-contained-image-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Creating a self-contained Red Hat Process Automation Manager Spring Boot JAR file</h2></div></div></div><p>
				You can create a self-contained Red Hat Process Automation Manager Spring Boot JAR file that contains multiple versions of the same KJAR file, including modules. These are files that have the same <code class="literal">artifactID</code> and <code class="literal">groupID</code> attribute values, but have different <code class="literal">version</code> values. The KJAR files are separated from the <code class="literal">BOOT-INF/lib</code> JAR files to avoid class loader collisions. Each KJAR classpath container file is isolated from other KJAR classpath container files and does not rely on the Spring Boot class loader.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an existing Red Hat Process Automation Manager Spring Boot project.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the following properties to your Spring Boot application <code class="literal">application.properties</code> file:
					</p><pre class="programlisting language-xml">kieserver.classPathContainer=true
kieserver.autoScanDeployments=true</pre><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 55%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969145447152" scope="col">Parameter</th><th align="left" valign="top" id="idm139969145446064" scope="col">Values</th><th align="left" valign="top" id="idm139969145444976" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969145447152">
									<p>
										<code class="literal">kieserver.classPathContainer</code>
									</p>
									</td><td align="left" valign="top" headers="idm139969145446064">
									<p>
										<code class="literal">true, false</code>
									</p>
									</td><td align="left" valign="top" headers="idm139969145444976">
									<p>
										When set to <code class="literal">true</code>, KIE Server uses the class loader used by the container to load KJAR files and their dependencies.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm139969145447152">
									<p>
										<code class="literal">kieserver.autoScanDeployments</code>
									</p>
									</td><td align="left" valign="top" headers="idm139969145446064">
									<p>
										<code class="literal">true, false</code>
									</p>
									</td><td align="left" valign="top" headers="idm139969145444976">
									<p>
										When set to <code class="literal">true</code>, KIE Server scans and deploys all KJAR files available in the Spring Boot application, whether they are declared programmatically or through the Maven plug-in.
									</p>
									</td></tr></tbody></table></div><p class="simpara">
						When both of these properties are set to <code class="literal">true</code>, the Spring Boot KIE Server automatically scans for deployable artifacts that are packaged within the Spring Boot application using the <code class="literal">package-dependencies-kjar</code> Maven goal of the <code class="literal">kie-maven-plugin</code> plug-in.
					</p></li><li class="listitem"><p class="simpara">
						Add the following Maven plug-in in the Spring Boot <code class="literal">service/pom.xml</code> file where <code class="literal">&lt;GROUP_ID&gt;</code>, <code class="literal">&lt;ARTIFACT_ID&gt;</code>, and <code class="literal">&lt;VERSION&gt;</code> are the group, artifact, and version (GAV) of an artifact that your project uses. These artifacts are located in the Spring Boot project <code class="literal">kjar/pom.xml</code> file.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can add more than one version of an artifact.
						</p></div></div><pre class="programlisting language-xml">  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.kie&lt;/groupId&gt;
        &lt;artifactId&gt;kie-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${version.org.kie}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;copy&lt;/id&gt;
            &lt;phase&gt;prepare-package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;package-dependencies-kjar&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;artifactItems&gt;
            &lt;artifactItem&gt;
              &lt;groupId&gt;&lt;GROUP_ID&gt;&lt;/groupId&gt;
              &lt;artifactId&gt;&lt;ARTIFACT_ID&gt;/artifactId&gt;
              &lt;version&gt;&lt;VERSION&gt;&lt;/version&gt;
            &lt;/artifactItem&gt;
          &lt;/artifactItems&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;plugins&gt;
  &lt;build&gt;</pre><p class="simpara">
						The artifacts required to run the KJAR will be resolved at build time.
					</p><p class="simpara">
						The following example adds two version of the <code class="literal">Evaluation</code> artifact:
					</p><pre class="programlisting language-xml">  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.kie&lt;/groupId&gt;
        &lt;artifactId&gt;kie-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${version.org.kie}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;copy&lt;/id&gt;
            &lt;phase&gt;prepare-package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;package-dependencies-kjar&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;artifactItems&gt;
            &lt;artifactItem&gt;
              &lt;groupId&gt;com.myspace&lt;/groupId&gt;
              &lt;artifactId&gt;Evaluation&lt;/artifactId&gt;
              &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
            &lt;/artifactItem&gt;
            &lt;artifactItem&gt;
              &lt;groupId&gt;com.myspace&lt;/groupId&gt;
              &lt;artifactId&gt;Evaluation&lt;/artifactId&gt;
              &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
            &lt;/artifactItem&gt;
          &lt;/artifactItems&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;plugins&gt;
  &lt;build&gt;</pre></li><li class="listitem"><p class="simpara">
						To build the self-contained Spring Boot image, enter the following command in the <code class="literal">service</code> directory:
					</p><pre class="screen">maven install</pre></li></ol></div></section><section class="chapter" id="bus-app-run_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Business application execution</h2></div></div></div><p>
				By default, business applications contain a single executable project, the service project. You can execute the service project on Windows or Linux, in standalone (unmanaged) or development (managed) mode. Standalone mode enables you to start your application without additional requirements. Applications started in development mode require Business Central to be available as the Process Automation Manager controller.
			</p><section class="section" id="bus-apps-run-standard_business-applications"><div class="titlepage"><div><div><h2 class="title">7.1. Running business applications in standalone mode</h2></div></div></div><p>
					Standalone (unmanaged) mode enables you to start your business application without additional requirements.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a <code class="literal">&lt;BUSINESS-APPLICATION&gt;.zip</code> file that you created using the <a class="link" href="http://start.jbpm.org">business applications</a> website, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem">
							The business application is configured.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service</code> folder.
						</li><li class="listitem"><p class="simpara">
							Enter one of the following commands:
						</p><div class="table" id="idm139969168497152"><p class="title"><strong>Table 7.1. Standalone launch options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><tbody><tr><td align="left" valign="top">
										<p>
											Command
										</p>
										</td><td align="left" valign="top">
										<p>
											Description
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch.sh clean install</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in standalone mode on Linux or UNIX.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch.bat clean install</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in standalone mode on Windows.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch.sh clean install -Pmysql</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in standalone mode on Linux or UNIX if you have configured the application with a MySQL database.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch.bat clean install -Pmysql</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in standalone mode on Windows if you have configured the application with a MySQL database.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch.sh clean install -Ppostgres</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in standalone mode on Linux or UNIX if you have configured the application with a postgreSQL database.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch.bat clean install -Ppostgres</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in standalone mode on Windows if you have configured the application with a PostgreSQL database.
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							The <code class="literal">clean install</code> argument directs Maven to build a fresh installation. The projects are then built in the following order:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Data model
								</li><li class="listitem">
									Business assets
								</li><li class="listitem"><p class="simpara">
									Service
								</p><p class="simpara">
									The first time that you run the script, it might take a while to build the project because all dependencies of the project are downloaded. At the end of the build, the application starts.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Enter the following command to access your business application:
						</p><pre class="screen">http://localhost:8090/</pre></li><li class="listitem">
							Enter the credentials <code class="literal">user</code>/<code class="literal">user</code> or <code class="literal">kieserver</code>/<code class="literal">kieserver1!</code>.
						</li></ol></div></section><section class="section" id="bus-apps-run-managed_business-applications"><div class="titlepage"><div><div><h2 class="title">7.2. Running business applications in development mode</h2></div></div></div><p>
					Development (managed) mode enables developers to work on a Red Hat Process Automation Manager business application business assets project and dynamically deploy changes to the business application without the need to restart it. In addition, development mode provides a complete monitoring environment for business automation capabilities, for example process instances, tasks, and jobs.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a Spring Boot application ZIP file that you created using the <a class="link" href="http://start.jbpm.org">business applications</a> website.
						</li><li class="listitem">
							You configured the business application.
						</li><li class="listitem">
							Business Central is installed and running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-service</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
						</li><li class="listitem"><p class="simpara">
							Enter one of the following commands:
						</p><div class="table" id="idm139969149538048"><p class="title"><strong>Table 7.2. Managed launch options</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><tbody><tr><td align="left" valign="top">
										<p>
											Command
										</p>
										</td><td align="left" valign="top">
										<p>
											Description
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch-dev.sh clean install</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in development mode on Linux or UNIX.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch-dev.bat clean install</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in development mode on Windows.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch-dev.sh clean install -Pmysql</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in development mode on Linux or UNIX if you have configured the application with a MySQL database.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch-dev.bat clean install -Pmysql</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in development mode on Windows if you have configured the application with a MySQL database.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch-dev.sh clean install -Ppostgres</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in development mode on Linux or UNIX if you have configured the application with a postgreSQL database.
										</p>
										</td></tr><tr><td align="left" valign="top">
										<p>
											<code class="literal">./launch-dev.bat clean install -Ppostgres</code>
										</p>
										</td><td align="left" valign="top">
										<p>
											Launches in development mode on Windows if you have configured the application with a PostgreSQL database.
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							The <code class="literal">clean install</code> argument directs Maven to build a fresh installation. The projects are then built in the following order:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Data model
								</li><li class="listitem">
									Business assets
								</li><li class="listitem"><p class="simpara">
									Service
								</p><p class="simpara">
									The first time that you run the script, it might take a while to build the project because all dependencies of the project are downloaded. At the end of the build, the application starts.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Enter the following command to access your business application:
						</p><pre class="screen">http://localhost:8090/</pre></li><li class="listitem">
							Enter the credentials <code class="literal">user</code>/<code class="literal">user</code> or <code class="literal">kieserver</code>/<code class="literal">kieserver1!</code>. After the business application starts, it connects to the Process Automation Manager controller and is visible in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Deploy</strong></span> → <span class="strong strong"><strong>Execution Servers</strong></span> in Business Central.
						</li></ol></div></section></section><section class="chapter" id="bus-apps-import_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Importing and deploying business assets projects in Business Central</h2></div></div></div><p>
				You can import a business assets project that is part of a Red Hat Process Automation Manager business application into Business Central and then deploy that project to a business application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have a business application project running in development mode.
					</li><li class="listitem">
						Red Hat Process Automation Manager Business Central is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Navigate to the <code class="literal">&lt;BUSINESS-APPLICATION&gt;/&lt;BUSINESS-APPLICATION&gt;-kjar</code> folder, where <code class="literal">&lt;BUSINESS-APPLICATION&gt;</code> is the name of your Spring Boot project.
					</li><li class="listitem"><p class="simpara">
						Execute the following following commands to initialize the Git repository for your project:
					</p><pre class="screen">$ git init
$ git add -A
$ git commit -m "Initial project structure"</pre></li><li class="listitem">
						Log in to Business Central and go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Select <span class="strong strong"><strong>Import Project</strong></span> and enter the following URL:
					</p><pre class="screen"> file:///&lt;business-application-path&gt;/&lt;business-application-name&gt;-kjar</pre></li><li class="listitem">
						Click <span class="strong strong"><strong>Import</strong></span> and confirm the project to be imported.
					</li><li class="listitem">
						After the business assets project is imported into Business Central, open the project and click <span class="strong strong"><strong>Add Assets</strong></span> to add assets such as business processes to your business assets project.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Deploy</strong></span> on your project page to deploy your project to a running business application.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can also select the <span class="strong strong"><strong>Build &amp; Install</strong></span> option to build the project and publish the KJAR file to the configured Maven repository without deploying to a KIE Server. In a development environment, you can click <span class="strong strong"><strong>Deploy</strong></span> to deploy the built KJAR file to a KIE Server without stopping any running instances (if applicable), or click <span class="strong strong"><strong>Redeploy</strong></span> to deploy the built KJAR file and replace all instances. The next time you deploy or redeploy the built KJAR, the previous deployment unit (KIE container) is automatically updated in the same target KIE Server. In a production environment, the <span class="strong strong"><strong>Redeploy</strong></span> option is disabled and you can click <span class="strong strong"><strong>Deploy</strong></span> only to deploy the built KJAR file to a new deployment unit (KIE container) on a KIE Server.
						</p><p>
							To configure the KIE Server environment mode, set the <code class="literal">org.kie.server.mode</code> system property to <code class="literal">org.kie.server.mode=development</code> or <code class="literal">org.kie.server.mode=production</code>. To configure the deployment behavior for a corresponding project in Business Central, go to project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>General Settings</strong></span> → <span class="strong strong"><strong>Version</strong></span> and toggle the <span class="strong strong"><strong>Development Mode</strong></span> option. By default, KIE Server and all new projects in Business Central are in development mode. You cannot deploy a project with <span class="strong strong"><strong>Development Mode</strong></span> turned on or with a manually added <code class="literal">SNAPSHOT</code> version suffix to a KIE Server that is in production mode.
						</p></div></div></li><li class="listitem">
						To review project deployment details, click <span class="strong strong"><strong>View deployment details</strong></span> in the deployment banner at the top of the screen or in the <span class="strong strong"><strong>Deploy</strong></span> drop-down menu. This option directs you to the <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Deploy</strong></span> → <span class="strong strong"><strong>Execution Servers</strong></span> page.
					</li><li class="listitem">
						To interact with your newly deployed business assets, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span> and <span class="strong strong"><strong>Process Instances</strong></span>.
					</li></ol></div></section><section class="chapter" id="spring-boot-jms-audit-proc_business-applications"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Replicating audit data in a JMS message broker</h2></div></div></div><p>
				You can replicate KIE Server audit data to a Java Message Service (JMS) message broker, for example ActiveMQ or Artemis, and then dump the data in an external database schema so that you can improve the performance of your Spring Boot application by deleting the audit data from your application schema.
			</p><p>
				If you configure your application to replicate data in a message broker, when an event occurs in KIE Server the record of that event is stored in the KIE Server database schema and it is sent to the message broker. You can then configure an external service to consume the message broker data into an exact replica of the application’s database schema. The data is appended in the message broker and the external database every time an event is produce by KIE Server.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Only audit data is stored in the message broker. No other data is replicated.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an existing Red Hat Process Automation Manager Spring Boot project.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Open the Spring Boot application’s <code class="literal">pom.xml</code> file in a text editor.
					</li><li class="listitem"><p class="simpara">
						Add the KIE Server Spring Boot audit dependency to the <code class="literal">pom.xml</code> file:
					</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.kie&lt;/groupId&gt;
  &lt;artifactId&gt;kie-server-spring-boot-autoconfiguration-audit-replication&lt;/artifactId&gt;
  &lt;version&gt;${version.org.kie}&lt;/version&gt;
&lt;/dependency&gt;</pre></li><li class="listitem"><p class="simpara">
						Add the dependency for your JMS client. The following example adds the Advanced Message Queuing Protocol (AMQP) dependency:
					</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.amqphub.spring&lt;/groupId&gt;
  &lt;artifactId&gt;amqp-10-jms-spring-boot-starter&lt;/artifactId&gt;
  &lt;version&gt;2.2.6&lt;/version&gt;
&lt;/dependency&gt;</pre></li><li class="listitem"><p class="simpara">
						Add the JMS pool dependency:
					</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.messaginghub&lt;/groupId&gt;
  &lt;artifactId&gt;pooled-jms&lt;/artifactId&gt;
&lt;/dependency&gt;</pre></li><li class="listitem"><p class="simpara">
						To configure KIE Server audit replication to use queues, complete the following tasks:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add the following lines to your Spring Boot application’s <code class="literal">application.properties</code> file:
							</p><pre class="screen">kieserver.audit-replication.producer=true
kieserver.audit-replication.queue=audit-queue</pre></li><li class="listitem"><p class="simpara">
								Add the properties required for your message broker client. The following example shows how to configure KIE Server for AMPQ, where <code class="literal">&lt;JMS_HOST_PORT&gt;</code> is the port that the broker listens on and <code class="literal">&lt;USERNAME&gt;</code> and <code class="literal">&lt;PASSWORD</code> are the login credentials for the broker:
							</p><pre class="screen">amqphub.amqp10jms.remote-url=amqp://&lt;JMS_HOST_PORT&gt;
amqphub.amqp10jms.username=&lt;USERNAME&gt;
amqphub.amqp10jms.password=&lt;PASSWORD&gt;
amqphub.amqp10jms.pool.enabled=true</pre></li><li class="listitem"><p class="simpara">
								Add the following lines to the <code class="literal">application.properties</code> file of the service that will consume the message broker data:
							</p><pre class="screen">kieserver.audit-replication.consumer=true
kieserver.audit-replication.queue=audit-queue</pre></li><li class="listitem"><p class="simpara">
								Add the properties required for your message broker client to the <code class="literal">application.properties</code> file of the service that will consume the message broker data. The following example shows how to configure KIE Server for AMPQ, where <code class="literal">&lt;JMS_HOST_PORT&gt;</code> is the port that your message broker listens on and <code class="literal">&lt;USERNAME&gt;</code> and <code class="literal">&lt;PASSWORD&gt;</code> are the login credentials for the message broker:
							</p><pre class="screen">amqphub.amqp10jms.remote-url=amqp://&lt;JMS_HOST_PORT&gt;
amqphub.amqp10jms.username=&lt;USERNAME&gt;
amqphub.amqp10jms.password=&lt;PASSWORD&gt;
amqphub.amqp10jms.pool.enabled=true</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						To configure KIE Server audit replication to use topics, complete the following tasks:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add the following lines to your Spring Boot application’s <code class="literal">application.properties</code> file:
							</p><pre class="screen">kieserver.audit-replication.producer=true
kieserver.audit-replication.topic=audit-topic</pre></li><li class="listitem"><p class="simpara">
								Add the properties required for your message broker client to the <code class="literal">application.properties</code> file of the service that will consume the message broker data. The following example shows how to configure KIE Server for AMPQ, where <code class="literal">&lt;JMS_HOST_PORT&gt;</code> is the port that your message broker listens on and <code class="literal">&lt;USERNAME&gt;</code> and <code class="literal">&lt;PASSWORD</code> are the login credentials for the message broker:
							</p><pre class="screen">spring.jms.pub-sub-domain=true
amqphub.amqp10jms.remote-url=amqp://&lt;JMS_HOST_PORT&gt;
amqphub.amqp10jms.username=&lt;USERNAME&gt;
amqphub.amqp10jms.password=&lt;PASSWORD&gt;
amqphub.amqp10jms.pool.enabled=true</pre></li><li class="listitem"><p class="simpara">
								Add the following lines to the <code class="literal">application.properties</code> file of the service that will consume the message broker data:
							</p><pre class="screen">kieserver.audit-replication.consumer=true
kieserver.audit-replication.topic=audit-topic::jbpm
kieserver.audit-replication.topic.subscriber=jbpm
spring.jms.pub-sub-domain=true</pre></li><li class="listitem"><p class="simpara">
								Add the properties required for your message broker client to the <code class="literal">application.properties</code> file of the service that will consume the message broker data. The following example shows how to configure KIE Server for AMPQ, where <code class="literal">&lt;JMS_HOST_PORT&gt;</code> is the port that your message broker listens on and <code class="literal">&lt;USERNAME&gt;</code> and <code class="literal">&lt;PASSWORD&gt;</code> are the login credentials for the message broker:
							</p><pre class="screen">amqphub.amqp10jms.remote-url=amqp://&lt;JMS_HOST_PORT&gt;
amqphub.amqp10jms.username=&lt;USERNAME&gt;
amqphub.amqp10jms.password=&lt;PASSWORD&gt;
amqphub.amqp10jms.pool.enabled=true
amqphub.amqp10jms.clientId=jbpm</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Optional: To configure the KIE Server that contains the replicated data to be read only, set the <code class="literal">org.kie.server.rest.mode.readonly</code> property in the <code class="literal">application.properties</code> file to <code class="literal">true</code>:
					</p><pre class="screen">org.kie.server.rest.mode.readonly=true</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="#audit-replication-parameters-ref_business-applications" title="9.1. Spring Boot JMS audit replication parameters">Section 9.1, “Spring Boot JMS audit replication parameters”</a>
					</li></ul></div><section class="section" id="audit-replication-parameters-ref_business-applications"><div class="titlepage"><div><div><h2 class="title">9.1. Spring Boot JMS audit replication parameters</h2></div></div></div><p>
					The following table describes the parameters used to configure JMS audit replication for Red Hat Process Automation Manager applications on Spring Boot.
				</p><div class="table" id="idm139969149932000"><p class="title"><strong>Table 9.1. Spring Boot JMS audit replication parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 55%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969146481952" scope="col">Parameter</th><th align="left" valign="top" id="idm139969146480864" scope="col">Values</th><th align="left" valign="top" id="idm139969146479776" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969146481952">
								<p>
									<code class="literal">kieserver.audit-replication.producer</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146480864">
								<p>
									<code class="literal">true, false</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146479776">
								<p>
									Specifies whether the business application will act as a producer to replicate and send the JMS messages to either a queue or a topic.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146481952">
								<p>
									<code class="literal">kieserver.audit-replication.consumer</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146480864">
								<p>
									<code class="literal">true, false</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146479776">
								<p>
									Specifies whether the business application will act as a consumer to receive the JMS messages from either a queue or a topic.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146481952">
								<p>
									<code class="literal">kieserver.audit-replication.queue</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146480864">
								<p>
									<code class="literal">string</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146479776">
								<p>
									The name of the JMS queue to either send or consume messages.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146481952">
								<p>
									<code class="literal">kieserver.audit-replication.topic</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146480864">
								<p>
									<code class="literal">string</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146479776">
								<p>
									The name of the JMS topic to either send or consume messages.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146481952">
								<p>
									<code class="literal">kieserver.audit-replication.topic.subscriber</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146480864">
								<p>
									<code class="literal">string</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146479776">
								<p>
									The name of the topic subscriber.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146481952">
								<p>
									<code class="literal">org.kie.server.rest.mode.readonly</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146480864">
								<p>
									<code class="literal">true, false</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146479776">
								<p>
									Specifies read only mode for the business application.
								</p>
								</td></tr></tbody></table></div></div></section></section></div><div class="part" id="assembly-integrating-fuse"><div class="titlepage"><div><div><h1 class="title">Part II. Integrating Red Hat Fuse with Red Hat Process Automation Manager</h1></div></div></div><div class="partintro" id="idm139969146962960"><div/><p>
				As a system administrator, you can integrate Red Hat Process Automation Manager with Red Hat Fuse on Apache Karaf and Red Hat JBoss Enterprise Application Platform to facilitate communication between integrated services.
			</p><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#fuse-con">10. Red Hat Fuse and Red Hat Process Automation Manager</a></span><ul><li><span class="section"><a href="#fuse-karaf-ref_fuse">10.1. Red Hat Process Automation Manager Karaf features</a></span></li></ul></li><li><span class="chapter"><a href="#ba-engines-karaf-con">11. Red Hat Process Automation Manager decision and process engines with Fuse on Apache Karaf</a></span><ul><li><span class="section"><a href="#ba-karaf-xml-uninstall-proc">11.1. Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf</a></span></li><li><span class="section"><a href="#ba-karaf-xml-install-proc">11.2. Installing Red Hat Process Automation Manager features on Karaf using XML files</a></span></li><li><span class="section"><a href="#installing-ba-fuse-karaf-maven-proc">11.3. Installing Red Hat Process Automation Manager features on Karaf through maven</a></span></li></ul></li><li><span class="chapter"><a href="#installing-on-fuse-eap-proc">12. Installing Fuse on Red Hat JBoss Enterprise Application Platform</a></span></li><li><span class="chapter"><a href="#kie-camel-con_fuse">13. The <code class="literal">kie-camel</code> component</a></span></li></ul></div></div><section class="chapter" id="fuse-con"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Red Hat Fuse and Red Hat Process Automation Manager</h2></div></div></div><p>
				Red Hat Fuse is a distributed, cloud-native integration platform that is part of an agile integration solution. Its distributed approach enables teams to deploy integrated services where required. Fuse has the flexibility to service diverse users, including integration experts, application developers, and business users, each with their own choice of deployment, architecture, and tooling. The API-centric, container-based architecture decouples services so they can be created, extended, and deployed independently. The result is an integration solution that supports collaboration across the enterprise.
			</p><p>
				Red Hat Process Automation Manager is the Red Hat platform for creating business automation applications and microservices. It enables enterprise business and IT users to document, simulate, manage, automate, and monitor business processes and policies. Red Hat Process Automation Manager is designed to empower business and IT users to collaborate more effectively, so business applications can be changed easily and quickly.
			</p><p>
				You can install Red Hat Fuse on the Apache Karaf container platform or Red Hat JBoss Enterprise Application Platform and then install and configure Red Hat Process Automation Manager in that container.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					For the version of Red Hat Fuse that Red Hat Process Automation Manager 7.10 supports, see <a class="link" href="https://access.redhat.com/articles/3405381">Red Hat Process Automation Manager 7 Supported Configurations</a>.
				</p></div></div><section class="section" id="fuse-karaf-ref_fuse"><div class="titlepage"><div><div><h2 class="title">10.1. Red Hat Process Automation Manager Karaf features</h2></div></div></div><p>
					The following table lists Red Hat Process Automation Manager Karaf features.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969146949808" scope="col">Feature</th><th align="left" valign="top" id="idm139969146948720" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">drools-module</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Contains the core and compiler of Drools, used to create KIE bases and KIE sessions from plain DRL. It also contains the implementation of the executable model. Uses Drools for rules evaluation, without requiring persistence, processes, or decision tables.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">drools-template</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Contains the Drools templates.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">drools-jpa</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Uses Drools for rules evaluation with persistence and transactions, but without requiring processes or decision tables. The <code class="literal">drools-jpa</code> feature includes the <code class="literal">drools-module</code>, however you might also need to install the <code class="literal">droolsjbpm-hibernate</code> feature, or ensure that a compatible hibernate bundle is installed.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">drools-decisiontable</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Uses Drools with decision tables.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">jbpm</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Uses jBPM. The <code class="literal">jbpm</code> feature includes the <code class="literal">drools-module</code> and <code class="literal">drools-jpa</code>. You might need to install the <code class="literal">droolsjbpm-hibernate</code> feature, or ensure that a compatible hibernate bundle is installed.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">jbpm</code> and <code class="literal">jbpm-human-task</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Uses jBPM with human tasks.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">jbpm-workitems-camel</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Provides the <code class="literal">jbpm-workitems-camel</code> component.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									Core engine JARs and <code class="literal">kie-ci</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Uses Red Hat Process Automation Manager with the KIE scanner (<code class="literal">kie-ci</code>) to download kJARs from a Maven repository.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">kie-camel</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Provides the <code class="literal">kie-camel</code> component, an Apache Camel endpoint that integrates Fuse with Red Hat Process Automation Manager.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm139969146949808">
								<p>
									<code class="literal">kie-spring</code>
								</p>
								</td><td align="left" valign="top" headers="idm139969146948720">
								<p>
									Installs the <code class="literal">kie-spring</code> component that enables you to configure listeners to KIE sessions using XML tags.
								</p>
								</td></tr></tbody></table></div></section></section><section class="chapter" id="ba-engines-karaf-con"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Red Hat Process Automation Manager decision and process engines with Fuse on Apache Karaf</h2></div></div></div><p>
				Apache Karaf is a standalone open-source runtime environment. It is based on the OSGi standard from the OSGi Alliance. Karaf provides support for modularisation through OSGi bundles with sophisticated class-loading support. You can deploy multiple versions of a dependency side by side in a Karaf container. You can use hot code swapping to upgrade or replace a module without shutting down the container.
			</p><p>
				Red Hat Process Automation Manager integration with Fuse on Karaf is provided through Karaf features. You can install individual components of Red Hat Process Automation Manager for Fuse on Karaf using these features.
			</p><p>
				Features files are XML files that specify which OSGI bundles are installed for a particular feature. The following features XML files facilitate Red Hat Process Automation Manager and Fuse on Karaf integration:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<code class="literal">rhba-features-&lt;FUSE-VERSION&gt;-features.xml</code>
					</p><p class="simpara">
						This file is part of Fuse installed in Karaf where <code class="literal">&lt;FUSE-VERSION&gt;</code> is the version of Fuse. This file is stored in the Karaf system repository, in the <code class="literal">system/org/jboss/fuse/features/rhba-features</code> directory. This file contains prerequisites for installing Red Hat Process Automation Manager features.
					</p></li><li class="listitem"><p class="simpara">
						<code class="literal">kie-karaf-features-7.48.0.Final-redhat-00002-features-fuse.xml</code>
					</p><p class="simpara">
						This file is part of Red Hat Process Automation Manager and provides Red Hat Process Automation Manager features, which define the OSGi features that can be deployed into Red Hat Fuse. OSGi users can install features from this file to install Red Hat Process Automation Manager into Fuse and use it in their applications. You can find this features file in the online and offline Maven repository that is distributed with Red Hat Process Automation Manager. The group ID, artifact ID, and version (GAV) identifier of this file is <code class="literal">org.kie:kie-karaf-features:7.48.0.Final-redhat-00002</code>.
					</p></li></ul></div><section class="section" id="ba-karaf-xml-uninstall-proc"><div class="titlepage"><div><div><h2 class="title">11.1. Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf</h2></div></div></div><p>
					If your installation contains older versions of the Red Hat Process Automation Manager features XML files (for example, <code class="literal">kie-karaf-features-&lt;VERSION&gt;-features.xml</code>), you must remove these files and all associated files before installing the most recent features XML files.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Obsolete features XML files exist in your Apache Karaf installation.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enter the following commands to determine whether your installation contains obsolete Red Hat Process Automation Manager features XML files:
						</p><pre class="screen">$ JBossFuse:karaf@root&gt; feature:repo-list
$ JBossFuse:karaf@root&gt; feature:list</pre></li><li class="listitem"><p class="simpara">
							Enter the following command, where <code class="literal">&lt;FUSE_HOME&gt;</code> is the Fuse installation directory, to start the Red Hat Fuse console:
						</p><pre class="screen">$ ./&lt;FUSE_HOME&gt;/bin/fuse</pre></li><li class="listitem"><p class="simpara">
							Enter the following command, where <code class="literal">&lt;FEATURE_NAME&gt;</code> is the name of the feature that you want to uninstall, to uninstall features or applications that use obsolete features XML files:
						</p><pre class="screen">JBossFuse:karaf@root&gt; features:uninstall &lt;FEATURE_NAME&gt;</pre><p class="simpara">
							The following example shows how to remove features:
						</p><pre class="screen">JBossFuse:karaf@root&gt; features:uninstall drools-module
JBossFuse:karaf@root&gt; features:uninstall jbpm
JBossFuse:karaf@root&gt; features:uninstall kie-ci</pre></li><li class="listitem"><p class="simpara">
							Search Karaf home for references to bundles that use <code class="literal">drools</code>, <code class="literal">kie</code>, or <code class="literal">jbpm</code>. The following example shows how to use <code class="literal">grep</code> to search for these components:
						</p><pre class="screen">karaf@root&gt; list -t 0 -s | grep drools
karaf@root&gt; list -t 0 -s | grep kie
karaf@root&gt; list -t 0 -s | grep jbpm</pre><p class="simpara">
							The example shows output from these commands:
						</p><pre class="screen">250 │ Active   │  80 │ 7.19.0.201902201522          │ org.drools.canonical-model
251 │ Active   │  80 │ 7.19.0.201902201522          │ org.drools.cdi
252 │ Active   │  80 │ 7.19.0.201902201522          │ org.drools.compiler</pre></li><li class="listitem"><p class="simpara">
							Enter the following command, where <code class="literal">BUNDLE_ID</code> is a bundle ID returned in the search, to remove the bundles found in the previous step:
						</p><pre class="screen">karaf@root&gt; osgi:uninstall BUNDLE_ID</pre></li><li class="listitem"><p class="simpara">
							Enter the following command to remove the obsolete <code class="literal">drools-karaf-features</code> URL:
						</p><pre class="screen">karaf@root&gt; features:removeurl
 mvn:org.kie/kie-karaf-features/VERSION.Final-redhat-VERSION/xml/features</pre></li><li class="listitem">
							Restart Fuse.
						</li></ol></div></section><section class="section" id="ba-karaf-xml-install-proc"><div class="titlepage"><div><div><h2 class="title">11.2. Installing Red Hat Process Automation Manager features on Karaf using XML files</h2></div></div></div><p>
					Install Red Hat Process Automation Manager features on Karaf to create a dynamic runtime environment for your Red Hat Process Automation Manager processes.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A Red Hat Fuse installation in an Apache Karaf container is available. For information about installing Fuse in Apache Karaf, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.7/html/installing_on_apache_karaf/index"><span class="emphasis"><em>Installing Red Hat Fuse on the Apache Karaf container</em></span></a>.
						</li><li class="listitem">
							You have removed any obsolete Red Hat Process Automation Manager features XML files as described in <a class="xref" href="#ba-karaf-xml-uninstall-proc" title="11.1. Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf">Section 11.1, “Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf”</a>.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To install Red Hat Process Automation Manager features, enter the following command:
					</p></div><pre class="screen">$ JBossFuse:karaf@root&gt; feature:install &lt;FEATURE_NAME&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Use <code class="literal">org.drools.osgi.spring.OsgiKModuleBeanFactoryPostProcessor</code> instead of <code class="literal">org.kie.spring.KModuleBeanFactoryPostProcessor</code> to postprocess KIE elements in an OSGi environment.
					</p><p>
						Do not install the <code class="literal">drools-module</code> feature before the <code class="literal">kie-spring</code> feature. If you do, the <code class="literal">drools-compiler</code> bundle will not detect packages exported by <code class="literal">kie-spring</code>.
					</p><p>
						If you install the features in the incorrect order, run <code class="literal">osgi:refresh drools-compiler_bundle_ID</code> to force the <code class="literal">drools-compiler</code> to rebuild its <code class="literal">Import-Package</code> metadata.
					</p></div></div><p>
					In this command, <code class="literal">&lt;FEATURE_NAME&gt;</code> is one of the features listed in <a class="xref" href="#fuse-karaf-ref_fuse" title="10.1. Red Hat Process Automation Manager Karaf features">Section 10.1, “Red Hat Process Automation Manager Karaf features”</a>.
				</p></section><section class="section" id="installing-ba-fuse-karaf-maven-proc"><div class="titlepage"><div><div><h2 class="title">11.3. Installing Red Hat Process Automation Manager features on Karaf through maven</h2></div></div></div><p>
					Install Red Hat Process Automation Manager with Fuse on Apache Karaf to deploy integrated services where required.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A Red Hat Fuse 7.7 on Apache Karaf installation exists. For installation instructions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.7/html-single/installing_on_apache_karaf/"><span class="emphasis"><em>Installing Red Hat Fuse on the Apache Karaf container</em></span></a> .
						</li><li class="listitem">
							Any obsolete features XML files have been removed, as described in <a class="xref" href="#ba-karaf-xml-uninstall-proc" title="11.1. Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf">Section 11.1, “Uninstalling obsolete Red Hat Process Automation Manager features XML files on Karaf”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							To configure the Maven repository, open the <code class="literal">FUSE_HOME/etc/org.ops4j.pax.url.mvn.cfg</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Make sure that the <code class="literal">https://maven.repository.redhat.com/ga/</code> repository is present in the <code class="literal">org.ops4j.pax.url.mvn.repositories</code> variable and add it if necessary.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Entries are separated by a comma, space, and backslash (, \). The backslash forces a new line.
							</p></div></div></li><li class="listitem"><p class="simpara">
							To start Fuse, enter the following command, where <code class="literal">FUSE_HOME</code> is the Fuse installation directory:
						</p><pre class="screen">$ ./FUSE_HOME/bin/fuse</pre></li><li class="listitem"><p class="simpara">
							To add a reference to the features file that contains installation prerequisites, enter the following command, where <code class="literal">&lt;FUSE_VERSION</code> is the version of Fuse that you are installing:
						</p><pre class="screen">$ feature:repo-add mvn:org.jboss.fuse.features/rhba-features/&lt;FUSE-VERSION&gt;/xml/features</pre></li><li class="listitem"><p class="simpara">
							Enter the following command to add a reference to the Red Hat Process Automation Manager features XML file:
						</p><pre class="screen">$ JBossFuse:karaf@root&gt; features:addurl mvn:org.kie/kie-karaf-features/VERSION/xml/features-fuse</pre><p class="simpara">
							To see the current <code class="literal">drools-karaf-features</code> version, see the <a class="link" href="https://access.redhat.com/articles/3405381#supported_comps">Red Hat Process Automation Manager 7 Supported Configurations</a> page.
						</p></li><li class="listitem"><p class="simpara">
							Enter the following command to install a feature provided by Red Hat Process Automation Manager features XML file. In this command, <code class="literal">&lt;FEATURE_NAME&gt;</code> is one of the features listed in <a class="xref" href="#fuse-karaf-ref_fuse" title="10.1. Red Hat Process Automation Manager Karaf features">Section 10.1, “Red Hat Process Automation Manager Karaf features”</a>.
						</p><pre class="screen">JBossFuse:karaf@root&gt; features:install &lt;FEATURE_NAME&gt;</pre></li><li class="listitem"><p class="simpara">
							Enter the following command to verify the installation:
						</p><pre class="screen">$ JBossFuse:karaf@root&gt;feature:list</pre><p class="simpara">
							Successfully installed features have the status <code class="literal">started</code>.
						</p></li></ol></div></section></section><section class="chapter" id="installing-on-fuse-eap-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Installing Fuse on Red Hat JBoss Enterprise Application Platform</h2></div></div></div><p>
				Install Red Hat Fuse 7.7 on Red Hat JBoss EAP 7.2.7 to use with Red Hat Process Automation Manager to deploy integrated services where required.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Red Hat Fuse 7.7 is supported on Red Hat JBoss EAP 7.2, whereas Red Hat Process Automation Manager 7.8.x and newer is supported on Red Hat Red Hat JBoss EAP 7.3. To ensure a stable deployment environment, install Fuse and Red Hat Process Automation Manager on different instances of Red Hat JBoss EAP according to the supported Red Hat JBoss EAP versions.
				</p><p>
					Red Hat Process Automation Manager 7.8.x and newer components on Red Hat JBoss EAP 7.2 are not officially supported. However, Red Hat provides guidance on a commercially reasonable basis until Fuse is available on Red Hat JBoss EAP 7.3. <code class="literal">MarshallingFormat.JSON</code> is not supported on Fuse integration with Red Hat JBoss EAP 7.2 using <code class="literal">kie-camel</code>. The default is JAXB.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A Red Hat Process Automation Manager installation on Red Hat JBoss Enterprise Application Platform 7.3 is available. For installation instructions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li><li class="listitem">
						A separate instance of Red Hat JBoss Enterprise Application Platform 7.2.7 is available.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Install Red Hat Fuse 7.7 on Red Hat JBoss Enterprise Application Platform 7.2.7. For installation instructions, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.7/html-single/installing_on_jboss_eap/index"><span class="emphasis"><em>Installing on JBoss EAP</em></span></a>.
					</li><li class="listitem">
						Open the <code class="literal">pom.xml</code> file in the Fuse home directory in a text editor.
					</li><li class="listitem"><p class="simpara">
						Create the integration project with a dependency on the <code class="literal">kie-camel</code> component by editing the <code class="literal">pom.xml</code> file as shown in the following example:
					</p><pre class="programlisting language-xml">&lt;dependency&gt;
  	&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  	&lt;artifactId&gt;camel-core&lt;/artifactId&gt;
  	&lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  	&lt;groupId&gt;org.kie&lt;/groupId&gt;
  	&lt;artifactId&gt;kie-api&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  	&lt;groupId&gt;org.kie&lt;/groupId&gt;
  	&lt;artifactId&gt;kie-ci&lt;/artifactId&gt;
  	&lt;exclusions&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;aopalliance&lt;/groupId&gt;
      	&lt;artifactId&gt;aopalliance&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
  	&lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  	&lt;groupId&gt;org.kie.server&lt;/groupId&gt;
  	&lt;artifactId&gt;kie-server-api&lt;/artifactId&gt;
  	&lt;exclusions&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;org.jboss.spec.javax.xml.bind&lt;/groupId&gt;
      	&lt;artifactId&gt;jboss-jaxb-api_2.3_spec&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;javax.activation&lt;/groupId&gt;
      	&lt;artifactId&gt;activation&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
  	&lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  	&lt;groupId&gt;org.jbpm&lt;/groupId&gt;
  	&lt;artifactId&gt;jbpm-bpmn2&lt;/artifactId&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
  	&lt;groupId&gt;org.kie&lt;/groupId&gt;
  	&lt;artifactId&gt;kie-camel&lt;/artifactId&gt;
  	&lt;exclusions&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;
      	&lt;artifactId&gt;cxf-core&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      	&lt;artifactId&gt;camel-cxf&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      	&lt;artifactId&gt;camel-cxf-transport&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
    	&lt;exclusion&gt;
      	&lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;
      	&lt;artifactId&gt;xstream&lt;/artifactId&gt;
    	&lt;/exclusion&gt;
  	&lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
   	&lt;groupId&gt;org.kie.server&lt;/groupId&gt;
   	&lt;artifactId&gt;kie-server-client&lt;/artifactId&gt;
   	&lt;exclusions&gt;
     	&lt;exclusion&gt;
       	&lt;groupId&gt;org.jboss.spec.javax.ws.rs&lt;/groupId&gt;
       	&lt;artifactId&gt;jboss-jaxrs-api_2.0_spec&lt;/artifactId&gt;
     	&lt;/exclusion&gt;
   	&lt;/exclusions&gt;
&lt;/dependency&gt;</pre></li></ol></div></section><section class="chapter" id="kie-camel-con_fuse"><div class="titlepage"><div><div><h2 class="title">Chapter 13. The <code class="literal">kie-camel</code> component</h2></div></div></div><p>
				The <code class="literal">kie-camel</code> component is an Apache Camel endpoint provided by Red Hat Fuse that integrates Fuse with Red Hat Process Automation Manager. It enables you to specify a Red Hat Process Automation Manager module by using a Maven group ID, artifact ID, and version (GAV) identifier which you can pull into the route and execute. It also enables you to specify portions of the message body as facts.You can use the <code class="literal">kie-camel</code> component with embedded engines or with KIE Server.
			</p><div class="formalpara"><p class="title"><strong>Embedded engines</strong></p><p>
					In this scenario, KIE engines run in the same container as the Fuse integration project and you can communicate with engines using KIE commands. To create the Camel producer, use the following URI:
				</p></div><pre class="screen">kie-local:kie-session-name?action=execute</pre><p>
				For example, enter the following command to initialize a Camel route in Spring:
			</p><pre class="screen">&lt;from uri="direct:runCommand" /&gt;
  	&lt;to uri="kie-local:kie-session1?action=execute"/&gt;</pre><div class="formalpara"><p class="title"><strong>KIE Server</strong></p><p>
					In this scenario, the <code class="literal">kie-camel</code> component connects to KIE Server using the KIE Server REST API. This enables users to communicate with the KIE Server using the KIE Server API. To create a producer, use the following URI:
				</p></div><pre class="screen">kie:http://username:password@kie-server-url`</pre><p>
				For example, enter the following command to initialize a Camel route in Spring:
			</p><pre class="screen">&lt;from uri="direct:runCommand" /&gt;
  	&lt;to uri="kie:http://user:psswd@localhost:8080/kie-server-services/services/rest/server"/&gt;</pre><p>
				The message has the following headers:
			</p><div class="table" id="idm139969145426176"><p class="title"><strong>Table 13.1. Message headers and descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm139969145421376" scope="col">Header</th><th align="left" valign="top" id="idm139969145420288" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139969145421376">
							<p>
								<code class="literal">CamelKieClient</code>
							</p>
							</td><td align="left" valign="top" headers="idm139969145420288">
							<p>
								KIE Server client (mandatory)
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm139969145421376">
							<p>
								<code class="literal">CamelKieOperation</code>
							</p>
							</td><td align="left" valign="top" headers="idm139969145420288">
							<p>
								KIE Server client (mandatory)
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm139969145421376">
							<p>
								<code class="literal">CamelKieParameterName</code>
							</p>
							</td><td align="left" valign="top" headers="idm139969145420288">
							<p>
								The value of the client method parameter (optional)
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm139969145421376">
							<p>
								<code class="literal">CamelKieBodyParam</code>
							</p>
							</td><td align="left" valign="top" headers="idm139969145420288">
							<p>
								The method parameter where the message body is stored (optional)
							</p>
							</td></tr></tbody></table></div></div></section></div><div class="part" id="assembly-integrating-sso"><div class="titlepage"><div><div><h1 class="title">Part III. Integrating Red Hat Process Automation Manager with Red Hat Single Sign-On</h1></div></div></div><div class="partintro" id="idm139969148955840"><div/><p>
				As a system administrator, you can integrate Red Hat Single Sign-On with Red Hat Process Automation Manager to secure your Red Hat Process Automation Manager browser applications with a single authentication method.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat Process Automation Manager is installed on Red Hat JBoss EAP 7.3. For information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#sso-int-con">14. Integration Options</a></span></li><li><span class="chapter"><a href="#sso-realm-proc">15. Installing and configuring RH-SSO</a></span></li><li><span class="chapter"><a href="#roles-users-con_integrate-sso">16. Red Hat Process Automation Manager roles and users</a></span><ul><li><span class="section"><a href="#sso-user-add-proc">16.1. Adding Red Hat Process Automation Manager users</a></span></li></ul></li><li><span class="chapter"><a href="#sso-central-proc_integrate-sso">17. Authenticating Business Central through RH-SSO</a></span><ul><li><span class="section"><a href="#sso-central-client-create-proc">17.1. Creating the Business Central client for RH-SSO</a></span></li><li><span class="section"><a href="#sso-client-adapter-proc">17.2. Installing the RH-SSO client adapter for Business Central</a></span></li><li><span class="section"><a href="#sso-remote-services-securing-proc">17.3. Securing Business Central file system services using RH-SSO</a></span></li></ul></li><li><span class="chapter"><a href="#sso-kie-server-con_integrate-sso">18. Authenticating KIE Server through RH-SSO</a></span><ul><li><span class="section"><a href="#sso-kie-server-client-proc">18.1. Creating the KIE Server client on RH-SSO</a></span></li><li><span class="section"><a href="#sso-kie-server-client-adapter-proc">18.2. Installing and configuring KIE Server with the client adapter</a></span></li><li><span class="section"><a href="#sso-kie-server-token-proc">18.3. KIE Server token-based authentication</a></span></li></ul></li><li><span class="chapter"><a href="#sso-third-party-proc_integrate-sso">19. Authenticating third-party clients through RH-SSO</a></span><ul><li><span class="section"><a href="#sso-basic-auth-proc_integrate-sso">19.1. Basic authentication</a></span></li><li><span class="section"><a href="#sso-token-auth-proc">19.2. Token-based authentication</a></span></li></ul></li></ul></div></div><section class="chapter" id="sso-int-con"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Integration Options</h2></div></div></div><p>
				Red Hat Single Sign-On (RH-SSO) is a single sign-on solution that you can use to secure your browser applications with your REST web services and Git access.
			</p><p>
				When you integrate Red Hat Process Automation Manager with RH-SSO, you create an SSO and identity management (IDM) environment for Red Hat Process Automation Manager. The session management feature of RH-SSO enables you to use a single authentication for different Red Hat Process Automation Manager environments on the internet.
			</p><p>
				The following chapters describe how you can integrate RH-SSO with Red Hat Process Automation Manager:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong><a class="xref" href="#sso-central-proc_integrate-sso" title="Chapter 17. Authenticating Business Central through RH-SSO">Chapter 17, <em>Authenticating Business Central through RH-SSO</em></a></strong></span>
					</p><p class="simpara">
						To authenticate Red Hat Process Automation Manager through an RH-SSO server, you must secure both the Red Hat Process Automation Manager web client (Business Central) and remote services through RH-SSO.This integration enables you to connect to Red Hat Process Automation Manager through RH-SSO using either Business Central or a remote service consumer.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong><a class="xref" href="#sso-kie-server-con_integrate-sso" title="Chapter 18. Authenticating KIE Server through RH-SSO">Chapter 18, <em>Authenticating KIE Server through RH-SSO</em></a></strong></span>
					</p><p class="simpara">
						To authenticate KIE Server through an RH-SSO server, you must secure the remote services provided by KIE Server. Doing this enables any remote Red Hat Process Automation Manager service consumer (user or a service) to authenticate through RH-SSO. Note that KIE Server does not have a web interface.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong><a class="xref" href="#sso-third-party-proc_integrate-sso" title="Chapter 19. Authenticating third-party clients through RH-SSO">Chapter 19, <em>Authenticating third-party clients through RH-SSO</em></a></strong></span>
					</p><p class="simpara">
						If Business Central or KIE Server are using RH-SSO, third-party clients must authenticate themselves using RH-SSO. After authentication, they can consume the remote service endpoints provided by Business Central and KIE Server, such as the REST API or remote file system services.
					</p></li></ul></div><p>
				To facilitate LDAP integration with Red Hat Process Automation Manager, consider using RH-SSO with LDAP. For information, see the "LDAP and Active Directory" chapter of the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html-single/server_administration_guide"><span class="emphasis"><em>Red Hat Single Sign-On Server Administration Guide</em></span></a>.
			</p></section><section class="chapter" id="sso-realm-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Installing and configuring RH-SSO</h2></div></div></div><p>
				A realm is a security policy domain defined for a web or application server. Security realms are used to restrict access for different application resources. You should create a new realm whether your RH-SSO instance is private or shared with other products. You can keep the master realm as a place for super administrators to create and manage the realms in your system. If you are integrating with an RH-SSO instance that is shared with other product installations to achieve single sign-on with those applications, all of those applications must use the same realm. To create an RH-SSO realm, download, install, and configure RH-SSO 7.4.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If Business Central and KIE Server are installed on different servers, complete this procedure on both servers.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Navigate to the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</a> page in the Red Hat Customer Portal (login required), and select the product and version from the drop-down options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Product:</strong></span> Red Hat Single Sign-On
							</li><li class="listitem">
								<span class="strong strong"><strong>Version:</strong></span> 7.4
							</li></ul></div></li><li class="listitem">
						Download <span class="strong strong"><strong>Red Hat Single Sign-on 7.4.3 Server</strong></span> (<code class="literal">rh-sso-7.4.3.zip</code>) and apply the latest patches.
					</li><li class="listitem"><p class="simpara">
						To install and configure a basic RH-SSO standalone server, follow the instructions in the "Installing and Booting" chapter of the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html-single/getting_started_guide/#install-boot"><span class="emphasis"><em>Red Hat Single Sign On Getting Started Guide</em></span></a>. For advanced settings for production environments, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html-single/server_administration_guide/"><span class="emphasis"><em>Red Hat Single Sign On Server Administration Guide</em></span></a>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you want to run both RH-SSO and Red Hat Process Automation Manager servers on the same system, ensure that you avoid port conflicts. by doing one of the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Update the <code class="literal"><span class="emphasis"><em>RHSSO_HOME</em></span>/standalone/configuration/standalone-full.xml</code> file and set a port offset to 100. For example:
								</p><pre class="screen">&lt;socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:100}"&gt;</pre></li><li class="listitem"><p class="simpara">
									Use an environment variable to run the server:
								</p><pre class="screen">bin/standalone.sh -Djboss.socket.binding.port-offset=100</pre></li></ul></div></div></div></li></ol></div></section><section class="chapter" id="roles-users-con_integrate-sso"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Red Hat Process Automation Manager roles and users</h2></div></div></div><p>
				To access Business Central or KIE Server, you must create users and assign them appropriate roles before the servers are started. You can create users and roles when you install Business Central or KIE Server.
			</p><p>
				Business Central and KIE Server use the Java Authentication and Authorization Service (JAAS) login module to authenticate users. If both Business Central and KIE Server are running on a single instance, then they share the same JAAS subject and security domain. Therefore, a user who is authenticated for Business Central can also access KIE Server.
			</p><p>
				However, if Business Central and KIE Server are running on different instances, then the JAAS login module is triggered for both individually. Therefore, a user who is authenticated for Business Central must be authenticated separately to access KIE Server. For example, if a user who is authenticated on Business Central but not authenticated on KIE Server tries to view or manage process definitions in Business Central, a 401 error is logged in the log file and the <code class="literal">Invalid credentials to load data from remote server. Contact your system administrator.</code> message appears in Business Central.
			</p><p>
				This section describes Red Hat Process Automation Manager user roles.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <code class="literal">admin</code>, <code class="literal">analyst</code>, <code class="literal">developer</code>, <code class="literal">manager</code>, <code class="literal">process-admin</code>, <code class="literal">user</code>, and <code class="literal">rest-all</code> roles are reserved for Business Central. The <code class="literal">kie-server</code> role is reserved for KIE Server. For this reason, the available roles can differ depending on whether Business Central, KIE Server, or both are installed.
				</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">admin</code>: Users with the <code class="literal">admin</code> role are the Business Central administrators. They can manage users and create, clone, and manage repositories. They have full access to make required changes in the application. Users with the <code class="literal">admin</code> role have access to all areas within Red Hat Process Automation Manager.
					</li><li class="listitem">
						<code class="literal">analyst</code>: Users with the <code class="literal">analyst</code> role have access to all high-level features. They can model and execute their projects. However, these users cannot add contributors to spaces or delete spaces in the <span class="strong strong"><strong>Design → Projects</strong></span> view. Access to the <span class="strong strong"><strong>Deploy → Execution Servers</strong></span> view, which is intended for administrators, is not available to users with the <code class="literal">analyst</code> role. However, the <span class="strong strong"><strong>Deploy</strong></span> button is available to these users when they access the Library perspective.
					</li><li class="listitem">
						<code class="literal">developer</code>: Users with the <code class="literal">developer</code> role have access to almost all features and can manage rules, models, process flows, forms, and dashboards. They can manage the asset repository, they can create, build, and deploy projects, and they can use Red Hat CodeReady Studio to view processes. Only certain administrative functions such as creating and cloning a new repository are hidden from users with the <code class="literal">developer</code> role.
					</li><li class="listitem">
						<code class="literal">manager</code>: Users with the <code class="literal">manager</code> role can view reports. These users are usually interested in statistics about the business processes and their performance, business indicators, and other business-related reporting. A user with this role has access only to process and task reports.
					</li><li class="listitem">
						<code class="literal">process-admin</code>: Users with the <code class="literal">process-admin</code> role are business process administrators. They have full access to business processes, business tasks, and execution errors. These users can also view business reports and have access to the Task Inbox list.
					</li><li class="listitem">
						<code class="literal">user</code>: Users with the <code class="literal">user</code> role can work on the Task Inbox list, which contains business tasks that are part of currently running processes. Users with this role can view process and task reports and manage processes.
					</li><li class="listitem">
						<code class="literal">rest-all</code>: Users with the <code class="literal">rest-all</code> role can access Business Central REST capabilities.
					</li><li class="listitem">
						<code class="literal">kie-server</code>: Users with the <code class="literal">kie-server</code> role can access KIE Server REST capabilities. This role is mandatory for users to have access to <span class="strong strong"><strong>Manage</strong></span> and <span class="strong strong"><strong>Track</strong></span> views in Business Central.
					</li></ul></div><section class="section" id="sso-user-add-proc"><div class="titlepage"><div><div><h2 class="title">16.1. Adding Red Hat Process Automation Manager users</h2></div></div></div><p>
					Before you can use RH-SSO to authenticate Business Central or KIE Server, you must add users to the realm that you created. To add new users and assign them a role to access Red Hat Process Automation Manager, complete the following steps:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Log in to the RH-SSO Admin Console and open the realm that you want to add a user to.
						</li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Users</strong></span> menu item under the <span class="strong strong"><strong>Manage</strong></span> section.
						</p><p class="simpara">
							An empty user list appears on the <span class="strong strong"><strong>Users</strong></span> page.
						</p></li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Add User</strong></span> button on the empty user list to start creating your new user.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Add User</strong></span> page opens.
						</p></li><li class="listitem">
							On the <span class="strong strong"><strong>Add User</strong></span> page, enter the user information and click <span class="strong strong"><strong>Save</strong></span>.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Credentials</strong></span> tab and create a password.
						</li><li class="listitem"><p class="simpara">
							Assign the new user one of the roles that allows access to Red Hat Process Automation Manager. For example, assign the <code class="literal">admin</code> role to access Business Central or assign the <code class="literal">kie-server</code> role to access KIE Server.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								For projects that deploy from Business Central on OpenShift, create an RH-SSO user called <code class="literal">mavenuser</code> without any role assigned, then add this user to the <code class="literal">BUSINESS_CENTRAL_MAVEN_USERNAME</code> and <code class="literal">BUSINESS_CENTRAL_MAVEN_PASSWORD</code> in your OpenShift template.
							</p></div></div></li><li class="listitem">
							Define the roles as realm roles in the <span class="strong strong"><strong>Realm Roles</strong></span> tab under the <span class="strong strong"><strong>Roles</strong></span> section.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Role Mappings</strong></span> tab on the <span class="strong strong"><strong>Users</strong></span> page to assign roles.
						</li></ol></div></section></section><section class="chapter" id="sso-central-proc_integrate-sso"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Authenticating Business Central through RH-SSO</h2></div></div></div><p>
				This chapter describes how to authenticate Business Central through RH-SSO. It includes the following sections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="#sso-central-client-create-proc" title="17.1. Creating the Business Central client for RH-SSO">Section 17.1, “Creating the Business Central client for RH-SSO”</a>
					</li><li class="listitem">
						<a class="xref" href="#sso-client-adapter-proc" title="17.2. Installing the RH-SSO client adapter for Business Central">Section 17.2, “Installing the RH-SSO client adapter for Business Central”</a>
					</li><li class="listitem">
						<a class="xref" href="#sso-remote-services-securing-proc" title="17.3. Securing Business Central file system services using RH-SSO">Section 17.3, “Securing Business Central file system services using RH-SSO”</a>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Business Central is installed in a Red Hat JBoss EAP 7.3 server, as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li><li class="listitem">
						RH-SSO is installed as described in <a class="xref" href="#sso-realm-proc" title="Chapter 15. Installing and configuring RH-SSO">Chapter 15, <em>Installing and configuring RH-SSO</em></a>.
					</li><li class="listitem">
						Business Central users have been added to RH-SSO as described in <a class="xref" href="#sso-user-add-proc" title="16.1. Adding Red Hat Process Automation Manager users">Section 16.1, “Adding Red Hat Process Automation Manager users”</a>.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Except for <a class="xref" href="#sso-central-client-create-proc" title="17.1. Creating the Business Central client for RH-SSO">Section 17.1, “Creating the Business Central client for RH-SSO”</a>, this section is intended for standalone installations. If you are integrating RH-SSO and Red Hat Process Automation Manager on Red Hat OpenShift Container Platform, complete only the steps in <a class="xref" href="#sso-central-client-create-proc" title="17.1. Creating the Business Central client for RH-SSO">Section 17.1, “Creating the Business Central client for RH-SSO”</a> and then deploy the Red Hat Process Automation Manager environment on Red Hat OpenShift Container Platform. For information about deploying Red Hat Process Automation Manager on Red Hat OpenShift Container Platform, see the relevant document on the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/">Red Hat Customer Portal</a>.
				</p></div></div><section class="section" id="sso-central-client-create-proc"><div class="titlepage"><div><div><h2 class="title">17.1. Creating the Business Central client for RH-SSO</h2></div></div></div><p>
					After the RH-SSO server starts, use the RH-SSO Admin Console to create the Business Central client for RH-SSO.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enter <code class="literal">http://localhost:8180/auth/admin</code> in a web browser to open the RH-SSO Admin Console and log in using the admin credentials that you created while installing RH-SSO.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If you are configuring RH-SSO with Red Hat OpenShift Container Platform, enter the URL that is exposed by the RH-SSO routes. Your OpenShift administrator can provide this URL if necessary.
							</p></div></div><p class="simpara">
							When you login for the first time, you can set up the initial user on the new user registration form.
						</p></li><li class="listitem">
							In the RH-SSO Admin Console, click the <span class="strong strong"><strong>Realm Settings</strong></span> menu item.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Realm Settings</strong></span> page, click <span class="strong strong"><strong>Add Realm</strong></span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Add realm</strong></span> page opens.
						</p></li><li class="listitem">
							On the <span class="strong strong"><strong>Add realm</strong></span> page, provide a name for the realm and click <span class="strong strong"><strong>Create</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Clients</strong></span> menu item and click <span class="strong strong"><strong>Create</strong></span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Add Client</strong></span> page opens.
						</p></li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Add Client</strong></span> page, provide the required information to create a new client for your realm. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Client ID</strong></span>: kie
								</li><li class="listitem">
									<span class="strong strong"><strong>Client protocol</strong></span>: openid-connect
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Root URL</strong></span>: <code class="literal">http://<span class="emphasis"><em>localhost</em></span>:8080/business-central</code>
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you are configuring RH-SSO with Red Hat OpenShift Container Platform, enter the URL that is exposed by the KIE Server routes. Your OpenShift administrator can provide this URL if necessary.
									</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Save</strong></span> to save your changes.
						</p><p class="simpara">
							After you create a new client, its <span class="strong strong"><strong>Access Type</strong></span> is set to <code class="literal">public</code> by default. Change it to <code class="literal">confidential</code>.
						</p><p class="simpara">
							The RH-SSO server is now configured with a realm with a client for Business Central applications and running and listening for HTTP connections at <code class="literal parameter">localhost:8180</code>. This realm provides different users, roles, and sessions for Business Central applications.
						</p></li></ol></div></section><section class="section" id="sso-client-adapter-proc"><div class="titlepage"><div><div><h2 class="title">17.2. Installing the RH-SSO client adapter for Business Central</h2></div></div></div><p>
					After you install RH-SSO, you must install the RH-SSO client adapter for Red Hat JBoss EAP and configure it for Business Central.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Business Central is installed in a Red Hat JBoss EAP 7.3 instance, as described in as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
						</li><li class="listitem">
							RH-SSO is installed as described in <a class="xref" href="#sso-realm-proc" title="Chapter 15. Installing and configuring RH-SSO">Chapter 15, <em>Installing and configuring RH-SSO</em></a>.
						</li><li class="listitem">
							A user with the <code class="literal">admin</code> role has been added to RH-SSO as described in <a class="xref" href="#sso-user-add-proc" title="16.1. Adding Red Hat Process Automation Manager users">Section 16.1, “Adding Red Hat Process Automation Manager users”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</a> page in the Red Hat Customer Portal (login required), and select the product and version from the drop-down options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Product:</strong></span> Red Hat Single Sign-On
								</li><li class="listitem">
									<span class="strong strong"><strong>Version:</strong></span> 7.4
								</li></ul></div></li><li class="listitem">
							Download <span class="strong strong"><strong>Red Hat Single Sign-on 7.4 Client Adapter for JBoss EAP 7</strong></span> (<code class="literal">rh-sso-7.4.3-eap7-adapter.zip</code> or the latest version).
						</li><li class="listitem"><p class="simpara">
							Extract and install the adapter zip file. For installation instructions, see the "JBoss EAP Adapter" section of the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html-single/securing_applications_and_services_guide"><span class="emphasis"><em>Red Hat Single Sign On Securing Applications and Services Guide</em></span></a>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Install the adapter with the <code class="literal">-Dserver.config=standalone-full.xml</code> property.
							</p></div></div></li><li class="listitem">
							Navigate to the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration</code> directory in your Red Hat JBoss EAP installation and open the <code class="literal">standalone-full.xml</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Add the system properties listed in the following example to <code class="literal">&lt;system-properties&gt;</code>:
						</p><pre class="programlisting language-xml">&lt;system-properties&gt;
  &lt;property name="org.jbpm.workbench.kie_server.keycloak" value="true"/&gt;
  &lt;property name="org.uberfire.ext.security.management.api.userManagementServices" value="KCAdapterUserManagementService"/&gt;
  &lt;property name="org.uberfire.ext.security.management.keycloak.authServer" value="http://localhost:8180/auth"/&gt;
&lt;/system-properties&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the RH-SSO subsystem configuration. For example:
						</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:keycloak:1.1"&gt;
 &lt;secure-deployment name="business-central.war"&gt;
   &lt;realm&gt;demo&lt;/realm&gt;
   &lt;realm-public-key&gt;MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrVrCuTtArbgaZzL1hvh0xtL5mc7o0NqPVnYXkLvgcwiC3BjLGw1tGEGoJaXDuSaRllobm53JBhjx33UNv+5z/UMG4kytBWxheNVKnL6GgqlNabMaFfPLPCF8kAgKnsi79NMo+n6KnSY8YeUmec/p2vjO2NjsSAVcWEQMVhJ31LwIDAQAB&lt;/realm-public-key&gt;
   &lt;auth-server-url&gt;http://localhost:8180/auth&lt;/auth-server-url&gt;
   &lt;ssl-required&gt;external&lt;/ssl-required&gt;
   &lt;enable-basic-auth&gt;true&lt;/enable-basic-auth&gt;
   &lt;resource&gt;kie&lt;/resource&gt;
   &lt;credential name="secret"&gt;759514d0-dbb1-46ba-b7e7-ff76e63c6891&lt;/credential&gt;
   &lt;principal-attribute&gt;preferred_username&lt;/principal-attribute&gt;
 &lt;/secure-deployment&gt;
&lt;/subsystem&gt;</pre><p class="simpara">
							In this example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">secure-deployment name</code> is the name of your application’s WAR file.
								</li><li class="listitem">
									<code class="literal">realm</code> is the name of the realm that you created for the applications to use.
								</li><li class="listitem">
									<code class="literal">realm-public-key</code> is the public key of the realm you created. You can find the key in the <span class="strong strong"><strong>Keys</strong></span> tab in the <span class="strong strong"><strong>Realm settings</strong></span> page of the realm you created in the RH-SSO Admin Console. If you do not provide a value for <code class="literal">realm-public-key</code>, the server retrieves it automatically.
								</li><li class="listitem">
									<code class="literal">auth-server-url</code> is the URL for the RH-SSO authentication server.
								</li><li class="listitem">
									<code class="literal">enable-basic-auth</code> is the setting to enable basic authentication mechanism, so that the clients can use both token-based and basic authentication approaches to perform the requests.
								</li><li class="listitem">
									<code class="literal">resource</code> is the name for the client that you created.
								</li><li class="listitem">
									<code class="literal">credential name</code> is the secret key for the client you created. You can find the key in the <span class="strong strong"><strong>Credentials</strong></span> tab on the <span class="strong strong"><strong>Clients</strong></span> page of the RH-SSO Admin Console.
								</li><li class="listitem"><p class="simpara">
									<code class="literal">principal-attribute</code> is the login name of the user. If you do not provide this value, your User Id is displayed in the application instead of your user name.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The RH-SSO server converts the user names to lower case. Therefore, after integration with RH-SSO, your user name will appear in lower case in Red Hat Process Automation Manager. If you have user names in upper case hard coded in business processes, the application might not be able to identify the upper case user.
									</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							The Elytron subsystem provides a built-in policy provider based on JACC specification. To enable the JACC manually in the <code class="literal">standalone.xml</code> or in the file where Elytron is installed, do any of the following tasks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To create the policy provider, enter the following commands in the management command-line interface (CLI) of Red Hat JBoss EAP:
								</p><pre class="screen">/subsystem=elytron/policy=jacc:add(jacc-policy={})
/subsystem=undertow/application-security-domain=other:remove
/subsystem=undertow/application-security-domain=other:add(http-authentication-factory=keycloak-http-authentication,enable-jacc=true)</pre><p class="simpara">
									For more information about management CLI of Red Hat JBoss EAP, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.3/html-single/management_cli_guide/index"><span class="emphasis"><em>Management CLI Guide</em></span></a>.
								</p></li><li class="listitem"><p class="simpara">
									Navigate to the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration</code> directory in your Red Hat JBoss EAP installation. Locate the Elytron and undertow subsystem configurations in the <code class="literal">standalone.xml</code> and <code class="literal">standalone-full.xml</code> files and enable JACC. For example:
								</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:wildfly:elytron:4.0" ...&gt;
......
 &lt;policy name="jacc"&gt;&lt;jacc-policy/&gt;&lt;/policy&gt;
&lt;/subsystem&gt;</pre><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:undertow:7.0" ...&gt;
......
 &lt;application-security-domains&gt;
    &lt;application-security-domain name="other" http-authentication-factory="keycloak-http-authentication" enable-jacc="true"/&gt;
 &lt;/application-security-domains&gt;
&lt;/subsystem&gt;</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Navigate to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/</code> and enter the following command to start the Red Hat JBoss EAP server:
						</p><pre class="screen">./standalone.sh -c standalone-full.xml</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can also configure the RH-SSO adapter for Business Central by updating your application’s WAR file to use the RH-SSO security subsystem. However, Red Hat recommends that you configure the adapter through the RH-SSO subsystem. Doing this updates the Red Hat JBoss EAP configuration instead of applying the configuration on each WAR file.
					</p></div></div></section><section class="section" id="sso-remote-services-securing-proc"><div class="titlepage"><div><div><h2 class="title">17.3. Securing Business Central file system services using RH-SSO</h2></div></div></div><p>
					To consume other remote services such as file systems (for example, a remote GIT service), you must specify the correct RH-SSO login module.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Generate a JSON configuration file:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Navigate to the <span class="strong strong"><strong>RH-SSO Admin Console</strong></span> located at http://localhost:8180/auth/admin.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Clients</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Create a new client with the following settings:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Set <span class="strong strong"><strong>Client ID</strong></span> as <code class="literal">kie-git</code>.
										</li><li class="listitem">
											Set <span class="strong strong"><strong>Access Type</strong></span> as <code class="literal">confidential</code>.
										</li><li class="listitem">
											Disable the <span class="strong strong"><strong>Standard Flow Enabled</strong></span> option.
										</li><li class="listitem">
											Enable the <span class="strong strong"><strong>Direct Access Grants Enabled</strong></span> option.
										</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/integration/kie_git_client_settings.png" alt="kie git client settings"/></div></div></li><li class="listitem">
									Click <span class="strong strong"><strong>Save</strong></span>.
								</li><li class="listitem">
									Click the <span class="strong strong"><strong>Installation</strong></span> tab at the top of the client configuration screen and choose <span class="strong strong"><strong>Keycloak OIDC JSON</strong></span> as a <span class="strong strong"><strong>Format Option</strong></span>.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Download</strong></span>.
								</li></ol></div></li><li class="listitem">
							Move the downloaded JSON file to an accessible directory in the server’s file system or add it to the application class path.
						</li><li class="listitem"><p class="simpara">
							Specify the correct RH-SSO login module in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/standalone-full.xml</code> file. By default, the security domain in Red Hat Process Automation Manager is set to <code class="literal">other</code>. Replace the default values of the <code class="literal">login-module</code> in this security domain with the values in the following example:
						</p><pre class="programlisting language-xml">&lt;security-domain name="other" cache-type="default"&gt;
  &lt;authentication&gt;
    &lt;login-module code="org.keycloak.adapters.jaas.DirectAccessGrantsLoginModule" flag="required"&gt;
      &lt;module-option name="keycloak-config-file" value="$EAP_HOME/kie-git.json"/&gt;
    &lt;/login-module&gt;
  &lt;/authentication&gt;
&lt;/security-domain&gt;</pre></li><li class="listitem"><p class="simpara">
							The JSON file specified in the <code class="literal">module-option</code> element contains a client used for securing the remote services. Replace the <code class="literal">$<span class="emphasis"><em>EAP_HOME</em></span>/kie-git.json</code> value of the <code class="literal">module-option</code> element with the absolute path or the class path (<code class="literal">classpath:/<span class="emphasis"><em>EXAMPLE_PATH</em></span>/kie-git.json</code>) to this JSON configuration file.
						</p><p class="simpara">
							At this point, all users authenticated through the RH-SSO server can clone internal GIT repositories. In the following command, change <code class="literal">USER_NAME</code> to a RH-SSO user, for example <code class="literal">admin</code>:
						</p><pre class="screen">git clone ssh://USER_NAME@localhost:8001/system</pre></li></ol></div></section></section><section class="chapter" id="sso-kie-server-con_integrate-sso"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Authenticating KIE Server through RH-SSO</h2></div></div></div><p>
				KIE Server provides a REST API for third-party clients. If you integrate KIE Server with RH-SSO, you can delegate third-party client identity management to the RH-SSO server.
			</p><p>
				After you create a realm client for Red Hat Process Automation Manager and set up the RH-SSO client adapter for Red Hat JBoss EAP, you can set up RH-SSO authentication for KIE Server.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						RH-SSO is installed as described in <a class="xref" href="#sso-realm-proc" title="Chapter 15. Installing and configuring RH-SSO">Chapter 15, <em>Installing and configuring RH-SSO</em></a>.
					</li><li class="listitem">
						At least one user with the <code class="literal">kie-server</code> role has been added to RH-SSO as described in <a class="xref" href="#sso-user-add-proc" title="16.1. Adding Red Hat Process Automation Manager users">Section 16.1, “Adding Red Hat Process Automation Manager users”</a>.
					</li><li class="listitem">
						KIE Server is installed in a Red Hat JBoss EAP 7.3 instance, as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li></ul></div><p>
				This chapter contains the following sections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="#sso-kie-server-client-proc" title="18.1. Creating the KIE Server client on RH-SSO">Section 18.1, “Creating the KIE Server client on RH-SSO”</a>
					</li><li class="listitem">
						<a class="xref" href="#sso-kie-server-client-adapter-proc" title="18.2. Installing and configuring KIE Server with the client adapter">Section 18.2, “Installing and configuring KIE Server with the client adapter”</a>
					</li><li class="listitem">
						<a class="xref" href="#sso-kie-server-token-proc" title="18.3. KIE Server token-based authentication">Section 18.3, “KIE Server token-based authentication”</a>
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Except for <a class="xref" href="#sso-kie-server-client-proc" title="18.1. Creating the KIE Server client on RH-SSO">Section 18.1, “Creating the KIE Server client on RH-SSO”</a>, this section is intended for standalone installations. If you are integrating RH-SSO and Red Hat Process Automation Manager on Red Hat OpenShift Container Platform, complete the steps in <a class="xref" href="#sso-kie-server-client-proc" title="18.1. Creating the KIE Server client on RH-SSO">Section 18.1, “Creating the KIE Server client on RH-SSO”</a> and then deploy the Red Hat Process Automation Manager environment on Red Hat OpenShift Container Platform. For information about deploying Red Hat Process Automation Manager on Red Hat OpenShift Container Platform, see the relevant document on the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/">Red Hat Customer Portal</a>.
				</p></div></div><section class="section" id="sso-kie-server-client-proc"><div class="titlepage"><div><div><h2 class="title">18.1. Creating the KIE Server client on RH-SSO</h2></div></div></div><p>
					Use the RH-SSO Admin Console to create a KIE Server client in an existing realm.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							KIE Server is installed in a Red Hat JBoss EAP 7.3 server, as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
						</li><li class="listitem">
							RH-SSO is installed as described in <a class="xref" href="#sso-realm-proc" title="Chapter 15. Installing and configuring RH-SSO">Chapter 15, <em>Installing and configuring RH-SSO</em></a>.
						</li><li class="listitem">
							At least one user with the <code class="literal">kie-server</code> role has been added to RH-SSO as described in <a class="xref" href="#sso-user-add-proc" title="16.1. Adding Red Hat Process Automation Manager users">Section 16.1, “Adding Red Hat Process Automation Manager users”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the RH-SSO Admin Console, open the security realm that you created in <a class="xref" href="#sso-realm-proc" title="Chapter 15. Installing and configuring RH-SSO">Chapter 15, <em>Installing and configuring RH-SSO</em></a>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Clients</strong></span> and click <span class="strong strong"><strong>Create</strong></span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Add Client</strong></span> page opens.
						</p></li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Add Client</strong></span> page, provide the required information to create a KIE Server client for your realm, then click <span class="strong strong"><strong>Save</strong></span>. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Client ID</strong></span>: <code class="literal">kie-execution-server</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Root URL</strong></span>: <code class="literal">http://<span class="emphasis"><em>localhost</em></span>:8080/kie-server</code>
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Client protocol</strong></span>: <code class="literal">openid-connect</code>
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you are configuring RH-SSO with Red Hat OpenShift Container Platform, enter the URL that is exposed by the KIE Server routes. Your OpenShift administrator can provide this URL if necessary.
									</p></div></div></li></ul></div></li><li class="listitem">
							The new client <span class="strong strong"><strong>Access Type</strong></span> is set to <code class="literal">public</code> by default. Change it to <code class="literal">confidential</code> and click <span class="strong strong"><strong>Save</strong></span> again.
						</li><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Credentials</strong></span> tab and copy the secret key. The secret key is required to configure the <code class="literal">kie-execution-server</code> client.
						</li></ol></div></section><section class="section" id="sso-kie-server-client-adapter-proc"><div class="titlepage"><div><div><h2 class="title">18.2. Installing and configuring KIE Server with the client adapter</h2></div></div></div><p>
					After you install RH-SSO, you must install the RH-SSO client adapter for Red Hat JBoss EAP and configure it for KIE Server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							KIE Server is installed in a Red Hat JBoss EAP 7.3 server, as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
						</li><li class="listitem">
							RH-SSO is installed as described in <a class="xref" href="#sso-realm-proc" title="Chapter 15. Installing and configuring RH-SSO">Chapter 15, <em>Installing and configuring RH-SSO</em></a>.
						</li><li class="listitem">
							At least one user with the <code class="literal">kie-server</code> role has been added to RH-SSO as described in <a class="xref" href="#sso-user-add-proc" title="16.1. Adding Red Hat Process Automation Manager users">Section 16.1, “Adding Red Hat Process Automation Manager users”</a>.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you deployed KIE Server to a different application server than Business Central, install and configure RH-SSO on your second server as well.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</a> page in the Red Hat Customer Portal (login required), and select the product and version from the drop-down options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Product:</strong></span> Red Hat Single Sign-On
								</li><li class="listitem">
									<span class="strong strong"><strong>Version:</strong></span> 7.4
								</li></ul></div></li><li class="listitem">
							Download <span class="strong strong"><strong>Red Hat Single Sign-on 7.4 Client Adapter for JBoss EAP 7</strong></span> (<code class="literal">rh-sso-7.4.3-eap7-adapter.zip</code> or the latest version).
						</li><li class="listitem">
							Extract and install the adapter zip file. For installation instructions, see the "JBoss EAP Adapter" section of the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html-single/securing_applications_and_services_guide/#jboss_adapter"><span class="emphasis"><em>Red Hat Single Sign On Securing Applications and Services Guide</em></span></a>.
						</li><li class="listitem">
							Go to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration</code> and open the <code class="literal">standalone-full.xml</code> file.
						</li><li class="listitem">
							Delete the <code class="literal">&lt;single-sign-on/&gt;</code> element from both of the files.
						</li><li class="listitem">
							Navigate to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration</code> directory in your Red Hat JBoss EAP installation and edit the <code class="literal">standalone-full.xml</code> file to add the RH-SSO subsystem configuration. For example:
						</li><li class="listitem"><p class="simpara">
							Navigate to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration</code> in your Red Hat JBoss EAP installation and edit the <code class="literal">standalone-full.xml</code> file to add the RH-SSO subsystem configuration. For example:
						</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:keycloak:1.1"&gt;
  &lt;secure-deployment name="kie-server.war"&gt;
     &lt;realm&gt;demo&lt;/realm&gt;
     &lt;realm-public-key&gt;MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrVrCuTtArbgaZzL1hvh0xtL5mc7o0NqPVnYXkLvgcwiC3BjLGw1tGEGoJaXDuSaRllobm53JBhjx33UNv+5z/UMG4kytBWxheNVKnL6GgqlNabMaFfPLPCF8kAgKnsi79NMo+n6KnSY8YeUmec/p2vjO2NjsSAVcWEQMVhJ31LwIDAQAB&lt;/realm-public-key&gt;
     &lt;auth-server-url&gt;http://localhost:8180/auth&lt;/auth-server-url&gt;
     &lt;ssl-required&gt;external&lt;/ssl-required&gt;
     &lt;resource&gt;kie-execution-server&lt;/resource&gt;
     &lt;enable-basic-auth&gt;true&lt;/enable-basic-auth&gt;
     &lt;credential name="secret"&gt;03c2b267-7f64-4647-8566-572be673f5fa&lt;/credential&gt;
     &lt;principal-attribute&gt;preferred_username&lt;/principal-attribute&gt;
  &lt;/secure-deployment&gt;
&lt;/subsystem&gt;

&lt;system-properties&gt;
  &lt;property name="org.kie.server.sync.deploy" value="false"/&gt;
&lt;/system-properties&gt;</pre><p class="simpara">
							In this example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">secure-deployment name</code> is the name of your application WAR file.
								</li><li class="listitem">
									<code class="literal">realm</code> is the name of the realm that you created for the applications to use.
								</li><li class="listitem">
									<code class="literal">realm-public-key</code> is the public key of the realm you created. You can find the key in the <span class="strong strong"><strong>Keys</strong></span> tab in the <span class="strong strong"><strong>Realm settings</strong></span> page of the realm you created in the RH-SSO Admin Console. If you do not provide a value for this public key, the server retrieves it automatically.
								</li><li class="listitem">
									<code class="literal">auth-server-url</code> is the URL for the RH-SSO authentication server.
								</li><li class="listitem">
									<code class="literal">resource</code> is the name for the server client that you created.
								</li><li class="listitem">
									<code class="literal">enable-basic-auth</code> is the setting to enable basic authentication mechanism, so that the clients can use both token-based and basic authentication approaches to perform the requests.
								</li><li class="listitem">
									<code class="literal">credential name</code> is the secret key of the server client you created. You can find the key in the <span class="strong strong"><strong>Credentials</strong></span> tab on the <span class="strong strong"><strong>Clients</strong></span> page of the RH-SSO Admin Console.
								</li><li class="listitem">
									<code class="literal">principal-attribute</code> is the login name of the user. If you do not provide this value, your User Id is displayed in the application instead of your user name.
								</li></ul></div></li><li class="listitem">
							Save your configuration changes.
						</li><li class="listitem"><p class="simpara">
							Use the following command to restart the Red Hat JBoss EAP server and run KIE Server.
						</p><pre class="screen">EXEC_SERVER_HOME/bin/standalone.sh -c standalone-full.xml -Dorg.kie.server.id=&lt;ID&gt; -Dorg.kie.server.user=&lt;USER&gt; -Dorg.kie.server.pwd=&lt;PWD&gt; -Dorg.kie.server.location=&lt;LOCATION_URL&gt; -Dorg.kie.server.controller=&lt;CONTROLLER_URL&gt; -Dorg.kie.server.controller.user=&lt;CONTROLLER_USER&gt; -Dorg.kie.server.controller.pwd=&lt;CONTOLLER_PASSWORD&gt;</pre><p class="simpara">
							For example:
						</p><pre class="screen">EXEC_SERVER_HOME/bin/standalone.sh -c standalone-full.xml -Dorg.kie.server.id=kieserver1 -Dorg.kie.server.user=kieserver -Dorg.kie.server.pwd=password -Dorg.kie.server.location=http://localhost:8080/kie-server/services/rest/server -Dorg.kie.server.controller=http://localhost:8080/business-central/rest/controller -Dorg.kie.server.controller.user=kiecontroller -Dorg.kie.server.controller.pwd=password</pre></li><li class="listitem"><p class="simpara">
							When KIE Server is running, enter the following command to check the server status, where <code class="literal">&lt;KIE_SERVER_USER&gt;</code> is a user with the <code class="literal">kie-server</code> role and <code class="literal">&lt;PASSWORD&gt;</code> is the password for that user:
						</p><pre class="screen">curl http://&lt;KIE_SERVER_USER&gt;:&lt;PASSWORD&gt;@localhost:8080/kie-server/services/rest/server/</pre></li></ol></div></section><section class="section" id="sso-kie-server-token-proc"><div class="titlepage"><div><div><h2 class="title">18.3. KIE Server token-based authentication</h2></div></div></div><p>
					You can also use token-based authentication for communication between Red Hat Process Automation Manager and KIE Server. You can use the complete token as a system property of your application server, instead of the user name and password, for your applications. However, you must ensure that the token will not expire while the applications are interacting because the token is not automatically refreshed. To get the token, see <a class="xref" href="#sso-token-auth-proc" title="19.2. Token-based authentication">Section 19.2, “Token-based authentication”</a>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To configure Business Central to manage KIE Server using tokens:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Set the <code class="literal">org.kie.server.token</code> property.
								</li><li class="listitem"><p class="simpara">
									Make sure that the <code class="literal">org.kie.server.user</code> and <code class="literal">org.kie.server.pwd</code> properties are not set.
								</p><p class="simpara">
									Red Hat Process Automation Manager will then use the <code class="literal">Authorization: Bearer $TOKEN</code> authentication method.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							To use the REST API using the token-based authentication:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Set the <code class="literal">org.kie.server.controller.token</code> property.
								</li><li class="listitem">
									Make sure that the <code class="literal">org.kie.server.controller.user</code> and <code class="literal">org.kie.server.controller.pwd</code> properties are not set.
								</li></ol></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Because KIE Server is unable to refresh the token, use a high-lifespan token. A token’s lifespan must not exceed January 19 2038. Check with your security best practices to see whether this is a suitable solution for your environment.
					</p></div></div></section></section><section class="chapter" id="sso-third-party-proc_integrate-sso"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Authenticating third-party clients through RH-SSO</h2></div></div></div><p>
				To use the different remote services provided by Business Central or by KIE Server, your client, such as curl, wget, web browser, or a custom REST client, must authenticate through the RH-SSO server and have a valid token to perform the requests. To use the remote services, the authenticated user must have the following roles:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">rest-all</code> for using Business Central remote services.
					</li><li class="listitem">
						<code class="literal">kie-server</code> for using the KIE Server remote services.
					</li></ul></div><p>
				Use the RH-SSO Admin Console to create these roles and assign them to the users that will consume the remote services.
			</p><p>
				Your client can authenticate through RH-SSO using one of these options:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Basic authentication, if it is supported by the client
					</li><li class="listitem">
						Token-based authentication
					</li></ul></div><section class="section" id="sso-basic-auth-proc_integrate-sso"><div class="titlepage"><div><div><h2 class="title">19.1. Basic authentication</h2></div></div></div><p>
					If you enabled basic authentication in the RH-SSO client adapter configuration for both Business Central and KIE Server, you can avoid the token grant and refresh calls and call the services as shown in the following examples:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							For web based remote repositories endpoint:
						</p><pre class="screen">curl http://admin:password@localhost:8080/business-central/rest/repositories</pre></li><li class="listitem"><p class="simpara">
							For KIE Server:
						</p><pre class="screen">curl http://admin:password@localhost:8080/kie-server/services/rest/server/</pre></li></ul></div></section><section class="section" id="sso-token-auth-proc"><div class="titlepage"><div><div><h2 class="title">19.2. Token-based authentication</h2></div></div></div><p>
					If you want a more secure option of authentication, you can consume the remote services from both Business Central and KIE Server by using a granted token provided by RH-SSO.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the RH-SSO Admin Console, click the <span class="strong strong"><strong>Clients</strong></span> menu item and click <span class="strong strong"><strong>Create</strong></span> to create a new client.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Add Client</strong></span> page opens.
						</p></li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Add Client</strong></span> page, provide the required information to create a new client for your realm. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Client ID</strong></span>: kie-remote
								</li><li class="listitem">
									<span class="strong strong"><strong>Client protocol</strong></span>: openid-connect
								</li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> to save your changes.
						</li><li class="listitem"><p class="simpara">
							Change the token settings in <span class="strong strong"><strong>Realm Settings</strong></span>:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In the RH-SSO Admin Console, click the <span class="strong strong"><strong>Realm Settings</strong></span> menu item.
								</li><li class="listitem">
									Click the <span class="strong strong"><strong>Tokens</strong></span> tab.
								</li><li class="listitem"><p class="simpara">
									Change the value for <span class="strong strong"><strong>Access Token Lifespan</strong></span> to <code class="literal parameter">15</code> minutes.
								</p><p class="simpara">
									This gives you enough time to get a token and invoke the service before it expires.
								</p></li><li class="listitem">
									Click <span class="strong strong"><strong>Save</strong></span> to save your changes.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							After a public client for your remote clients is created, you can now obtain the token by making an HTTP request to the RH-SSO server’s token endpoint using:
						</p><pre class="screen">RESULT=`curl --data "grant_type=password&amp;client_id=kie-remote&amp;username=admin&amp;password=password" http://localhost:8180/auth/realms/demo/protocol/openid-connect/token`</pre><p class="simpara">
							The user in this command is a Business Central RH-SSO user. For more information, see <a class="xref" href="#sso-user-add-proc" title="16.1. Adding Red Hat Process Automation Manager users">Section 16.1, “Adding Red Hat Process Automation Manager users”</a>.
						</p></li><li class="listitem"><p class="simpara">
							To view the token obtained from the RH-SSO server, use the following command:
						</p><pre class="screen">TOKEN=`echo $RESULT | sed 's/.*access_token":"//g' | sed 's/".*//g'`</pre></li></ol></div><p>
					You can now use this token to authorize the remote calls. For example, if you want to check the internal Red Hat Process Automation Manager repositories, use the token as shown below:
				</p><pre class="screen">curl -H "Authorization: bearer $TOKEN" http://localhost:8080/business-central/rest/repositories</pre></section></section></div><div class="part" id="assembly-integrating-codeready-studio"><div class="titlepage"><div><div><h1 class="title">Part IV. Integrating Red Hat CodeReady Studio with Red Hat Process Automation Manager</h1></div></div></div><div class="partintro" id="idm139969150946960"><div/><p>
				As a developer, you can integrate Red Hat CodeReady Studio with Red Hat Process Automation Manager to write complex applications and leverage code auto-completion.
			</p><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#codeready-studio-install-proc">20. Installing Red Hat CodeReady Studio</a></span></li><li><span class="chapter"><a href="#codeready-studio-plug-in-install-proc">21. Installing Red Hat CodeReady Studio plug-ins</a></span></li><li><span class="chapter"><a href="#dm-server-configure-proc">22. Configuring the Red Hat Process Automation Manager server</a></span></li><li><span class="chapter"><a href="#codeready-studio-installing-runtime-environments-proc">23. Installing Red Hat Process Automation Manager runtime environments</a></span></li><li><span class="chapter"><a href="#codeready-studio-creating-a-project-proc">24. Creating a Red Hat Process Automation Manager project</a></span></li><li><span class="chapter"><a href="#codeready-studio-import-projects-from-git-repo">25. Importing projects from a Git repository into Red Hat CodeReady Studio</a></span><ul><li><span class="section"><a href="#codeready-studio-clone-remote-git-repo-proc">25.1. Cloning a remote Git repository</a></span></li><li><span class="section"><a href="#codeready-studio-import-local-git-repo-proc">25.2. Importing a local Git repository</a></span></li></ul></li><li><span class="chapter"><a href="#additional_resources">26. Additional Resources</a></span></li></ul></div></div><section class="chapter" id="codeready-studio-install-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Installing Red Hat CodeReady Studio</h2></div></div></div><p>
				Red Hat CodeReady Studio is an integrated development environment (IDE) based on Eclipse. It integrates tooling and runtime components by combining Eclipse, Eclipse Tooling, and Red Hat JBoss Enterprise Application Platform. Red Hat CodeReady Studio provides plug-ins with tools and interfaces for Red Hat Process Automation Manager.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download Red Hat CodeReady Studio:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Log in to the <a class="link" href="https://access.redhat.com">Red Hat Customer Portal</a>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>DOWNLOADS</strong></span> at the top of the page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Product Downloads</strong></span> page, navigate to the <span class="strong strong"><strong>RUNTIMES</strong></span> section, and click <span class="strong strong"><strong>Red Hat Developer Studio</strong></span>.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Software Downloads</strong></span> page, download <span class="strong strong"><strong>Red Hat CodeReady Studio 12.17.0 Stand-alone Installer</strong></span> (<code class="literal">codereadystudio-12.17.0.GA-installer-standalone.jar</code>).
							</li></ol></div></li><li class="listitem"><p class="simpara">
						In a terminal window, navigate to the directory where you downloaded the installer JAR file and enter the following command:
					</p><pre class="screen">java -jar codereadystudio-12.17.0.GA-installer-standalone.jar</pre></li><li class="listitem"><p class="simpara">
						Follow the instructions in the installer to complete the installation.
					</p><p class="simpara">
						For more information, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_codeready_studio/12.17/html/installation_guide/"><span class="emphasis"><em>Red Hat CodeReady Studio Installation Guide</em></span></a>.
					</p></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Because of an issue in the way multi-byte rule names are handled, you must ensure that the instance of Red Hat CodeReady Studio is started with the file encoding set to <code class="literal">UTF-8</code>. You can do this by editing the <code class="literal">$<span class="emphasis"><em>DS_HOME</em></span>/studio/codereadystudio.ini</code> file and adding the following property: <code class="literal">"-Dfile.encoding=UTF-8"</code>.
				</p></div></div></section><section class="chapter" id="codeready-studio-plug-in-install-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Installing Red Hat CodeReady Studio plug-ins</h2></div></div></div><p>
				The Red Hat CodeReady Studio plug-ins for Red Hat Process Automation Manager are based on the community version of the plug-ins. For this reason, the Red Hat Process Automation Manager plug-in is called the Drools plug-in.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download the Red Hat Process Automation Manager plug-ins for Red Hat CodeReady Studio:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Log in to the <a class="link" href="https://access.redhat.com">Red Hat Customer Portal</a>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>DOWNLOADS</strong></span> at the top of the page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Product Downloads</strong></span> page that opens, navigate to the <span class="strong strong"><strong>RUNTIMES</strong></span> section, and click <span class="strong strong"><strong>Red Hat Developer Studio</strong></span>.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Software Downloads</strong></span> page, from the <span class="strong strong"><strong>Version</strong></span> list select <span class="strong strong"><strong>12.11.0</strong></span>, and then download <span class="strong strong"><strong>Red Hat CodeReady Studio Integration Stack 12.11.0 Update Site Zip</strong></span> (<code class="literal">devstudio-integration-stack-12.11.0.GA-updatesite.zip</code>).
							</li></ol></div></li><li class="listitem">
						To start Red Hat CodeReady Studio, select Red Hat CodeReady Studio from the <span class="strong strong"><strong>Start</strong></span> menu.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Help</strong></span> → <span class="strong strong"><strong>Install New Software</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add</strong></span> to display the <span class="strong strong"><strong>Add Repository</strong></span> window.
					</li><li class="listitem">
						Enter a name in the <span class="strong strong"><strong>Name</strong></span> field, for example, <code class="literal">devstudio-12.11.0.GA</code>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Archive</strong></span>, navigate to the <code class="literal">devstudio-integration-stack-12.11.0.GA-updatesite.zip</code> file, select the file, and then click <span class="strong strong"><strong>OK</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add</strong></span>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Install</strong></span> window, select <span class="strong strong"><strong>JBoss Business Process and Rule Development</strong></span> from the <span class="strong strong"><strong>Available Software</strong></span> list, click <span class="strong strong"><strong>Next</strong></span>, and click <span class="strong strong"><strong>Next</strong></span> again.
					</li><li class="listitem">
						Read the license agreements, click <span class="strong strong"><strong>I accept the terms of the license agreements</strong></span> to accept the license agreements, and then click <span class="strong strong"><strong>Finish</strong></span>.
					</li><li class="listitem">
						After the installation process has been completed, click <span class="strong strong"><strong>Restart Now</strong></span> in the <span class="strong strong"><strong>Software Updates</strong></span> window to restart Red Hat CodeReady Studio.
					</li></ol></div></section><section class="chapter" id="dm-server-configure-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 22. Configuring the Red Hat Process Automation Manager server</h2></div></div></div><p>
				You can configure Red Hat CodeReady Studio to run the Red Hat Process Automation Manager server.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat CodeReady Studio is installed with the Red Hat Process Automation Manager plug-ins.
					</li><li class="listitem">
						Red Hat Process Automation Manager is installed in a Red Hat JBoss EAP 7.3 server instance.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Start Red Hat CodeReady Studio.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Window</strong></span> → <span class="strong strong"><strong>Show View</strong></span> → <span class="strong strong"><strong>Other</strong></span>, select <span class="strong strong"><strong>Server</strong></span> → <span class="strong strong"><strong>Servers</strong></span>, and then click <span class="strong strong"><strong>Open</strong></span> to add the server view.
					</li><li class="listitem">
						Right-click on the <span class="strong strong"><strong>Servers</strong></span> pane and select <span class="strong strong"><strong>New</strong></span> → <span class="strong strong"><strong>Server</strong></span> to open the server menu.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Red Hat JBoss Middleware</strong></span> → <span class="strong strong"><strong>JBoss Enterprise Application Platform 7.x</strong></span> and then click <span class="strong strong"><strong>Next</strong></span> to define the server.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Create a new Server Adapter</strong></span> window, select <span class="strong strong"><strong>Create new runtime (next page)</strong></span> from the list, and then click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						To set the home directory in the <span class="strong strong"><strong>JBoss Runtime</strong></span> window, click the <span class="strong strong"><strong>Browse</strong></span> button under <span class="strong strong"><strong>Home Directory</strong></span> and navigate to the Red Hat JBoss EAP directory where Red Hat Process Automation Manager is installed.
					</li><li class="listitem">
						Enter a name for the server in the <span class="strong strong"><strong>Name</strong></span> field, ensure that the configuration file is set, and then click <span class="strong strong"><strong>Finish</strong></span>.
					</li></ol></div></section><section class="chapter" id="codeready-studio-installing-runtime-environments-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 23. Installing Red Hat Process Automation Manager runtime environments</h2></div></div></div><p>
				In order to create Red Hat Process Automation Manager projects in Red Hat CodeReady Studio, it is necessary to install the Red Hat Process Automation Manager runtime environment.
			</p><p>
				A runtime environment is a collection of JAR files that represent a specific release of the software and includes the required libraries for compiling and running your business asset.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat CodeReady Studio is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download the process engine:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Log in to the <a class="link" href="https://access.redhat.com">Red Hat Customer Portal</a>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>DOWNLOADS</strong></span> at the top of the page.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Product Downloads</strong></span> page that opens, navigate to the <span class="strong strong"><strong>INTEGRATION AND AUTOMATION</strong></span> section, and click <span class="strong strong"><strong>Red Hat Process Automation Manager</strong></span>.
							</li><li class="listitem">
								On the <span class="strong strong"><strong>Software Downloads</strong></span> page, download <span class="strong strong"><strong>Red Hat Process Automation Manager 7.10.0 Add-Ons</strong></span> (<code class="literal">rhpam-7.10.0-add-ons.zip</code>).
							</li><li class="listitem">
								Extract <code class="literal">rhpam-7.10.0-add-ons.zip</code> and then extract the Drools runtime environment JAR files located in`rhpam-7.10.0-add-ons/rhpam-7.10.0-process-engine.zip`
							</li></ol></div></li><li class="listitem">
						From the Red Hat CodeReady Studio menu, click <span class="strong strong"><strong>Window</strong></span> → <span class="strong strong"><strong>Preferences</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Drools</strong></span> → <span class="strong strong"><strong>Installed Drools Runtimes</strong></span>, and then click <span class="strong strong"><strong>Add</strong></span>.
					</li><li class="listitem">
						In the name field, enter a name for the new runtime environment.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Browse</strong></span> and navigate to the directory where you extracted the runtime environment files.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>OK</strong></span> to register the selected runtime environment in Red Hat CodeReady Studio.
					</li><li class="listitem">
						To set the runtime environment as the default Drools runtime, select the check box beside the runtime environment name.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Apply and Close</strong></span>. If you have existing projects, you are prompted to restart Red Hat CodeReady Studio to update the runtime environment.
					</li></ol></div></section><section class="chapter" id="codeready-studio-creating-a-project-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 24. Creating a Red Hat Process Automation Manager project</h2></div></div></div><p>
				You can create and manage a Red Hat Process Automation Manager project in Red Hat CodeReady Studio.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat CodeReady Studio is installed with the Red Hat Process Automation Manager plug-ins.
					</li><li class="listitem">
						Red Hat Process Automation Manager runtime environment is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Red Hat CodeReady Studio, from the main menu, click <span class="strong strong"><strong>File</strong></span> → <span class="strong strong"><strong>New</strong></span> → <span class="strong strong"><strong>Project</strong></span>.
					</li><li class="listitem">
						In the search field, enter <code class="literal">Drools Project</code>, select <span class="strong strong"><strong>Drools Project</strong></span>, and then click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						Select the second option to create a project with a Red Hat Process Automation Manager example, and then click <span class="strong strong"><strong>Next</strong></span>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Project name</strong></span> field, enter a name for the project.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Finish</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Complete the following steps to test the project:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Navigate to the <code class="literal">src/main/java</code> directory and expand the <code class="literal">com.sample</code> package.
							</li><li class="listitem"><p class="simpara">
								Right click a Java class and select <span class="strong strong"><strong>Run As</strong></span> → <span class="strong strong"><strong>Java Application</strong></span>.
							</p><p class="simpara">
								The output is displayed on the console tab.
							</p></li></ol></div></li></ol></div></section><section class="chapter" id="codeready-studio-import-projects-from-git-repo"><div class="titlepage"><div><div><h2 class="title">Chapter 25. Importing projects from a Git repository into Red Hat CodeReady Studio</h2></div></div></div><p>
				You can configure Red Hat CodeReady Studio to connect to a central Git asset repository. The repository stores rules, models, functions, and processes. You can either clone a remote Git repository or import a local Git repository.
			</p><section class="section" id="codeready-studio-clone-remote-git-repo-proc"><div class="titlepage"><div><div><h2 class="title">25.1. Cloning a remote Git repository</h2></div></div></div><p>
					You can clone a Git repository to use with Red Hat CodeReady Studio.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Red Hat CodeReady Studio is installed with the Red Hat Process Automation Manager plug-ins.
						</li><li class="listitem">
							You have access permission for the remote Git repository that you want to clone.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Red Hat CodeReady Studio, select the server from the <span class="strong strong"><strong>Server</strong></span> tab and click the start icon to start the server.
						</li><li class="listitem"><p class="simpara">
							Enter the following command in a terminal to start the secure shell server, if it is not running already.
						</p><pre class="screen">/sbin/service sshd start</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This command is specific to Linux and Apple Macintosh. On these platforms, if <code class="literal">sshd</code> has already been started, this command fails. If this happens, you may safely ignore this step.
							</p></div></div></li><li class="listitem">
							In Red Hat CodeReady Studio , select <span class="strong strong"><strong>File</strong></span> → <span class="strong strong"><strong>Import…​</strong></span> and navigate to the Git folder.
						</li><li class="listitem">
							Open the Git folder, select <span class="strong strong"><strong>Projects from Git</strong></span>, and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Select the repository source as <span class="strong strong"><strong>Clone URI</strong></span> and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Enter the details of the Git repository and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Select the branch you want to import and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							To define the local storage for this project, enter or select a non-empty directory, make any configuration changes, and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Import the project as a general project in the following window and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Name the project and click <span class="strong strong"><strong>Finish</strong></span>.
						</li></ol></div></section><section class="section" id="codeready-studio-import-local-git-repo-proc"><div class="titlepage"><div><div><h2 class="title">25.2. Importing a local Git repository</h2></div></div></div><p>
					You can import a local Git repository to use with Red Hat CodeReady Studio.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Red Hat CodeReady Studio is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Red Hat CodeReady Studio, select the server from the <span class="strong strong"><strong>Server</strong></span> tab and click the start icon to start the server.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>File</strong></span> → <span class="strong strong"><strong>Import</strong></span> and navigate to the Git folder.
						</li><li class="listitem">
							Open the Git folder to select <span class="strong strong"><strong>Projects from Git</strong></span> and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Existing local repository</strong></span> as the repository source and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Select the repository that is to be configured from the list of available repositories and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							In the window that opens, select <span class="strong strong"><strong>Import as general project</strong></span> and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Name the project and click <span class="strong strong"><strong>Finish</strong></span>.
						</li></ol></div></section></section><section class="chapter" id="additional_resources"><div class="titlepage"><div><div><h2 class="title">Chapter 26. Additional Resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_codeready_studio/12.17/html/getting_started_with_container_and_cloud-based_development/"><span class="emphasis"><em>Getting Started with Container and Cloud-based Development</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_codeready_studio/12.17/html/getting_started_with_codeready_studio_tools/"><span class="emphasis"><em>Getting Started with CodeReady Studio Tools</em></span></a>
					</li></ul></div></section></div><div class="part" id="assembly-integrating-amq-streams"><div class="titlepage"><div><div><h1 class="title">Part V. Integrating Red Hat Process Automation Manager with Red Hat AMQ Streams</h1></div></div></div><div class="partintro" id="idm139969146972128"><div/><p>
				As a developer, you can integrate Red Hat Process Automation Manager with Red Hat AMQ Streams or Apache Kafka. A business process can send and receive Kafka messages.
			</p><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#integration-kafka-con_integrating-amq-streams">27. Kafka messages in a business process</a></span><ul><li><span class="section"><a href="#message-receive-event-proc_integrating-amq-streams">27.1. Creating an event that receives Kafka messages</a></span></li><li><span class="section"><a href="#message-send-event-proc_integrating-amq-streams">27.2. Creating an event that sends Kafka messages</a></span></li><li><span class="section"><a href="#message-customtask-proc_integrating-amq-streams">27.3. Adding a custom task that sends Kafka messages</a></span></li></ul></li><li><span class="chapter"><a href="#kieserver-kafka-proc_integrating-amq-streams">28. Configuring a KIE Server to send and receive Kafka messages from the process</a></span></li><li><span class="chapter"><a href="#kieserver-kafka-emit-proc_integrating-amq-streams">29. Configuring a service and the KIE Server to emit Kafka messages when a transaction is committed</a></span></li><li><span class="chapter"><a href="#additional_resources_2">30. Additional Resources</a></span></li></ul></div></div><section class="chapter" id="integration-kafka-con_integrating-amq-streams"><div class="titlepage"><div><div><h2 class="title">Chapter 27. Kafka messages in a business process</h2></div></div></div><p>
				Red Hat AMQ Streams, based on Apache Kafka, is a streaming platform. It passes messages, sorted into topics, between applications in a software environment.
			</p><p>
				You can create business processes using Red Hat Process Automation Manager that send and receive Kafka messages in the following ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Create a start event or intermediate catch event of the type <span class="emphasis"><em>message</em></span> or <span class="emphasis"><em>signal</em></span>. The KIE Server automatically subsribes to the Kafka topic that is defined in the message or signal. A message triggers the event. The event can pass the content of the message to the subsequent node in the process.
					</li><li class="listitem">
						Create an end event or intermediate throw event of the type <span class="emphasis"><em>message</em></span> or <span class="emphasis"><em>signal</em></span>. When the process triggers the event, the KIE Server sends a Kafka message in the topic that is defined in the message or signal. The message contains the data that is configured in the event.
					</li><li class="listitem">
						Add the <code class="literal">KafkaPublishMessages</code> custom task to the process. This task does not require the KIE Server Kafka capability but is significantly more complicated to configure than signal or message events.
					</li><li class="listitem">
						Configure your service and the KIE Server to emit Kafka messages about every completed process, case, and task when transactions are committed.
					</li></ul></div><section class="section" id="message-receive-event-proc_integrating-amq-streams"><div class="titlepage"><div><div><h2 class="title">27.1. Creating an event that receives Kafka messages</h2></div></div></div><p>
					When designing your business process in Business Central, you can create an event that receives Kafka messages.
				</p><p>
					This event is triggered each time a message arrives in the configured topic. The message is expected to contain data that matches a predefined data object. The process engine parses the message and provides it as an output of the event.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the project that contains your business process in Business Central.
						</li><li class="listitem">
							Create a data object defining the data that the message will contain. For instructions about creating data objects, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-designing-business-processes"><span class="emphasis"><em>Designing business processes using BPMN models</em></span></a>.
						</li><li class="listitem">
							Select the business process and open the business process designer.
						</li><li class="listitem">
							Add a start event or an intermediate catch event of the type <span class="emphasis"><em>message</em></span> or <span class="emphasis"><em>signal</em></span>.
						</li><li class="listitem">
							Open the properties of the event.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Message</strong></span> or <span class="strong strong"><strong>Signal</strong></span> field, select <span class="strong strong"><strong>New</strong></span> and then enter the name of the message or signal. This name must be the same as the name of the topic from which the event is to receive Kafka messages, or else must be defined in an <code class="literal">org.kie.server.jbpm-kafka.ext.topics.*</code> system property of the KIE Server.
						</li><li class="listitem">
							Add an output data item. Select the data object that you created as its type.
						</li><li class="listitem">
							Save the business process.
						</li></ol></div></section><section class="section" id="message-send-event-proc_integrating-amq-streams"><div class="titlepage"><div><div><h2 class="title">27.2. Creating an event that sends Kafka messages</h2></div></div></div><p>
					When designing your business process in Business Central, you can create an event that sends Kafka messages.
				</p><p>
					The event can have a data object as an input data item. The process engine sends the content of a data object as a message in the configured topic.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the project that contains your business process in Business Central.
						</li><li class="listitem">
							Create a data object defining the data that the message must contain. For instructions about creating data objects, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-designing-business-processes"><span class="emphasis"><em>Designing business processes using BPMN models</em></span></a>.
						</li><li class="listitem">
							Select the business process and open the business process designer.
						</li><li class="listitem">
							Add an intermediate throw event or an end event of the type <span class="emphasis"><em>message</em></span> or <span class="emphasis"><em>signal</em></span>.
						</li><li class="listitem">
							Open the properties of the event.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Message</strong></span> or <span class="strong strong"><strong>Signal</strong></span> field, select <span class="strong strong"><strong>New</strong></span> and then enter the name of the message or signal. This name must be the same as the name of the topic to which the event is to send Kafka messages, or else must be defined in an <code class="literal">org.kie.server.jbpm-kafka.ext.topics.*</code> system property of the KIE Server.
						</li><li class="listitem">
							Add an input data item. Select the data object that you created as its type.
						</li><li class="listitem">
							Save the business process.
						</li></ol></div></section><section class="section" id="message-customtask-proc_integrating-amq-streams"><div class="titlepage"><div><div><h2 class="title">27.3. Adding a custom task that sends Kafka messages</h2></div></div></div><p>
					You can add a <code class="literal">KafkaPublishMessages</code> custom task to your process. This task sends Kafka messages. It does not use the KIE Server Kafka capability, so you can use this task in processes that do not run on a KIE Server. However, this task is more complicated to configure than other Red Hat AMQ Streams integration options.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the Business Central administrative settings menu, as the administrative user, select <span class="strong strong"><strong>Custom Tasks Administration</strong></span>.
						</li><li class="listitem">
							Ensure that <span class="strong strong"><strong>KafkaPublishMessages</strong></span> is set to <span class="strong strong"><strong>On</strong></span>.
						</li><li class="listitem">
							In Business Central, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span> and then click the space name and the project name.
						</li><li class="listitem">
							Select the <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Custom Tasks</strong></span> tab.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>KafkaPublishMessages</strong></span> line, click <span class="strong strong"><strong>Install</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Enter the following information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Bootstrap Servers</strong></span>: The host and port of the Kafka broker, for example, <code class="literal">localhost:9092</code>. You can use a comma-separated list of multiple host:port pairs.
								</li><li class="listitem">
									<span class="strong strong"><strong>Client ID</strong></span>: An identifier string to pass to the broker when making requests. Red Hat AMQ Streams uses this string for logging.
								</li><li class="listitem">
									<span class="strong strong"><strong>Key Serializer class</strong></span>: The class that provides the key serializer. Enter the standard serializer class name: <code class="literal">org.apache.kafka.common.serialization.StringSerializer</code>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Value Serializer class</strong></span>: The class that provides the value serializer. Enter the standard serializer class name: <code class="literal">org.apache.kafka.common.serialization.StringSerializer</code>.
								</li></ul></div></li><li class="listitem">
							Click the <span class="strong strong"><strong>Assets</strong></span> tab.
						</li><li class="listitem">
							Select the business process and open the business process designer.
						</li><li class="listitem">
							Add the <code class="literal">KafkaPublishMessages</code> custom task, available under <span class="strong strong"><strong>Custom Tasks</strong></span> in the BPMN modeler palette.
						</li><li class="listitem">
							In the properties of the custom task, open the data assignments.
						</li><li class="listitem">
							Assign the <span class="strong strong"><strong>Key</strong></span>, <span class="strong strong"><strong>Topic</strong></span>, and <span class="strong strong"><strong>Value</strong></span> inputs to define the message.
						</li></ol></div></section></section><section class="chapter" id="kieserver-kafka-proc_integrating-amq-streams"><div class="titlepage"><div><div><h2 class="title">Chapter 28. Configuring a KIE Server to send and receive Kafka messages from the process</h2></div></div></div><p>
				To run a process that sends or receives Kafka messages (except when using the custom task), you must use a KIE Server. You must configure this KIE Server to integrate with Red Hat AMQ Streams.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						To enable integration with Red Hat AMQ Streams, set the <code class="literal">org.kie.kafka.server.ext.disabled</code> system property of the KIE Server to <code class="literal">false</code>.
					</li><li class="listitem">
						To configure the connection to the Kafka broker, set the <code class="literal">org.kie.server.jbpm-kafka.ext.bootstrap.servers</code> system property to the host and port of the broker. The default value is <code class="literal">localhost:9092</code>. You can use a comma-separated list of multiple host:port pairs.
					</li><li class="listitem"><p class="simpara">
						Optional: Set any of the following system properties to configure sending and receiving Kafka messages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.kie.server.jbpm-kafka.ext.client.id</code>: An identifier string to pass to the broker when making requests. Red Hat AMQ Streams uses this string for logging.
							</li><li class="listitem">
								<code class="literal">org.kie.server.jbpm-kafka.ext.topics.*</code>: Mapping of message or signal names to topic names. For example, if you want to send or receive a message in the <code class="literal">ExampleTopic</code> topic when <code class="literal">ExampleName</code> is the name of the message or signal, set the <code class="literal">org.kie.server.jbpm-kafka.ext.topics.ExampleName</code> system property to <code class="literal">ExampleTopic</code>. You can set any number of such system properties. If a message or signal name is not mapped using a system property, the process engine uses this name as the topic name.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Set any of the following system properties to configure receiving Kafka messages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.kie.server.jbpm-kafka.ext.allow.auto.create.topics</code>: Allow automatic topic creation. Enabled by default.
							</li><li class="listitem">
								<code class="literal">org.kie.server.jbpm-kafka.ext.group.id</code>: A unique string that identifies the group to which this Kafka message consumer belongs. The default value is <code class="literal">jbpm-consumer</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Set any of the following system properties to configure sending Kafka messages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.kie.server.jbpm-kafka.ext.acks</code>: The number of acknowledgements that the Kafka leader must receive before marking the request as complete. The default value is <code class="literal">1</code>, which means the leader writes the record to its local log and then responds to the process engine, without waiting for full acknowledgement from all followers.
							</li><li class="listitem">
								<code class="literal">org.kie.server.jbpm-kafka.ext.max.block.ms</code>: The number of milliseconds for which the publish method blocks. After this time, the process engine can resume execution of the business process. The default value is <code class="literal">2000</code> (2 seconds).
							</li></ul></div></li></ol></div></section><section class="chapter" id="kieserver-kafka-emit-proc_integrating-amq-streams"><div class="titlepage"><div><div><h2 class="title">Chapter 29. Configuring a service and the KIE Server to emit Kafka messages when a transaction is committed</h2></div></div></div><p>
				You can configure the KIE Server to emit Kafka messages about every event when a process, case, or task is completed. The KIE Server sends the messages when it commits transactions.
			</p><p>
				You can use this functionality with any business process or case. You do not need to change anything in the process design.
			</p><p>
				This configuration is also available if you run your process service using SpringBoot.
			</p><p>
				By default, the KIE Server publishes the messages in the following topics:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">jbpm-processes-events</code> for messages about completed processes
					</li><li class="listitem">
						<code class="literal">jbpm-tasks-events</code> for messages about completed tasks
					</li><li class="listitem">
						<code class="literal">jbpm-cases-events</code> for messages about completed cases
					</li></ul></div><p>
				You can configure the topic names.
			</p><p>
				The published messages comply with the <a class="link" href="https://github.com/cloudevents/spec">CloudEvents specification</a> version 1.0. Each message contains the following fields:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">id</code>: The unique identifier of the event
					</li><li class="listitem">
						<code class="literal">type</code>: The type of the event (process, task, or case)
					</li><li class="listitem">
						<code class="literal">source</code>: The event source as a URI
					</li><li class="listitem">
						<code class="literal">time</code>: The timestamp of the event, by default in the <a class="link" href="https://tools.ietf.org/html/rfc3339">RFC3339</a> format
					</li><li class="listitem">
						<code class="literal">data</code>: Information about the process, case, or task, presented in a JSON format
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To enable emitting Kafka messages, complete one of the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								If you deployed the KIE Server on Red Hat JBoss EAP or another application server:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Download the <code class="literal">rhpam-7.10.0-maven-repository.zip</code> product deliverable file from the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhpam&amp;productChanged=yes">Software Downloads</a> page of the Red Hat Customer Portal.
									</li><li class="listitem">
										Extract the contents of the file.
									</li><li class="listitem">
										Copy the <code class="literal">maven-repository/org/jbpm/jbpm-event-emitters-kafka/7.48.0.Final-redhat-00002/jbpm-event-emitters-kafka-7.48.0.Final-redhat-00002.jar</code> file into the <code class="literal">deployments/kie-server.war/WEB-INF/lib</code> subdirectory of the application server.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you deployed the application using SpringBoot, add the following lines to the <code class="literal">&lt;dependencies&gt;</code> list in the <code class="literal">pom.xml</code> file of your service:
							</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
  &lt;artifactId&gt;jbpm-event-emitters-kafka&lt;/artifactId&gt;
  &lt;version&gt;${version.org.kie}&lt;/version&gt;
&lt;/dependency&gt;</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure any of the following system properties for the KIE Server as necessary:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.kie.jbpm.event.emitters.kafka.boopstrap.servers</code>: The host and port of the Kafka broker. The default value is <code class="literal">localhost:9092</code>. You can use a comma-separated list of multiple host:port pairs.
							</li><li class="listitem">
								<code class="literal">org.kie.jbpm.event.emitters.kafka.date_format</code>: The timestamp format for the <code class="literal">time</code> field of the messages. The default value is <code class="literal">yyyy-MM-dd’T’HH:mm:ss.SSSZ</code> .
							</li><li class="listitem">
								<code class="literal">org.kie.jbpm.event.emitters.kafka.topic.processes</code>: The topic name for process event messages. The default value is <code class="literal">jbpm-processes-events</code>.
							</li><li class="listitem">
								<code class="literal">org.kie.jbpm.event.emitters.kafka.topic.cases</code>: The topic name for process event messages. The default value is <code class="literal">jbpm-cases-events</code>.
							</li><li class="listitem">
								<code class="literal">org.kie.jbpm.event.emitters.kafka.topic.tasks</code>: The topic name for process event messages. The default value is <code class="literal">jbpm-processes-tasks</code>.
							</li><li class="listitem">
								<code class="literal">org.kie.jbpm.event.emitters.kafka.client.id</code>: An identifier string to pass to the server when making requests. The server uses this string for logging.
							</li></ul></div></li></ol></div></section><section class="chapter" id="additional_resources_2"><div class="titlepage"><div><div><h2 class="title">Chapter 30. Additional Resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.7/html/using_amq_streams_on_openshift/"><span class="emphasis"><em>Using AMQ Streams on OpenShift</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.7/html/using_amq_streams_on_rhel/"><span class="emphasis"><em>Using AMQ Streams on RHEL</em></span></a>
					</li></ul></div></section></div><section class="appendix" id="versioning-information"><div class="titlepage"><div><div><h1 class="title">Appendix A. Versioning information</h1></div></div></div><p>
			Documentation last updated on Monday, January 18, 2021.
		</p></section><section class="appendix" id="author-group"><div class="titlepage"><div><div><h1 class="title">Appendix B. Contact information</h1></div></div></div><p>
			Red Hat Process Automation Manager documentation team: <a class="link" href="mailto:brms-docs@redhat.com">brms-docs@redhat.com</a>
		</p></section><div><div xml:lang="en-US" class="legalnotice" id="idm139969146247632"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2021 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>