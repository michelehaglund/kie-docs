<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Developing process services in Red Hat Process Automation Manager</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.6"/><meta name="description" content="This document describes how to develop process services and case definitions with Red Hat Process Automation Manager using Business Process Model and Notation (BPMN) 2.0 models. This document also describes concepts and options for process and case management."/><link rel="next" href="#idm140093641542848" title="Preface"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm140093654104048"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Process Automation Manager</span> <span class="productnumber">7.10</span></div><div><h1 class="title">Developing process services in Red Hat Process Automation Manager</h1></div><div><h2 class="subtitle"/></div><div><a href="#idm140093644975968">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document describes how to develop process services and case definitions with Red Hat Process Automation Manager using Business Process Model and Notation (BPMN) 2.0 models. This document also describes concepts and options for process and case management.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="preface"><a href="#idm140093641542848">Preface</a></span></li><li><span class="preface"><a href="#snip-conscious-language_developing-process-services">Making open source more inclusive</a></span></li><li><span class="part"><a href="#assembly-designing-business-processes">I. Designing business processes using BPMN models</a></span><ul><li><span class="chapter"><a href="#business_process">1. Business processes</a></span></li><li><span class="chapter"><a href="#con-BPMN-DMN-modelers_business-processes">2. Red Hat Process Automation Manager BPMN and DMN modelers</a></span><ul><li><span class="section"><a href="#proc-vscode-extension_business-processes">2.1. Installing the Red Hat Process Automation Manager VSCode extension bundle</a></span></li><li><span class="section"><a href="#proc-standalone-editors_business-processes">2.2. Configuring the Red Hat Process Automation Manager standalone editors</a></span></li></ul></li><li><span class="chapter"><a href="#proc-dmn-bpmn-maven-create_business-processes">3. Creating and executing DMN and BPMN models using Maven</a></span></li><li><span class="chapter"><a href="#bpmn-con_business-processes">4. Business Process Modeling and Notation Version 2.0</a></span><ul><li><span class="section"><a href="#bpmn-support_business-processes">4.1. Red Hat Process Automation Manager support for BPMN2</a></span></li><li><span class="section"><a href="#bpmn-events-con_business-processes">4.2. BPMN2 events in process designer</a></span><ul><li><span class="section"><a href="#bpmn-start-events-ref_business-processes">4.2.1. Start events</a></span></li><li><span class="section"><a href="#bpmn-intermediate-events-ref_business-processes">4.2.2. Intermediate events</a></span></li><li><span class="section"><a href="#bpmn-end-events-ref_business-processes">4.2.3. End events</a></span></li></ul></li><li><span class="section"><a href="#bpmn-tasks-overview-con_business-processes">4.3. BPMN2 tasks in process designer</a></span></li><li><span class="section"><a href="#con_custom-tasks-overview">4.4. BPMN2 custom tasks in process designer</a></span></li><li><span class="section"><a href="#bpmn-subprocesses-ref_business-processes">4.5. BPMN2 subprocesses in process designer</a></span></li><li><span class="section"><a href="#bpmn-gateways_business-processes">4.6. BPMN2 gateways in process designer</a></span></li><li><span class="section"><a href="#bpmn-connecting-ref_business-processes">4.7. BPMN2 connecting objects in process designer</a></span></li><li><span class="section"><a href="#bpmn-lanes-proc_business-processes">4.8. BPMN2 swimlanes in process designer</a></span></li><li><span class="section"><a href="#bpmn-artifacts_business-processes">4.9. BPMN2 artifacts in process designer</a></span><ul><li><span class="section"><a href="#proc-create-process-data-object_business-processes">4.9.1. Creating data object</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#design-bus-proc">5. Creating a business process in Business Central</a></span><ul><li><span class="section"><a href="#create-business-rules-task-proc">5.1. Creating business rules tasks</a></span></li><li><span class="section"><a href="#create-script-task-proc">5.2. Creating script tasks</a></span></li><li><span class="section"><a href="#create-service-task-proc">5.3. Creating service tasks</a></span></li><li><span class="section"><a href="#create-user-task-proc">5.4. Creating user tasks</a></span></li><li><span class="section"><a href="#bpmn-user-task-lifecycle-ref_business-processes">5.5. BPMN2 user task life cycle in process designer</a></span></li><li><span class="section"><a href="#bpmn-user-task-permission-matrix-ref_business-processes">5.6. BPMN2 task permission matrix in process designer</a></span></li><li><span class="section"><a href="#copy-process-proc">5.7. Making a copy of a business process</a></span></li><li><span class="section"><a href="#resize-elements">5.8. Resizing elements and using the zoom function to view business processes</a></span></li><li><span class="section"><a href="#generate-process-docs-proc_business-processes">5.9. Generating process documentation in Business Central</a></span></li></ul></li><li><span class="chapter"><a href="#variables-con_business-processes">6. Variables</a></span><ul><li><span class="section"><a href="#con-variable-tags_business-processes">6.1. Variable tags</a></span></li><li><span class="section"><a href="#proc-define-global-variables_business-processes">6.2. Defining global variables</a></span></li><li><span class="section"><a href="#proc-define-process-variables_business-processes">6.3. Defining process variables</a></span></li><li><span class="section"><a href="#proc-define-local-variables_business-processes">6.4. Defining local variables</a></span></li></ul></li><li><span class="chapter"><a href="#con-action-scripts_business-processes">7. Action scripts</a></span></li><li><span class="chapter"><a href="#con-timer_business-processes">8. Timers</a></span><ul><li><span class="section"><a href="#configuration_of_timers_with_delay_and_period">8.1. Configuration of timers with delay and period</a></span></li><li><span class="section"><a href="#configuration_of_timers_with_iso_8601_date_format">8.2. Configuration of timers with ISO-8601 date format</a></span></li><li><span class="section"><a href="#configuration_of_timers_with_process_variables">8.3. Configuration of timers with process variables</a></span></li><li><span class="section"><a href="#update_timers_within_running_process_instance">8.4. Update timers within running process instance</a></span></li></ul></li><li><span class="chapter"><a href="#constraints-con_business-processes">9. Constraints</a></span></li><li><span class="chapter"><a href="#deploy-bus-proc">10. Deploying a business process in Business Central</a></span></li><li><span class="chapter"><a href="#execute-bus-proc">11. Executing a business process in Business Central</a></span></li><li><span class="chapter"><a href="#proc-test-bus-process_business-processes">12. Testing a business process</a></span><ul><li><span class="section"><a href="#proc-test-external-services_business-processes">12.1. Testing integration with external services</a></span></li></ul></li><li><span class="chapter"><a href="#manage-log-file-proc">13. Managing log files</a></span><ul><li><span class="section"><a href="#setup-auto-cleanup-proc">13.1. Setting up automatic cleanup job</a></span></li><li><span class="section"><a href="#manual-cleanup-con">13.2. Manual cleanup</a></span></li><li><span class="section"><a href="#clean-log-proc">13.3. Removing logs from the database</a></span></li></ul></li><li><span class="chapter"><a href="#process-definitions-and-instances-con-business-processes">14. Process definitions and process instances in Business Central</a></span><ul><li><span class="section"><a href="#starting-process-instance-from-definition-proc_business-processes">14.1. Starting a process instance from the process definitions page</a></span></li><li><span class="section"><a href="#starting-process-instance-from-instances-proc_business-processes">14.2. Starting a process instance from the process instances page</a></span></li><li><span class="section"><a href="#define-proc-xml">14.3. Process definitions in XML</a></span></li></ul></li><li><span class="chapter"><a href="#business-process-forms_business-processes">15. Forms in Business Central</a></span><ul><li><span class="section"><a href="#form-modeler-con">15.1. Form Modeler</a></span></li><li><span class="section"><a href="#create-process-task-forms-proc">15.2. Generating process and task forms in Business Central</a></span></li><li><span class="section"><a href="#create-forms">15.3. Manually creating forms in Business Central</a></span></li><li><span class="section"><a href="#doc-attachments-con">15.4. Document attachments in a form or process</a></span><ul><li><span class="section"><a href="#set-doc-marshalling">15.4.1. Setting the document marshalling strategy</a></span></li><li><span class="section"><a href="#create-doc-var">15.4.2. Creating a document variable in a business process</a></span></li><li><span class="section"><a href="#map-task-vars">15.4.3. Mapping task inputs and outputs to the document variable</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#advanced_process_concepts_and_tasks">16. Advanced process concepts and tasks</a></span><ul><li><span class="section"><a href="#dmn-execution-business-process">16.1. Invoking a Decision Model and Notation (DMN) service in a business process</a></span></li></ul></li><li><span class="chapter"><a href="#additional_resources">17. Additional resources</a></span></li></ul></li><li><span class="part"><a href="#assembly-interacting-with-processes">II. Interacting with processes and tasks</a></span><ul><li><span class="chapter"><a href="#interacting_with_processes_overview_con">18. Business processes in Business Central</a></span><ul><li><span class="section"><a href="#interacting-with-processes-user-definition-con">18.1. Knowledge worker user</a></span></li></ul></li><li><span class="chapter"><a href="#interacting-with-processes-knowledge-worker-tasks-con">19. Knowledge worker tasks in Business Central</a></span><ul><li><span class="section"><a href="#interacting-with-processes-starting-tasks-proc">19.1. Starting a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-stopping-tasks-proc">19.2. Stopping a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-delegating-tasks-proc">19.3. Delegating a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-claiming-tasks-proc">19.4. Claiming a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-releasing-tasks-proc">19.5. Releasing a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-bulk-actions-on-tasks-con">19.6. Bulk actions on tasks</a></span><ul><li><span class="section"><a href="#interacting-with-processes-claiming-tasks-in-bulk-proc">19.6.1. Claiming tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-releasing-tasks-in-bulk-proc">19.6.2. Releasing tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-resuming-tasks-in-bulk-proc">19.6.3. Resuming tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-suspending-tasks-in-bulk-proc">19.6.4. Suspending tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-reassigning-tasks-in-bulk-proc">19.6.5. Reassigning tasks in bulk</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#interacting-with-processes-filter-tasks-con">20. Task filtering in Business Central</a></span><ul><li><span class="section"><a href="#task-inbox-columns-proc">20.1. Managing task list columns</a></span></li><li><span class="section"><a href="#interacting-with-processes-tasks-basic-filters-proc">20.2. Filtering tasks using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-tasks-advanced-filters-proc">20.3. Filtering tasks using advanced filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-tasks-default-filters-proc">20.4. Managing tasks using default filter</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-task-variables-basic-filters-proc">20.5. Viewing task variables using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-task-variables-advanced-filters-proc">20.6. Viewing task variables using advanced filters</a></span></li></ul></li><li><span class="chapter"><a href="#interacting-with-processes-process-instances-filters-con">21. Process instance filtering in Business Central</a></span><ul><li><span class="section"><a href="#interacting-with-processes-process-instances-basic-filters-proc">21.1. Filtering process instances using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-process-instances-advanced-filters-proc">21.2. Filtering process instances using advanced filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-process-instances-default-filters-proc">21.3. Managing process instances using default filter</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-process-instances-variables-basic-filters-proc">21.4. Viewing process instance variables using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-process-instances-variables-advanced-filters-proc">21.5. Viewing process instance variables using advanced filters</a></span></li></ul></li><li><span class="chapter"><a href="#configuring-emails-in-task-notification-proc">22. Configuring emails in task notification</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-setting-date-priority-proc">23. Setting the due date and priority of a task</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-viewing-adding-comments-proc">24. Viewing and adding comments to a task</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-viewing-task-history-log-proc">25. Viewing the history log of a task</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-viewing-process-instance-history-log-proc_interacting-with-processes">26. Viewing the history log of a process instance</a></span></li></ul></li><li><span class="part"><a href="#assembly-managing-and-monitoring-business-processes">III. Managing and monitoring business processes in Business Central</a></span><ul><li><span class="chapter"><a href="#monitor-project-managing-and-monitoring-processes">27. Process monitoring</a></span></li><li><span class="chapter"><a href="#process-definitions-and-instances-con-managing-and-monitoring-processes">28. Process definitions and process instances in Business Central</a></span><ul><li><span class="section"><a href="#starting-process-instance-from-definition-proc_managing-and-monitoring-processes">28.1. Starting a process instance from the process definitions page</a></span></li><li><span class="section"><a href="#starting-process-instance-from-instances-proc_managing-and-monitoring-processes">28.2. Starting a process instance from the process instances page</a></span></li><li><span class="section"><a href="#generate-process-docs-proc_managing-and-monitoring-processes">28.3. Generating process documentation in Business Central</a></span></li></ul></li><li><span class="chapter"><a href="#process-instance-details-con-managing-and-monitoring-processes">29. Process instance management</a></span><ul><li><span class="section"><a href="#sect-process-instance-filtering-managing-and-monitoring-processes">29.1. Process instance filtering</a></span></li><li><span class="section"><a href="#creating-creating-new-process-instance-list-proc-managing-and-monitoring-processes">29.2. Creating a custom process instance list</a></span></li><li><span class="section"><a href="#process-instances-default-filters-proc">29.3. Managing process instances using a default filter</a></span></li><li><span class="section"><a href="#viewing-process-instances-variables-basic-filters-in-bc-proc">29.4. Viewing process instance variables using basic filters</a></span></li><li><span class="section"><a href="#viewing-process-instances-variables-advanced-filters-in-bc-proc">29.5. Viewing process instance variables using advanced filters</a></span></li><li><span class="section"><a href="#aborting-a-process-instance-from-central-proc-managing-and-monitoring-processes">29.6. Aborting a process instance using Business Central</a></span></li><li><span class="section"><a href="#signalling-process-instances-from-central-proc-managing-and-monitoring-processes">29.7. Signaling process instances from Business Central</a></span></li><li><span class="section"><a href="#asynchronous-signal-events-con">29.8. Asynchronous signal events</a></span><ul><li><span class="section"><a href="#asynchronous-signal-intermediate-events-proc">29.8.1. Configuring asynchronous signals for intermediate events</a></span></li><li><span class="section"><a href="#asynchronous-signal-end-events-proc">29.8.2. Configuring asynchronous signals for end events</a></span></li></ul></li><li><span class="section"><a href="#process-instance-admin-con">29.9. Process instance operations</a></span></li></ul></li><li><span class="chapter"><a href="#manage-tasks-con-managing-and-monitoring-processes">30. Task management</a></span><ul><li><span class="section"><a href="#sect-task-filtering-managing-and-monitoring-processes">30.1. Task filtering</a></span></li><li><span class="section"><a href="#creating_custom_tasks_filters-managing-and-monitoring-processes">30.2. Creating custom task filters</a></span></li><li><span class="section"><a href="#tasks-default-filters-proc">30.3. Managing tasks using a default filter</a></span></li><li><span class="section"><a href="#viewing-task-variables-basic-filters-in-bc-proc">30.4. Viewing task variables using basic filters</a></span></li><li><span class="section"><a href="#viewing-task-variables-advanced-filters-in-bc-proc">30.5. Viewing task variables using advanced filters</a></span></li><li><span class="section"><a href="#manage-service-tasks-proc_managing-and-monitoring-processes">30.6. Managing custom tasks in Business Central</a></span></li><li><span class="section"><a href="#user-task-admin-con">30.7. User task administration</a></span></li><li><span class="section"><a href="#managing-business-processes-bulk-actions-on-tasks-con">30.8. Bulk actions on tasks</a></span><ul><li><span class="section"><a href="#managing-business-processes-claiming-tasks-in-bulk-proc">30.8.1. Claiming tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-releasing-tasks-in-bulk-proc">30.8.2. Releasing tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-resuming-tasks-in-bulk-proc">30.8.3. Resuming tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-suspending-tasks-in-bulk-proc">30.8.4. Suspending tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-reassigning-tasks-in-bulk-proc">30.8.5. Reassigning tasks in bulk</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#execution-error-management-con_managing-and-monitoring-processes">31. Execution error management</a></span><ul><li><span class="section"><a href="#view-process-instance-errors-proc-managing-and-monitoring-processes">31.1. Viewing process execution errors in Business Central</a></span></li><li><span class="section"><a href="#manage-execution-errors-proc-managing-and-monitoring-processes">31.2. Managing execution errors</a></span></li><li><span class="section"><a href="#filtering-errors-proc-managing-and-monitoring-processes">31.3. Error filtering</a></span></li></ul></li><li><span class="chapter"><a href="#process-instance-migration-con">32. Process instance migration</a></span><ul><li><span class="section"><a href="#process-instance-migration-installing-service-proc">32.1. Installing the process instance migration service</a></span></li><li><span class="section"><a href="#process-instance-migration-creating-plan-proc">32.2. Creating a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-editing-plan-proc">32.3. Editing a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-exporting-plan-proc">32.4. Exporting a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-executing-plan-proc">32.5. Executing a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-deleting-plan-proc">32.6. Deleting a migration plan</a></span></li></ul></li></ul></li><li><span class="part"><a href="#assembly-designing-and-building-cases">IV. Designing and building cases for case management</a></span><ul><li><span class="chapter"><a href="#case-management-overview-con_case-management-design">33. Case management</a></span></li><li><span class="chapter"><a href="#case-management-cmmn-con-case-management-design">34. Case Management Model and Notation</a></span></li><li><span class="chapter"><a href="#case-management-case-file-con-case-management-design">35. Case files</a></span><ul><li><span class="section"><a href="#case-management-case-key-prefix-proc-case-management-design">35.1. Configuring case ID prefixes</a></span></li><li><span class="section"><a href="#case-management-case-key-expression-proc-case-management-design">35.2. Configuring case ID expressions</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-subcases-concase-management-design">36. Subcases</a></span></li><li><span class="chapter"><a href="#case-management-adhoc-con-case-management-design">37. Ad hoc and dynamic tasks</a></span></li><li><span class="chapter"><a href="#case-management-adding-dynamic-tasks-using-API-proc">38. Adding dynamic tasks and processes to a case using the KIE Server REST API</a></span><ul><li><span class="section"><a href="#case-management-dynamic-user-task-API-proc">38.1. Creating a dynamic user task using the KIE Server REST API</a></span></li><li><span class="section"><a href="#case-management-dynamic-service-task-API-proc">38.2. Creating a dynamic service task using the KIE Server REST API</a></span></li><li><span class="section"><a href="#case-management-dynamic-subprocess-API-proc">38.3. Creating a dynamic subprocess using the KIE Server REST API</a></span></li></ul></li><li><span class="chapter"><a href="#comments">39. Comments</a></span></li><li><span class="chapter"><a href="#case-management-roles-con-case-management-design">40. Case roles</a></span><ul><li><span class="section"><a href="#case-management-creating-roles-proc-case-management-design">40.1. Creating case roles</a></span></li><li><span class="section"><a href="#case-management-role-authorization-proc-case-management-design">40.2. Role authorization</a></span></li><li><span class="section"><a href="#case-management-assign-task-to-role-proc-case-management-design">40.3. Assigning a task to a role</a></span></li><li><span class="section"><a href="#case-management-modifying-roles-during-runtime-proc-case-management-design">40.4. Modifying case role assignments during run time using Showcase</a></span></li><li><span class="section"><a href="#case-management-modifying-roles-during-runtime-API-proc-case-management-design">40.5. Modifying case role assignments during run time using REST API</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-stages-con-case-management-design">41. Stages</a></span><ul><li><span class="section"><a href="#case-management-defining-a-stage-proc-case-management-design">41.1. Defining a stage</a></span></li><li><span class="section"><a href="#case-management-stage-activation-and-completion-conditions-proc">41.2. Configuring stage activation and completion conditions</a></span></li><li><span class="section"><a href="#case-management-dynamic-tasks-during-stages-proc">41.3. Adding a dynamic task to a stage</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-milestones-con">42. Milestones</a></span><ul><li><span class="section"><a href="#case-management-milestone-triggering-case-management-design">42.1. Configuring and triggering milestones</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-variable-tags-con">43. Variable tags</a></span></li><li><span class="chapter"><a href="#case-management-case-listener-con">44. Case event listener</a></span></li><li><span class="chapter"><a href="#case-management-rules-con">45. Rules in case management</a></span><ul><li><span class="section"><a href="#case-management-using-rules-proc">45.1. Using rules to drive cases</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-security-con-case-management-design">46. Case management security</a></span><ul><li><span class="section"><a href="#case-management-security-configuration-proc-case-management-design">46.1. Configuring security for case management</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-closing-cases-ref">47. Closing cases</a></span><ul><li><span class="section"><a href="#case-management-close-case-using-API-proc-case-management-design">47.1. Closing a case using the KIE Server REST API</a></span></li><li><span class="section"><a href="#case-management-close-case-proc-case-management-design">47.2. Closing a case in the Showcase application</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-cancel-or-destroy-case-proc-case-management-design">48. Canceling or destroying a case</a></span><ul><li><span class="section"><a href="#case-management-clean-case-log-con">48.1. Case log removal from the database</a></span></li></ul></li><li><span class="chapter"><a href="#additional_resources_2">49. Additional resources</a></span></li></ul></li><li><span class="part"><a href="#assembly-showcase-application">V. Using the Showcase application for case management</a></span><ul><li><span class="chapter"><a href="#case-management-overview-con_case-management-showcase">50. Case management</a></span></li><li><span class="chapter"><a href="#case-management-showcase-application-con-case-management-showcase">51. Case management Showcase application</a></span></li><li><span class="chapter"><a href="#case-management-install-and-login-to-showcase-proc-case-management-showcase">52. Installing and logging in to the Showcase application</a></span></li><li><span class="chapter"><a href="#case-management-roles-con-case-management-showcase">53. Case roles</a></span></li><li><span class="chapter"><a href="#case-management-dynamic-tasks-proc">54. Starting dynamic tasks and processes</a></span></li><li><span class="chapter"><a href="#case-management-starting-itorders-in-showcase-proc-case-management-showcase">55. Starting an IT Orders case in the Showcase application</a></span></li><li><span class="chapter"><a href="#case-management-showcase-completing-itorders-proc">56. Completing the <span class="strong strong"><strong>IT_Orders</strong></span> case using Showcase and Business Central</a></span></li><li><span class="chapter"><a href="#additional_resources_3">57. Additional resources</a></span></li></ul></li><li><span class="part"><a href="#assembly-custom-tasks-and-work-item-handlers">VI. Custom tasks and work item handlers in Business Central</a></span><ul><li><span class="chapter"><a href="#manage-service-tasks-proc_custom-tasks">58. Managing custom tasks in Business Central</a></span></li><li><span class="chapter"><a href="#custom-tasks-creating-work-item-handler-projects-proc-custom-tasks">59. Creating work item handler projects</a></span></li><li><span class="chapter"><a href="#custom-tasks-work-item-handler-project-customization-con-custom-tasks">60. Work item handler project customization</a></span></li><li><span class="chapter"><a href="#custom-tasks-work-item-definitions-con-custom-tasks">61. Work item definitions</a></span><ul><li><span class="section"><a href="#wid_annotation">61.1. @Wid Annotation</a></span></li><li><span class="section"><a href="#text_file">61.2. Text File</a></span></li></ul></li><li><span class="chapter"><a href="#custom-tasks-deploying-custom-tasks-proc-custom-tasks">62. Deploying custom tasks</a></span><ul><li><span class="section"><a href="#using_a_business_central_custom_task_repository">62.1. Using a Business Central custom task repository</a></span></li><li><span class="section"><a href="#uploading_jar_artifact_to_business_central">62.2. Uploading JAR Artifact to Business Central</a></span></li><li><span class="section"><a href="#manually_copying_work_item_definitions_to_business_central_maven_repository">62.3. Manually copying work item definitions to Business Central Maven repository</a></span></li></ul></li><li><span class="chapter"><a href="#registering-custom-tasks-proc-custom-tasks">63. Registering custom tasks</a></span><ul><li><span class="section"><a href="#registering_custom_tasks_using_the_deployment_descriptor_inside_business_central">63.1. Registering custom tasks using the deployment descriptor inside Business Central</a></span></li><li><span class="section"><a href="#registering_custom_tasks_using_the_deployment_descriptor_outside_business_central">63.2. Registering custom tasks using the deployment descriptor outside Business Central</a></span></li></ul></li><li><span class="chapter"><a href="#custom-tasks-placing-custom-tasks-proc-custom-tasks">64. Placing custom tasks</a></span></li></ul></li><li><span class="part"><a href="#assembly-process-engine">VII. Process engine in Red Hat Process Automation Manager</a></span><ul><li><span class="chapter"><a href="#processengine-overview-con">65. Process engine in Red Hat Process Automation Manager</a></span></li><li><span class="chapter"><a href="#processengine-core-con_process-engine">66. Core engine API for the process engine</a></span><ul><li><span class="section"><a href="#kie-base-session-con_process-engine">66.1. KIE base and KIE session</a></span><ul><li><span class="section"><a href="#kiebase-con-process-engine">66.1.1. KIE base</a></span></li><li><span class="section"><a href="#kiesession-con-process-engine">66.1.2. KIE session</a></span></li><li><span class="section"><a href="#processruntime-con-process-engine">66.1.3. ProcessRuntime interface</a></span></li><li><span class="section"><a href="#correlation-keys-con_process-engine">66.1.4. Correlation Keys</a></span></li></ul></li><li><span class="section"><a href="#runtime-manager-con_process-engine">66.2. Runtime manager</a></span><ul><li><span class="section"><a href="#runtime-manager-strategies-con_process-engine">66.2.1. Runtime manager strategies</a></span></li><li><span class="section"><a href="#runtime-manager-usage-con_process-engine">66.2.2. Typical usage scenario for the runtime manager</a></span></li><li><span class="section"><a href="#runtime-environment-con_process-engine">66.2.3. Runtime environment configuration object</a></span></li><li><span class="section"><a href="#runtime-environment-builder-con_process-engine">66.2.4. Runtime environment builder</a></span></li><li><span class="section"><a href="#registering-handlers-con_process-engine">66.2.5. Registration of handlers and listeners for runtime engines</a></span></li></ul></li><li><span class="section"><a href="#services-con_process-engine">66.3. Services in the process engine</a></span><ul><li><span class="section"><a href="#services-modules-ref_process-engine">66.3.1. Modules for process engine services</a></span></li><li><span class="section"><a href="#service-deployment-con_process-engine">66.3.2. Deployment service</a></span></li><li><span class="section"><a href="#service-definition-con_process-engine">66.3.3. Definition service</a></span></li><li><span class="section"><a href="#service-process-con_process-engine">66.3.4. Process service</a></span></li><li><span class="section"><a href="#service-quartz-con_process-engine">66.3.5. Quartz-based timer service</a></span></li><li><span class="section"><a href="#service-query-con_process-engine">66.3.6. Query service</a></span></li><li><span class="section"><a href="#service-advanceruntimedata-con_process-engine">66.3.7. Advanced query service</a></span></li><li><span class="section"><a href="#service-migration-con_process-engine">66.3.8. Process instance migration service</a></span></li><li><span class="section"><a href="#deployment-versions-con_process-engine">66.3.9. Deployments and different process versions</a></span></li><li><span class="section"><a href="#deployment-synchronization-con_process-engine">66.3.10. Deployment synchronization</a></span></li></ul></li><li><span class="section"><a href="#threads-process-con_process-engine">66.4. Threads in the process engine</a></span></li><li><span class="section"><a href="#event-listeners-con_process-engine">66.5. Event Listeners in the process engine</a></span><ul><li><span class="section"><a href="#runtime-logger-listener-con_process-engine">66.5.1. <code class="literal">KieRuntimeLogger</code> event listener</a></span></li></ul></li><li><span class="section"><a href="#process-engine-configuration-ref_process-engine">66.6. Process engine configuration</a></span></li></ul></li><li><span class="chapter"><a href="#persistence-con_process-engine">67. Persistence and transactions in the process engine</a></span><ul><li><span class="section"><a href="#persistence-processstate-con_process-engine">67.1. Persistence of process runtime states</a></span><ul><li><span class="section"><a href="#safepoints-con_process-engine">67.1.1. Safe points for persistence</a></span></li></ul></li><li><span class="section"><a href="#auditlog-con_process-engine">67.2. The persistent audit log</a></span><ul><li><span class="section"><a href="#auditlog-datamodel-ref_process-engine">67.2.1. The process engine audit log data model</a></span></li><li><span class="section"><a href="#log-to-database-con_process-engine">67.2.2. Configuration for storing the process events log in a database</a></span></li><li><span class="section"><a href="#log-to-jms-con_process-engine">67.2.3. Configuration for sending the process events log to a JMS queue</a></span></li><li><span class="section"><a href="#variables-auditing-con_process-engine">67.2.4. Auditing of variables</a></span></li></ul></li><li><span class="section"><a href="#transactions-con_process-engine">67.3. Transactions in the process engine</a></span><ul><li><span class="section"><a href="#transaction-register-con_process-engine">67.3.1. Registration of a transaction manager</a></span></li><li><span class="section"><a href="#transaction-cmt-proc_process-engine">67.3.2. Configuring container-managed transactions</a></span></li></ul></li><li><span class="section"><a href="#persistence-configuration-con_process-engine">67.4. Configuration of persistence in the process engine</a></span><ul><li><span class="section"><a href="#persistence-configuration-file-con_process-engine">67.4.1. Configuration in the <code class="literal">persistence.xml</code> file</a></span></li><li><span class="section"><a href="#persistence-datasources-con_process-engine">67.4.2. Configuration of data sources for process engine persistence</a></span></li><li><span class="section"><a href="#persistence-dependencies-ref_process-engine">67.4.3. Dependencies for persistence</a></span></li><li><span class="section"><a href="#persistence-kiesession-proc_process-engine">67.4.4. Creating a KIE session with persistence</a></span></li><li><span class="section"><a href="#persistence-runtimemanager-con_process-engine">67.4.5. Persistence in the runtime manager</a></span></li></ul></li><li><span class="section"><a href="#process-variables-persist-proc_process-engine">67.5. Persisting process variables in a separate database schema in Red Hat Process Automation Manager</a></span></li></ul></li><li><span class="chapter"><a href="#integration-java-con_process-engine">68. Integration with Java frameworks</a></span><ul><li><span class="section"><a href="#integration-maven-con_process-engine">68.1. Integration with Apache Maven</a></span><ul><li><span class="section"><a href="#integration-maven-kjar-con_process-engine">68.1.1. Maven artifacts as deployment units</a></span></li><li><span class="section"><a href="#integration-maven-dependency-con_process-engine">68.1.2. Dependency management with Maven</a></span></li></ul></li><li><span class="section"><a href="#integration-cdi-con_process-engine">68.2. Integration with CDI</a></span><ul><li><span class="section"><a href="#cdi-deployment-service-con_process-engine">68.2.1. Deployment service for CDI</a></span></li><li><span class="section"><a href="#cdi-form-provider-service-con_process-engine">68.2.2. Form provider service for CDI</a></span></li><li><span class="section"><a href="#cdi-runtime-data-service-con_process-engine">68.2.3. Runtime data service for CDI</a></span></li><li><span class="section"><a href="#cdi-definition-service-con_process-engine">68.2.4. Definition service for CDI</a></span></li><li><span class="section"><a href="#cdi-integration-configuration-con_process-engine">68.2.5. CDI integration configuration</a></span></li></ul></li><li><span class="section"><a href="#integration-spring-con_process-engine">68.3. Integration with Spring</a></span><ul><li><span class="section"><a href="#spring-runtime-manager-con_process-engine">68.3.1. Direct use of the runtime manager API in Spring</a></span></li><li><span class="section"><a href="#spring-process-services-con_process-engine">68.3.2. Process engine services with Spring</a></span></li></ul></li><li><span class="section"><a href="#integration-ejb-con_process-engine">68.4. Integration with EJB</a></span><ul><li><span class="section"><a href="#ejb-implementations-ref_process-engine">68.4.1. Implementations for EJB services</a></span></li><li><span class="section"><a href="#ejb-interfaces-local-ref_process-engine">68.4.2. Local EJB interfaces</a></span></li><li><span class="section"><a href="#ejb-interfaces-remote-ref_process-engine">68.4.3. Remote EJB interfaces</a></span></li><li><span class="section"><a href="#ejb-remote-client-con_process-engine">68.4.4. Remote EJB client</a></span></li></ul></li><li><span class="section"><a href="#integration-osgi-con_process-engine">68.5. Integration with OSGi</a></span></li></ul></li></ul></li><li><span class="appendix"><a href="#versioning-information">A. Versioning information</a></span></li><li><span class="appendix"><a href="#author-group">B. Contact information</a></span></li></ul></div><section class="preface" id="idm140093641542848"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p>
			As a developer of business processes, you can use Red Hat Process Automation Manager to develop process services and case definitions using Business Process Model and Notation (BPMN) 2.0 models. BPMN process models are graphical representations of the steps required to achieve a business goal. For more information about BPMN, see the Object Management Group (OMG) <a class="link" href="https://www.omg.org/spec/BPMN/2.0/About-BPMN">Business Process Model and Notation 2.0 specification</a>.
		</p></section><section class="preface" id="snip-conscious-language_developing-process-services"><div class="titlepage"><div><div><h1 class="title">Making open source more inclusive</h1></div></div></div><p>
			Red Hat is committed to replacing problematic language in our code, documentation, and web properties. We are beginning with these four terms: master, slave, blacklist, and whitelist. Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases. For more details, see <a class="link" href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language"><span class="emphasis"><em>our CTO Chris Wright’s message</em></span></a>.
		</p></section><div class="part" id="assembly-designing-business-processes"><div class="titlepage"><div><div><h1 class="title">Part I. Designing business processes using BPMN models</h1></div></div></div><div class="partintro" id="idm140093653329376"><div/><p>
				As a business processes developer, you can use Business Central in Red Hat Process Automation Manager or the Red Hat Process Automation Manager BPMN modeler in VSCode to design business processes to meet specific business requirements. This document describes business processes and the concepts and options for creating them using the process designer in Red Hat Process Automation Manager. This document also describes the BPMN2 elements in Red Hat Process Automation Manager. For more details about BPMN2, see the <a class="link" href="https://www.omg.org/spec/BPMN/2.0/About-BPMN">Business Process Model and Notation Version 2.0</a> specification.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat JBoss Enterprise Application Platform 7.3 is installed. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.3/html-single/installation_guide/"><span class="emphasis"><em>Red Hat JBoss Enterprise Application Platform 7.3 Installation Guide</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is installed and configured with KIE Server. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is running and you can log in to Business Central with the <code class="literal">developer</code> role. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#business_process">1. Business processes</a></span></li><li><span class="chapter"><a href="#con-BPMN-DMN-modelers_business-processes">2. Red Hat Process Automation Manager BPMN and DMN modelers</a></span><ul><li><span class="section"><a href="#proc-vscode-extension_business-processes">2.1. Installing the Red Hat Process Automation Manager VSCode extension bundle</a></span></li><li><span class="section"><a href="#proc-standalone-editors_business-processes">2.2. Configuring the Red Hat Process Automation Manager standalone editors</a></span></li></ul></li><li><span class="chapter"><a href="#proc-dmn-bpmn-maven-create_business-processes">3. Creating and executing DMN and BPMN models using Maven</a></span></li><li><span class="chapter"><a href="#bpmn-con_business-processes">4. Business Process Modeling and Notation Version 2.0</a></span><ul><li><span class="section"><a href="#bpmn-support_business-processes">4.1. Red Hat Process Automation Manager support for BPMN2</a></span></li><li><span class="section"><a href="#bpmn-events-con_business-processes">4.2. BPMN2 events in process designer</a></span><ul><li><span class="section"><a href="#bpmn-start-events-ref_business-processes">4.2.1. Start events</a></span></li><li><span class="section"><a href="#bpmn-intermediate-events-ref_business-processes">4.2.2. Intermediate events</a></span></li><li><span class="section"><a href="#bpmn-end-events-ref_business-processes">4.2.3. End events</a></span></li></ul></li><li><span class="section"><a href="#bpmn-tasks-overview-con_business-processes">4.3. BPMN2 tasks in process designer</a></span></li><li><span class="section"><a href="#con_custom-tasks-overview">4.4. BPMN2 custom tasks in process designer</a></span></li><li><span class="section"><a href="#bpmn-subprocesses-ref_business-processes">4.5. BPMN2 subprocesses in process designer</a></span></li><li><span class="section"><a href="#bpmn-gateways_business-processes">4.6. BPMN2 gateways in process designer</a></span></li><li><span class="section"><a href="#bpmn-connecting-ref_business-processes">4.7. BPMN2 connecting objects in process designer</a></span></li><li><span class="section"><a href="#bpmn-lanes-proc_business-processes">4.8. BPMN2 swimlanes in process designer</a></span></li><li><span class="section"><a href="#bpmn-artifacts_business-processes">4.9. BPMN2 artifacts in process designer</a></span><ul><li><span class="section"><a href="#proc-create-process-data-object_business-processes">4.9.1. Creating data object</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#design-bus-proc">5. Creating a business process in Business Central</a></span><ul><li><span class="section"><a href="#create-business-rules-task-proc">5.1. Creating business rules tasks</a></span></li><li><span class="section"><a href="#create-script-task-proc">5.2. Creating script tasks</a></span></li><li><span class="section"><a href="#create-service-task-proc">5.3. Creating service tasks</a></span></li><li><span class="section"><a href="#create-user-task-proc">5.4. Creating user tasks</a></span></li><li><span class="section"><a href="#bpmn-user-task-lifecycle-ref_business-processes">5.5. BPMN2 user task life cycle in process designer</a></span></li><li><span class="section"><a href="#bpmn-user-task-permission-matrix-ref_business-processes">5.6. BPMN2 task permission matrix in process designer</a></span></li><li><span class="section"><a href="#copy-process-proc">5.7. Making a copy of a business process</a></span></li><li><span class="section"><a href="#resize-elements">5.8. Resizing elements and using the zoom function to view business processes</a></span></li><li><span class="section"><a href="#generate-process-docs-proc_business-processes">5.9. Generating process documentation in Business Central</a></span></li></ul></li><li><span class="chapter"><a href="#variables-con_business-processes">6. Variables</a></span><ul><li><span class="section"><a href="#con-variable-tags_business-processes">6.1. Variable tags</a></span></li><li><span class="section"><a href="#proc-define-global-variables_business-processes">6.2. Defining global variables</a></span></li><li><span class="section"><a href="#proc-define-process-variables_business-processes">6.3. Defining process variables</a></span></li><li><span class="section"><a href="#proc-define-local-variables_business-processes">6.4. Defining local variables</a></span></li></ul></li><li><span class="chapter"><a href="#con-action-scripts_business-processes">7. Action scripts</a></span></li><li><span class="chapter"><a href="#con-timer_business-processes">8. Timers</a></span><ul><li><span class="section"><a href="#configuration_of_timers_with_delay_and_period">8.1. Configuration of timers with delay and period</a></span></li><li><span class="section"><a href="#configuration_of_timers_with_iso_8601_date_format">8.2. Configuration of timers with ISO-8601 date format</a></span></li><li><span class="section"><a href="#configuration_of_timers_with_process_variables">8.3. Configuration of timers with process variables</a></span></li><li><span class="section"><a href="#update_timers_within_running_process_instance">8.4. Update timers within running process instance</a></span></li></ul></li><li><span class="chapter"><a href="#constraints-con_business-processes">9. Constraints</a></span></li><li><span class="chapter"><a href="#deploy-bus-proc">10. Deploying a business process in Business Central</a></span></li><li><span class="chapter"><a href="#execute-bus-proc">11. Executing a business process in Business Central</a></span></li><li><span class="chapter"><a href="#proc-test-bus-process_business-processes">12. Testing a business process</a></span><ul><li><span class="section"><a href="#proc-test-external-services_business-processes">12.1. Testing integration with external services</a></span></li></ul></li><li><span class="chapter"><a href="#manage-log-file-proc">13. Managing log files</a></span><ul><li><span class="section"><a href="#setup-auto-cleanup-proc">13.1. Setting up automatic cleanup job</a></span></li><li><span class="section"><a href="#manual-cleanup-con">13.2. Manual cleanup</a></span></li><li><span class="section"><a href="#clean-log-proc">13.3. Removing logs from the database</a></span></li></ul></li><li><span class="chapter"><a href="#process-definitions-and-instances-con-business-processes">14. Process definitions and process instances in Business Central</a></span><ul><li><span class="section"><a href="#starting-process-instance-from-definition-proc_business-processes">14.1. Starting a process instance from the process definitions page</a></span></li><li><span class="section"><a href="#starting-process-instance-from-instances-proc_business-processes">14.2. Starting a process instance from the process instances page</a></span></li><li><span class="section"><a href="#define-proc-xml">14.3. Process definitions in XML</a></span></li></ul></li><li><span class="chapter"><a href="#business-process-forms_business-processes">15. Forms in Business Central</a></span><ul><li><span class="section"><a href="#form-modeler-con">15.1. Form Modeler</a></span></li><li><span class="section"><a href="#create-process-task-forms-proc">15.2. Generating process and task forms in Business Central</a></span></li><li><span class="section"><a href="#create-forms">15.3. Manually creating forms in Business Central</a></span></li><li><span class="section"><a href="#doc-attachments-con">15.4. Document attachments in a form or process</a></span><ul><li><span class="section"><a href="#set-doc-marshalling">15.4.1. Setting the document marshalling strategy</a></span></li><li><span class="section"><a href="#create-doc-var">15.4.2. Creating a document variable in a business process</a></span></li><li><span class="section"><a href="#map-task-vars">15.4.3. Mapping task inputs and outputs to the document variable</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#advanced_process_concepts_and_tasks">16. Advanced process concepts and tasks</a></span><ul><li><span class="section"><a href="#dmn-execution-business-process">16.1. Invoking a Decision Model and Notation (DMN) service in a business process</a></span></li></ul></li><li><span class="chapter"><a href="#additional_resources">17. Additional resources</a></span></li></ul></div></div><section class="chapter" id="business_process"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Business processes</h2></div></div></div><p>
				A business process is a diagram that describes the order for a series of steps that must be executed and consists of predefined nodes and connections. Each node represents one step in the process while the connections specify how to transition from one node to another.
			</p><p>
				A typical business process consists of the following components:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The header section that comprises global elements such as the name of the process, imports, and variables
					</li><li class="listitem">
						The nodes section that contains all the different nodes that are part of the process
					</li><li class="listitem">
						The connections section that links these nodes to each other to create a flow chart
					</li></ul></div><div class="figure" id="idm140093652593792"><p class="title"><strong>Figure 1.1. Business process</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/1142.png" alt="This image shows the steps of &quot;self evaluation&quot; through the project manager and HR manager."/></div></div></div><p>
				Red Hat Process Automation Manager contains the legacy process designer and the new process designer for creating business process diagrams. The new process designer has an improved layout and feature set and continues to be developed. Until all features of the legacy process designer are completely implemented in the new process designer, both designers are available in Business Central for you to use.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The legacy process designer in Business Central is deprecated in Red Hat Process Automation Manager 7.10.0. It will be removed in a future Red Hat Process Automation Manager release. The legacy process designer will not receive any new enhancements or features. If you intend to use the new process designer, start migrating your processes to the new designer. Create all new processes in the new process designer. For information about migrating to the new designer, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/deploying_and_managing_red_hat_process_automation_manager_services#migrating-from-legacy-designer-proc"><span class="emphasis"><em>Managing projects in Business Central</em></span></a>.
				</p></div></div></section><section class="chapter" id="con-BPMN-DMN-modelers_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Red Hat Process Automation Manager BPMN and DMN modelers</h2></div></div></div><p>
				Red Hat Process Automation Manager provides the following extensions or applications that you can use to design Business Process Model and Notation (BPMN) process models and Decision Model and Notation (DMN) decision models using graphical modelers.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Business Central</strong></span>: Enables you to view and design BPMN models, DMN models, and test scenario files in a related embedded designer.
					</p><p class="simpara">
						To use Business Central, you can set up a development environment containing a Business Central to design business rules and processes, and a KIE Server to execute and test the created business rules and processes.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Red Hat Process Automation Manager VSCode extension</strong></span>: Enables you to view and design BPMN models, DMN models, and test scenario files in Visual Studio Code (VSCode). The VSCode extension requires VSCode 1.46.0 or later.
					</p><p class="simpara">
						To install the Red Hat Process Automation Manager VSCode extension, select the <span class="strong strong"><strong>Extensions</strong></span> menu option in VSCode and search for and install the <span class="strong strong"><strong>Red Hat Business Automation Bundle</strong></span> extension.
					</p></li><li class="listitem">
						<span class="strong strong"><strong>Standalone BPMN and DMN editors</strong></span>: Enable you to view and design BPMN and DMN models embedded in your web applications. To download the necessary files, you can either use the NPM artifacts from the <a class="link" href="https://npm.registry.redhat.com/">NPM registry</a> or download the JavaScript files directly for the DMN standalone editor library at <code class="literal"><a class="link" href="https://&lt;YOUR_PAGE&gt;/dmn/index.js">https://&lt;YOUR_PAGE&gt;/dmn/index.js</a></code> and for the BPMN standalone editor library at <code class="literal"><a class="link" href="https://&lt;YOUR_PAGE&gt;/bpmn/index.js">https://&lt;YOUR_PAGE&gt;/bpmn/index.js</a></code>.
					</li></ul></div><section class="section" id="proc-vscode-extension_business-processes"><div class="titlepage"><div><div><h2 class="title">2.1. Installing the Red Hat Process Automation Manager VSCode extension bundle</h2></div></div></div><p>
					Red Hat Process Automation Manager provides a <span class="strong strong"><strong>Red Hat Business Automation Bundle</strong></span> VSCode extension that enables you to design Decision Model and Notation (DMN) decision models, Business Process Model and Notation (BPMN) 2.0 business processes, and test scenarios directly in VSCode. VSCode is the preferred integrated development environment (IDE) for developing new business applications. Red Hat Process Automation Manager also provides individual <span class="strong strong"><strong>DMN Editor</strong></span> and <span class="strong strong"><strong>BPMN Editor</strong></span> VSCode extensions for DMN or BPMN support only, if needed.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The editors in the VSCode are partially compatible with the editors in the Business Central, and several Business Central features are not supported in the VSCode.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The latest stable version of <a class="link" href="https://code.visualstudio.com/">VSCode</a> is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In your VSCode IDE, select the <span class="strong strong"><strong>Extensions</strong></span> menu option and search for <span class="strong strong"><strong>Red Hat Business Automation Bundle</strong></span> for DMN, BPMN, and test scenario file support.
						</p><p class="simpara">
							For DMN or BPMN file support only, you can also search for the individual <span class="strong strong"><strong>DMN Editor</strong></span> or <span class="strong strong"><strong>BPMN Editor</strong></span> extensions.
						</p></li><li class="listitem">
							When the <span class="strong strong"><strong>Red Hat Business Automation Bundle</strong></span> extension appears in VSCode, select it and click <span class="strong strong"><strong>Install</strong></span>.
						</li><li class="listitem">
							For optimal VSCode editor behavior, after the extension installation is complete, reload or close and re-launch your instance of VSCode.
						</li></ol></div><p>
					After you install the VSCode extension bundle, any <code class="literal">.dmn</code>, <code class="literal">.bpmn</code>, or <code class="literal">.bpmn2</code> files that you open or create in VSCode are automatically displayed as graphical models. Additionally, any <code class="literal">.scesim</code> files that you open or create are automatically displayed as tabular test scenario models for testing the functionality of your business decisions.
				</p><p>
					If the DMN, BPMN, or test scenario modelers open only the XML source of a DMN, BPMN, or test scenario file and displays an error message, review the reported errors and the model file to ensure that all elements are correctly defined.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For new DMN or BPMN models, you can also enter <code class="literal">dmn.new</code> or <code class="literal">bpmn.new</code> in a web browser to design your DMN or BPMN model in the online modeler. When you finish creating your model, you can click <span class="strong strong"><strong>Download</strong></span> in the online modeler page to import your DMN or BPMN file into your Red Hat Process Automation Manager project in VSCode.
					</p></div></div></section><section class="section" id="proc-standalone-editors_business-processes"><div class="titlepage"><div><div><h2 class="title">2.2. Configuring the Red Hat Process Automation Manager standalone editors</h2></div></div></div><p>
					Red Hat Process Automation Manager provides standalone editors that are distributed in a self-contained library providing an all-in-one JavaScript file for each editor. The JavaScript file uses a comprehensive API to set and control the editor.
				</p><p>
					You can install the standalone editors in three ways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Download each JavaScript file manually
						</li><li class="listitem">
							Use the NPM package
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the standalone editors using one of the following methods:
						</p><p class="simpara">
							<span class="strong strong"><strong>Download each JavaScript file manually</strong></span>: For this method, follow these steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Download the JavaScript files.
								</li><li class="listitem">
									Add the downloaded Javascript files to your hosted application.
								</li><li class="listitem"><p class="simpara">
									Add the following <code class="literal">&lt;script&gt;</code> tag to your HTML page:
								</p><div class="formalpara"><p class="title"><strong>Script tag for your HTML page for the DMN editor</strong></p><p>
										
<pre class="screen">&lt;script src="https://&lt;YOUR_PAGE&gt;/dmn/index.js"&gt;&lt;/script&gt;</pre>
									</p></div><div class="formalpara"><p class="title"><strong>Script tag for your HTML page for the BPMN editor</strong></p><p>
										
<pre class="screen">&lt;script src="https://&lt;YOUR_PAGE&gt;/bpmn/index.js"&gt;&lt;/script&gt;</pre>
									</p></div></li></ol></div><p class="simpara">
							<span class="strong strong"><strong>Use the NPM package</strong></span>: For this method, follow these steps:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add the NPM package to your <code class="literal">package.json</code> file:
								</p><div class="formalpara"><p class="title"><strong>Adding the NPM package</strong></p><p>
										
<pre class="screen">npm install @redhat/kogito-tooling-kie-editors-standalone</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									Import each editor library to your TypeScript file:
								</p><div class="formalpara"><p class="title"><strong>Importing each editor</strong></p><p>
										
<pre class="screen">import * as DmnEditor from "@redhat/kogito-tooling-kie-editors-standalone/dist/dmn"
import * as BpmnEditor from "@redhat/kogito-tooling-kie-editors-standalone/dist/bpmn"</pre>
									</p></div></li></ol></div></li><li class="listitem"><p class="simpara">
							After you install the standalone editors, open the required editor by using the provided editor API, as shown in the following example for opening a DMN editor. The API is the same for each editor.
						</p><div class="formalpara"><p class="title"><strong>Opening the DMN standalone editor</strong></p><p>
								
<pre class="programlisting language-java">const editor = DmnEditor.open({
  container: document.getElementById("dmn-editor-container"),
  initialContent: Promise.resolve(""),
  readOnly: false,
  origin: "",
  resources: new Map([
    [
      "MyIncludedModel.dmn",
      {
        contentType: "text",
        content: Promise.resolve("")
      }
    ]
  ])
});</pre>
							</p></div><p class="simpara">
							Use the following parameters with the editor API:
						</p><div class="table" id="idm140093650385072"><p class="title"><strong>Table 2.1. Example parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093643292096" scope="col">Parameter</th><th align="left" valign="top" id="idm140093643291008" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093643292096">
										<p>
											<code class="literal">container</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093643291008">
										<p>
											HTML element in which the editor is appended.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093643292096">
										<p>
											<code class="literal">initialContent</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093643291008">
										<p>
											Promise to a DMN model content. This parameter can be empty, as shown in the following examples:
										</p>
										<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<code class="literal">Promise.resolve("")</code>
												</li><li class="listitem">
													<code class="literal">Promise.resolve("&lt;DIAGRAM_CONTENT_DIRECTLY_HERE&gt;")</code>
												</li><li class="listitem">
													<code class="literal">fetch("MyDmnModel.dmn").then(content ⇒ content.text())</code>
												</li></ul></div>
										</td></tr><tr><td align="left" valign="top" headers="idm140093643292096">
										<p>
											<code class="literal">readOnly</code> (Optional)
										</p>
										</td><td align="left" valign="top" headers="idm140093643291008">
										<p>
											Enables you to allow changes in the editor. Set to <code class="literal">false</code> (default) to allow content editing and <code class="literal">true</code> for read-only mode in editor.
										</p>
										<div class="admonition note"><div class="admonition_header">Note</div><div><p>
												Only the DMN editor supports read-only mode for now.
											</p></div></div>
										</td></tr><tr><td align="left" valign="top" headers="idm140093643292096">
										<p>
											<code class="literal">origin</code> (Optional)
										</p>
										</td><td align="left" valign="top" headers="idm140093643291008">
										<p>
											Origin of the repository. The default value is <code class="literal">window.location.origin</code>.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093643292096">
										<p>
											<code class="literal">resources</code> (Optional)
										</p>
										</td><td align="left" valign="top" headers="idm140093643291008">
										<p>
											Map of resources for the editor. For example, this parameter is used to provide included models for the DMN editor or work item definitions for the BPMN editor. Each entry in the map contains a resource name and an object that consists of <code class="literal">content-type</code> (<code class="literal">text</code> or <code class="literal">binary</code>) and <code class="literal">content</code> (similar to the <code class="literal">initialContent</code> parameter).
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							The returned object contains the methods that are required to manipulate the editor.
						</p><div class="table" id="idm140093650298192"><p class="title"><strong>Table 2.2. Returned object methods</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093646536720" scope="col">Method</th><th align="left" valign="top" id="idm140093646535744" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">getContent(): Promise&lt;string&gt;</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Returns a promise containing the editor content.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">setContent(content: string): void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Sets the content of the editor.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">getPreview(): Promise&lt;string&gt;</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Returns a promise containing an SVG string of the current diagram.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">subscribeToContentChanges(callback: (isDirty: boolean) ⇒ void): (isDirty: boolean) ⇒ void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Sets a callback to be called when the content changes in the editor and returns the same callback to be used for unsubscription.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">unsubscribeToContentChanges(callback: (isDirty: boolean) ⇒ void): void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Unsubscribes the passed callback when the content changes in the editor.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">markAsSaved(): void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Resets the editor state that indicates that the content in the editor is saved. Also, it activates the subscribed callbacks related to content change.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">undo(): void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Undoes the last change in the editor. Also, it activates the subscribed callbacks related to content change.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">redo(): void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Redoes the last undone change in the editor. Also, it activates the subscribed callbacks related to content change.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">close(): void</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Closes the editor.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">getElementPosition(selector: string): Promise&lt;Rect&gt;</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											Provides an alternative to extend the standard query selector when an element lives inside a canvas or a video component. The <code class="literal">selector</code> parameter must follow the <code class="literal">&lt;PROVIDER&gt;:::&lt;SELECT&gt;</code> format, such as <code class="literal">Canvas:::MySquare</code> or <code class="literal">Video:::PresenterHand</code>. This method returns a <code class="literal">Rect</code> representing the element position.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093646536720">
										<p>
											<code class="literal">envelopeApi: MessageBusClientApi&lt;KogitoEditorEnvelopeApi&gt;</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093646535744">
										<p>
											This is an advanced editor API. For more information about advanced editor API, see <a class="link" href="https://github.com/kiegroup/kogito-tooling/blob/master/packages/envelope-bus/src/api/index.ts#L43-L56">MessageBusClientApi</a> and <a class="link" href="https://github.com/kiegroup/kogito-tooling/blob/master/packages/editor/src/api/KogitoEditorEnvelopeApi.ts#L34-L41">KogitoEditorEnvelopeApi</a>.
										</p>
										</td></tr></tbody></table></div></div></li></ol></div></section></section><section class="chapter" id="proc-dmn-bpmn-maven-create_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Creating and executing DMN and BPMN models using Maven</h2></div></div></div><p>
				You can use Maven archetypes to develop DMN and BPMN models in VSCode using the Red Hat Process Automation Manager VSCode extension instead of Business Central. You can then integrate your archetypes with your Red Hat Process Automation Manager decision and process services in Business Central as needed. This method of developing DMN and BPMN models is helpful for building new business applications using the Red Hat Process Automation Manager VSCode extension.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In a command terminal, navigate to a local folder where you want to store the new Red Hat Process Automation Manager project.
					</li><li class="listitem"><p class="simpara">
						Enter the following command to generate a project within a defined folder using the following Maven archetype:
					</p><div class="formalpara"><p class="title"><strong>Generating a project using Maven archetype</strong></p><p>
							
<pre class="screen">mvn archetype:generate \
    -DarchetypeGroupId=org.kie \
    -DarchetypeArtifactId=kie-kjar-archetype \
    -DarchetypeVersion=7.48.0.Final-redhat-00002</pre>
						</p></div><p class="simpara">
						This command generates a Maven project with required dependencies and generates required directories and files to build your business application. You can set up and use Git version-control system (recommended) when developing a project.
					</p><p class="simpara">
						If you want to generate multiple projects in the same directory, you can specify the <code class="literal">artifactId</code> and <code class="literal">groupId</code> of the generated business application by adding <code class="literal">-DgroupId=&lt;groupid&gt; -DartifactId=&lt;artifactId&gt;</code> to the previous command.
					</p></li><li class="listitem">
						In your VSCode IDE, click <span class="strong strong"><strong>File</strong></span>, select <span class="strong strong"><strong>Open Folder</strong></span>, and navigate to the folder that is generated using the previous command.
					</li><li class="listitem"><p class="simpara">
						Before creating the first asset, set a package for your business application, for example, <code class="literal">org.kie.businessapp</code>, and create respective directories in the following paths:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">PROJECT_HOME/src/main/java</code>
							</li><li class="listitem">
								<code class="literal">PROJECT_HOME/src/main/resources</code>
							</li><li class="listitem">
								<code class="literal">PROJECT_HOME/src/test/resources</code>
							</li></ul></div><p class="simpara">
						For example, you can create <code class="literal">PROJECT_HOME/src/main/java/org/kie/businessapp</code> for <code class="literal">org.kie.businessapp</code> package.
					</p></li><li class="listitem"><p class="simpara">
						Use VSCode to create assets for your business application. You can create the assets supported by Red Hat Process Automation Manager VSCode extension using the following ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To create a business process, create a new file with <code class="literal">.bpmn</code> or <code class="literal">.bpmn2</code> in <code class="literal">PROJECT_HOME/src/main/java/org/kie/businessapp</code> directory, such as <code class="literal">Process.bpmn</code>.
							</li><li class="listitem">
								To create a DMN model, create a new file with <code class="literal">.dmn</code> in <code class="literal">PROJECT_HOME/src/main/java/org/kie/businessapp</code> directory, such as <code class="literal">AgeDecision.dmn</code>.
							</li><li class="listitem">
								To create a test scenario simulation model, create a new file with <code class="literal">.scesim</code> in <code class="literal">PROJECT_HOME/src/main/java/org/kie/businessapp</code> directory, such as <code class="literal">TestAgeScenario.scesim</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						After you create the assets in your Maven archetype, navigate to the root directory (contains <code class="literal">pom.xml</code>) of the project in the command line and run the following command to build the knowledge JAR (KJAR) of your project:
					</p><pre class="screen">mvn clean install</pre><p class="simpara">
						If the build fails, address any problems described in the command line error messages and try again to validate the project until the build is successful. However, if the build is successful, you can find the artifact of your business application in <code class="literal">PROJECT_HOME/target</code> directory.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Use <code class="literal">mvn clean install</code> command often to validate your project after each major change during development.
						</p></div></div></li></ol></div><p>
				You can deploy the generated knowledge JAR (KJAR) of your business application on a running KIE Server using the REST API. For more information about using REST API, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/deploying_and_managing_red_hat_process_automation_manager_services#assembly-kie-apis"><span class="emphasis"><em>Interacting with Red Hat Process Automation Manager using KIE APIs</em></span></a>.
			</p></section><section class="chapter" id="bpmn-con_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Business Process Modeling and Notation Version 2.0</h2></div></div></div><p>
				The Business Process Modeling and Notation Version 2.0 (BPMN2) specification is an Object Management Group (OMG) specification that defines standards for graphically representing a business process, defines execution semantics for the elements, and provides process definitions in XML format.
			</p><p>
				A process is defined or determined by its process definition. It exists in a knowledge base and is identified by its ID.
			</p><div class="table" id="idm140093639687728"><p class="title"><strong>Table 4.1. General process properties</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093638094832" scope="col">Label</th><th align="left" valign="top" id="idm140093638093744" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Name</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Enter the name of the process.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Documentation</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Describes the process. The text in this field is included in the process documentation, if applicable.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>ID</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Enter an identifier for this process, for example <code class="literal">orderItems</code>.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Package</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Enter the package location for this process in your Red Hat Process Automation Manager project, for example <code class="literal">org.acme</code>.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>ProcessType</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Specify whether the process is public or private. (Currently not supported.)
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Version</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Enter the artifact version for the process.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Ad hoc</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Select this option if this process is an ad hoc subprocess.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Process Instance Description</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Enter a description of the purpose of the process.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Imports</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Click to open the <span class="strong strong"><strong>Imports</strong></span> window and add any data type classes required for your process.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Executable</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Select this option to make the process executable part of your Red Hat Process Automation Manager project.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>SLA Due Date</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Enter the service level agreement (SLA) expiration date.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Process Variables</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Add any process variables for the process. Process variables are visible within the specific process instance. Process variables are initialized at process creation and destroyed on process completion. Variable tags provide greater control over variable behavior, for example whether the variable is tagged as <code class="literal">required</code> or <code class="literal">readonly</code>. For more information about variable tags, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#variables-con_business-processes"><span class="emphasis"><em>Designing business processes using BPMN models</em></span></a>.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Metadata Attributes</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Add any custom metadata attribute name and value that you want to use for custom event listeners, such as a listener to implement some action when a metadata attribute is present.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093638094832">
							<p>
								<span class="strong strong"><strong>Global Variables</strong></span>
							</p>
							</td><td align="left" valign="top" headers="idm140093638093744">
							<p>
								Add any global variables for the process. Global variables are visible to all process instances and assets in a project. Global variables are typically used by business rules and constraints and are created dynamically by the rules or constraints.
							</p>
							</td></tr></tbody></table></div></div><p>
				A process is a container for a set of modeling elements. It contains elements that specify the execution workflow of a business process or its parts using flow objects and flows. Each process has its own BPMN2 diagram. Red Hat Process Automation Manager contains the new process designer for creating BPMN2 diagrams and the legacy process designer to open the old BPMN2 diagram with <code class="literal">.bpmn2</code> extension. The new process designer has an improved layout and feature set and continues to develop. By default, the new diagrams are created in the new process designer.
			</p><section class="section" id="bpmn-support_business-processes"><div class="titlepage"><div><div><h2 class="title">4.1. Red Hat Process Automation Manager support for BPMN2</h2></div></div></div><p>
					With Red Hat Process Automation Manager, you can model your business processes using the BPMN 2.0 standard. You can then use Red Hat Process Automation Manager to run, manage, and monitor these business processes. The full BPMN 2.0 specification also includes details on how to represent items such as choreographies and collaboration. However, Red Hat Process Automation Manager uses only the parts of the specification that you can use to specify executable processes. This includes almost all elements and attributes as defined in the Common Executable subclass of the BPMN2 specification, extended with some additional elements and attributes.
				</p><p>
					The following table contains a list of icons used to indicate whether a BPMN2 element is supported in the legacy process designer, the legacy and new process designer, or not supported.
				</p><div class="table" id="idm140093637907136"><p class="title"><strong>Table 4.2. Support status icons</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093635928688" scope="col">Key</th><th align="left" valign="top" id="idm140093635927600" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093635928688">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093635927600">
								<p>
									Supported in the legacy and new process designer
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093635928688">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_star.png" alt="grn star"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093635927600">
								<p>
									Supported in the legacy process designer only
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093635928688">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093635927600">
								<p>
									Not supported
								</p>
								</td></tr></tbody></table></div></div><p>
					Elements that have no icon do not exist in the BPMN2 specification.
				</p><div class="table" id="idm140093645083200"><p class="title"><strong>Table 4.3. BPMN2 catching events</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 36%; " class="col_1"/><col style="width: 32%; " class="col_2"/><col style="width: 32%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093644191920" scope="col">Element Name</th><th align="left" valign="top" id="idm140093644190832" scope="col">Start</th><th align="left" valign="top" id="idm140093641929136" scope="col">Intermediate</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									None
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136"> </td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Message
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Timer
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Error
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Escalation
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Cancel
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832"> </td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Compensation
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Conditional
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Link
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832"> </td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Signal
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Multiple
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093644191920">
								<p>
									Parallel Multiple
								</p>
								</td><td align="left" valign="top" headers="idm140093644190832">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093641929136">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr></tbody></table></div></div><div class="table" id="idm140093642666448"><p class="title"><strong>Table 4.4. BPMN2 throwing and non-interrupting events</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093623263680" scope="col">Element Name</th><th align="left" valign="top" id="idm140093649316464" scope="col">Throwing</th><th align="left" valign="top" id="idm140093649315376" scope="col"> </th><th align="left" valign="top" id="idm140093649314448" scope="col">Non-interrupting</th><th align="left" valign="top" id="idm140093649313360" scope="col"> </th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093623263680"> </td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									End
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									Intermediate
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									Start
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									Intermediate
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									None
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376"> </td><td align="left" valign="top" headers="idm140093649314448"> </td><td align="left" valign="top" headers="idm140093649313360"> </td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Message
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Timer
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464"> </td><td align="left" valign="top" headers="idm140093649315376"> </td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Error
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376"> </td><td align="left" valign="top" headers="idm140093649314448"> </td><td align="left" valign="top" headers="idm140093649313360"> </td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Escalation
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Cancel
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448"> </td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Compensation
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448"> </td><td align="left" valign="top" headers="idm140093649313360"> </td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Conditional
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464"> </td><td align="left" valign="top" headers="idm140093649315376"> </td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Link
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464"> </td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448"> </td><td align="left" valign="top" headers="idm140093649313360"> </td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Signal
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Terminate
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376"> </td><td align="left" valign="top" headers="idm140093649314448"> </td><td align="left" valign="top" headers="idm140093649313360"> </td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Multiple
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649315376">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623263680">
								<p>
									Parallel Multiple
								</p>
								</td><td align="left" valign="top" headers="idm140093649316464"> </td><td align="left" valign="top" headers="idm140093649315376"> </td><td align="left" valign="top" headers="idm140093649314448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093649313360">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr></tbody></table></div></div><div class="table" id="idm140093637048928"><p class="title"><strong>Table 4.5. BPMN2 elements</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 36%; " class="col_1"/><col style="width: 32%; " class="col_2"/><col style="width: 32%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093645329904" scope="col">Element type</th><th align="left" valign="top" id="idm140093645328816" scope="col">Element</th><th align="left" valign="top" id="idm140093645327728" scope="col">Supported</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093645329904">
								<p>
									Task
								</p>
								</td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Business rule
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Script
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									User task
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Service task
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904">
								<p>
									Subprocesses, including multiple instance subprocesses
								</p>
								</td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Embedded
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Ad hoc
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Reusable
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Event
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904">
								<p>
									Gateways
								</p>
								</td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Inclusive
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Exclusive
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Parallel
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Event-based
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Complex
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bk_x.png" alt="bk x"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904">
								<p>
									Connecting objects
								</p>
								</td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Sequence flows
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Association flows
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904">
								<p>
									Swimlanes
								</p>
								</td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Swimlanes
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904">
								<p>
									Artifacts
								</p>
								</td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Group
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_star.png" alt="grn star"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Text annotation
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645329904"> </td><td align="left" valign="top" headers="idm140093645328816">
								<p>
									Data object
								</p>
								</td><td align="left" valign="top" headers="idm140093645327728">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/grn_check.png" alt="grn check"/></span>
								</p>
								</td></tr></tbody></table></div></div><p>
					For more information about the background and applications of BPMN2, see the <a class="link" href="https://www.omg.org/spec/BPMN/2.0/About-BPMN/">OMG Business Process Model and Notation (BPMN) Version 2.0</a> specification.
				</p></section><section class="section" id="bpmn-events-con_business-processes"><div class="titlepage"><div><div><h2 class="title">4.2. BPMN2 events in process designer</h2></div></div></div><p>
					An event is something that happens to a business process. BPMN2 supports three categories of events:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Start
						</li><li class="listitem">
							End
						</li><li class="listitem">
							Intermediate
						</li></ul></div><p>
					A start event catches an event trigger, an end event throws an event trigger, and an intermediate event can both catch and throw event triggers.
				</p><p>
					The following business process diagram shows examples of events: 
					<span class="inlinemediaobject"><img src="images/_images/BPMN2/events.png" alt="events"/></span>
				</p><p>
					In this example, the following events occurred:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The ATM Card Inserted signal start event is triggered when the signal is received.
						</li><li class="listitem">
							The timeout intermediate event is an interrupting event based on a timer trigger. This means that the Wait for PIN subprocess is canceled when the timer event is triggered.
						</li><li class="listitem">
							Depending on the inputs to the process, either end event associated with the Validate User Pin task or the end event associated with the Inform User of Timeout task ends the process.
						</li></ul></div><section class="section" id="bpmn-start-events-ref_business-processes"><div class="titlepage"><div><div><h3 class="title">4.2.1. Start events</h3></div></div></div><p>
						Use start events to indicate the start of a business process. A start event cannot have an incoming sequence flow and must have only one outgoing sequence flow. You can use none start events in top-level processes, embedded subprocess, callable subprocesses, and event subprocesses.
					</p><p>
						All start events, with the exception of the none start event, are catch events. For example, a signal start event starts the process only when the referenced signal (event trigger) is received. You can configure start events in event subprocesses to be interrupting or non-interrupting. An interrupting start event for an event subprocess stops or interrupts the execution of the containing or parent process. A non-interrupting start event does not stop or interrupt the execution of the containing or parent process.
					</p><div class="table" id="idm140093641042528"><p class="title"><strong>Table 4.6. Start events</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 25%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093652073552" scope="col">Start event type</th><th align="left" valign="top" id="idm140093652072464" scope="col">Top-level</th><th align="left" valign="top" id="idm140093652071376" scope="col">Subprocesses</th><th align="left" valign="top" id="idm140093643174656" scope="col"> </th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093652073552"> </td><td align="left" valign="top" headers="idm140093652072464"> </td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="strong strong"><strong>Interrupt</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656">
									<p>
										<span class="strong strong"><strong>Non-interrupt</strong></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#none_start_event" title="None">None</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-start-node.png" alt="bpmn start node"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376"> </td><td align="left" valign="top" headers="idm140093643174656"> </td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#conditional_start_event" title="Conditional">Conditional</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-conditional-start.png" alt="bpmn conditional start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-conditional-start.png" alt="bpmn conditional start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-conditional-non-interrupt.png" alt="bpmn conditional non interrupt"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#compensation_start_event" title="Compensation">Compensation</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-compensation-start.png" alt="bpmn compensation start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-compensation-start.png" alt="bpmn compensation start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656"> </td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#error_start_event" title="Error">Error</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464"> </td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-error-start.png" alt="bpmn error start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656"> </td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#escalation_start_event" title="Escalation">Escalation</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-escalation-start.png" alt="bpmn escalation start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-escalation-start.png" alt="bpmn escalation start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-escalation-non-interrupt.png" alt="bpmn escalation non interrupt"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#message_start_event" title="Message">Message</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-message-node.png" alt="bpmn message node"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-message-node.png" alt="bpmn message node"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-message-non-interrupt.png" alt="bpmn message non interrupt"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#signal_start_event" title="Signal">Signal</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-signal-start.png" alt="bpmn signal start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-signal-start.png" alt="bpmn signal start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-signal-non-interrupt.png" alt="bpmn signal non interrupt"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093652073552">
									<p>
										<a class="xref" href="#timer_start_event" title="Timer">Timer</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093652072464">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-timer-start.png" alt="bpmn timer start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093652071376">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-timer-start.png" alt="bpmn timer start"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093643174656">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-timer-non-interrupt.png" alt="bpmn timer non interrupt"/></span>
									</p>
									</td></tr></tbody></table></div></div><div id="none_start_event" class="formalpara"><p class="title"><strong>None</strong></p><p>
							The none start event is a start event without a trigger condition. A process or a subprocess can contain at most one none start event, which is triggered on process or subprocess start by default, and the outgoing flow is taken immediately.
						</p></div><p>
						When you use a none start event in a subprocess, the execution of the process flow is transferred from the parent process into the subprocess and the none start event is triggered. This means that the token (the current location within the process flow) is passed from the parent process into the subprocess activity and the none start event of the subprocess generates a token of its own.
					</p><div id="conditional_start_event" class="formalpara"><p class="title"><strong>Conditional</strong></p><p>
							The conditional start event is a start event with a Boolean condition definition. The execution is triggered when the condition is first evaluated to <code class="literal">false</code> and then to <code class="literal">true</code>. The process execution starts only if the condition is evaluated to <code class="literal">true</code> after the start event has been instantiated.
						</p></div><p>
						A process can contain multiple conditional start events.
					</p><div id="compensation_start_event" class="formalpara"><p class="title"><strong>Compensation</strong></p><p>
							A compensation start event is used to start a compensation event subprocess when using a subprocess as the target activity of a compensation intermediate event.
						</p></div><div id="error_start_event" class="formalpara"><p class="title"><strong>Error</strong></p><p>
							A process or subprocess can contain multiple error start events, which are triggered when an error object with a particular <code class="literal">ErrorRef</code> property is received. The error object can be produced by an error end event. It indicates an incorrect process ending. The process instance with the error start event starts execution after it has received the respective error object. The error start event is executed immediately upon receiving the error object and its outgoing flow is taken.
						</p></div><div id="escalation_start_event" class="formalpara"><p class="title"><strong>Escalation</strong></p><p>
							The escalation start event is a start event that is triggered by an escalation with a particular escalation code. Processes can contain multiple escalation start events. The process instance with an escalation start event starts its execution when it receives the defined escalation object. The process is instantiated and the escalation start event is executed immediately and its outgoing flow is taken.
						</p></div><div id="message_start_event" class="formalpara"><p class="title"><strong>Message</strong></p><p>
							A process or an event subprocess can contain multiple message start events, which are triggered by a particular message. The process instance with a message start event only starts its execution from this event after it has received the respective message. After the message is received, the process is instantiated and its message start event is executed immediately (its outgoing flow is taken).
						</p></div><p>
						Because a message can be consumed by an arbitrary number of processes and process elements, including no elements, one message can trigger multiple message start events and therefore instantiate multiple processes.
					</p><div id="signal_start_event" class="formalpara"><p class="title"><strong>Signal</strong></p><p>
							The signal start event is triggered by a signal with a particular signal code. A process can contain multiple signal start events. The signal start event only starts its execution within the process instance after the instance has received the respective signal. Then, the signal start event is executed and its outgoing flow is taken.
						</p></div><div id="timer_start_event" class="formalpara"><p class="title"><strong>Timer</strong></p><p>
							The timer start event is a start event with a timing mechanism. A process can contain multiple timer start events, which are triggered at the start of the process, after which the timing mechanism is applied.
						</p></div><p>
						When you use a timer start event in a subprocess, execution of the process flow is transferred from the parent process into the subprocess and the timer start event is triggered. The token is taken from the parent subprocess activity and the timer start event of the subprocess is triggered and waits for the timer to trigger. After the time defined by the timing definition has been reached, the outgoing flow is taken.
					</p></section><section class="section" id="bpmn-intermediate-events-ref_business-processes"><div class="titlepage"><div><div><h3 class="title">4.2.2. Intermediate events</h3></div></div></div><p>
						Intermediate events drive the flow of a business process. Intermediate events are used to either catch or throw an event during the execution of the business process. These events are placed between the start and end events and can also be used on the boundary of an activity, like a subprocess or a human task, as a catch event. In the BPMN modeler, you can set a data output in the <span class="strong strong"><strong>Data Output and Assignments</strong></span> field for a boundary event, which is used in a further process to access the process instance details.
					</p><p>
						For example, you can set the following data output variables for a boundary event:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">nodeInstance</code>: Carries the node instance details to use in a further process when the boundary event is triggered.
							</li><li class="listitem">
								<code class="literal">signal</code>: Carries the name of the signal.
							</li><li class="listitem">
								<code class="literal">event</code>: Carries the event details.
							</li><li class="listitem">
								<code class="literal">workItem</code>: Carries the work item details. This variable can be set for work item or user task.
							</li></ul></div><p>
						The boundary catch events can be configured as interrupting or non-interrupting. An interrupting boundary catch event cancels the bound activity whereas a non-interrupting event does not.
					</p><p>
						An intermediate event handles a particular situation that occurs during process execution. The situation is a trigger for an intermediate event. In a process, intermediate events with one outgoing flow can be placed on an activity boundary.
					</p><p>
						If the event occurs while the activity is being executed, the event triggers its execution to the outgoing flow. One activity may have multiple boundary intermediate events. Note that depending on the behavior you require from the activity with the boundary intermediate event, you can use either of the following intermediate event types:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Interrupting: The activity execution is interrupted and the execution of the intermediate event is triggered.
							</li><li class="listitem">
								Non-interrupting: The intermediate event is triggered and the activity execution continues.
							</li></ul></div><div class="table" id="idm140093638034848"><p class="title"><strong>Table 4.7. Intermediate events</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093634572080" scope="col">Intermediate event type</th><th align="left" valign="top" id="idm140093634570992" scope="col">Catching</th><th align="left" valign="top" id="idm140093634569904" scope="col">Boundary</th><th align="left" valign="top" id="idm140093637853744" scope="col"> </th><th align="left" valign="top" id="idm140093637852816" scope="col">Throwing</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093634572080"> </td><td align="left" valign="top" headers="idm140093634570992"> </td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="strong strong"><strong>Interrupt</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744">
									<p>
										<span class="strong strong"><strong>Non-interrupt</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637852816"> </td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#message_intermediate_event" title="Message">Message</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-message.png" alt="bpmn intermediate message"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-message.png" alt="bpmn intermediate message"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-message-noninterrupt.png" alt="bpmn message noninterrupt"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637852816">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-message-throwing.png" alt="bpmn message throwing"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#timer_intermediate_event" title="Timer">Timer</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-timer.png" alt="bpmn intermediate timer"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-timer.png" alt="bpmn intermediate timer"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-timer-noninterrupt.png" alt="bpmn timer noninterrupt"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637852816"> </td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#error_intermediate_event" title="Error">Error</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992"> </td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-error.png" alt="bpmn intermediate error"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744"> </td><td align="left" valign="top" headers="idm140093637852816"> </td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#signal_intermediate_event" title="Signal">Signal</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-signal.png" alt="bpmn intermediate signal"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-signal.png" alt="bpmn intermediate signal"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-signal-noninterrupt.png" alt="bpmn signal noninterrupt"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637852816">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-signal-throwing.png" alt="bpmn signal throwing"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#conditional_intermediate_event" title="Conditional">Conditional</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-conditional.png" alt="bpmn intermediate conditional"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-conditional.png" alt="bpmn intermediate conditional"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-conditional-noninterrupt.png" alt="bpmn conditional noninterrupt"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637852816"> </td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#compensation_intermediate_event" title="Compensation">Compensation</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-catch.png" alt="bpmn intermediate catch"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-catch.png" alt="bpmn intermediate catch"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744"> </td><td align="left" valign="top" headers="idm140093637852816">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-compensation-throwing.png" alt="bpmn intermediate compensation throwing"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#escalation_intermediate_event" title="Escalation">Escalation</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-escalation.png" alt="bpmn intermediate escalation"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-escalation.png" alt="bpmn intermediate escalation"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637853744">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-escalation-non-interrupting.png" alt="bpmn intermediate escalation non interrupting"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093637852816">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-escalation-throwing.png" alt="bpmn intermediate escalation throwing"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093634572080">
									<p>
										<a class="xref" href="#link_intermediate_event" title="Link">Link</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093634570992">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-link.png" alt="bpmn intermediate link"/></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093634569904"> </td><td align="left" valign="top" headers="idm140093637853744"> </td><td align="left" valign="top" headers="idm140093637852816">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-intermediate-link-throwing.png" alt="bpmn intermediate link throwing"/></span>
									</p>
									</td></tr></tbody></table></div></div><div id="message_intermediate_event" class="formalpara"><p class="title"><strong>Message</strong></p><p>
							A message intermediate event is an intermediate event that enables you to manage a message object. Use one of the following events:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A throwing message intermediate event produces a message object based on the defined properties.
							</li><li class="listitem">
								A catching message intermediate event listens for a message object with the defined properties.
							</li></ul></div><div id="timer_intermediate_event" class="formalpara"><p class="title"><strong>Timer</strong></p><p>
							A timer intermediate event enables you to delay workflow execution or to trigger the workflow execution periodically. It represents a timer that can trigger one or multiple times after a specified period of time. When the timer intermediate event is triggered, the timer condition, which is the defined time, is checked and the outgoing flow is taken. When the timer intermediate event is placed in the process workflow, it has one incoming flow and one outgoing flow. Its execution starts when the incoming flow transfers to the event. When a timer intermediate event is placed on an activity boundary, the execution is triggered at the same time as the activity execution.
						</p></div><p>
						The timer is canceled if the timer element is canceled, for example by completing or aborting the enclosing process instance.
					</p><div id="conditional_intermediate_event" class="formalpara"><p class="title"><strong>Conditional</strong></p><p>
							A conditional intermediate event is an intermediate event with a boolean condition as its trigger. The event triggers further workflow execution when the condition evaluates to <code class="literal">true</code> and its outgoing flow is taken.
						</p></div><p>
						The event must define the <code class="literal property">Expression</code> property. When a conditional intermediate event is placed in the process workflow, it has one incoming flow, one outgoing flow, and its execution starts when the incoming flow transfers to the event. When a conditional intermediate event is placed on an activity boundary, the execution is triggered at the same time as the activity execution. Note that if the event is non-interrupting, the event triggers continuously while the condition is <code class="literal">true</code>.
					</p><div id="signal_intermediate_event" class="formalpara"><p class="title"><strong>Signal</strong></p><p>
							A signal intermediate event enables you to produce or consume a signal object. Use either of the following options:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A throwing signal intermediate event produces a signal object based on the defined properties.
							</li><li class="listitem">
								A catching signal intermediate event listens for a signal object with the defined properties.
							</li></ul></div><div id="error_intermediate_event" class="formalpara"><p class="title"><strong>Error</strong></p><p>
							An error intermediate event is an intermediate event that can be used only on an activity boundary. It enables the process to react to an error end event in the respective activity. The activity must not be atomic. When the activity finishes with an error end event that produces an error object with the respective <code class="literal">ErrorCode</code> property, the error intermediate event catches the error object and execution continues to its outgoing flow.
						</p></div><div id="compensation_intermediate_event" class="formalpara"><p class="title"><strong>Compensation</strong></p><p>
							A compensation intermediate event is a boundary event attached to an activity in a transaction subprocess. It can finish with a compensation end event or a cancel end event. The compensation intermediate event must be associated with a flow, which is connected to the compensation activity.
						</p></div><p>
						The activity associated with the boundary compensation intermediate event is executed if the transaction subprocess finishes with the compensation end event. The execution continues with the respective flow.
					</p><div id="escalation_intermediate_event" class="formalpara"><p class="title"><strong>Escalation</strong></p><p>
							An escalation intermediate event is an intermediate event that enables you to produce or consume an escalation object. Depending on the action the event element should perform, you need to use either of the following options:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A throwing escalation intermediate event produces an escalation object based on the defined properties.
							</li><li class="listitem">
								A catching escalation intermediate event listens for an escalation object with the defined properties.
							</li></ul></div><div id="link_intermediate_event" class="formalpara"><p class="title"><strong>Link</strong></p><p>
							A link intermediate event is an intermediate event that makes the process diagram easier to understand without adding additional logic to the process. Link intermediate event is limited to a single process level, for example, link intermediate event cannot connect a parent process with a subprocess.
						</p></div><p>
						Use either of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A throwing link intermediate event produces a link object based on the defined properties.
							</li><li class="listitem">
								A catching link intermediate event listens for a link object with the defined properties.
							</li></ul></div></section><section class="section" id="bpmn-end-events-ref_business-processes"><div class="titlepage"><div><div><h3 class="title">4.2.3. End events</h3></div></div></div><p>
						End events are used to end a business process and may not have any outgoing sequence flows. There may be multiple end events in a business process. All end events, with the exception of the none and terminate end events, are throw events.
					</p><p>
						End events indicate the completion of a business process. An end event is a node that ends a particular workflow. It has one or more incoming sequence flows and no outgoing flow.
					</p><p>
						A process must contain at least one end event.
					</p><p>
						During run time, an end event finishes the process workflow. The end event can finish only the workflow that reached it, or all workflows in the process instance, depending on the end event type.
					</p><div class="table" id="idm140093647381376"><p class="title"><strong>Table 4.8. End events</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093635855024" scope="col">End event</th><th align="left" valign="top" id="idm140093635853936" scope="col">Icon</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#none_end_event" title="None">None</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-node.png" alt="bpmn end node"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#message_end_event" title="Message">Message</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-message.png" alt="bpmn end message"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#signal_end_event" title="Signal">Signal</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-signal.png" alt="bpmn end signal"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#error_end_event" title="Error">Error</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-error.png" alt="bpmn end error"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#compensation_end_event" title="Compensation">Compensation</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-compensation.png" alt="bpmn end compensation"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#escalation_end_event" title="Escalation">Escalation</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-escalation.png" alt="bpmn end escalation"/></span>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093635855024">
									<p>
										<a class="xref" href="#terminate_end_event" title="Terminate">Terminate</a>
									</p>
									</td><td align="left" valign="top" headers="idm140093635853936">
									<p>
										<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-end-terminate.png" alt="bpmn end terminate"/></span>
									</p>
									</td></tr></tbody></table></div></div><div id="none_end_event" class="formalpara"><p class="title"><strong>None</strong></p><p>
							The none end event specifies that no other special behavior is associated with the end of the process.
						</p></div><div id="message_end_event" class="formalpara"><p class="title"><strong>Message</strong></p><p>
							When a flow enters a message end event, the flow finishes and the end event produces a message as defined in its properties.
						</p></div><div id="signal_end_event" class="formalpara"><p class="title"><strong>Signal</strong></p><p>
							A throwing signal end event is used to finish a process or subprocess flow. When the execution flow enters the element, the execution flow finishes and produces a signal identified by its <code class="literal">SignalRef</code> property.
						</p></div><div id="error_end_event" class="formalpara"><p class="title"><strong>Error</strong></p><p>
							The throwing error end event finishes the incoming workflow, which means consumes the incoming token, and produces an error object. Any other running workflows in the process or subprocess remain uninfluenced.
						</p></div><div id="compensation_end_event" class="formalpara"><p class="title"><strong>Compensation</strong></p><p>
							A compensation end event is used to finish a transaction subprocess and trigger the compensation defined by the compensation intermediate event attached to the boundary of the subprocess activities.
						</p></div><div id="escalation_end_event" class="formalpara"><p class="title"><strong>Escalation</strong></p><p>
							The escalation end event finishes the incoming workflow, which means consumes the incoming token, and produces an escalation signal as defined in its properties, triggering the escalation process.
						</p></div><div id="terminate_end_event" class="formalpara"><p class="title"><strong>Terminate</strong></p><p>
							The terminate end event finishes all execution flows in the specified process instance. Activities being executed are canceled. The subprocess instance terminates if it reaches a terminate end event.
						</p></div></section></section><section class="section" id="bpmn-tasks-overview-con_business-processes"><div class="titlepage"><div><div><h2 class="title">4.3. BPMN2 tasks in process designer</h2></div></div></div><p>
					A task is an automatic activity that is defined in the process model and the smallest unit of work in a process flow. The following task types defined in the BPMN2 specification are available in the Red Hat Process Automation Manager process designer palette:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Business rule task
						</li><li class="listitem">
							Script task
						</li><li class="listitem">
							User task
						</li><li class="listitem">
							Service task
						</li><li class="listitem">
							None task
						</li></ul></div><div class="table" id="idm140093623696304"><p class="title"><strong>Table 4.9. Task</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><tbody><tr><td align="left" valign="top">
								<p>
									Business rule task
								</p>
								</td><td align="left" valign="top">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-business-rule-task.png" alt="bpmn business rule task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top">
								<p>
									Script task
								</p>
								</td><td align="left" valign="top">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-script-task.png" alt="bpmn script task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top">
								<p>
									User task
								</p>
								</td><td align="left" valign="top">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-user-task.png" alt="bpmn user task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top">
								<p>
									Service task
								</p>
								</td><td align="left" valign="top">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-service-task.png" alt="bpmn service task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top">
								<p>
									None task
								</p>
								</td><td align="left" valign="top">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-none-task.png" alt="bpmn none task"/></span>
								</p>
								</td></tr></tbody></table></div></div><p>
					In addition, the BPMN2 specification provides the ability to create custom tasks. For more information about custom tasks, see <a class="xref" href="#con_custom-tasks-overview" title="4.4. BPMN2 custom tasks in process designer">Section 4.4, “BPMN2 custom tasks in process designer”</a>.
				</p><div class="formalpara"><p class="title"><strong>Business rule task</strong></p><p>
						A business rule task defines a way to make a decision either through a DMN model or a rule flow group.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-business-rule-task.png" alt="bpmn business rule task"/></div></div><p>
					When a process reaches a business rule task defined by a DMN model, the process engine executes the DMN model decision with the inputs provided.
				</p><p>
					When a process reaches a business rule task defined by a rule flow group, the process engine begins executing the rules in the defined rule flow group. When there are no more active rules in the rule flow group, the execution continues to the next element. During the rule flow group execution, new activations belonging to the active rule flow group can be added to the agenda because these activations are changed by other rules.
				</p><div class="formalpara"><p class="title"><strong>Script task</strong></p><p>
						A script task represents a script to be executed during the process execution.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-script-task.png" alt="bpmn script task"/></div></div><p>
					The associated script can access process variables and global variables. Review the following list before using a script task:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Avoid low-level implementation details in the process. A script task can be used to manipulate variables, but consider using a service task or a custom task when modelling more complex operations.
						</li><li class="listitem">
							Ensure that the script is executed immediately, otherwise use an asynchronous service task.
						</li><li class="listitem">
							Avoid contacting external services through a script task. Use a service task to model communication with an external service.
						</li><li class="listitem">
							Ensure scripts do not throw exceptions. Runtime exceptions should be caught and managed, for example, inside the script or transformed into signals or errors that can then be handled inside the process.
						</li></ul></div><p>
					When a script task is reached during execution, the script is executed and the outgoing flow is taken.
				</p><div class="formalpara"><p class="title"><strong>User task</strong></p><p>
						User tasks are tasks in the process workflow that cannot be performed automatically by the system and therefore require the intervention of a human user, the actor.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-user-task.png" alt="bpmn user task"/></div></div><p>
					On execution, the User task element is instantiated as a task that appears in the list of tasks of one or more actors. If a User task element defines the <code class="literal">Groups</code> attribute, it is displayed in task lists of all users that are members of the group. Any user who is a member of the group can claim the task.
				</p><p>
					After it is claimed, the task disappears from the task list of the other users.
				</p><p>
					User tasks are implemented as domain-specific tasks and serve as a base for custom tasks.
				</p><div class="formalpara"><p class="title"><strong>Service task</strong></p><p>
						Service tasks are tasks that do not require human interaction. They are completed automatically by an external software service.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-service-task.png" alt="bpmn service task"/></div></div><div class="formalpara"><p class="title"><strong>None task</strong></p><p>
						None tasks are completed on activation. This is a conceptual model only. A none task is never actually executed by an IT system.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-none-task.png" alt="bpmn none task"/></div></div></section><section class="section" id="con_custom-tasks-overview"><div class="titlepage"><div><div><h2 class="title">4.4. BPMN2 custom tasks in process designer</h2></div></div></div><p>
					The BPMN2 specification supports the ability to extend the <code class="literal">bpmn2:task</code> element to create custom tasks in a software implementation. Similar to standard BPMN tasks, custom tasks identify actions to be completed in a business process model, but they also include specialized functionality, such as compatibility with an external service of a specific type (REST, email, or web service) or checkpoint behavior within a process (milestone).
				</p><p>
					Red Hat Process Automation Manager provides the following predefined custom tasks under <span class="strong strong"><strong>Custom Tasks</strong></span> in the BPMN modeler palette:
				</p><div class="table" id="idm140093637027008"><p class="title"><strong>Table 4.10. Supported custom tasks</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093638016848" scope="col">Custom task type</th><th align="left" valign="top" id="idm140093637608704" scope="col">Custom task node</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									Rest
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-rest-custom-task.png" alt="bpmn rest custom task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									Email
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-email-custom-task.png" alt="bpmn email custom task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									Log
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-log-custom-task.png" alt="bpmn log custom task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									WebService
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-webservice-custom-task.png" alt="bpmn webservice custom task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									Milestone
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-milestone.png" alt="bpmn milestone"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									DecisionTask
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-decision-task-custom.png" alt="bpmn decision task custom"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									BusinessRuleTask
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-business-rule-custom-task.png" alt="bpmn business rule custom task"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638016848">
								<p>
									KafkaPublishMessages
								</p>
								</td><td align="left" valign="top" headers="idm140093637608704">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-kafkapublishmessages-task.png" alt="bpmn kafkapublishmessages task"/></span>
								</p>
								</td></tr></tbody></table></div></div><p>
					For more information about enabling or disabling custom tasks in Business Central, see <a class="xref" href="#manage-service-tasks-proc_custom-tasks" title="Chapter 58. Managing custom tasks in Business Central">Chapter 58, <em>Managing custom tasks in Business Central</em></a>.
				</p><p>
					In the BPMN modeler, you can configure the following general properties for a selected custom task:
				</p><div class="table" id="idm140093638613472"><p class="title"><strong>Table 4.11. General custom task properties</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093645052336" scope="col">Label</th><th align="left" valign="top" id="idm140093645051248" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>Name</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Identifies the name of the task. You can also double-click the task node to edit the name.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>Documentation</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Describes the task. The text in this field is included in the process documentation, if applicable.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>Is Async</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Determines whether this task is invoked asynchronously.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>AdHoc Autostart</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Determines whether this is an ad hoc task that is started automatically. This option enables the task to automatically start when the process is created instead of being started by a signal event.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>On Entry Action</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Defines a Java, JavaScript, or MVEL script that directs an action at the start of the task.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>On Exit Action</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Defines a Java, JavaScript, or MVEL script that directs an action at the end of the task.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>SLA Due Date</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Specifies the duration (string type) when the service level agreement (SLA) expires. You can specify the duration in days, minutes, seconds, and milliseconds. For example, <code class="literal">1m</code> value in <span class="strong strong"><strong>SLA due date</strong></span> field indicates one minute.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093645052336">
								<p>
									<span class="strong strong"><strong>Assignments</strong></span>
								</p>
								</td><td align="left" valign="top" headers="idm140093645051248">
								<p>
									Defines data input and output for the task.
								</p>
								</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Rest</strong></p><p>
						A rest custom task is used to invoke a remote RESTful service or perform an HTTP request from a process.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-rest-custom-task.png" alt="bpmn rest custom task"/></div></div><p>
					To use the rest custom task, you can set the URL, HTTP method, and credentials in the process modeler. When a process reaches a rest custom task, it generates an HTTP request and returns the response as a string.
				</p><p>
					You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>REST Data I/O</strong></span> window. In the <span class="strong strong"><strong>REST Data I/O</strong></span> window, you can configure the data input and output as required. For example, to execute a rest custom task, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Url</strong></span>: Endpoint URL for the REST service. This attribute is mandatory.
						</li><li class="listitem">
							<span class="strong strong"><strong>Method</strong></span>: Method of the endpoint called, such as <code class="literal">GET</code>, and <code class="literal">POST</code>. The default value is <code class="literal">GET</code>.
						</li><li class="listitem">
							<span class="strong strong"><strong>ContentType</strong></span>: Data type when sending data. This attribute is mandatory for <code class="literal">POST</code> and <code class="literal">PUT</code> requests.
						</li><li class="listitem">
							<span class="strong strong"><strong>ContentTypeCharset</strong></span>: Character set for the <code class="literal">ContentType</code>.
						</li><li class="listitem">
							<span class="strong strong"><strong>Content</strong></span>: Data you want to send. This attribute supports backward compatibility, use the <span class="strong strong"><strong>ContentData</strong></span> attribute instead.
						</li><li class="listitem">
							<span class="strong strong"><strong>ContentData</strong></span>: Data you want to send. This attribute is mandatory for <code class="literal">POST</code> and <code class="literal">PUT</code> requests.
						</li><li class="listitem">
							<span class="strong strong"><strong>ConnectTimeout</strong></span>: Connection timeout (in seconds). The default value is 60 seconds.
						</li><li class="listitem">
							<span class="strong strong"><strong>ReadTimeout</strong></span>: Timeout (in seconds) on response. The default value is 60 seconds.
						</li><li class="listitem">
							<span class="strong strong"><strong>Username</strong></span>: User name for authentication.
						</li><li class="listitem">
							<span class="strong strong"><strong>Password</strong></span>: Password for authentication.
						</li><li class="listitem">
							<span class="strong strong"><strong>AuthUrl</strong></span>: URL that is handling authentication.
						</li><li class="listitem">
							<span class="strong strong"><strong>AuthType</strong></span>: Type of URL that is handling authentication.
						</li><li class="listitem">
							<span class="strong strong"><strong>HandleResponseErrors</strong></span> (Optional): Instructs handler to throw errors in case of an unsuccessful response codes (except 2XX).
						</li><li class="listitem">
							<span class="strong strong"><strong>ResultClass</strong></span>: Valid name of the class to which the response is unmarshalled. If not provided, then the raw response is returned in a string format.
						</li><li class="listitem">
							<span class="strong strong"><strong>AcceptHeader</strong></span>: Value of the accept header.
						</li><li class="listitem">
							<span class="strong strong"><strong>AcceptCharset</strong></span>: Character set of the accept header.
						</li><li class="listitem">
							<span class="strong strong"><strong>Headers</strong></span>: Headers to pass for REST call, such as <code class="literal">content-type=text/html</code>.
						</li></ul></div><p>
					You can add the following data output in <span class="strong strong"><strong>Data Outputs and Assignments</strong></span> to store the output of the task execution:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Result</strong></span>: Output variable (object type) of the rest custom task.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Email</strong></p><p>
						An email custom task is used to send an email from a process. It contains email body associated with it.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-email-custom-task.png" alt="bpmn email custom task"/></div></div><p>
					When an email custom task is activated, the email data is assigned to the data input property of the task. An email custom task completes when the associated email is sent.
				</p><p>
					You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>Email Data I/O</strong></span> window. In the <span class="strong strong"><strong>Email Data I/O</strong></span> window, you can configure the data input as required. For example, to execute an email custom task, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Body</strong></span>: Body of the email.
						</li><li class="listitem">
							<span class="strong strong"><strong>From</strong></span>: Email address of the sender.
						</li><li class="listitem">
							<span class="strong strong"><strong>Subject</strong></span>: Subject of the email.
						</li><li class="listitem">
							<span class="strong strong"><strong>To</strong></span>: Email address of the recipient. You can specify multiple email addresses separated by semicolon (;).
						</li><li class="listitem">
							<span class="strong strong"><strong>Template</strong></span> (Optional): Template to generate body of the email. The <code class="literal">Template</code> attribute overrides the <code class="literal">Body</code> parameter, if entered.
						</li><li class="listitem">
							<span class="strong strong"><strong>Reply-To</strong></span>: Email address to which reply message is sent.
						</li><li class="listitem">
							<span class="strong strong"><strong>Cc</strong></span>: Email address of the copied recipient. You can specify multiple email addresses separated by semicolon (;).
						</li><li class="listitem">
							<span class="strong strong"><strong>Bcc</strong></span>: Email address of the blind copied recipient. You can specify multiple email addresses separated by semicolon (;).
						</li><li class="listitem">
							<span class="strong strong"><strong>Attachments</strong></span>: Email attachment to send along with the email.
						</li><li class="listitem">
							<span class="strong strong"><strong>Debug</strong></span>: Flag to enable the debug logging.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Log</strong></p><p>
						A log custom task is used to log a message from a process. When a business process reaches a log custom task, the message data is assigned to the data input property.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-log-custom-task.png" alt="bpmn log custom task"/></div></div><p>
					A log custom task completes when the associated message is logged. You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>Log Data I/O</strong></span> window. In the <span class="strong strong"><strong>Log Data I/O</strong></span> window, you can configure the data input as required. For example, to execute a log custom task, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Message</strong></span>: Log message from the process.
						</li></ul></div><div class="formalpara"><p class="title"><strong>WebService</strong></p><p>
						A web service custom task is used to invoke a web service from a process. This custom task serves as a web service client with the web service response stored as a string.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-webservice-custom-task.png" alt="bpmn webservice custom task"/></div></div><p>
					To invoke a web service from a process, you must use the correct task type. You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>WS Data I/O</strong></span> window. In the <span class="strong strong"><strong>WS Data I/O</strong></span> window, you can configure the data input and output as required. For example, to execute a web service task, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Endpoint</strong></span>: Endpoint location of the web service to invoke.
						</li><li class="listitem">
							<span class="strong strong"><strong>Interface</strong></span>: Name of a service, such as <code class="literal">Weather</code>.
						</li><li class="listitem">
							<span class="strong strong"><strong>Mode</strong></span>: Mode of a service, such as <code class="literal">SYNC</code>, <code class="literal">ASYNC</code>, or <code class="literal">ONEWAY</code>.
						</li><li class="listitem">
							<span class="strong strong"><strong>Namespace</strong></span>: Namespace of the web service, such as <code class="literal"><a class="link" href="http://ws.cdyne.com/WeatherWS/">http://ws.cdyne.com/WeatherWS/</a></code>.
						</li><li class="listitem">
							<span class="strong strong"><strong>Operation</strong></span>: Method name to call.
						</li><li class="listitem">
							<span class="strong strong"><strong>Parameter</strong></span>: Object or array to be sent for the operation.
						</li><li class="listitem">
							<span class="strong strong"><strong>Url</strong></span>: URL of the web service, such as <code class="literal"><a class="link" href="http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL">http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL</a></code>.
						</li></ul></div><p>
					You can add the following data output in <span class="strong strong"><strong>Data Outputs and Assignments</strong></span> to store the output of the task execution:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Result</strong></span>: Output variable (object type) of the web service task.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Milestone</strong></p><p>
						A milestone represents a single point of achievement within a process instance. You can use milestones to flag certain events to trigger other tasks or track the progress of the process.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-milestone.png" alt="bpmn milestone"/></div></div><p>
					Milestones are useful for Key Performance Indicator (KPI) tracking or for identifying the tasks that are still to be completed. Milestones can occur at the end of a stage in a process or they can be the result of achieving other milestones.
				</p><p>
					Milestones can reach the following states during process execution:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">Active</code>: A milestone condition has been defined for the milestone node but it has not been met.
						</li><li class="listitem">
							<code class="literal">Completed</code>: A milestone condition has been met (if applicable), the milestone has been achieved, and the process can proceed to the next task or can end.
						</li></ul></div><p>
					You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>Milestone Data I/O</strong></span> window. In the <span class="strong strong"><strong>Milestone Data I/O</strong></span> window, you can configure the data input as required. For example, to execute a milestone, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Condition</strong></span>: Condition for the milestone to meet. For example, you can enter a Java expression (string data type) that uses a process variable.
						</li></ul></div><div class="formalpara"><p class="title"><strong>DecisionTask</strong></p><p>
						A decision task is used to execute a DMN diagram and invoke a decision engine service from a process. By default, a decision task maps to the DMN decision.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-decision-task-custom.png" alt="bpmn decision task custom"/></div></div><p>
					You can use decision tasks to make an operational decision in a process. Decision tasks are useful for identifying key decisions in a process that need to be made.
				</p><p>
					You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>Decision Task Data I/O</strong></span> window. In the <span class="strong strong"><strong>Decision Task Data I/O</strong></span> window, you can configure the data input as required. For example, to execute a decision task, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Decision</strong></span>: Decision for a process to make.
						</li><li class="listitem">
							<span class="strong strong"><strong>Language</strong></span>: Language of the decision task, defaults to DMN.
						</li><li class="listitem">
							<span class="strong strong"><strong>Model</strong></span>: Name of the DMN model.
						</li><li class="listitem">
							<span class="strong strong"><strong>Namespace</strong></span>: Namespace of the DMN model.
						</li></ul></div><div class="formalpara"><p class="title"><strong>BusinessRuleTask</strong></p><p>
						A business rule task is used to evaluate a DRL rule and invoke a decision engine service from a process. By default, a business rule task maps to the DRL rules.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-business-rule-custom-task.png" alt="bpmn business rule custom task"/></div></div><p>
					You can use business rule tasks to evaluate key business rules in a business process. You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>Business Rule Task Data I/O</strong></span> window. In the <span class="strong strong"><strong>Business Rule Task Data I/O</strong></span> window, you can configure the data input as required. For example, to execute a business rule task, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>KieSessionName</strong></span>: Name of the KIE session.
						</li><li class="listitem">
							<span class="strong strong"><strong>KieSessionType</strong></span>: Type of the KIE session.
						</li><li class="listitem">
							<span class="strong strong"><strong>Language</strong></span>: Language of the business rule task, defaults to DRL.
						</li></ul></div><div class="formalpara"><p class="title"><strong>KafkaPublishMessages</strong></p><p>
						A Kafka work item is used to send events to a Kafka topic. This custom task includes a work item handler, which uses the Kafka producer to send messages to a specific Kafka server topic. For example, <code class="literal">KafkaPublishMessages</code> task publishes messages from a process to a Kafka topic.
					</p></div><div class="informalfigure"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-kafkapublishmessages-task.png" alt="bpmn kafkapublishmessages task"/></div></div><p>
					You can click <span class="strong strong"><strong>Assignments</strong></span> in the <span class="strong strong"><strong>Properties</strong></span> panel to open the <span class="strong strong"><strong>KafkaPublishMessages Data I/O</strong></span> window. In the <span class="strong strong"><strong>KafkaPublishMessages Data I/O</strong></span> window, you can configure the data input and output as required. For example, to execute a Kafka work item, enter the following data inputs in <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Key</strong></span>: Key of the Kafka message to be sent.
						</li><li class="listitem">
							<span class="strong strong"><strong>Topic</strong></span>: Name of a Kafka topic.
						</li><li class="listitem">
							<span class="strong strong"><strong>Value</strong></span>: Value of the Kafka message to be sent.
						</li></ul></div><p>
					You can add the following data output in <span class="strong strong"><strong>Data Outputs and Assignments</strong></span> to store the output of the work item execution:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Result</strong></span>: Output variable (string type) of the work item.
						</li></ul></div></section><section class="section" id="bpmn-subprocesses-ref_business-processes"><div class="titlepage"><div><div><h2 class="title">4.5. BPMN2 subprocesses in process designer</h2></div></div></div><p>
					A subprocess is an activity that contains nodes. You can embed part of the main process within a subprocess. You can also include variable definitions within the subprocess. These variables are accessible to all nodes inside the subprocess.
				</p><p>
					A subprocess must have at least one incoming connection and one outgoing connection. A terminate end event inside a subprocess ends the subprocess instance but does not automatically end the parent process instance. A subprocess ends when there are no more active elements in it.
				</p><p>
					The following subprocess types are supported in Red Hat Process Automation Manager:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Embedded subprocess: A subprocess that is a part of the parent process execution and shares the parent process data, along with declaring its own local subprocess variables.
						</li><li class="listitem">
							Ad hoc subprocess: A subprocess that has no strict element execution order.
						</li><li class="listitem">
							Reusable subprocess: A subprocess that is independent of its parent process.
						</li><li class="listitem">
							Event subprocess: A subprocess that is only triggered on a start event or a timer.
						</li><li class="listitem">
							Multi-instance subprocess: A subprocess that is instantiated multiple times.
						</li></ul></div><p>
					In the following example, the Place order subprocess checks whether sufficient stock is available to place the order and updates the stock information if the order can be placed. The customer is then notified through the main process based on whether or not the order was placed.
				</p><p>
					<span class="inlinemediaobject"><img src="images/_images/BPMN2/subprocess.png" alt="subprocess"/></span>
				</p><div class="formalpara"><p class="title"><strong>Embedded subprocess</strong></p><p>
						An embedded subprocess encapsulates a part of the process. It must contain a start event and at least one end event. Note that the element enables you to define local subprocess variables that are accessible to all elements inside this container.
					</p></div><div id="adhoc_sub_process" class="formalpara"><p class="title"><strong>AdHoc subprocess</strong></p><p>
						An ad hoc subprocess or process contains a number of embedded inner activities and is intended to be executed with a more flexible ordering compared to the typical process flow. Unlike regular processes, an ad hoc subprocess does not contain a complete, structured BPMN2 diagram description, for example, from start event to end event. Instead, the ad hoc subprocess contains only activities, sequence flows, gateways, and intermediate events. An ad hoc subprocess can also contain data objects and data associations. The activities within the ad hoc subprocesses are not required to have incoming and outgoing sequence flows. However, you can specify sequence flows between some of the contained activities. When used, sequence flows provide the same ordering constraints as in a regular process. To have any meaning, intermediate events must have outgoing sequence flows and they can be triggered multiple times while the ad hoc subprocess is active.
					</p></div><div class="formalpara"><p class="title"><strong>Reusable subprocess</strong></p><p>
						Reusable subprocesses appear collapsed within the parent process. To configure a reusable subprocess, select the reusable subprocess, click 
						<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
						, and expand <span class="strong strong"><strong>Implementation/Execution</strong></span>. Set the following properties:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Called Element</strong></span>: The ID of the subprocess that the activity calls and instantiates.
						</li><li class="listitem">
							<span class="strong strong"><strong>Independent</strong></span>: If selected, the subprocess is started as an independent process. If not selected, the active subprocess is canceled when the parent process is terminated.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Abort Parent</strong></span>: If selected, non-independent reusable subprocesses can abort the parent process when there is an error during the execution of the called process instance. For example, when there’s an error when trying to invoke the subprocess or when the subprocess instance is aborted. This property is visible only when the <span class="strong strong"><strong>Independent</strong></span> property is not selected. The following rules apply:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									If the reusable subprocess is independent, <span class="strong strong"><strong>Abort parent</strong></span> is not available.
								</li><li class="listitem">
									If the reusable subprocess is not independent, <span class="strong strong"><strong>Abort parent</strong></span> is available.
								</li></ul></div></li><li class="listitem">
							<span class="strong strong"><strong>Wait for completion</strong></span>: If selected, the specified <span class="strong strong"><strong>On Exit Action</strong></span> is not performed until the called subprocess instance is terminated. The parent process execution continues when the <span class="strong strong"><strong>On Exit Action</strong></span> completes. This property is selected (set to <code class="literal">true</code>) by default.
						</li><li class="listitem">
							<span class="strong strong"><strong>Is Async</strong></span>: Select if the task should be invoked asynchronously and cannot be executed instantly.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Multiple Instance</strong></span>: Select to execute the subprocess elements a specified number of times. If selected, the following options are available:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong>MI Execution mode</strong></span>: Indicates if the multiple instances execute in parallel or sequentially. If set to <span class="strong strong"><strong>Sequential</strong></span>, new instances are not created until the previous instance completes.
								</li><li class="listitem">
									<span class="strong strong"><strong>MI Collection input</strong></span>: Select a variable that represents a collection of elements for which new instances are created. The subprocess is instantiated as many times as the size of the collection.
								</li><li class="listitem">
									<span class="strong strong"><strong>MI Data Input</strong></span>: Specifies the name of the variable containing the selected element in the collection. The variable is used to access elements in the collection.
								</li><li class="listitem">
									<span class="strong strong"><strong>MI Collection output</strong></span>: Optional variable that represents the collection of elements that will gather the output of the multi-instance node.
								</li><li class="listitem">
									<span class="strong strong"><strong>MI Data Output</strong></span>: Specifies the name of the variable that is added to the output collection that you selected in the <span class="strong strong"><strong>MI Collection output</strong></span> property.
								</li><li class="listitem">
									<span class="strong strong"><strong>MI Completion Condition (mvel)</strong></span>: MVEL expression that is evaluated on each completed instance to check if the specified multiple instance node can complete. If it evaluates to <code class="literal">true</code>, all remaining instances are canceled.
								</li></ul></div></li><li class="listitem">
							<span class="strong strong"><strong>On Entry Action</strong></span>: A Java or MVEL script that specifies an action at the start of the task.
						</li><li class="listitem">
							<span class="strong strong"><strong>On Exit Action</strong></span>: A Java or MVEL script that specifies an action at the end of the task.
						</li><li class="listitem">
							<span class="strong strong"><strong>SLA Due Date</strong></span>: The date that the service level agreement (SLA) expires. You can specify the duration in days, minutes, seconds, and milliseconds. For example, <code class="literal">1m</code> value in SLA due date field indicates one minute.
						</li></ul></div><div class="figure" id="idm140093639920544"><p class="title"><strong>Figure 4.1. Reusable subprocess properties</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/BPMN2/subproc-props.png" alt="A screenshot of Subprocess properties"/></div></div></div><div id="event_sub_process" class="formalpara"><p class="title"><strong>Event subprocess</strong></p><p>
						An event subprocess becomes active when its start event is triggered. It can interrupt the parent process context or run in parallel with it.
					</p></div><p>
					With no outgoing or incoming connections, only an event or a timer can trigger the subprocess. The subprocess is not part of the regular control flow. Although self-contained, it is executed in the context of the bounding process.
				</p><p>
					Use an event subprocess within a process flow to handle events that happen outside of the main process flow. For example, while booking a flight, two events may occur:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Cancel booking (interrupting)
						</li><li class="listitem">
							Check booking status (non-interrupting)
						</li></ul></div><p>
					You can model both of these events using the event subprocess.
				</p><div id="multiple_instances" class="formalpara"><p class="title"><strong>Multiple instance subprocess</strong></p><p>
						A multiple instances subprocess is instantiated multiple times when its execution is triggered. The instances are created sequentially or parallelly. If you set the sequential mode, a new subprocess instance is created only after the previous instance has finished. However, when you set the parallel mode, all the subprocess instances are created at once.
					</p></div><p>
					A multiple instances subprocess has one incoming connection and one outgoing connection.
				</p></section><section class="section" id="bpmn-gateways_business-processes"><div class="titlepage"><div><div><h2 class="title">4.6. BPMN2 gateways in process designer</h2></div></div></div><p>
					Gateways are used to create or synchronize branches in the workflow using a set of conditions called the gating mechanism. BPMN2 supports two types of gateways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Converging gateways, merging multiple flows into one flow
						</li><li class="listitem">
							Diverging gateways, splitting one flow into multiple flows
						</li></ul></div><p>
					One gateway cannot have multiple incoming and multiple outgoing flows.
				</p><p>
					In the following business process diagram, the XOR gateway evaluates only the incoming flow whose condition evaluates to true: 
					<span class="inlinemediaobject"><img src="images/_images/BPMN2/gateway.png" alt="gateway"/></span>
				</p><p>
					In this example, the customer details are verified by a user and the process is assigned to a user for approval. If approved, an approval notification is sent to the user. If the event of the request is rejected, a rejection notification is sent to the user.
				</p><div class="table" id="idm140093635361488"><p class="title"><strong>Table 4.12. Gateway elements</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093643387536" scope="col">Element type</th><th align="left" valign="top" id="idm140093643386448" scope="col">Icon</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093643387536">
								<p>
									exclusive (XOR)
								</p>
								</td><td align="left" valign="top" headers="idm140093643386448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-gateway-exclusive.png" alt="bpmn gateway exclusive"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093643387536">
								<p>
									Inclusive
								</p>
								</td><td align="left" valign="top" headers="idm140093643386448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-gateway-inclusive.png" alt="bpmn gateway inclusive"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093643387536">
								<p>
									Parallel
								</p>
								</td><td align="left" valign="top" headers="idm140093643386448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-gateway-parallel.png" alt="bpmn gateway parallel"/></span>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093643387536">
								<p>
									Event
								</p>
								</td><td align="left" valign="top" headers="idm140093643386448">
								<p>
									<span class="inlinemediaobject"><img src="images/_images/BPMN2/bpmn-gateway-event.png" alt="bpmn gateway event"/></span>
								</p>
								</td></tr></tbody></table></div></div><div id="exclusive_gateway" class="formalpara"><p class="title"><strong>Exclusive</strong></p><p>
						In an exclusive diverging gateway, only the first incoming flow whose condition evaluates to true is chosen. In a converging gateway, the next node is triggered for each triggered incoming flow.
					</p></div><p>
					The gateway triggers exactly one outgoing flow. The flow with the constraint evaluated to true and the <span class="emphasis"><em>lowest</em></span> priority number is taken.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Ensure that at least one of the outgoing flows evaluates to true at run time. Otherwise, the process instance terminates with a runtime exception.
					</p></div></div><p>
					The converging gateway enables a workflow branch to continue to its outgoing flow as soon as it reaches the gateway. When one of the incoming flows triggers the gateway, the workflow continues to the outgoing flow of the gateway. If it is triggered from more than one incoming flow, it triggers the next node for each trigger.
				</p><div id="inclusive_gateway" class="formalpara"><p class="title"><strong>Inclusive</strong></p><p>
						With an inclusive diverging gateway, the incoming flow is taken and all outgoing flows that evaluate to true are taken. Connections with lower priority numbers are triggered before triggering higher priority connections. Priorities are evaluated but the BPMN2 specification does not guarantee the priority order. Avoid depending on the <code class="literal">priority</code> attribute in your workflow.
					</p></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Ensure that at least one of the outgoing flows evaluates to true at run time. Otherwise, the process instance terminates with a runtime exception.
					</p></div></div><p>
					A converging inclusive gateway merges all incoming flows previously created by an inclusive diverging gateway. It acts as a synchronizing entry point for the inclusive gateway branches.
				</p><div class="formalpara"><p class="title"><strong>Parallel</strong></p><p>
						Use a parallel gateway to synchronize and create parallel flows. With a parallel diverging gateway, the incoming flow is taken, all outgoing flows are taken simultaneously. With a converging parallel gateway, the gateway waits until all incoming flows have entered and only then triggers the outgoing flow.
					</p></div><div id="event_based_gateway" class="formalpara"><p class="title"><strong>Event</strong></p><p>
						An event-based gateway is only diverging and enables you to react to possible events as opposed to the data-based exclusive gateway, which reacts to the process data. The outgoing flow is taken based on the event that occurs. Only one outgoing flow is taken at a time. The gateway might act as a start event, where the process is instantiated only if one of the intermediate events connected to the event-based gateway occurs.
					</p></div></section><section class="section" id="bpmn-connecting-ref_business-processes"><div class="titlepage"><div><div><h2 class="title">4.7. BPMN2 connecting objects in process designer</h2></div></div></div><p>
					Connecting objects create an association between two BPMN2 elements. When a connecting object is directed, the association is sequential and indicates that one of the elements is executed immediately before the other, within an instance of the process. Connecting objects can start and end at the top, bottom, right, or left of the process elements being associated. The OMG BPMN2 specification allows you to use your discretion, placing connecting objects in a way that makes the process behavior easy to understand and follow.
				</p><p>
					BPMN2 supports two main types of connecting objects:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Sequence flows: Connect elements of a process and define the order in which those elements are executed within an instance.
						</li><li class="listitem">
							Association flows: Connect the elements of a process without execution semantics. Association flows can be undirected or unidirectional.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The new process designer supports only undirected association flows. The legacy designer supports one direction and Unidirection flows.
					</p></div></div></section><section class="section" id="bpmn-lanes-proc_business-processes"><div class="titlepage"><div><div><h2 class="title">4.8. BPMN2 swimlanes in process designer</h2></div></div></div><p>
					Swimlanes are process elements that visually group tasks related to one group or user. You can use user tasks in combination with swimlanes to assign multiple user tasks to the same actor, due to <code class="literal">Autoclaim</code> property of the swimlanes. When a potential owner of a group claims the first task in a swimlane, then other tasks are directly assigned to the same owner. Therefore, the claim for other tasks is not needed by the remaining owners of the group. The <code class="literal">Autoclaim</code> property enables the auto-assignment of the tasks that are related to a swimlane.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If the remaining user tasks in a swimlane contain multiple predefined <code class="literal">ActorIds</code>, then the user tasks are not assigned automatically.
					</p></div></div><p>
					In the following example, an analyst lane consists of two user tasks: 
					<span class="inlinemediaobject"><img src="images/_images/BPMN2/swimlane.png" alt="swimlane"/></span>
				</p><p>
					The <span class="strong strong"><strong>Group</strong></span> field in the <span class="emphasis"><em>Update Customer Details</em></span> and <span class="emphasis"><em>Resolve Customer Issue</em></span> tasks contain the value <code class="literal">analyst</code>. When the process is started, and the <span class="emphasis"><em>Update Customer Details</em></span> task is claimed, started, or completed by an analyst, and the <span class="emphasis"><em>Resolve Customer Issue</em></span> task is claimed and assigned to the user who completed the first task. However, if only the <span class="emphasis"><em>Update Customer Details</em></span> task contains the analyst group assigned, and the second task contains no user or group assignments, and the process stops after the first task completes.
				</p><p>
					You can disable the <code class="literal">Autoclaim</code> property of the swimlanes. If the <code class="literal">Autoclaim</code> property is disabled, then the tasks related to a swimlane are not assigned automatically. By default, the value of <code class="literal">Autoclaim</code> property is set as <code class="literal">true</code>. If needed, you can also change the default value for the <code class="literal">Autoclaim</code> property from project settings in Business Central or using the deployment descriptor file.
				</p><p>
					To change the default value of <code class="literal">Autoclaim</code> property of swimlanes in Business Central:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to project <span class="strong strong"><strong>Settings</strong></span>.
						</li><li class="listitem">
							Open <span class="strong strong"><strong>Deployment → Environment entries</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Enter the following values in the given fields:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - <code class="literal">Autoclaim</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Value</strong></span> - <code class="literal">"false”</code>
								</li></ul></div></li></ol></div><p>
					If you want to set the environment entry in the XML deployment descriptor, add the following code to the <code class="literal">kie-deployment-descriptor.xml</code> file:
				</p><pre class="programlisting language-xml">&lt;environment-entries&gt;
  ..
    &lt;environment-entry&gt;
        &lt;resolver&gt;mvel&lt;/resolver&gt;
        &lt;identifier&gt;new String ("false")&lt;/identifier&gt;
        &lt;parameters/&gt;
        &lt;name&gt;Autoclaim&lt;/name&gt;
    &lt;/environment-entry&gt;
  ..
&lt;/environment-entries&gt;</pre></section><section class="section" id="bpmn-artifacts_business-processes"><div class="titlepage"><div><div><h2 class="title">4.9. BPMN2 artifacts in process designer</h2></div></div></div><p>
					Artifacts are used to provide additional information about a process. An artifact is any object depicted in the BPMN2 diagram that is not part of the process workflow. Artifacts have no incoming or outgoing flow objects.The purpose of artifacts is to provide additional information required to understand the diagram. The artifacts table lists the artifacts supported in the legacy process designer.
				</p><div class="table" id="idm140093637896128"><p class="title"><strong>Table 4.13. Artifacts</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093638544832" scope="col">Artifact type</th><th align="left" valign="top" id="idm140093638543744" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093638544832">
								<p>
									Group
								</p>
								</td><td align="left" valign="top" headers="idm140093638543744">
								<p>
									Organizes tasks or processes that have significance in the overall process. Group artifacts are not supported in the new process designer.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638544832">
								<p>
									Text annotation
								</p>
								</td><td align="left" valign="top" headers="idm140093638543744">
								<p>
									Provides additional textual information for the BPMN2 diagram.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093638544832">
								<p>
									Data object
								</p>
								</td><td align="left" valign="top" headers="idm140093638543744">
								<p>
									Displays the data flowing through a process in the BPMN2 diagram.
								</p>
								</td></tr></tbody></table></div></div><section class="section" id="proc-create-process-data-object_business-processes"><div class="titlepage"><div><div><h3 class="title">4.9.1. Creating data object</h3></div></div></div><p>
						Data objects represent, for example, documents used in a process in physical and digital form. Data objects appear as a page with a folded top right corner. The following procedure is a generic overview of creating a data object.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In Red Hat Process Automation Manager 7.10.0, limited support for data objects is provided that excludes support for data inputs, data outputs, and associations.
						</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Create a business process.
							</li><li class="listitem">
								In the process designer, select the <span class="strong strong"><strong>Artifacts → Data Object</strong></span> from the tool palette.
							</li><li class="listitem">
								Either drag and drop a data object onto the process designer canvas or click a blank area of the canvas.
							</li><li class="listitem">
								If necessary, in the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
							</li><li class="listitem"><p class="simpara">
								Add or define the data object information listed in the following table as required.
							</p><div class="table" id="idm140093638074560"><p class="title"><strong>Table 4.14. Data object parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093634194656" scope="col">Label</th><th align="left" valign="top" id="idm140093634193568" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093634194656">
											<p>
												<span class="strong strong"><strong>Name</strong></span>
											</p>
											</td><td align="left" valign="top" headers="idm140093634193568">
											<p>
												The name of the data object. You can also double-click the data object shape to edit the name.
											</p>
											</td></tr><tr><td align="left" valign="top" headers="idm140093634194656">
											<p>
												<span class="strong strong"><strong>Type</strong></span>
											</p>
											</td><td align="left" valign="top" headers="idm140093634193568">
											<p>
												Select a type of the data object.
											</p>
											</td></tr></tbody></table></div></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></section></section></section><section class="chapter" id="design-bus-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Creating a business process in Business Central</h2></div></div></div><p>
				The process designer is the Red Hat Process Automation Manager process modeler. The output of the modeler is a BPMN 2.0 process definition file. The definition is used as input for the Red Hat Process Automation Manager process engine, which creates a process instance based on the definition.
			</p><p>
				The procedures in this section provide a general overview of how to create a simple business process. For a more detailed business process example, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-process-services"><span class="emphasis"><em>Getting started with business processes</em></span></a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created or imported a Red Hat Process Automation Manager project. For more information about creating projects, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/deploying_and_managing_red_hat_process_automation_manager_services#assembly-managing-projects"><span class="emphasis"><em>Managing projects in Business Central</em></span></a>.
					</li><li class="listitem">
						You have created the required users. User privileges and settings are controlled by the roles assigned to a user and the groups that a user belongs to. For more information about creating users, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#eap-users-create-proc_install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
					</li><li class="listitem">
						Click the project name to open the project’s asset list.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add Asset → Business Process</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Create new Business Process</strong></span> wizard, enter the following values:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Business Process</strong></span>: New business process name
							</li><li class="listitem">
								<span class="strong strong"><strong>Package</strong></span>: Package location for your new business process, for example <code class="literal">com.myspace.myProject</code>
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Ok</strong></span> to open the process designer.
					</li><li class="listitem"><p class="simpara">
						In the upper-right corner, click the <span class="strong strong"><strong>Properties</strong></span> <span class="inlinemediaobject"><img src="images/_images/processes/diagram_properties.png" alt="diagram properties"/></span>
						 icon and add your business process property information, such as process data and variables:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Scroll down and expand <span class="strong strong"><strong>Process Data</strong></span>.
							</li><li class="listitem">
								Click 
								<span class="inlinemediaobject"><img src="images/_images/processes/btn_plus.png" alt="btn plus"/></span>
								 next to <span class="strong strong"><strong>Process Variables</strong></span> and define the process variables that you want to use in your business process.
							</li></ol></div><div class="table" id="idm140093641611168"><p class="title"><strong>Table 5.1. General process properties</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093639784640" scope="col">Label</th><th align="left" valign="top" id="idm140093639783552" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Name</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Enter the name of the process.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Documentation</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Describes the process. The text in this field is included in the process documentation, if applicable.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>ID</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Enter an identifier for this process, such as <code class="literal">orderItems</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Package</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Enter the package location for this process in your Red Hat Process Automation Manager project, such as <code class="literal">org.acme</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>ProcessType</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Specify whether the process is public or private (or null, if not applicable).
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Version</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Enter the artifact version for the process.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Ad hoc</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Select this option if this process is an ad hoc subprocess.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Process Instance Description</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Enter a description of the purpose of the process.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Imports</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Click to open the <span class="strong strong"><strong>Imports</strong></span> window and add any data object classes required for your process.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Executable</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Select this option to make the process executable part of your Red Hat Process Automation Manager project.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>SLA Due Date</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Enter the service level agreement (SLA) expiration date.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Process Variables</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Add any process variables for the process. Process variables are visible within the specific process instance. Process variables are initialized at process creation and destroyed on process completion. Variable <span class="strong strong"><strong>Tags</strong></span> provide greater control over variable behavior, for example whether the variable is <code class="literal">required</code> or <code class="literal">readonly</code>. For more information about variable tags, see <a class="xref" href="#variables-con_business-processes" title="Chapter 6. Variables">Chapter 6, <em>Variables</em></a>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Metadata Attributes</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Add any custom metadata attribute name and value that you want to use for custom event listeners, such as a listener to implement some action when a metadata attribute is present.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093639784640">
									<p>
										<span class="strong strong"><strong>Global Variables</strong></span>
									</p>
									</td><td align="left" valign="top" headers="idm140093639783552">
									<p>
										Add any global variables for the process. Global variables are visible to all process instances and assets in a project. Global variables are typically used by business rules and constraints, and are created dynamically by the rules or constraints.
									</p>
									</td></tr></tbody></table></div></div><p class="simpara">
						The <span class="strong strong"><strong>Metadata Attributes</strong></span> entries are similar to <span class="strong strong"><strong>Process Variables</strong></span> tags in that they enable new <code class="literal">metaData</code> extensions to BPMN diagrams. However, process variable tags modify the behavior of specific process variables, such as whether a certain variable is <code class="literal">required</code> or <code class="literal">readonly</code>, whereas metadata attributes are key-value definitions that modify the behavior of the overall process.
					</p><p class="simpara">
						For example, the following custom metadata attribute <code class="literal">riskLevel</code> and value <code class="literal">low</code> in a BPMN process correspond to a custom event listener for starting the process:
					</p><div class="figure" id="idm140093635095904"><p class="title"><strong>Figure 5.1. Example metadata attribute and value in the BPMN modeler</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-metadata-attributes-custom.png" alt="Image of custom metadata attribute and value"/></div></div></div><div class="formalpara"><p class="title"><strong>Example metadata attribute and value in the BPMN file</strong></p><p>
							
<pre class="programlisting language-xml">&lt;bpmn2:process id="approvals" name="approvals" isExecutable="true" processType="Public"&gt;
  &lt;bpmn2:extensionElements&gt;
    &lt;tns:metaData name="riskLevel"&gt;
      &lt;tns:metaValue&gt;&lt;![CDATA[low]]&gt;&lt;/tns:metaValue&gt;
    &lt;/tns:metaData&gt;
  &lt;/bpmn2:extensionElements&gt;</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Example event listener with metadata value</strong></p><p>
							
<pre class="programlisting language-java">public class MyListener implements ProcessEventListener {
    ...
    @Override
    public void beforeProcessStarted(ProcessStartedEvent event) {
        Map &lt; String, Object &gt; metadata = event.getProcessInstance().getProcess().getMetaData();
        if (metadata.containsKey("low")) {
            // Implement some action for that metadata attribute
        }
    }
}</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						In the process designer canvas, use the left toolbar to drag and drop BPMN components to define your business process logic, connections, events, tasks, or other elements.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							A task and event in Red Hat Process Automation Manager expect one incoming and one outgoing flow. If you want to design a business process with multiple incoming and multiple outgoing flows, then consider redesigning the business process using gateways. Using gateways makes the logic apparent, which a sequence flow is executing. Therefore, gateways are considered as a best practice for multiple connections.
						</p><p>
							However, if it is a must to use multiple connections for a task or an event, then you must set the JVM (Java virtual machine) system property <code class="literal">jbpm.enable.multi.con</code> to <code class="literal">true</code>. When Business Central and KIE Server run on different servers, then ensure that both of them contains the <code class="literal">jbpm.enable.multi.con</code> system property as enabled otherwise, the process engine throws an exception.
						</p></div></div></li><li class="listitem">
						After you add and define all components of the business process, click <span class="strong strong"><strong>Save</strong></span> to save the completed business process.
					</li></ol></div><section class="section" id="create-business-rules-task-proc"><div class="titlepage"><div><div><h2 class="title">5.1. Creating business rules tasks</h2></div></div></div><p>
					Business rules tasks are used to make decisions through a Decision Model and Notation (DMN) model or rule flow group.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create a business process.
						</li><li class="listitem">
							In the process designer, select the <span class="strong strong"><strong>Activities</strong></span> tool from the tool palette.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Business Rule</strong></span>.
						</li><li class="listitem">
							Click a blank area of the process designer canvas.
						</li><li class="listitem">
							If necessary, in the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
						</li><li class="listitem"><p class="simpara">
							Add or define the task information listed in the following table as required.
						</p><div class="table" id="idm140093639558496"><p class="title"><strong>Table 5.2. Business rule task parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093639553696" scope="col">Label</th><th align="left" valign="top" id="idm140093639552608" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>Name</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											The name of the business rule task. You can also double-click the business rule task shape to edit the name.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>Rule Language</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											The output language for the task. Select Decision Model and Notation (DMN) or Drools (DRL).
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>Rule Flow Group</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											The rule flow group associated with this business task. Select a rule flow group from the list or specify a new rule flow group.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>On Entry Action</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											A Java, JavaScript, or MVEL script that specifies an action at the start of the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>On Exit Action</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											A Java, JavaScript, or MVEL script that specifies an action at the end of the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>Is Async</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											Select if this task should be invoked asynchronously. Make tasks asynchronous if they cannot be executed instantaneously, for example a task performed by an outside service.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>AdHoc Autostart</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											Select if this is an ad hoc task that should be started automatically. <span class="strong strong"><strong>AdHoc Autostart</strong></span> enables the task to automatically start when the process or case instance is created instead of being starting by a start task. It is often used in case management.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>SLA Due Date</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											The date that the service level agreement (SLA) expires.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093639553696">
										<p>
											<span class="strong strong"><strong>Assignments</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093639552608">
										<p>
											Click to add local variables.
										</p>
										</td></tr></tbody></table></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section><section class="section" id="create-script-task-proc"><div class="titlepage"><div><div><h2 class="title">5.2. Creating script tasks</h2></div></div></div><p>
					Script tasks are used to execute a piece of code written in Java, JavaScript, or MVEL. They contain code snippets that specify the action of the script task. You can include global and process variables in your scripts.
				</p><p>
					Note that MVEL accepts any valid Java code and additionally provides support for nested access of parameters. For example, the MVEL equivalent of the Java call <code class="literal">person.getName()</code> is <code class="literal">person.name</code>. MVEL also provides other improvements over Java and MVEL expressions are generally more convenient for business users.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create a business process.
						</li><li class="listitem">
							In the process designer, select the <span class="strong strong"><strong>Activities</strong></span> tool from the tool palette.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Script</strong></span>.
						</li><li class="listitem">
							Click a blank area of the process designer canvas.
						</li><li class="listitem">
							If necessary, in the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
						</li><li class="listitem"><p class="simpara">
							Add or define the task information listed in the following table as required.
						</p><div class="table" id="idm140093627298720"><p class="title"><strong>Table 5.3. Script task parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093634436992" scope="col">Label</th><th align="left" valign="top" id="idm140093634435904" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093634436992">
										<p>
											<span class="strong strong"><strong>Name</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093634435904">
										<p>
											The name of the script task. You can also double-click the script task shape to edit the name.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093634436992">
										<p>
											<span class="strong strong"><strong>Documentation</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093634435904">
										<p>
											Enter a description of the task. The text in this field is included in the process documentation. Click the <span class="strong strong"><strong>Documentation</strong></span> tab in the upper-left side of the process designer canvas to view the process documentation.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093634436992">
										<p>
											<span class="strong strong"><strong>Script</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093634435904">
										<p>
											Enter a script in Java, JavaScript, or MVEL to be excuted by the task, and select the script type.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093634436992">
										<p>
											<span class="strong strong"><strong>Is Async</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093634435904">
										<p>
											Select if this task should be invoked asynchronously. Make tasks asynchronous if they cannot be executed instantaneously, for example a task performed by an outside service.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093634436992">
										<p>
											<span class="strong strong"><strong>AdHoc Autostart</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093634435904">
										<p>
											Select if this is an ad hoc task that should be started automatically. <span class="strong strong"><strong>AdHoc Autostart</strong></span> enables the task to automatically start when the process or case instance is created instead of being starting by a start task. It is often used in case management.
										</p>
										</td></tr></tbody></table></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section><section class="section" id="create-service-task-proc"><div class="titlepage"><div><div><h2 class="title">5.3. Creating service tasks</h2></div></div></div><p>
					A service task is a task that executes an action based on a web service call or in a Java class method. Examples of service tasks include sending an email and logging a message when these tasks are performed by systems. You can define the parameters (input) and results (output) that are associated with a service task. A Service Task should have one incoming connection and one outgoing connection.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, select the <span class="strong strong"><strong>Admin</strong></span> icon in the top-right corner of the screen and select <span class="strong strong"><strong>Artifacts</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Upload</strong></span> to open the <span class="strong strong"><strong>Artifact upload</strong></span> window.
						</li><li class="listitem"><p class="simpara">
							Choose the <code class="literal">.jar</code> file and click 
							<span class="inlinemediaobject"><img src="images/_images/processes/upload-button.png" alt="upload button"/></span>
							.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The <code class="literal">.jar</code> file contains data types (data objects) and Java classes for web service and Java service tasks respectively.
							</p></div></div></li><li class="listitem">
							Create a project you want to use.
						</li><li class="listitem">
							Go to your project <span class="strong strong"><strong>Settings → Dependencies</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add from repository</strong></span>, locate the uploaded <code class="literal">.jar</code> file, and click <span class="strong strong"><strong>Select</strong></span>.
						</li><li class="listitem">
							Open your project <span class="strong strong"><strong>Settings → Work Item Handler</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Enter the following values in the given fields:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - <code class="literal">Service Task</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Value</strong></span> - <code class="literal">new org.jbpm.process.workitem.bpmn2.ServiceTaskHandler(ksession, classLoader)</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Save the project.
						</p><div class="formalpara"><p class="title"><strong>Example of creating web service task</strong></p><p>
								The default implementation of a service task in the BPMN2 specification is a web service. The web service support is based on the Apache CXF dynamic client, which provides a dedicated service task handler that implements the <code class="literal">WorkItemHandler</code> interface:
							</p></div><p class="simpara">
							<code class="literal">org.jbpm.process.workitem.bpmn2.ServiceTaskHandler</code>
						</p><p class="simpara">
							To create a service task using web service, you must configure the web service:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Create a business process.
								</li><li class="listitem">
									If necessary, in the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
								</li><li class="listitem">
									Click 
									<span class="inlinemediaobject"><img src="images/_images/processes/import-property-icon.png" alt="import property icon"/></span>
									 in the <span class="strong strong"><strong>Imports</strong></span> property to open the <span class="strong strong"><strong>Imports</strong></span> window.
								</li><li class="listitem"><p class="simpara">
									Click <span class="strong strong"><strong>+Add</strong></span> next to the <span class="strong strong"><strong>WSDL Imports</strong></span> to import the required WSDL (Web Services Description Language) values. For example:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Location</strong></span>: <a class="link" href="http://localhost:8080/sample-ws-1/SimpleService?wsdl">http://localhost:8080/sample-ws-1/SimpleService?wsdl</a>
										</p><p class="simpara">
											The location points to the WSDL file of your service.
										</p></li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Namespace</strong></span>: <a class="link" href="http://bpmn2.workitem.process.jbpm.org/">http://bpmn2.workitem.process.jbpm.org/</a>
										</p><p class="simpara">
											The namespace must match <code class="literal">targetNamespace</code> from your WSDL file.
										</p></li></ul></div></li><li class="listitem">
									In the process designer, select the <span class="strong strong"><strong>Activities</strong></span> tool from the tool palette.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Service Task</strong></span>.
								</li><li class="listitem">
									Click a blank area of the process designer canvas.
								</li><li class="listitem"><p class="simpara">
									Add or define the task information listed in the following table as required.
								</p><div class="table" id="idm140093644967504"><p class="title"><strong>Table 5.4. Web service task parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093637509744" scope="col">Label</th><th align="left" valign="top" id="idm140093637508656" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Name</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													The name of the service task. You can also double-click the service task shape to edit the name.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Documentation</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Enter a description of the task. The text in this field is included in the process documentation. Click the <span class="strong strong"><strong>Documentation</strong></span> tab in the upper-left side of the process designer canvas to view the process documentation.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Implementation</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Specify a web service.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Interface</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													The service used to implement the script, such as <code class="literal">CountriesPortService</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Operation</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													The operation that is called by the interface, such as <code class="literal">getCountry</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Assignments</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Click to add local variables.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>AdHoc Autostart</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Select if this is an ad hoc task that should be started automatically. <span class="strong strong"><strong>AdHoc Autostart</strong></span> enables the task to automatically start when the process or case instance is created instead of being starting by a start task. It is often used in case management.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Is Async</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Select if this task should be invoked asynchronously. Make tasks asynchronous if they cannot be executed instantaneously, for example a task performed by an outside service.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>Is Multiple Instance</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Select if this task has multiple instances.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>MI Execution mode</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Select if the multiple instances execute in parallel or sequentially.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>MI Collection input</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Specify a variable that represents a collection of elements for which new instances are created, such as <code class="literal">inputCountryNames</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>MI Data Input</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Specify the input data assignment that is transferred to a web service, such as <code class="literal">Parameter</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>MI Collection output</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													The array list in which values returned from the web service task is stored, such as <code class="literal">outputCountries</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>MI Data Output</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Specify the output data assignment for the web service task, which stores the result of class execution on the server, such as <code class="literal">Result</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>MI Completion Condition (mvel)</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													Specify the MVEL expression that is evaluated on each completed instance to check if the specified multiple instance node can complete.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>On Entry Action</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													A Java, JavaScript, or MVEL script that specifies an action at the start of the task.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>On Exit Action</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													A Java, JavaScript, or MVEL script that specifies an action at the end of the task.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093637509744">
												<p>
													<span class="strong strong"><strong>SLA Due Date</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093637508656">
												<p>
													The date that the service level agreement (SLA) expires.
												</p>
												</td></tr></tbody></table></div></div></li></ol></div><div class="formalpara"><p class="title"><strong>Example of creating Java service task</strong></p><p>
								When you create a service task using Java method, then the method can only contain one parameter and returns a single value. To create a service task using a Java method, you must add the Java class to the dependencies of the project:
							</p></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Create a business process.
								</li><li class="listitem">
									In the process designer, select the <span class="strong strong"><strong>Activities</strong></span> tool from the tool palette.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Service Task</strong></span>.
								</li><li class="listitem">
									Click a blank area of the process designer canvas.
								</li><li class="listitem">
									If necessary, in the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
								</li><li class="listitem"><p class="simpara">
									Add or define the task information listed in the following table as required.
								</p><div class="table" id="idm140093634910592"><p class="title"><strong>Table 5.5. Java service task parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093634905744" scope="col">Label</th><th align="left" valign="top" id="idm140093634874496" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Name</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													The name of the service task. You can also double-click the service task shape to edit the name.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Documentation</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Enter a description of the task. The text in this field is included in the process documentation. Click the <span class="strong strong"><strong>Documentation</strong></span> tab in the upper-left side of the process designer canvas to view the process documentation.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Implementation</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Specify the task is implemented in Java.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Interface</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													The class used to implement the script, such as <code class="literal">org.xyz.HelloWorld</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Operation</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													The method that is called by the interface, such as <code class="literal">sayHello</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Assignments</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Click to add local variables.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>AdHoc Autostart</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Select if this is an ad hoc task that should be started automatically. <span class="strong strong"><strong>AdHoc Autostart</strong></span> enables the task to automatically start when the process or case instance is created instead of being starting by a start task. It is often used in case management.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Is Async</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Select if this task should be invoked asynchronously. Make tasks asynchronous if they cannot be executed instantaneously, for example a task performed by an outside service.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>Is Multiple Instance</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Select if this task has multiple instances.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>MI Execution mode</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Select if the multiple instances execute in parallel or sequentially.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>MI Collection input</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Specify a variable that represents a collection of elements for which new instances are created, such as <code class="literal">InputCollection</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>MI Data Input</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Specify the input data assignment that is transferred to a Java class. For example, you can set the input data assignments as <code class="literal">Parameter</code> and <code class="literal">ParameterType</code>. <code class="literal">ParameterType</code> represents the type of <code class="literal">Parameter</code> and sends arguments to the execution of Java method.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>MI Collection output</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													The array list in which values returned from the Java class is stored, such as <code class="literal">OutputCollection</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>MI Data Output</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Specify the output data assignment for Java service task, which stores the result of class execution on the server, such as <code class="literal">Result</code>.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>MI Completion Condition (mvel)</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													Specify the MVEL expression that is evaluated on each completed instance to check if the specified multiple instance node can complete. For example, <code class="literal">OutputCollection.size() &lt;= 3</code> indicates more than three people are not addressed.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>On Entry Action</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													A Java, JavaScript, or MVEL script that specifies an action at the start of the task.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>On Exit Action</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													A Java, JavaScript, or MVEL script that specifies an action at the end of the task.
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm140093634905744">
												<p>
													<span class="strong strong"><strong>SLA Due Date</strong></span>
												</p>
												</td><td align="left" valign="top" headers="idm140093634874496">
												<p>
													The date that the service level agreement (SLA) expires.
												</p>
												</td></tr></tbody></table></div></div></li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section><section class="section" id="create-user-task-proc"><div class="titlepage"><div><div><h2 class="title">5.4. Creating user tasks</h2></div></div></div><p>
					User tasks are used to include human actions as input to the business process.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Create a business process.
						</li><li class="listitem">
							In the process designer, select the <span class="strong strong"><strong>Activities</strong></span> tool from the tool palette.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>User</strong></span>.
						</li><li class="listitem">
							Either drag and drop a user task onto the process designer canvas or click a blank area of the canvas.
						</li><li class="listitem">
							If necessary, in the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
						</li><li class="listitem"><p class="simpara">
							Add or define the task information listed in the following table as required.
						</p><div class="table" id="idm140093635409120"><p class="title"><strong>Table 5.6. User task parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093640833504" scope="col">Label</th><th align="left" valign="top" id="idm140093640832416" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Name</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The name of the user task. You can also double-click the user task shape to edit the name.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Documentation</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Enter a description of the task. The text in this field is included in the process documentation. Click the <span class="strong strong"><strong>Documentation</strong></span> tab in the upper-left side of the process designer canvas to view the process documentation.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Task Name</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The name of the human task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Subject</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Enter a subject for the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Actors</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The actors responsible for executing the human task. Click <span class="strong strong"><strong>Add</strong></span> to add a row then select an actor from the list or click <span class="strong strong"><strong>New</strong></span> to add a new actor.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Groups</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The groups responsible for executing the human task. Click <span class="strong strong"><strong>Add</strong></span> to add a row then select a group from the list or click <span class="strong strong"><strong>New</strong></span> to add a new group.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Assignments</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Local variables for this task. Click to open the <span class="strong strong"><strong>Task Data I/O</strong></span> window then add data inputs and outputs as required. You can also add MVEL expressions as data input and output assignments. For more information about MVEL language, see <a class="link" href="http://mvel.documentnode.com/">Language Guide for 2.0</a>.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Reassignments</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Specify a different actor to complete this task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Notifications</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Click to specify notifications associated with the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Is Async</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Select if this task should be invoked asynchronously. Make tasks asynchronous if they cannot be executed instantaneously, for example a task performed by an outside service.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Skippable</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Select if this task is not mandatory.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Priority</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Specify a priority for the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Description</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Enter a description for the human task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Created By</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The user that created this task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>AdHoc Autostart</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Select if this is an ad hoc task that should be started automatically. <span class="strong strong"><strong>AdHoc Autostart</strong></span> enables the task to automatically start when the process or case instance is created instead of being starting by a start task. It is often used in case management.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Multiple Instance</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											Select if this task has multiple instances.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>On Entry Action</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											A Java, JavaScript, or MVEL script that specifies an action at the start of the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>On Exit Action</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											A Java, JavaScript, or MVEL script that specifies an action at the end of the task.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>Content</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The content of the script.
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093640833504">
										<p>
											<span class="strong strong"><strong>SLA Due Date</strong></span>
										</p>
										</td><td align="left" valign="top" headers="idm140093640832416">
										<p>
											The date that the service level agreement (SLA) expires.
										</p>
										</td></tr></tbody></table></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section><section class="section" id="bpmn-user-task-lifecycle-ref_business-processes"><div class="titlepage"><div><div><h2 class="title">5.5. BPMN2 user task life cycle in process designer</h2></div></div></div><p>
					You can trigger a user task element during the process instance execution to create a user task. The user task service of the task execution engine executes the user task instance. The process instance continues the execution only when the associated user task is completed or aborted. A user task life cycle is as follows:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							When a process instance enters a user task element, the user task is in the <code class="literal">Created</code> stage.
						</li><li class="listitem">
							<code class="literal">Created</code> stage is a transient stage and the user task enters the <code class="literal">Ready</code> stage immediately. The task appears in the task list of all the actors who are allowed to execute the task.
						</li><li class="listitem">
							When an actor claims the user task, the task becomes <code class="literal">Reserved</code>.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If a user task has a single potential actor, the task is assigned to that actor upon creation.
					</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							When an actor who claimed the user task starts the execution, the status of the user task changes to <code class="literal">InProgress</code>.
						</li><li class="listitem">
							Once an actor completes the user task, the status changes to <code class="literal">Completed</code> or <code class="literal">Failed</code> depending on the execution outcome.
						</li></ul></div><p>
					There are also several other life cycle methods, including:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Delegating or forwarding a user task so the user task is assigned to another actor.
						</li><li class="listitem">
							Revoking a user task, then the user task is no longer claimed by a single actor but is available to all actors who are allowed to take it.
						</li><li class="listitem">
							Suspending and resuming a user task.
						</li><li class="listitem">
							Stopping a user task that is in progress.
						</li><li class="listitem">
							Skipping a user task, in which the execution of the task is suspended.
						</li></ul></div><p>
					For more information about the user task life cycle, refer <a class="link" href="http://download.boulder.ibm.com/ibmdl/pub/software/dw/specs/ws-bpel4people/WS-HumanTask_v1.pdf">Web Services Human Task</a>.
				</p></section><section class="section" id="bpmn-user-task-permission-matrix-ref_business-processes"><div class="titlepage"><div><div><h2 class="title">5.6. BPMN2 task permission matrix in process designer</h2></div></div></div><p>
					The user task permission matrix summarizes the actions that are allowed for specific user roles. The user roles are as follows:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Potential owner: User who can claim the task, which was claimed earlier and is released and forwarded. The tasks with <code class="literal">Ready</code> status can be claimed, and the potential owner becomes the actual owner of the task.
						</li><li class="listitem">
							Actual owner: User who claims the task and progresses the task to completion or failure.
						</li><li class="listitem">
							Business administrator: Super user who can modify the status or progress with the task at any point of the task life cycle.
						</li></ul></div><p>
					The following permission matrix represents the authorizations for all operations that modify a task.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">+</code> indicates that the user role is allowed to do the specified operation.
						</li><li class="listitem">
							<code class="literal">-</code> indicates that the user role is not allowed to do the specified operation, or the operation does not match with the user’s role.
						</li></ul></div><div class="table" id="idm140093623235728"><p class="title"><strong>Table 5.7. Main operations permissions matrix</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 25%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093641718448" scope="col">Operation</th><th align="left" valign="top" id="idm140093641717360" scope="col">Potential owner</th><th align="left" valign="top" id="idm140093641716272" scope="col">Actual owner</th><th align="left" valign="top" id="idm140093641715184" scope="col">Business administrator</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									activate
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									claim
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									complete
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									delegate
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									fail
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									forward
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									nominate
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									release
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									remove
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									resume
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									skip
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									start
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									stop
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">-</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093641718448">
								<p>
									suspend
								</p>
								</td><td align="left" valign="top" headers="idm140093641717360">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641716272">
								<p>
									<code class="literal">+</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093641715184">
								<p>
									<code class="literal">+</code>
								</p>
								</td></tr></tbody></table></div></div></section><section class="section" id="copy-process-proc"><div class="titlepage"><div><div><h2 class="title">5.7. Making a copy of a business process</h2></div></div></div><p>
					You can make a copy of a business process in Business Central and modify the copied process as needed.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the business process designer, click <span class="strong strong"><strong>Copy</strong></span> in the upper-right toolbar.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Make a Copy</strong></span> window, enter a new name for the copied business process, select the target package, and optionally add a comment.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Make a Copy</strong></span>.
						</li><li class="listitem">
							Modify the copied business process as needed and click <span class="strong strong"><strong>Save</strong></span> to save the updated business process.
						</li></ol></div></section><section class="section" id="resize-elements"><div class="titlepage"><div><div><h2 class="title">5.8. Resizing elements and using the zoom function to view business processes</h2></div></div></div><p>
					You can resize individual elements in a business process and zoom in or out to modify the view of your business process.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the business process designer, select the element and click the red dot in the lower-right corner of the element.
						</li><li class="listitem"><p class="simpara">
							Drag the red dot to resize the element.
						</p><div class="figure" id="idm140093634774000"><p class="title"><strong>Figure 5.2. Resize an element</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/red-dot-resize.png" alt="Resizing an element"/></div></div></div></li><li class="listitem"><p class="simpara">
							To zoom in or out to view the entire diagram, click the plus or minus sign on the lower-right side of the canvas.
						</p><div class="figure" id="idm140093640656288"><p class="title"><strong>Figure 5.3. Enlarge or shrink a business process</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/resize-diagram.png" alt="Zooming to view the entire diagram"/></div></div></div></li></ol></div></section><section class="section" id="generate-process-docs-proc_business-processes"><div class="titlepage"><div><div><h2 class="title">5.9. Generating process documentation in Business Central</h2></div></div></div><p>
					In the process designer in Business Central, you can view and print a report of the process definition. The process documentation summarizes the components, data, and visual flow of the process in a format (PDF) that you can print and share more easily.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, navigate to a project that contains a business process and select the process.
						</li><li class="listitem"><p class="simpara">
							In the process designer, click the <span class="strong strong"><strong>Documentation</strong></span> tab to view the summary of the process file, and click <span class="strong strong"><strong>Print</strong></span> in the top-right corner of the window to print the PDF report.
						</p><div class="figure" id="idm140093638268736"><p class="title"><strong>Figure 5.4. Generate process documentation</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/generate-process-docs.png" alt="Project-level service task settings"/></div></div></div></li></ol></div></section></section><section class="chapter" id="variables-con_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Variables</h2></div></div></div><p>
				Variables store data that is used during runtime. Process designer uses three types of variables:
			</p><div class="formalpara"><p class="title"><strong>Global variables</strong></p><p>
					Global variables are visible to all process instances and assets in a particular session. They are intended to be used primarily by business rules and by constraints and are created dynamically by rules or constraints.
				</p></div><div class="formalpara"><p class="title"><strong>Process variables</strong></p><p>
					Process variables are defined as properties in the BPMN2 definition file and are visible within the process instance. They are initialized at process creation and destroyed on process completion.
				</p></div><div class="formalpara"><p class="title"><strong>Local variables</strong></p><p>
					Local variables are associated with and available within specific process elements, such as activities. They are initialized when the element context is initialized, that is, when the execution workflow enters the node and execution of the <code class="literal">onEntry</code> action has finished, if applicable. They are destroyed when the element context is destroyed, that is, when the execution workflow leaves the element.
				</p></div><p>
				An element, such as a process, sub-process, or task can only access variables in its own and parent contexts. An element cannot access a variable defined in the element’s child element. Therefore, when an elements requires access to a variable during runtime, its own context is searched first.
			</p><p>
				If the variable cannot be found directly in the element’s context, the immediate parent context is searched. The search continues until the process context is reached. In case of global variables, the search is performed directly on the session container.
			</p><p>
				If the variable cannot be found, a read access request returns <code class="literal">null</code> and a write access produces an error message, and the process continues its execution. Variables are searched for based on their ID.
			</p><section class="section" id="con-variable-tags_business-processes"><div class="titlepage"><div><div><h2 class="title">6.1. Variable tags</h2></div></div></div><p>
					For greater control over variable behavior, you can tag process variables and local variables in the BPMN process file. Tags are simple string values that you add as metadata to a specific variable.
				</p><p>
					Red Hat Process Automation Manager supports the following tags for process variables and local variables:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">required</code>: Sets the variable as a requirement in order to start a process instance. If a process instance starts without the required variable, Red Hat Process Automation Manager generates a <code class="literal">VariableViolationException</code> error.
						</li><li class="listitem">
							<code class="literal">readonly</code>: Indicates that the variable is for informational purposes only and can be set only once during process instance execution. If the value of a read-only variable is modified at any time, Red Hat Process Automation Manager generates a <code class="literal">VariableViolationException</code> error.
						</li><li class="listitem"><p class="simpara">
							<code class="literal">restricted</code>: A special tag that is used with the <code class="literal">VariableGuardProcessEventListener</code> to indicate that permission is granted to modify the variable based on the required and the existing role.
						</p><p class="simpara">
							<code class="literal">VariableGuardProcessEventListener</code> is extended from <code class="literal">DefaultProcessEventListener</code> and supports two different constructors:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<code class="literal">VariableGuardProcessEventListener</code>
								</p><pre class="programlisting language-java">public VariableGuardProcessEventListener(String requiredRole, IdentityProvider identityProvider) {
    this("restricted", requiredRole, identityProvider);
}</pre></li><li class="listitem"><p class="simpara">
									<code class="literal">VariableGuardProcessEventListener</code>
								</p><pre class="programlisting language-java">public VariableGuardProcessEventListener(String tag, String requiredRole, IdentityProvider identityProvider) {
    this.tag = tag;
    this.requiredRole = requiredRole;
    this.identityProvider = identityProvider;
}</pre><p class="simpara">
									Therefore, you must add an event listener to the session with the allowed role name and identity provider that returns the user role as shown in the following example:
								</p><pre class="programlisting language-java">ksession.addEventListener(new VariableGuardProcessEventListener("AdminRole", myIdentityProvider));</pre></li></ul></div><p class="simpara">
							In the previous example, the <code class="literal">VariableGuardProcessEventListener</code> method verifies if a variable is tagged with a security constraint tag (<code class="literal">restricted</code>). If the user does not have the required role, then Red Hat Process Automation Manager generates a <code class="literal">VariableViolationException</code> error.
						</p></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The variable tags that appear in the Business Central UI, for example <code class="literal">internal</code>, <code class="literal">input</code>, <code class="literal">output</code>, <code class="literal">business-relevant</code>, and <code class="literal">tracked</code> are not supported in Red Hat Process Automation Manager.
					</p></div></div><p>
					You can add the tag directly to the BPMN process source file as a <code class="literal">customTags</code> metadata property with the tag value defined in the format <code class="literal">![CDATA[<span class="emphasis"><em>TAG_NAME</em></span>]]</code>.
				</p><p>
					For example, the following BPMN process applies the <code class="literal">required</code> tag to an <code class="literal">approver</code> process variable:
				</p><div class="figure" id="idm140093635244960"><p class="title"><strong>Figure 6.1. Example variable tagged in the BPMN modeler</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-variable-tags-ui.png" alt="Image of variable tags in BPMN modeler"/></div></div></div><div class="formalpara"><p class="title"><strong>Example variable tagged in a BPMN file</strong></p><p>
						
<pre class="programlisting language-xml">&lt;bpmn2:property id="approver" itemSubjectRef="ItemDefinition_9" name="approver"&gt;
  &lt;bpmn2:extensionElements&gt;
    &lt;tns:metaData name="customTags"&gt;
      &lt;tns:metaValue&gt;&lt;![CDATA[required]]&gt;&lt;/tns:metaValue&gt;
    &lt;/tns:metaData&gt;
  &lt;/bpmn2:extensionElements&gt;
&lt;/bpmn2:property&gt;</pre>
					</p></div><p>
					You can use more than one tag for a variable where applicable. You can also define custom variable tags in your BPMN files to make variable data available to Red Hat Process Automation Manager process event listeners. Custom tags do not influence the Red Hat Process Automation Manager runtime as the standard variable tags do and are for informational purposes only. You define custom variable tags in the same <code class="literal">customTags</code> metadata property format that you use for standard Red Hat Process Automation Manager variable tags.
				</p></section><section class="section" id="proc-define-global-variables_business-processes"><div class="titlepage"><div><div><h2 class="title">6.2. Defining global variables</h2></div></div></div><p>
					Global variables exist in a knowledge session and can be accessed and are shared by all assets in that session. They belong to the particular session of the Knowledge Base and they are used to pass information to the engine. Every global variable defines its ID and item subject reference. The ID serves as the variable name and must be unique within the process definition. The item subject reference defines the data type the variable stores.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The rules are evaluated at the moment the fact is inserted. Therefore, if you are using a global variable to constrain a fact pattern and the global is not set, the system returns a <code class="literal">NullPointerException</code>.
					</p></div></div><p>
					Global variables are initialized either when the process with the variable definition is added to the session or when the session is initialized with globals as its parameters.
				</p><p>
					Values of global variables can typically be changed during the assignment, which is a mapping between a process variable and an activity variable. The global variable is then associated with the local activity context, local activity variable, or by a direct call to the variable from a child context.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a project in Business Central and it contains at least one business process asset.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open a business process asset.
						</li><li class="listitem">
							Click a blank area of the process designer canvas.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Properties</strong></span> icon on the upper-right side of the screen to open the <span class="strong strong"><strong>Properties</strong></span> panel.
						</li><li class="listitem">
							If necessary, expand the <span class="strong strong"><strong>Process</strong></span> section.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Global Variables</strong></span> sub-section, click the plus icon.
						</li><li class="listitem">
							Enter a name for the variable in the <span class="strong strong"><strong>Name</strong></span> box.
						</li><li class="listitem">
							Select a data type from the <span class="strong strong"><strong>Data Type</strong></span> menu.
						</li></ol></div></section><section class="section" id="proc-define-process-variables_business-processes"><div class="titlepage"><div><div><h2 class="title">6.3. Defining process variables</h2></div></div></div><p>
					Process variables are defined as properties in the BPMN2 definition file and are visible within the process instance. They are initialized at process creation and destroyed on process completion.
				</p><p>
					A process variable is a variable that exists in a process context and can be accessed by its process or its child elements. Process variables belong to a particular process instance and cannot be accessed by other process instances. Every process variable defines its ID and item subject reference: the ID serves as the variable name and must be unique within the process definition. The item subject reference defines the data type the variable stores.
				</p><p>
					Process variables are initialized when the process instance is created. Their value can be changed by the process activities using the Assignment, when the global variable is associated with the local Activity context, local Activity variable, or by a direct call to the variable from a child context.
				</p><p>
					Note that process variables should be mapped to local variables.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a project in Business Central and it contains at least one business process asset.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open a business process asset.
						</li><li class="listitem">
							Click a blank area of the process designer canvas.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Properties</strong></span> icon on the upper-right side of the screen to open the <span class="strong strong"><strong>Properties</strong></span> panel.
						</li><li class="listitem">
							If necessary, expand the <span class="strong strong"><strong>Process Data</strong></span> section.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Process Variables</strong></span> sub-section, click the plus icon.
						</li><li class="listitem">
							Enter a name for the variable in the <span class="strong strong"><strong>Name</strong></span> box.
						</li><li class="listitem">
							Select a data type from the <span class="strong strong"><strong>Data Type</strong></span> menu.
						</li></ol></div></section><section class="section" id="proc-define-local-variables_business-processes"><div class="titlepage"><div><div><h2 class="title">6.4. Defining local variables</h2></div></div></div><p>
					Local variables are available within their process element, such as an activity. They are initialized when the element context is initialized, that is, when the execution workflow enters the node and execution of the <code class="literal">onEntry</code> action has finished, if applicable. They are destroyed when the element context is destroyed, that is, when the execution workflow leaves the element.
				</p><p>
					Values of local variables can be mapped to global or process variables. This enables you to maintain relative independence of the parent element that accommodates the local variable. Such isolation might help prevent technical exceptions.
				</p><p>
					A local variable is a variable that exists in a child element context of a process and can be accessed only from within this context. Local variables belong to the particular element of a process.
				</p><p>
					For tasks, with the exception of the Script task, you can define <code class="literal property">Data Input Assignments</code> and <code class="literal property">Data Output Assignments</code> in the <span class="strong strong"><strong>Assignments</strong></span> property. Data Input Assignment defines variables that enter the Task and therefore provide the entry data needed for the task execution. The Data Output Assignments can refer to the context of the Task after execution to acquire output data.
				</p><p>
					User Tasks present data related to the actor that is executing the User Task. Additionally, User Tasks also request the actor to provide result data related to the execution.
				</p><p>
					To request and provide the data, use task forms and map the data in the Data Input Assignment parameter to a variable. Map the data provided by the user in the Data Output Assignment parameter if you want to preserve the data as output.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a project in Business Central and it contains at least one business process asset that has at least one task that is not a script task.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open a business process asset.
						</li><li class="listitem">
							Select a task that is not a script task.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Properties</strong></span> icon on the upper-right side of the screen to open the <span class="strong strong"><strong>Properties</strong></span> panel.
						</li><li class="listitem">
							Click the box under the <span class="strong strong"><strong>Assignments</strong></span> sub-section. The <span class="strong strong"><strong>Task Data I/O</strong></span> dialog box opens.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Data Inputs and Assignments</strong></span> or <span class="strong strong"><strong>Data Outputs and Assignments</strong></span>.
						</li><li class="listitem">
							Enter a name for the local variable in the <span class="strong strong"><strong>Name</strong></span> box.
						</li><li class="listitem">
							Select a data type from the <span class="strong strong"><strong>Data Type</strong></span> menu.
						</li><li class="listitem">
							Select a source or target then click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section></section><section class="chapter" id="con-action-scripts_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Action scripts</h2></div></div></div><p>
				Action scripts are pieces of code that define the <code class="literal">Script</code> property or the interceptor action of an element. Action scripts can access the global variables, process variables, and predefined variable <code class="literal">kcontext</code>. kcontext is an instance of the <code class="literal">ProcessContext</code> interface. For more information about <code class="literal">kcontext</code> variable, see the <code class="literal">ProcessContext</code> <a class="link" href="https://docs.jboss.org/jbpm/v6.4/javadocs/org/kie/api/runtime/process/ProcessContext.html">Javadoc</a>.
			</p><p>
				Java and MVEL are supported as dialects for action script definitions. MVEL accepts valid Java code and additionally provides support for nested access to parameters. For example, the MVEL call <code class="literal">person.name</code> is equivalent of Java call <code class="literal">person.getName()</code>.
			</p><div class="formalpara"><p class="title"><strong>Example action script in Java and MVEL dialects</strong></p><p>
					
<pre class="screen">// Java dialect
System.out.println(person.getName());

// MVEL dialect
System.out.println(person.name);</pre>
				</p></div><p>
				You can also use action scripts to view information about process instances. For example, use the following commands to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Return the ID of a process instance:
					</p><pre class="screen">System.out.println(kcontext.getProcessInstance().getId());</pre></li><li class="listitem"><p class="simpara">
						Return the parent process instance ID if a process instance has a parent:
					</p><pre class="screen">System.out.println(kcontext.getProcessInstance().getParentProcessInstanceId());</pre></li><li class="listitem"><p class="simpara">
						Return the ID of a process definition related to a process instance:
					</p><pre class="screen">System.out.println(kcontext.getProcessInstance().getProcessId());</pre></li><li class="listitem"><p class="simpara">
						Return the name of a process definition related to a process instance:
					</p><pre class="screen">System.out.println(kcontext.getProcessInstance().getProcessName());</pre></li><li class="listitem"><p class="simpara">
						Return the state of a process instance:
					</p><pre class="screen">System.out.println(kcontext.getProcessInstance().getState());</pre></li></ul></div><p>
				To set a process variable in an action script, use <code class="literal">kcontext.setVariable("VARIABLE_NAME", "VALUE")</code>.
			</p></section><section class="chapter" id="con-timer_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Timers</h2></div></div></div><p>
				You can use timers to trigger logic after a certain period or to repeat specific actions at regular intervals. Timers wait for a predefined amount of time before triggering once or repeatedly.
			</p><section class="section" id="configuration_of_timers_with_delay_and_period"><div class="titlepage"><div><div><h2 class="title">8.1. Configuration of timers with delay and period</h2></div></div></div><p>
					You can set a timer with delay and a certain period. The delay specifies the waiting time after the node activation, and the period defines the time between the subsequent trigger activation. The period value <code class="literal">0</code> results in a one-shot timer. You can specify the delay and period expression in <code class="literal">[#d][#h][#m][#s][#[ms]]</code> form, indicating the number of days, hours, minutes, seconds, and milliseconds (default). For example, the expression <code class="literal">1h</code> indicates one hour waiting time before triggering the timer again.
				</p></section><section class="section" id="configuration_of_timers_with_iso_8601_date_format"><div class="titlepage"><div><div><h2 class="title">8.2. Configuration of timers with ISO-8601 date format</h2></div></div></div><p>
					You can configure timers with ISO-8601 date format that supports both one-shot timers and repeatable timers. You can define timers as date and time representation, time duration, or repeating intervals. For example:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Date <code class="literal">2020-12-24T20:00:00.000+02:00</code> signifies that timer is triggered exactly on Christmas at 8:00 p.m.
						</li><li class="listitem">
							Duration <code class="literal">PT1S</code> signifies that timer is triggered once after one second.
						</li><li class="listitem">
							Repeating intervals <code class="literal">R/PT1S</code> signifies that timer is triggered every second with any limit. Alternatively, <code class="literal">R5/PT1S</code> triggers the timer five times every second.
						</li></ul></div></section><section class="section" id="configuration_of_timers_with_process_variables"><div class="titlepage"><div><div><h2 class="title">8.3. Configuration of timers with process variables</h2></div></div></div><p>
					You can also specify timers using process variables, consisting of the string representation of delay and period or ISO8601 date format. When you specify <code class="literal">#{variable}</code>, the engine parses the expression and replaces the expression value with the variable. In a process, you can use timers using the following ways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Add a timer event to a process flow. The process activation starts the timer and when the timer is triggered (once or repeatedly), it activates the successor of the timer node. Subsequently, the outgoing connection of a timer with a positive period value is triggered multiple times. When a timer node is canceled, the associated timer is also canceled and no more triggers occur.
						</li><li class="listitem">
							Associate timer as a boundary event with a subprocess or task.
						</li></ul></div></section><section class="section" id="update_timers_within_running_process_instance"><div class="titlepage"><div><div><h2 class="title">8.4. Update timers within running process instance</h2></div></div></div><p>
					In some cases, the scheduled timer needs to be rescheduled to accommodate the new requirements, such as changing delay, period, or repeat limit. Updating a timer includes many low-level operations, therefore, Red Hat Process Automation Manager provides the following command to perform the low-level operations related to updating a timer as an atomic operation. The following command ensures that all the operations are performed within the same transaction.
				</p><p>
					<code class="literal">org.jbpm.process.instance.command.UpdateTimerCommand</code>
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Only boundary timer events and intermediate timer events are supported to update.
					</p></div></div><p>
					You can reschedule the timer by specifying the two mandatory parameters and one of the three optional parameter sets of the <code class="literal">UpdateTimerCommand</code> class.
				</p><div class="table" id="idm140093623995280"><p class="title"><strong>Table 8.1. Parameters and parameter sets of <code class="literal">UpdateTimerCommand</code> class</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093623989952" scope="col">Parameter or parameter set</th><th align="left" valign="top" id="idm140093623988848" scope="col">Type</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093623989952">
								<p>
									process instance ID (Mandatory)
								</p>
								</td><td align="left" valign="top" headers="idm140093623988848">
								<p>
									<code class="literal">long</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623989952">
								<p>
									timer node name (Mandatory)
								</p>
								</td><td align="left" valign="top" headers="idm140093623988848">
								<p>
									<code class="literal">String</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623989952">
								<p>
									delay (Optional)
								</p>
								</td><td align="left" valign="top" headers="idm140093623988848">
								<p>
									<code class="literal">long</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623989952">
								<p>
									period (Optional)
								</p>
								</td><td align="left" valign="top" headers="idm140093623988848">
								<p>
									<code class="literal">long</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093623989952">
								<p>
									repeat limit (Optional)
								</p>
								</td><td align="left" valign="top" headers="idm140093623988848">
								<p>
									<code class="literal">init</code>
								</p>
								</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example rescheduling time event</strong></p><p>
						
<pre class="programlisting language-java">// Start the process instance and record its ID:
long id = kieSession.startProcess(BOUNDARY_PROCESS_NAME).getId();

// Set the timer delay to 3 seconds:
kieSession.execute(new UpdateTimerCommand(id, BOUNDARY_TIMER_ATTACHED_TO_NAME, 3));</pre>
					</p></div></section></section><section class="chapter" id="constraints-con_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Constraints</h2></div></div></div><p>
				A constraint is a boolean expression that is evaluated when an element containing a constraint is executed. You can use constraints in various parts of your process, such as in a diverging gateway.
			</p><p>
				Red Hat Process Automation Manager supports two types of constraints, including:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Code constraints</strong></span>: Constraints that are defined in Java, Javascript, Drools, or MVEL. Code constraints can access the data in the working memory, including the global and process variables. The following code constraint examples contain <code class="literal">person</code> as a variable in a process:
					</p><div class="formalpara"><p class="title"><strong>Example Java code constraint</strong></p><p>
							
<pre class="screen">return person.getAge() &gt; 20;</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Example MVEL code constraint</strong></p><p>
							
<pre class="screen">return person.age &gt; 20;</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Example Javascript code constraint</strong></p><p>
							
<pre class="screen">person.age &gt; 20</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Rule constraints</strong></span>: Constraints that are defined in the form of DRL rule conditions. Rule constraints can access the data in the working memory, including global variables. However, rule constraints cannot access the variables directly in a process but using a process instance. To retrieve the reference of the parent process instance, use the <code class="literal">processInstance</code> variable of the type <code class="literal">WorkflowProcessInstance</code>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can insert a process instance into the session and update it if necessary, for example, using Java code or an on-entry, on-exit, or explicit action in your process.
						</p></div></div><p class="simpara">
						The following example shows a rule constraint, searching for a person with the same name as the value of the <code class="literal">name</code> variable in the process.
					</p><div class="formalpara"><p class="title"><strong>Example rule constraint with process variable assignment</strong></p><p>
							
<pre class="screen">processInstance : WorkflowProcessInstance()
Person( name == ( processInstance.getVariable("name") ) )
# add more constraints here ...</pre>
						</p></div></li></ul></div></section><section class="chapter" id="deploy-bus-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Deploying a business process in Business Central</h2></div></div></div><p>
				After you design your business process in Business Central, you can build and deploy your project in Business Central to make the process available to KIE Server.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						KIE Server is deployed and connected to Business Central. For more information about KIE Server configuration, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
					</li><li class="listitem">
						Click the project that you want to deploy.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Deploy</strong></span>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You can also select the <span class="strong strong"><strong>Build &amp; Install</strong></span> option to build the project and publish the KJAR file to the configured Maven repository without deploying to a KIE Server. In a development environment, you can click <span class="strong strong"><strong>Deploy</strong></span> to deploy the built KJAR file to a KIE Server without stopping any running instances (if applicable), or click <span class="strong strong"><strong>Redeploy</strong></span> to deploy the built KJAR file and replace all instances. The next time you deploy or redeploy the built KJAR, the previous deployment unit (KIE container) is automatically updated in the same target KIE Server. In a production environment, the <span class="strong strong"><strong>Redeploy</strong></span> option is disabled and you can click <span class="strong strong"><strong>Deploy</strong></span> only to deploy the built KJAR file to a new deployment unit (KIE container) on a KIE Server.
						</p><p>
							To configure the KIE Server environment mode, set the <code class="literal">org.kie.server.mode</code> system property to <code class="literal">org.kie.server.mode=development</code> or <code class="literal">org.kie.server.mode=production</code>. To configure the deployment behavior for a corresponding project in Business Central, go to project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>General Settings</strong></span> → <span class="strong strong"><strong>Version</strong></span> and toggle the <span class="strong strong"><strong>Development Mode</strong></span> option. By default, KIE Server and all new projects in Business Central are in development mode. You cannot deploy a project with <span class="strong strong"><strong>Development Mode</strong></span> turned on or with a manually added <code class="literal">SNAPSHOT</code> version suffix to a KIE Server that is in production mode.
						</p></div></div><p class="simpara">
						To review project deployment details, click <span class="strong strong"><strong>View deployment details</strong></span> in the deployment banner at the top of the screen or in the <span class="strong strong"><strong>Deploy</strong></span> drop-down menu. This option directs you to the <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Deploy</strong></span> → <span class="strong strong"><strong>Execution Servers</strong></span> page.
					</p></li></ol></div></section><section class="chapter" id="execute-bus-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Executing a business process in Business Central</h2></div></div></div><p>
				After you build and deploy the project that contains your business process, you can execute the defined functionality for the business process.
			</p><p>
				As an example, this procedure uses the <span class="strong strong"><strong>Mortgage_Process</strong></span> sample project in Business Central. In this scenario, you input data into a mortgage application form acting as the mortgage broker. The <span class="strong strong"><strong>MortgageApprovalProcess</strong></span> business process runs and determines whether or not the applicant has offered an acceptable down payment based on the decision rules defined in the project. The business process either ends the rule testing or requests that the applicant increase the down payment to proceed. If the application passes the business rule testing, the bank approver reviews the application and either approves or denies the loan.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						KIE Server is deployed and connected to Business Central. For more information about KIE Server configuration, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Projects</strong></span> and select a space. The default space is MySpace.
					</li><li class="listitem">
						In the upper-right corner of the window, click the arrow next to <span class="strong strong"><strong>Add Project</strong></span> and select <span class="strong strong"><strong>Try Samples</strong></span>.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>Mortgage_Process</strong></span> sample and click <span class="strong strong"><strong>Ok</strong></span>.
					</li><li class="listitem">
						On the project page, select <span class="strong strong"><strong>Mortgage_Process</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Mortgage_Process</strong></span> page, click <span class="strong strong"><strong>Build</strong></span>.
					</li><li class="listitem">
						After the project has built, click <span class="strong strong"><strong>Deploy</strong></span>.
					</li><li class="listitem">
						Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>.
					</li><li class="listitem">
						Click anywhere in the <span class="strong strong"><strong>MortgageApprovalProcess</strong></span> row to view the process details.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Diagram</strong></span> tab to view the business process diagram in the editor.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>New Process Instance</strong></span> to open the <span class="strong strong"><strong>Application</strong></span> form and input the following values into the form fields:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Down Payment</strong></span>: <code class="literal">30000</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Years of amortization</strong></span>: <code class="literal">10</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Name</strong></span>: <code class="literal">Ivo</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Annual Income</strong></span>: <code class="literal">60000</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>SSN</strong></span>: <code class="literal">123456789</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Age of property</strong></span>: <code class="literal">8</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Address of property</strong></span>: <code class="literal">Brno</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Locale</strong></span>: <code class="literal">Rural</code>
							</li><li class="listitem">
								<span class="strong strong"><strong>Property Sale Price</strong></span>: <code class="literal">50000</code>
							</li></ul></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Submit</strong></span> to start a new process instance. After starting the process instance, the <span class="strong strong"><strong>Instance Details</strong></span> view opens.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Diagram</strong></span> tab to view the process flow within the process diagram. The state of the process is highlighted as it moves through each task.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
					</p><p class="simpara">
						For this example, the user or users working on the corresponding tasks are members of the following groups:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>approver</strong></span>: For the <span class="strong strong"><strong>Qualify</strong></span> task
							</li><li class="listitem">
								<span class="strong strong"><strong>broker</strong></span>: For the <span class="strong strong"><strong>Correct Data</strong></span> and <span class="strong strong"><strong>Increase Down Payment</strong></span> tasks
							</li><li class="listitem">
								<span class="strong strong"><strong>manager</strong></span>: For the <span class="strong strong"><strong>Final Approval</strong></span> task
							</li></ul></div></li><li class="listitem">
						As the approver, review the <span class="strong strong"><strong>Qualify</strong></span> task information, click <span class="strong strong"><strong>Claim</strong></span> and then <span class="strong strong"><strong>Start</strong></span> to start the task, and then select <span class="strong strong"><strong>Is mortgage application in limit?</strong></span> and click <span class="strong strong"><strong>Complete</strong></span> to complete the task flow.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Tasks</strong></span> page, click anywhere in the <span class="strong strong"><strong>Final Approval</strong></span> row to open the <span class="strong strong"><strong>Final Approval</strong></span> task.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Claim</strong></span> to claim responsibility for the task, and click <span class="strong strong"><strong>Complete</strong></span> to finalize the loan approval process.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <span class="strong strong"><strong>Save</strong></span> and <span class="strong strong"><strong>Release</strong></span> buttons are only used to either pause the approval process and save the instance if you are waiting on a field value, or to release the task for another user to modify.
				</p></div></div></section><section class="chapter" id="proc-test-bus-process_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Testing a business process</h2></div></div></div><p>
				A business process can be updated dynamically, which can cause errors, therefore testing a process business is also a part of the business process life cycle similar to any other development artifact.
			</p><p>
				The unit test for a business process ensures that the process behaves as expected in a specific use case. For example, you can test an output based on a particular input. To simplify unit testing, Red Hat Process Automation Manager includes the <code class="literal">org.jbpm.test.JbpmJUnitBaseTestCase</code> class.
			</p><p>
				The <code class="literal">JbpmJUnitBaseTestCase</code> performs as a base test case class, which is used for Red Hat Process Automation Manager related tests. The <code class="literal">JbpmJUnitBaseTestCase</code> provides the following usage areas:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						JUnit life cycle methods
					</p><div class="table" id="idm140093637302096"><p class="title"><strong>Table 12.1. JUnit life cycle methods</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093637297248" scope="col">Method</th><th align="left" valign="top" id="idm140093637296160" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093637297248">
									<p>
										<code class="literal">setUp</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093637296160">
									<p>
										This method is annotated as <code class="literal">@Before</code>. It configures a data source and <code class="literal">EntityManagerFactory</code> and deletes the session ID of a singleton.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093637297248">
									<p>
										<code class="literal">tearDown</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093637296160">
									<p>
										This method is annotated as <code class="literal">@After</code>. It removes history, closes <code class="literal">EntityManagerFactory</code> and a data source, and disposes <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngines</code>.
									</p>
									</td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
						Knowledge base and knowledge session management methods: To create a session, create <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngine</code>. Use the following methods to create and dispose <code class="literal">RuntimeManager</code>:
					</p><div class="table" id="idm140093627795600"><p class="title"><strong>Table 12.2. <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngine</code> management methods</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093642502608" scope="col">Method</th><th align="left" valign="top" id="idm140093642501520" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093642502608">
									<p>
										<code class="literal">createRuntimeManager</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093642501520">
									<p>
										Creates <code class="literal">RuntimeManager</code> for a given set of assets and selected strategy.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093642502608">
									<p>
										<code class="literal">disposeRuntimeManager</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093642501520">
									<p>
										Disposes <code class="literal">RuntimeManager</code> that is active in the scope of the test.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093642502608">
									<p>
										<code class="literal">getRuntimeEngine</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093642501520">
									<p>
										Creates new <code class="literal">RuntimeEngine</code> for the given context.
									</p>
									</td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
						Assertions: To test the state of assets, use the following methods:
					</p><div class="table" id="idm140093628212528"><p class="title"><strong>Table 12.3. <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngine</code> Management Methods</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093643332752" scope="col">Assertion</th><th align="left" valign="top" id="idm140093643331664" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertProcessInstanceActive(long processInstanceId, KieSession ksession)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether a process instance with the given <code class="literal">processInstanceId</code> is active.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertProcessInstanceCompleted(long processInstanceId)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether a process instance with the given <code class="literal">processInstanceId</code> is completed. You can use this method if session persistence is enabled, otherwise use <code class="literal">assertProcessInstanceNotActive(long processInstanceId, KieSession ksession)</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertProcessInstanceAborted(long processInstanceId)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether a process instance with the given <code class="literal">processInstanceId</code> is aborted. You can use this method if session persistence is enabled, otherwise use <code class="literal">assertProcessInstanceNotActive(long processInstanceId, KieSession ksession)</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertNodeExists(ProcessInstance process, String…​ nodeNames)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether the specified process contains the given nodes.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertNodeActive(long processInstanceId, KieSession ksession, String…​ name)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether a process instance with the given <code class="literal">processInstanceId</code> contains at least one active node with the specified node names.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertNodeTriggered(long processInstanceId, String…​ nodeNames)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether a node instance is triggered for each given node during the execution of the specified process instance.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertProcessVarExists(ProcessInstance process, String…​ processVarNames)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether the given process contains the specified process variables.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertProcessNameEquals(ProcessInstance process, String name)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether the given name matches the specified process name.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093643332752">
									<p>
										<code class="literal">assertVersionEquals(ProcessInstance process, String version)</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093643331664">
									<p>
										Verifies whether the given process version matches the specified process version.
									</p>
									</td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
						Helper methods: Use following methods to create a new <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngine</code> for a given set of processes with or without using persistence. For more information about persistence, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-process-engine"><span class="emphasis"><em>Process engine in Red Hat Process Automation Manager</em></span></a>.
					</p><div class="table" id="idm140093645114880"><p class="title"><strong>Table 12.4. <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngine</code> Management Methods</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093623256272" scope="col">Method</th><th align="left" valign="top" id="idm140093623255184" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093623256272">
									<p>
										<code class="literal">setupPoolingDataSource</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093623255184">
									<p>
										Configures a data source.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093623256272">
									<p>
										<code class="literal">getDs</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093623255184">
									<p>
										Returns the configured data source.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093623256272">
									<p>
										<code class="literal">getEmf</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093623255184">
									<p>
										Returns the configured <code class="literal">EntityManagerFactory</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093623256272">
									<p>
										<code class="literal">getTestWorkItemHandler</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093623255184">
									<p>
										Returns a test work item handler that can be registered in addition to the default work item handler.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093623256272">
									<p>
										<code class="literal">clearHistory</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093623255184">
									<p>
										Clears the history log.
									</p>
									</td></tr></tbody></table></div></div></li></ul></div><p>
				The following example contains a start event, a script task, and an end event. The example JUnit test creates a new session, starts the <code class="literal">hello.bpmn</code> process, and verifies whether the process instance is completed and the <code class="literal">StartProcess</code>, <code class="literal">Hello</code>, and <code class="literal">EndProcess</code> nodes are executed.
			</p><div class="figure" id="idm140093644669696"><p class="title"><strong>Figure 12.1. Example JUnit Test of <code class="literal">hello.bpmn</code> Process</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-example-junit-test-process.png" alt="Example JUnit Test Process"/></div></div></div><pre class="programlisting language-java">public class ProcessPersistenceTest extends JbpmJUnitBaseTestCase {

    public ProcessPersistenceTest() {
        super(true, true);
    }

    @Test
    public void testProcess() {

        createRuntimeManager("hello.bpmn");

        RuntimeEngine runtimeEngine = getRuntimeEngine();

        KieSession ksession = runtimeEngine.getKieSession();

        ProcessInstance processInstance = ksession.startProcess("com.sample.bpmn.hello");

        assertProcessInstanceNotActive(processInstance.getId(), ksession);

        assertNodeTriggered(processInstance.getId(), "StartProcess", "Hello", "EndProcess");
    }
}</pre><p>
				<code class="literal">JbpmJUnitBaseTestCase</code> supports all predefined <code class="literal">RuntimeManager</code> strategies as part of the unit testing. Therefore, it is enough to specify the strategy that is used when you create a <code class="literal">RuntimeManager</code> as part of a single test. The following example shows the use of the PerProcessInstance strategy in a task service to manage user tasks:
			</p><pre class="programlisting language-java">public class ProcessHumanTaskTest extends JbpmJUnitBaseTestCase {

    private static final Logger logger = LoggerFactory.getLogger(ProcessHumanTaskTest.class);

    public ProcessHumanTaskTest() {
        super(true, false);
    }

    @Test
    public void testProcessProcessInstanceStrategy() {
        RuntimeManager manager = createRuntimeManager(Strategy.PROCESS_INSTANCE, "manager", "humantask.bpmn");
        RuntimeEngine runtimeEngine = getRuntimeEngine(ProcessInstanceIdContext.get());
        KieSession ksession = runtimeEngine.getKieSession();
        TaskService taskService = runtimeEngine.getTaskService();

        int ksessionID = ksession.getId();
        ProcessInstance processInstance = ksession.startProcess("com.sample.bpmn.hello");

        assertProcessInstanceActive(processInstance.getId(), ksession);
        assertNodeTriggered(processInstance.getId(), "Start", "Task 1");

        manager.disposeRuntimeEngine(runtimeEngine);
        runtimeEngine = getRuntimeEngine(ProcessInstanceIdContext.get(processInstance.getId()));

        ksession = runtimeEngine.getKieSession();
        taskService = runtimeEngine.getTaskService();

        assertEquals(ksessionID, ksession.getId());

        // let John execute Task 1
        List&lt;TaskSummary&gt; list = taskService.getTasksAssignedAsPotentialOwner("john", "en-UK");
        TaskSummary task = list.get(0);
        logger.info("John is executing task {}", task.getName());
        taskService.start(task.getId(), "john");
        taskService.complete(task.getId(), "john", null);

        assertNodeTriggered(processInstance.getId(), "Task 2");

        // let Mary execute Task 2
        list = taskService.getTasksAssignedAsPotentialOwner("mary", "en-UK");
        task = list.get(0);
        logger.info("Mary is executing task {}", task.getName());
        taskService.start(task.getId(), "mary");
        taskService.complete(task.getId(), "mary", null);

        assertNodeTriggered(processInstance.getId(), "End");
        assertProcessInstanceNotActive(processInstance.getId(), ksession);
    }
}</pre><section class="section" id="proc-test-external-services_business-processes"><div class="titlepage"><div><div><h2 class="title">12.1. Testing integration with external services</h2></div></div></div><p>
					Business processes often include the invocation of external services. Unit testing of a business process enables you to register test handlers that verify whether the specific services are requested correctly, and also provide test responses for the requested services.
				</p><p>
					To test the interaction with external services, use the default <code class="literal">TestWorkItemHandler</code> handler. You can register the <code class="literal">TestWorkItemHandler</code> to collect all the work items of a particular type. Also, <code class="literal">TestWorkItemHandler</code> contains data related to a task. A work item represents one unit of work, such as sending a specific email or invoking a specific service. The <code class="literal">TestWorkItemHandler</code> verifies whether a specific work item is requested during an execution of a process, and the associated data is correct.
				</p><p>
					The following example shows how to verify an email task and whether an exception is raised if the email is not sent. The unit test uses a test handler that is executed when an email is requested and enables you to test the data related to the email, such as the sender and recipient. Once the <code class="literal">abortWorkItem()</code> method notifies the engine about the email delivery failure, the unit test verifies that the process handles such case by generating an error and logging the action. In this case, the process instance is eventually aborted.
				</p><div class="figure" id="idm140093624310272"><p class="title"><strong>Figure 12.2. Example email process</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/BPMN2/bpmn-example-email-task-process-test.png" alt="Example email process for testing"/></div></div></div><pre class="programlisting language-java">public void testProcess2() {

    createRuntimeManager("sample-process.bpmn");

    RuntimeEngine runtimeEngine = getRuntimeEngine();

    KieSession ksession = runtimeEngine.getKieSession();

    TestWorkItemHandler testHandler = getTestWorkItemHandler();

    ksession.getWorkItemManager().registerWorkItemHandler("Email", testHandler);

    ProcessInstance processInstance = ksession.startProcess("com.sample.bpmn.hello2");

    assertProcessInstanceActive(processInstance.getId(), ksession);
    assertNodeTriggered(processInstance.getId(), "StartProcess", "Email");

    WorkItem workItem = testHandler.getWorkItem();
    assertNotNull(workItem);
    assertEquals("Email", workItem.getName());
    assertEquals("me@mail.com", workItem.getParameter("From"));
    assertEquals("you@mail.com", workItem.getParameter("To"));

    ksession.getWorkItemManager().abortWorkItem(workItem.getId());
    assertProcessInstanceNotActive(processInstance.getId(), ksession);
    assertNodeTriggered(processInstance.getId(), "Gateway", "Failed", "Error");

}</pre></section></section><section class="chapter" id="manage-log-file-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Managing log files</h2></div></div></div><p>
				Red Hat Process Automation Manager manages the required maintenance, runtime data that is removed, including:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Process instance data</strong></span>, which is removed upon process instance completion.
					</li><li class="listitem">
						<span class="strong strong"><strong>Work item data</strong></span>, which is removed upon work item completion.
					</li><li class="listitem">
						<span class="strong strong"><strong>Task instance data</strong></span>, which is removed upon completion of a process to which the given task belongs.
					</li></ul></div><p>
				Runtime data, which is not cleaned automatically includes session information data that is based on the selected runtime strategy.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Singleton strategy</strong></span> ensures that runtime data of session information is not automatically removed.
					</li><li class="listitem">
						<span class="strong strong"><strong>Per request strategy</strong></span> allows automatic removal when a request is terminated.
					</li><li class="listitem">
						<span class="strong strong"><strong>Per process instances</strong></span> are automatically removed when a process instance is mapped to a session that is completed or aborted.
					</li></ul></div><p>
				In order to keep the track of process instances, Red Hat Process Automation Manager provides audit data tables. There are two ways to manage and maintain the audit data tables, including cleaning up the jobs <a class="link" href="#setup-auto-cleanup-proc" title="13.1. Setting up automatic cleanup job">automatically</a> and <a class="link" href="#manual-cleanup-con" title="13.2. Manual cleanup">manually</a>.
			</p><section class="section" id="setup-auto-cleanup-proc"><div class="titlepage"><div><div><h2 class="title">13.1. Setting up automatic cleanup job</h2></div></div></div><p>
					You can set up an automatic cleanup job in Business Central.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Manage</strong></span> &gt; <span class="strong strong"><strong>Jobs</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>New Job</strong></span>.
						</li><li class="listitem">
							Enter values for <span class="strong strong"><strong>Business Key</strong></span>, <span class="strong strong"><strong>Due On</strong></span>, and <span class="strong strong"><strong>Retries</strong></span> fields.
						</li><li class="listitem"><p class="simpara">
							Enter the following command into the <span class="strong strong"><strong>Type</strong></span> field.
						</p><pre class="screen">org.jbpm.executor.commands.LogCleanupCommand</pre></li><li class="listitem"><p class="simpara">
							To use the parameters, complete the following steps:
						</p><p class="simpara">
							For full parameters list, see <a class="xref" href="#clean-log-proc" title="13.3. Removing logs from the database">Section 13.3, “Removing logs from the database”</a>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Open the <span class="strong strong"><strong>Advanced</strong></span> tab.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Add Parameter</strong></span>.
								</li><li class="listitem">
									Enter a parameter in the <span class="strong strong"><strong>Key</strong></span> column and enter a parameter value in the <span class="strong strong"><strong>Value</strong></span> column.
								</li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Create</strong></span>.
						</li></ol></div><p>
					The automatic cleanup job is created.
				</p></section><section class="section" id="manual-cleanup-con"><div class="titlepage"><div><div><h2 class="title">13.2. Manual cleanup</h2></div></div></div><p>
					To perform manual cleanup, you can use the audit API. The audit API is divided into the following areas:
				</p><div class="table" id="idm140093628321856"><p class="title"><strong>Table 13.1. Audit API areas</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 67%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628317024" scope="col">Name</th><th align="left" valign="top" id="idm140093623792368" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628317024">
								<p>
									Process audit
								</p>
								</td><td align="left" valign="top" headers="idm140093623792368">
								<p>
									It is used to clean up process, node and variable logs that are accessible in the <code class="literal">jbpm-audit</code> module.
								</p>
								<p>
									For example, you can access the module as follows: <code class="literal">org.jbpm.process.audit.JPAAuditLogService</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628317024">
								<p>
									Task audit
								</p>
								</td><td align="left" valign="top" headers="idm140093623792368">
								<p>
									It is used to clean up tasks and events that are accessible in the <code class="literal">jbpm-human-task-audit</code> module.
								</p>
								<p>
									For example, you can access the module as follows: <code class="literal">org.jbpm.services.task.audit.service.TaskJPAAuditService</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628317024">
								<p>
									Executor jobs
								</p>
								</td><td align="left" valign="top" headers="idm140093623792368">
								<p>
									It is used to clean up executor jobs and errors that are accessible in the <code class="literal">jbpm-executor</code> module.
								</p>
								<p>
									For example, you can access the module as follows: <code class="literal">org.jbpm.executor.impl.jpa.ExecutorJPAAuditService</code>
								</p>
								</td></tr></tbody></table></div></div></section><section class="section" id="clean-log-proc"><div class="titlepage"><div><div><h2 class="title">13.3. Removing logs from the database</h2></div></div></div><p>
					Use <code class="literal">LogCleanupCommand</code> executor command to clean up the data, which is using the database space. The <code class="literal">LogCleanupCommand</code> consists of logic to automatically clean up all or selected data.
				</p><p>
					There are several configuration options that you can use with the <code class="literal">LogCleanupCommand</code>:
				</p><div class="table" id="logcleanupcommand_parameters_business-processes"><p class="title"><strong>Table 13.2. LogCleanupCommand parameters table</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 50%; " class="col_2"/><col style="width: 25%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628229216" scope="col">Name</th><th align="left" valign="top" id="idm140093628228128" scope="col">Description</th><th align="left" valign="top" id="idm140093628227040" scope="col">Is Exclusive</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">SkipProcessLog</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Indicates whether process and node instances, and process variables log cleanup is skipped when the command runs. The default value is <code class="literal">false</code>.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">SkipTaskLog</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Indicates if the task audit and event log cleanup are skipped. The default value is <code class="literal">false</code>.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">SkipExecutorLog</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Indicates if Red Hat Process Automation Manager executor entries cleanup is skipped. The default value is <code class="literal">false</code>.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">SingleRun</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Indicates if a job routine runs only once. The default value is <code class="literal">false</code>.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">NextRun</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Schedules the next job execution. The default value is <code class="literal">24h</code>.
								</p>
								<p>
									For example, set to <code class="literal">12h</code> for jobs to be executed every 12 hours. The schedule is ignored if you set <span class="strong strong"><strong>SingleRun</strong></span> to <code class="literal">true</code>, unless you set both <span class="strong strong"><strong>SingleRun</strong></span> and <span class="strong strong"><strong>NextRun</strong></span>. If both are set, the <span class="strong strong"><strong>NextRun</strong></span> schedule takes priority. The ISO format can be used to set the precise date.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">OlderThan</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Logs that are older than the specified date are removed. The date format is <code class="literal">YYYY-MM-DD</code>. Usually, this parameter is used for single run jobs.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									Yes, it is not used with <code class="literal">OlderThanPeriod</code> parameter.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">OlderThanPeriod</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Logs that are older than the specified timer expression are removed. For example, set <code class="literal">30d</code> to remove logs, which are older than 30 days.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									Yes, it is not used with <code class="literal">OlderThan</code> parameter.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">ForProcess</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Specifies process definition ID for logs that are removed.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">ForDeployment</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Specifies deployment ID of the logs that are removed.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									No, it is used with other parameters.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628229216">
								<p>
									<code class="literal">EmfName</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628228128">
								<p>
									Persistence unit name that is used to perform delete operation.
								</p>
								</td><td align="left" valign="top" headers="idm140093628227040">
								<p>
									Not applicable
								</p>
								</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						<code class="literal">LogCleanupCommand</code> does not remove any active instances, such as running process instances, task instances, or executor jobs.
					</p></div></div></section></section><section class="chapter" id="process-definitions-and-instances-con-business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Process definitions and process instances in Business Central</h2></div></div></div><p>
				A process definition is a Business Process Model and Notation (BPMN) 2.0 file that serves as a container for a process and its BPMN diagram. The process definition shows all of the available information about the business process, such as any associated subprocesses or the number of users and groups that are participating in the selected definition.
			</p><p>
				A process definition also defines the <code class="literal">import</code> entry for imported processes that the process definition uses, and the <code class="literal">relationship</code> entries.
			</p><div class="formalpara"><p class="title"><strong>BPMN2 source of a process definition</strong></p><p>
					
<pre class="screen">&lt;definitions id="Definition"
               targetNamespace="http://www.jboss.org/drools"
               typeLanguage="http://www.java.com/javaTypes"
               expressionLanguage="http://www.mvel.org/2.0"
               xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"Rule Task
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
               xmlns:g="http://www.jboss.org/drools/flow/gpd"
               xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
               xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
               xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
               xmlns:tns="http://www.jboss.org/drools"&gt;

    &lt;process&gt;
      PROCESS
    &lt;/process&gt;

    &lt;bpmndi:BPMNDiagram&gt;
     BPMN DIAGRAM DEFINITION
    &lt;/bpmndi:BPMNDiagram&gt;

    &lt;/definitions&gt;</pre>
				</p></div><p>
				After you have created, configured, and deployed your project that includes your business processes, you can view the list of all the process definitions in Business Central <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>. You can refresh the list of deployed process definitions at any time by clicking the refresh button in the upper-right corner.
			</p><p>
				The process definition list shows all the available process definitions that are deployed into the platform. Click any of the process definitions listed to show the corresponding process definition details. This displays information about the process definition, such as if there is a sub-process associated with it, or how many users and groups exist in the process definition. The <span class="strong strong"><strong>Diagram</strong></span> tab in the process definition details page contains the BPMN2-based diagram of the process definition.
			</p><p>
				Within each selected process definition, you can start a new process instance for the process definition by clicking the <span class="strong strong"><strong>New Process Instance</strong></span> button in the upper-right corner. Process instances that you start from the available process definitions are listed in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
			</p><p>
				You can also define the default pagination option for all users under the <span class="strong strong"><strong>Manage</strong></span> drop-down menu (<span class="strong strong"><strong>Process Definition</strong></span>, <span class="strong strong"><strong>Process Instances</strong></span>, <span class="strong strong"><strong>Tasks</strong></span>, <span class="strong strong"><strong>Jobs</strong></span>, and <span class="strong strong"><strong>Execution Errors</strong></span>) and in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
			</p><p>
				For more information about process and task administration in Business Central, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-managing-and-monitoring-business-processes"><span class="emphasis"><em>Managing and monitoring business processes in Business Central</em></span></a>.
			</p><section class="section" id="starting-process-instance-from-definition-proc_business-processes"><div class="titlepage"><div><div><h2 class="title">14.1. Starting a process instance from the process definitions page</h2></div></div></div><p>
					You can start a process instance in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>. This is useful for environments where you are working with several projects or process definitions at the same time.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A project with a process definition has been deployed in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>.
						</li><li class="listitem">
							Select the process definition for which you want to start a new process instance from the list. The details page of the definition opens.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>New Process Instance</strong></span> in the upper-right corner to start a new process instance.
						</li><li class="listitem">
							Provide any required information for the process instance.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit</strong></span> to create the process instance.
						</li><li class="listitem">
							View the new process instance in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li></ol></div></section><section class="section" id="starting-process-instance-from-instances-proc_business-processes"><div class="titlepage"><div><div><h2 class="title">14.2. Starting a process instance from the process instances page</h2></div></div></div><p>
					You can create new process instances or view the list of all the running process instances in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A project with a process definition has been deployed in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>New Process Instance</strong></span> in the upper-right corner and select the process definition for which you want to start a new process instance from the drop-down list.
						</li><li class="listitem">
							Provide any information required to start a new process instance.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Start</strong></span> to create the process instance.
						</p><p class="simpara">
							The new process instance appears in the <span class="strong strong"><strong>Manage Process Instances</strong></span> list.
						</p></li></ol></div></section><section class="section" id="define-proc-xml"><div class="titlepage"><div><div><h2 class="title">14.3. Process definitions in XML</h2></div></div></div><p>
					You can create processes directly in XML format using the BPMN 2.0 specifications. The syntax of these XML processes is defined using the BPMN 2.0 XML Schema Definition.
				</p><p>
					A process XML file consists of the following core sections:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">process</code>: This is the top part of the process XML that contains the definition of the different nodes and their properties. The process XML file consists of exactly one <code class="literal">&lt;process&gt;</code> element. This element contains parameters related to the process (its type, name, ID, and package name), and consists of three subsections: a header section where process-level information such as variables, globals, imports, and lanes are defined, a nodes section that defines each of the nodes in the process, and a connections section that contains the connections between all the nodes in the process.
						</li><li class="listitem">
							<code class="literal">BPMNDiagram</code>: This is the lower part of the process XML file that contains all graphical information, such as the location of the nodes. The nodes section contains a specific element for each node and defines the various parameters and any sub-elements for that node type.
						</li></ul></div><p>
					The following process XML file fragment shows a simple process that contains a sequence of a start event, a script task that prints <code class="literal">"Hello World"</code> to the console, and an end event:
				</p><pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;definitions
  id="Definition"
  targetNamespace="http://www.jboss.org/drools"
  typeLanguage="http://www.java.com/javaTypes"
  expressionLanguage="http://www.mvel.org/2.0"
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
  xmlns:g="http://www.jboss.org/drools/flow/gpd"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:tns="http://www.jboss.org/drools"&gt;

  &lt;process processType="Private" isExecutable="true" id="com.sample.hello" name="Hello Process"&gt;
    &lt;!-- nodes --&gt;
    &lt;startEvent id="_1" name="Start" /&gt;

    &lt;scriptTask id="_2" name="Hello"&gt;
      &lt;script&gt;System.out.println("Hello World");&lt;/script&gt;
    &lt;/scriptTask&gt;

    &lt;endEvent id="_3" name="End" &gt;
      &lt;terminateEventDefinition/&gt;
    &lt;/endEvent&gt;

    &lt;!-- connections --&gt;

    &lt;sequenceFlow id="_1-_2" sourceRef="_1" targetRef="_2" /&gt;
    &lt;sequenceFlow id="_2-_3" sourceRef="_2" targetRef="_3" /&gt;
  &lt;/process&gt;

  &lt;bpmndi:BPMNDiagram&gt;
    &lt;bpmndi:BPMNPlane bpmnElement="com.sample.hello" &gt;

      &lt;bpmndi:BPMNShape bpmnElement="_1" &gt;
        &lt;dc:Bounds x="16" y="16" width="48" height="48" /&gt;
      &lt;/bpmndi:BPMNShape&gt;

      &lt;bpmndi:BPMNShape bpmnElement="_2" &gt;
        &lt;dc:Bounds x="96" y="16" width="80" height="48" /&gt;
      &lt;/bpmndi:BPMNShape&gt;

      &lt;bpmndi:BPMNShape bpmnElement="_3" &gt;
        &lt;dc:Bounds x="208" y="16" width="48" height="48" /&gt;
      &lt;/bpmndi:BPMNShape&gt;

      &lt;bpmndi:BPMNEdge bpmnElement="_1-_2" &gt;
        &lt;di:waypoint x="40" y="40" /&gt;
        &lt;di:waypoint x="136" y="40" /&gt;
      &lt;/bpmndi:BPMNEdge&gt;

      &lt;bpmndi:BPMNEdge bpmnElement="_2-_3" &gt;
        &lt;di:waypoint x="136" y="40" /&gt;
        &lt;di:waypoint x="232" y="40" /&gt;
      &lt;/bpmndi:BPMNEdge&gt;

    &lt;/bpmndi:BPMNPlane&gt;
  &lt;/bpmndi:BPMNDiagram&gt;

&lt;/definitions&gt;</pre></section></section><section class="chapter" id="business-process-forms_business-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Forms in Business Central</h2></div></div></div><p>
				A form is a layout definition for a page, defined as HTML, that is displayed as a dialog window to the user during process and task instantiation. Task forms acquire data from a user for both the process and task instance execution, whereas process forms take input and output from process variables.
			</p><p>
				The input is then mapped to the task using the data input assignment, which you can use inside of a task. When the task is completed, the data is mapped as a data output assignment to provide the data to the parent process instance.
			</p><section class="section" id="form-modeler-con"><div class="titlepage"><div><div><h2 class="title">15.1. Form Modeler</h2></div></div></div><p>
					Red Hat Process Automation Manager provides a custom editor for defining forms called Form Modeler. With Form Modeler, you can generate forms for data objects, task forms, and process start forms without writing code. Form Modeler includes a widget library for binding multiple data types and a callback mechanism to send notifications when form values change. Form Modeler uses bean-based validation and supports binding form fields to static or dynamic models.
				</p><p>
					Form Modeler includes the following features:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Form modeling user interface for forms
						</li><li class="listitem">
							Form auto-generation from the data model or Java objects
						</li><li class="listitem">
							Data binding for Java objects
						</li><li class="listitem">
							Formula and expressions
						</li><li class="listitem">
							Customized forms layouts
						</li><li class="listitem">
							Forms embedding
						</li></ul></div><p>
					Form Modeler comes with predefined field types that you place onto the canvas to create a form.
				</p><div class="figure" id="idm140093623281776"><p class="title"><strong>Figure 15.1. Example mortgage loan application form</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/5011.png" alt="5011"/></div></div></div></section><section class="section" id="create-process-task-forms-proc"><div class="titlepage"><div><div><h2 class="title">15.2. Generating process and task forms in Business Central</h2></div></div></div><p>
					You can generate a process form from your business process that is displayed at process instantiation to the user who instantiated the process. You can also generate a task form from your business process that is displayed at user task instantiation, when the execution flow reaches the task, to the actor of the user task.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
						</li><li class="listitem">
							Click the project name to open the asset view and then click the business process name.
						</li><li class="listitem">
							In the process designer, click the process task that you want to create a form for (if applicable).
						</li><li class="listitem"><p class="simpara">
							In the upper-right toolbar, click the <span class="strong strong"><strong>Form Generation</strong></span> icon and select the forms that you want to generate:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Generate process form</strong></span>: Generates the form for the entire process. This is the initial form that a user must complete when the process instance is started.
								</li><li class="listitem">
									<span class="strong strong"><strong>Generate all forms</strong></span>: Generates the form for the entire process and for all user tasks.
								</li><li class="listitem">
									<span class="strong strong"><strong>Generate forms for selection</strong></span>: Generates the forms for the selected user task nodes.
								</li></ul></div><div class="figure" id="idm140093624465456"><p class="title"><strong>Figure 15.2. Form generation menu</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/auto-form-create.png" alt="auto form create"/></div></div></div><p class="simpara">
							The forms are created in the root directory of your project.
						</p></li><li class="listitem">
							Go to the root directory of your project in Business Central, click the new form name, and use the Form Modeler to customize the form to meet your requirements.
						</li></ol></div></section><section class="section" id="create-forms"><div class="titlepage"><div><div><h2 class="title">15.3. Manually creating forms in Business Central</h2></div></div></div><p>
					You can create task and process forms manually from your project asset view. This is another way to generate a form without selecting to generate forms from your business process. For example, the Form Modeler now supports creating forms from external data objects.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span> and click the project name.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add Asset</strong></span> → <span class="strong strong"><strong>Form</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Provide the following information in the <span class="strong strong"><strong>Create new Form</strong></span> window:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Form name (must be unique)
								</li><li class="listitem">
									Package name
								</li><li class="listitem"><p class="simpara">
									Model type: Select either <span class="strong strong"><strong>Business Process</strong></span> or <span class="strong strong"><strong>Data Object</strong></span>.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											For the <span class="strong strong"><strong>Business Process</strong></span> model type, select your business process from the <span class="strong strong"><strong>Select Process</strong></span> drop-down menu, and then select the form that you want to create from the <span class="strong strong"><strong>Select Form</strong></span> drop-down menu.
										</li><li class="listitem">
											For the <span class="strong strong"><strong>Data Object</strong></span> model type, select one of your project data objects from the <span class="strong strong"><strong>Select Data Object from Project</strong></span> drop-down menu.
										</li></ul></div></li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Ok</strong></span> to open the Form Modeler.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Components</strong></span> view on the left side of the Form Modeler, expand the <span class="strong strong"><strong>Model Fields</strong></span> and <span class="strong strong"><strong>Form Controls</strong></span> menus and create a new form by dragging your required fields and form controls to the canvas.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> to save your changes.
						</li></ol></div></section><section class="section" id="doc-attachments-con"><div class="titlepage"><div><div><h2 class="title">15.4. Document attachments in a form or process</h2></div></div></div><p>
					Red Hat Process Automation Manager supports document attachments in forms using the <code class="literal">Document</code> form field. With the <code class="literal">Document</code> form field, you can upload documents that are required as part of a form or process.
				</p><p>
					To enable document attachments in forms and processes, complete the following procedures:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Set the document marshalling strategy.
						</li><li class="listitem">
							Create a document variable in the business process.
						</li><li class="listitem">
							Map the task inputs and outputs to the document variable.
						</li></ol></div><section class="section" id="set-doc-marshalling"><div class="titlepage"><div><div><h3 class="title">15.4.1. Setting the document marshalling strategy</h3></div></div></div><p>
						The document marshalling strategy for your project determines where documents are stored for use with forms and processes. The default document marshalling strategy in Red Hat Process Automation Manager is <code class="literal">org.jbpm.document.marshalling.DocumentMarshallingStrategy</code>. This strategy uses a <code class="literal">DocumentStorageServiceImpl</code> class that stores documents locally in your <code class="literal"><span class="emphasis"><em>PROJECT_HOME</em></span>/.docs</code> folder. You can set this document marshalling strategy or a custom document marshalling strategy for your project in Business Central or in the <code class="literal">kie-deployment-descriptor.xml</code> file.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
							</li><li class="listitem">
								Select a project. The project <span class="strong strong"><strong>Assets</strong></span> window opens.
							</li><li class="listitem"><p class="simpara">
								Click the <span class="strong strong"><strong>Settings</strong></span> tab.
							</p><div class="figure" id="idm140093625608112"><p class="title"><strong>Figure 15.3. Settings tab</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/settings-tab.png" alt="Selecting the settings tab"/></div></div></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Deployments</strong></span> → <span class="strong strong"><strong>Marshalling Strategies</strong></span>→ <span class="strong strong"><strong>Add Marshalling Strategy</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the <span class="strong strong"><strong>Name</strong></span> field, enter the identifier of a document marshalling strategy, and in the <span class="strong strong"><strong>Resolver</strong></span> drop-down menu, select the corresponding resolver type:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										For single documents: Enter <code class="literal">org.jbpm.document.marshalling.DocumentMarshallingStrategy</code> as the document marshalling strategy and set the resolver type to <span class="strong strong"><strong>Reflection</strong></span>.
									</li><li class="listitem">
										For multiple documents: Enter <code class="literal">new org.jbpm.document.marshalling.DocumentCollectionImplMarshallingStrategy(new org.jbpm.document.marshalling.DocumentMarshallingStrategy())</code> as the document marshalling strategy and set the resolver type to <span class="strong strong"><strong>MVEL</strong></span>.
									</li><li class="listitem">
										For custom document support: Enter the identifier of the custom document marshalling strategy and select the relevant resolver type.
									</li></ul></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Test</strong></span> to validate your deployment descriptor file.
							</li><li class="listitem"><p class="simpara">
								Click <span class="strong strong"><strong>Deploy</strong></span> to build and deploy the updated project.
							</p><p class="simpara">
								Alternatively, if you are not using Business Central, you can navigate to <code class="literal"><span class="emphasis"><em>PROJECT_HOME</em></span>/src/main/resources/META_INF/kie-deployment-descriptor.xml</code> (if applicable) and edit the deployment descriptor file with the required <code class="literal">&lt;marshalling-strategies&gt;</code> elements.
							</p></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div><div class="formalpara"><p class="title"><strong>Example deployment descriptor file with document marshalling strategy for multiple documents</strong></p><p>
							
<pre class="programlisting language-xml">&lt;deployment-descriptor
    xsi:schemaLocation="http://www.jboss.org/jbpm deployment-descriptor.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;persistence-unit&gt;org.jbpm.domain&lt;/persistence-unit&gt;
  &lt;audit-persistence-unit&gt;org.jbpm.domain&lt;/audit-persistence-unit&gt;
  &lt;audit-mode&gt;JPA&lt;/audit-mode&gt;
  &lt;persistence-mode&gt;JPA&lt;/persistence-mode&gt;
  &lt;runtime-strategy&gt;SINGLETON&lt;/runtime-strategy&gt;
  &lt;marshalling-strategies&gt;
    &lt;marshalling-strategy&gt;
      &lt;resolver&gt;mvel&lt;/resolver&gt;
      &lt;identifier&gt;new org.jbpm.document.marshalling.DocumentCollectionImplMarshallingStrategy(new org.jbpm.document.marshalling.DocumentMarshallingStrategy());&lt;/identifier&gt;
    &lt;/marshalling-strategy&gt;
  &lt;/marshalling-strategies&gt;</pre>
						</p></div><section class="section" id="cust-marshalling-cms"><div class="titlepage"><div><div><h4 class="title">15.4.1.1. Using a custom document marshalling strategy for a content management system (CMS)</h4></div></div></div><p>
							The document marshalling strategy for your project determines where documents are stored for use with forms and processes. The default document marshalling strategy in Red Hat Process Automation Manager is <code class="literal">org.jbpm.document.marshalling.DocumentMarshallingStrategy</code>. This strategy uses a <code class="literal">DocumentStorageServiceImpl</code> class that stores documents locally in your <code class="literal"><span class="emphasis"><em>PROJECT_HOME</em></span>/.docs</code> folder. If you want to store form and process documents in a custom location, such as in a centralized content management system (CMS), add a custom document marshalling strategy to your project. You can set this document marshalling strategy in Business Central or in the <code class="literal">kie-deployment-descriptor.xml</code> file directly.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create a custom marshalling strategy <code class="literal">.java</code> file that includes an implementation of the <code class="literal">org.kie.api.marshalling.ObjectMarshallingStrategy</code> interface. This interface enables you to implement the variable persistence required for your custom document marshalling strategy.
								</p><p class="simpara">
									The following methods in this interface help you create your strategy:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">boolean accept(Object object)</code>: Determines if the specified object can be marshalled by the strategy
										</li><li class="listitem">
											<code class="literal">byte[] marshal(Context context, ObjectOutputStream os, Object object)</code>: Marshals the specified object and returns the marshalled object as <code class="literal">byte[]</code>
										</li><li class="listitem">
											<code class="literal">Object unmarshal(Context context, ObjectInputStream is, byte[] object, ClassLoader classloader)</code>: Reads the object received as <code class="literal">byte[]</code> and returns the unmarshalled object
										</li><li class="listitem">
											<code class="literal">void write(ObjectOutputStream os, Object object)</code>: Same as the <code class="literal">marshal</code> method, provided for backward compatibility
										</li><li class="listitem">
											<code class="literal">Object read(ObjectInputStream os)</code>: Same as the <code class="literal">unmarshal</code> method, provided for backward compatibility
										</li></ul></div><p class="simpara">
									The following code sample is an example <code class="literal">ObjectMarshallingStrategy</code> implementation for storing and retrieving data from a Content Management Interoperability Services (CMIS) system:
								</p><div class="formalpara"><p class="title"><strong>Example implementation for storing and retrieving data from a CMIS system</strong></p><p>
										
<pre class="programlisting language-java">package org.jbpm.integration.cmis.impl;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.HashMap;

import org.apache.chemistry.opencmis.client.api.Folder;
import org.apache.chemistry.opencmis.client.api.Session;
import org.apache.chemistry.opencmis.commons.data.ContentStream;
import org.apache.commons.io.IOUtils;
import org.drools.core.common.DroolsObjectInputStream;
import org.jbpm.document.Document;
import org.jbpm.integration.cmis.UpdateMode;

import org.kie.api.marshalling.ObjectMarshallingStrategy;

public class OpenCMISPlaceholderResolverStrategy extends OpenCMISSupport implements ObjectMarshallingStrategy {

	private String user;
	private String password;
	private String url;
	private String repository;
	private String contentUrl;
	private UpdateMode mode = UpdateMode.OVERRIDE;

	public OpenCMISPlaceholderResolverStrategy(String user, String password, String url, String repository) {
		this.user = user;
		this.password = password;
		this.url = url;
		this.repository = repository;
	}

	public OpenCMISPlaceholderResolverStrategy(String user, String password, String url, String repository, UpdateMode mode) {
		this.user = user;
		this.password = password;
		this.url = url;
		this.repository = repository;
		this.mode = mode;
	}

	   public OpenCMISPlaceholderResolverStrategy(String user, String password, String url, String repository, String contentUrl) {
	        this.user = user;
	        this.password = password;
	        this.url = url;
	        this.repository = repository;
	        this.contentUrl = contentUrl;
	    }

	    public OpenCMISPlaceholderResolverStrategy(String user, String password, String url, String repository, String contentUrl, UpdateMode mode) {
	        this.user = user;
	        this.password = password;
	        this.url = url;
	        this.repository = repository;
	        this.contentUrl = contentUrl;
	        this.mode = mode;
	    }

	public boolean accept(Object object) {
		if (object instanceof Document) {
			return true;
		}
		return false;
	}

	public byte[] marshal(Context context, ObjectOutputStream os, Object object) throws IOException {
		Document document = (Document) object;
		Session session = getRepositorySession(user, password, url, repository);
		try {
			if (document.getContent() != null) {
				String type = getType(document);
				if (document.getIdentifier() == null || document.getIdentifier().isEmpty()) {
					String location = getLocation(document);

					Folder parent = findFolderForPath(session, location);
					if (parent == null) {
						parent = createFolder(session, null, location);
					}
					org.apache.chemistry.opencmis.client.api.Document doc = createDocument(session, parent, document.getName(), type, document.getContent());
					document.setIdentifier(doc.getId());
					document.addAttribute("updated", "true");
				} else {
					if (document.getContent() != null &amp;&amp; "true".equals(document.getAttribute("updated"))) {
						org.apache.chemistry.opencmis.client.api.Document doc = updateDocument(session, document.getIdentifier(), type, document.getContent(), mode);

						document.setIdentifier(doc.getId());
						document.addAttribute("updated", "false");
					}
				}
			}
			ByteArrayOutputStream buff = new ByteArrayOutputStream();
	        ObjectOutputStream oos = new ObjectOutputStream( buff );
	        oos.writeUTF(document.getIdentifier());
	        oos.writeUTF(object.getClass().getCanonicalName());
	        oos.close();
	        return buff.toByteArray();
		} finally {
			session.clear();
		}
	}

	public Object unmarshal(Context context, ObjectInputStream ois, byte[] object, ClassLoader classloader) throws IOException, ClassNotFoundException {
		DroolsObjectInputStream is = new DroolsObjectInputStream( new ByteArrayInputStream( object ), classloader );
		String objectId = is.readUTF();
		String canonicalName = is.readUTF();
		Session session = getRepositorySession(user, password, url, repository);
		try {
			org.apache.chemistry.opencmis.client.api.Document doc = (org.apache.chemistry.opencmis.client.api.Document) findObjectForId(session, objectId);
			Document document = (Document) Class.forName(canonicalName).newInstance();
			document.setAttributes(new HashMap&lt;String, String&gt;());

			document.setIdentifier(objectId);
			document.setName(doc.getName());
			document.setLastModified(doc.getLastModificationDate().getTime());
			document.setSize(doc.getContentStreamLength());
			document.addAttribute("location", getFolderName(doc.getParents()) + getPathAsString(doc.getPaths()));
			if (doc.getContentStream() != null &amp;&amp; contentUrl == null) {
				ContentStream stream = doc.getContentStream();
				document.setContent(IOUtils.toByteArray(stream.getStream()));
				document.addAttribute("updated", "false");
				document.addAttribute("type", stream.getMimeType());
			} else {
			    document.setLink(contentUrl + document.getIdentifier());
			}
			return document;
		} catch(Exception e) {
			throw new RuntimeException("Cannot read document from CMIS", e);
		} finally {
			is.close();
			session.clear();
		}
	}

	public Context createContext() {
		return null;
	}

	// For backward compatibility with previous serialization mechanism
	public void write(ObjectOutputStream os, Object object) throws IOException {
		Document document = (Document) object;
		Session session = getRepositorySession(user, password, url, repository);
		try {
			if (document.getContent() != null) {
				String type = document.getAttribute("type");
				if (document.getIdentifier() == null) {
					String location = document.getAttribute("location");

					Folder parent = findFolderForPath(session, location);
					if (parent == null) {
						parent = createFolder(session, null, location);
					}
					org.apache.chemistry.opencmis.client.api.Document doc = createDocument(session, parent, document.getName(), type, document.getContent());
					document.setIdentifier(doc.getId());
					document.addAttribute("updated", "false");
				} else {
					if (document.getContent() != null &amp;&amp; "true".equals(document.getAttribute("updated"))) {
						org.apache.chemistry.opencmis.client.api.Document doc = updateDocument(session, document.getIdentifier(), type, document.getContent(), mode);

						document.setIdentifier(doc.getId());
						document.addAttribute("updated", "false");
					}
				}
			}
			ByteArrayOutputStream buff = new ByteArrayOutputStream();
	        ObjectOutputStream oos = new ObjectOutputStream( buff );
	        oos.writeUTF(document.getIdentifier());
	        oos.writeUTF(object.getClass().getCanonicalName());
	        oos.close();
		} finally {
			session.clear();
		}
	}

	public Object read(ObjectInputStream os) throws IOException, ClassNotFoundException {
		String objectId = os.readUTF();
		String canonicalName = os.readUTF();
		Session session = getRepositorySession(user, password, url, repository);
		try {
			org.apache.chemistry.opencmis.client.api.Document doc = (org.apache.chemistry.opencmis.client.api.Document) findObjectForId(session, objectId);
			Document document = (Document) Class.forName(canonicalName).newInstance();

			document.setIdentifier(objectId);
			document.setName(doc.getName());
			document.addAttribute("location", getFolderName(doc.getParents()) + getPathAsString(doc.getPaths()));
			if (doc.getContentStream() != null) {
				ContentStream stream = doc.getContentStream();
				document.setContent(IOUtils.toByteArray(stream.getStream()));
				document.addAttribute("updated", "false");
				document.addAttribute("type", stream.getMimeType());
			}
			return document;
		} catch(Exception e) {
			throw new RuntimeException("Cannot read document from CMIS", e);
		} finally {
			session.clear();
		}
	}

}</pre>
									</p></div></li><li class="listitem">
									In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Click the project name and click <span class="strong strong"><strong>Settings</strong></span>.
								</p><div class="figure" id="idm140093627462432"><p class="title"><strong>Figure 15.4. Settings tab</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/settings-tab.png" alt="Selecting the settings tab"/></div></div></div></li><li class="listitem">
									Click <span class="strong strong"><strong>Deployments</strong></span> → <span class="strong strong"><strong>Marshalling Strategies</strong></span>→ <span class="strong strong"><strong>Add Marshalling Strategy</strong></span>.
								</li><li class="listitem">
									In the <span class="strong strong"><strong>Name</strong></span> field, enter the identifier of the custom document marshalling strategy, such as <code class="literal">org.jbpm.integration.cmis.impl.OpenCMISPlaceholderResolverStrategy</code> in this example.
								</li><li class="listitem">
									Select the relevant option from the <span class="strong strong"><strong>Resolver</strong></span> drop-down menu, such as <span class="strong strong"><strong>Reflection</strong></span> in this example.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Test</strong></span> to validate your deployment descriptor file.
								</li><li class="listitem"><p class="simpara">
									Click <span class="strong strong"><strong>Deploy</strong></span> to build and deploy the updated project.
								</p><p class="simpara">
									Alternatively, if you are not using Business Central, you can navigate to <code class="literal"><span class="emphasis"><em>PROJECT_HOME</em></span>/src/main/resources/META_INF/kie-deployment-descriptor.xml</code> (if applicable) and edit the deployment descriptor file with the required <code class="literal">&lt;marshalling-strategies&gt;</code> elements.
								</p><div class="formalpara"><p class="title"><strong>Example deployment descriptor file with custom document marshalling strategy</strong></p><p>
										
<pre class="programlisting language-xml">&lt;deployment-descriptor
    xsi:schemaLocation="http://www.jboss.org/jbpm deployment-descriptor.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;persistence-unit&gt;org.jbpm.domain&lt;/persistence-unit&gt;
  &lt;audit-persistence-unit&gt;org.jbpm.domain&lt;/audit-persistence-unit&gt;
  &lt;audit-mode&gt;JPA&lt;/audit-mode&gt;
  &lt;persistence-mode&gt;JPA&lt;/persistence-mode&gt;
  &lt;runtime-strategy&gt;SINGLETON&lt;/runtime-strategy&gt;
  &lt;marshalling-strategies&gt;
    &lt;marshalling-strategy&gt;
      &lt;resolver&gt;reflection&lt;/resolver&gt;
      &lt;identifier&gt;
        org.jbpm.integration.cmis.impl.OpenCMISPlaceholderResolverStrategy
      &lt;/identifier&gt;
    &lt;/marshalling-strategy&gt;
  &lt;/marshalling-strategies&gt;</pre>
									</p></div></li><li class="listitem">
									To enable documents stored in a custom location to be attached to forms and processes, create a document variable in the relevant processes and map task inputs and outputs to that document variable in Business Central.
								</li></ol></div></section></section><section class="section" id="create-doc-var"><div class="titlepage"><div><div><h3 class="title">15.4.2. Creating a document variable in a business process</h3></div></div></div><p>
						After you set a document marshalling strategy, create a document variable in the related process to upload documents to a human task and for the document or documents to be visible in the <span class="strong strong"><strong>Process Instances</strong></span> view in Business Central.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have set a document marshalling strategy as described in <a class="xref" href="#set-doc-marshalling" title="15.4.1. Setting the document marshalling strategy">Section 15.4.1, “Setting the document marshalling strategy”</a>.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
							</li><li class="listitem">
								Click the project name to open the asset view and click the business process name.
							</li><li class="listitem">
								Click the canvas and click 
								<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
								 on the right side of the window to open the <span class="strong strong"><strong>Properties</strong></span> panel.
							</li><li class="listitem"><p class="simpara">
								Expand <span class="strong strong"><strong>Process Data</strong></span> and click 
								<span class="inlinemediaobject"><img src="images/_images/getting-started/6176.png" alt="6176"/></span>
								 and enter the following values:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Name</strong></span>: <code class="literal">document</code>
									</li><li class="listitem">
										<span class="strong strong"><strong>Custom Type</strong></span>: <code class="literal">org.jbpm.document.Document</code> for a single document or <code class="literal">org.jbpm.document.DocumentCollection</code> for multiple documents
									</li></ul></div></li></ol></div></section><section class="section" id="map-task-vars"><div class="titlepage"><div><div><h3 class="title">15.4.3. Mapping task inputs and outputs to the document variable</h3></div></div></div><p>
						If you want to view or modify the attachments inside of task forms, create assignments inside of the task inputs and outputs.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisties</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have a project that contains a business process asset that has at least one user task.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>.
							</li><li class="listitem">
								Click the project name to open the asset view and click the business process name.
							</li><li class="listitem">
								Click a user task and click 
								<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
								 on the right side of the window to open the <span class="strong strong"><strong>Properties</strong></span> panel.
							</li><li class="listitem">
								Expand <span class="strong strong"><strong>Implementation/Execution</strong></span> and next to <span class="strong strong"><strong>Assignments</strong></span>, click 
								<span class="inlinemediaobject"><img src="images/_images/getting-started/btn_assign.png" alt="btn assign"/></span>
								 to open the <span class="strong strong"><strong>Data I/O</strong></span> window.
							</li><li class="listitem"><p class="simpara">
								Next to <span class="strong strong"><strong>Data Inputs and Assignments</strong></span>, click <span class="strong strong"><strong>Add</strong></span> and enter the following values:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Name</strong></span>: <code class="literal">taskdoc_in</code>
									</li><li class="listitem">
										<span class="strong strong"><strong>Data Type</strong></span>: <code class="literal">org.jbpm.document.Document</code> for a single document or <code class="literal">org.jbpm.document.DocumentCollection</code> for multiple documents
									</li><li class="listitem">
										<span class="strong strong"><strong>Source</strong></span>: <code class="literal">document</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Next to <span class="strong strong"><strong>Data Outputs and Assignments</strong></span>, click <span class="strong strong"><strong>Add</strong></span> and enter the following values:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Name</strong></span>: <code class="literal">taskdoc_out</code>
									</li><li class="listitem">
										<span class="strong strong"><strong>Data Type</strong></span>: <code class="literal">org.jbpm.document.Document</code> for a single document or <code class="literal">org.jbpm.document.DocumentCollection</code> for multiple documents
									</li><li class="listitem">
										<span class="strong strong"><strong>Target</strong></span>: <code class="literal">document</code>
									</li></ul></div><p class="simpara">
								The <code class="literal">Source</code> and <code class="literal">Target</code> fields contain the name of the process variable you created earlier.
							</p></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></section></section></section><section class="chapter" id="advanced_process_concepts_and_tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Advanced process concepts and tasks</h2></div></div></div><section class="section" id="dmn-execution-business-process"><div class="titlepage"><div><div><h2 class="title">16.1. Invoking a Decision Model and Notation (DMN) service in a business process</h2></div></div></div><p>
					You can use Decision Model and Notation (DMN) to model a decision service graphically in a decision requirements diagram (DRD) in Business Central and then invoke that DMN service as part of a business process in Business Central. Business processes interact with DMN services by identifying the DMN service and mapping business data between DMN inputs and the business process properties.
				</p><p>
					As an illustration, this procedure uses an example <span class="strong strong"><strong>TrainStation</strong></span> project that defines train routing logic. This example project contains the following data object and DMN components designed in Business Central for the routing decision logic:
				</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">Train</code> object</strong></p><p>
						
<pre class="programlisting language-java">public class Train {

     private String departureStation;

     private String destinationStation;

     private BigDecimal railNumber;

     // Getters and setters
}</pre>
					</p></div><div class="figure" id="idm140093627635952"><p class="title"><strong>Figure 16.1. Example <code class="literal">Compute Rail</code> DMN model</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-graph.png" alt="dmn execution graph"/></div></div></div><div class="figure" id="idm140093627631632"><p class="title"><strong>Figure 16.2. Example <code class="literal">Rail</code> DMN decision table</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-expression.png" alt="dmn execution expression"/></div></div></div><div class="figure" id="idm140093627627344"><p class="title"><strong>Figure 16.3. Example <code class="literal">tTrain</code> DMN data type</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-data-type.png" alt="dmn execution data type"/></div></div></div><p>
					For more information about creating DMN models in Business Central, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_decision_services_in_red_hat_process_automation_manager#assembly-dmn-models"><span class="emphasis"><em>Designing a decision service using DMN models</em></span></a>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							All required data objects and DMN model components are defined in the project.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span> and click the project name.
						</li><li class="listitem">
							Select or create the business process asset in which you want to invoke the DMN service.
						</li><li class="listitem">
							In the process designer, use the left toolbar to drag and drop BPMN components as usual to define your overall business process logic, connections, events, tasks, or other elements.
						</li><li class="listitem"><p class="simpara">
							To incorporate a DMN service in the business process, add a <span class="strong strong"><strong>Business Rule</strong></span> task from the left toolbar or from the start-node options and insert the task in the relevant location in the process flow.
						</p><p class="simpara">
							For this example, the following <code class="literal">Accept Train</code> business process incorporates the DMN service in the <code class="literal">Route To Rail</code> node:
						</p><div class="figure" id="idm140093627312176"><p class="title"><strong>Figure 16.4. Example <code class="literal">Accept Train</code> business process with a DMN service</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-business-process.png" alt="dmn execution business process"/></div></div></div></li><li class="listitem"><p class="simpara">
							Select the business rule task node that you want to use for the DMN service, click <span class="strong strong"><strong>Properties</strong></span> in the upper-right corner of the process designer, and under <span class="strong strong"><strong>Implementation/Execution</strong></span>, define the following fields:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Rule Language</strong></span>: Select <code class="literal">DMN</code>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Namespace</strong></span>: Enter the unique namespace from the DMN model file. Example: <code class="literal">https://www.drools.org/kie-dmn</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Decision Name</strong></span>: Enter the name of the DMN decision node that you want to invoke in the selected process node. Example: <code class="literal">Rail</code>
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>DMN Model Name</strong></span>: Enter the DMN model name. Example: <code class="literal">Compute Rail</code>
								</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										When you explore the root node, ensure that the <span class="strong strong"><strong>Namespace</strong></span> and <span class="strong strong"><strong>DMN Model Name</strong></span> fields consist of the same value in BPMN as DMN diagram.
									</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Under <span class="strong strong"><strong>Data Assignments</strong></span> → <span class="strong strong"><strong>Assignments</strong></span>, click the <span class="strong strong"><strong>Edit</strong></span> icon and add the DMN input and output data to define the mapping between the DMN service and the process data.
						</p><p class="simpara">
							For the <code class="literal">Route To Rail</code> DMN service node in this example, you add an input assignment for <code class="literal">Train</code> that corresponds to the input node in the DMN model, and add an output assignment for <code class="literal">Rail</code> that corresponds to the decision node in the DMN model. The <span class="strong strong"><strong>Data Type</strong></span> must match the type that you set for that node in the DMN model, and the <span class="strong strong"><strong>Source</strong></span> and <span class="strong strong"><strong>Target</strong></span> definition is the relevant variable or field for the specified object.
						</p><div class="figure" id="idm140093627221936"><p class="title"><strong>Figure 16.5. Example input and output mapping for the <code class="literal">Route To Rail</code> DMN service node</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-io-mapping.png" alt="dmn execution io mapping"/></div></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> to save the data input and output data.
						</li><li class="listitem"><p class="simpara">
							Define the remainder of your business process according to how you want the completed DMN service to be handled.
						</p><p class="simpara">
							For this example, the <span class="strong strong"><strong>Properties</strong></span> → <span class="strong strong"><strong>Implementation/Execution</strong></span> → <span class="strong strong"><strong>On Exit Action</strong></span> value is set to the following code to store the rail number after the <code class="literal">Route To Rail</code> DMN service is complete:
						</p><div class="formalpara"><p class="title"><strong>Example code for <code class="literal">On Exit Action</code></strong></p><p>
								
<pre class="programlisting language-java">train.setRailNumber(rail);</pre>
							</p></div><p class="simpara">
							If the rail number is not computed, the process reaches a <code class="literal">No Appropriate Rail</code> end error node that is defined with the following condition expression:
						</p><div class="figure" id="idm140093627207376"><p class="title"><strong>Figure 16.6. Example condition for <code class="literal">No Appropriate Rail</code> end error node</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-negative-condition.png" alt="dmn execution negative condition"/></div></div></div><p class="simpara">
							If the rail number is computed, the process reaches an <code class="literal">Accept Train</code> script task that is defined with the following condition expression:
						</p><div class="figure" id="idm140093624571056"><p class="title"><strong>Figure 16.7. Example condition for <code class="literal">Accept Train</code> script task node</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-positive-condition.png" alt="dmn execution positive condition"/></div></div></div><p class="simpara">
							The <code class="literal">Accept Train</code> script task also uses the following script in <span class="strong strong"><strong>Properties</strong></span> → <span class="strong strong"><strong>Implementation/Execution</strong></span> → <span class="strong strong"><strong>Script</strong></span> to print a message about the train route and current rail:
						</p><pre class="programlisting language-java">com.myspace.trainstation.Train t =
    (com.myspace.trainstation.Train) kcontext.getVariable("train");
System.out.println("Train from: " + t.getDepartureStation() +
                   ", to: " + t.getDestinationStation() +
                   ",  is on rail: " + t.getRailNumber());</pre></li><li class="listitem"><p class="simpara">
							After you define your business process with the incorporated DMN service, save your process in the process designer, deploy the project, and run the corresponding process definition to invoke the DMN service.
						</p><p class="simpara">
							For this example, when you deploy the <span class="strong strong"><strong>TrainStation</strong></span> project and run the corresponding process definition, you open the process instance form for the <code class="literal">Accept Train</code> process definition and set the <code class="literal">departure station</code> and <code class="literal">destination station</code> fields to test the execution:
						</p><div class="figure" id="idm140093624558048"><p class="title"><strong>Figure 16.8. Example process instance form for the <code class="literal">Accept Train</code> process definition</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/dmn/dmn-execution-process-instance-form.png" alt="dmn execution process instance form"/></div></div></div><p class="simpara">
							After the process is executed, a message appears in the server log with the train route that you specified:
						</p><div class="formalpara"><p class="title"><strong>Example server log output for the <code class="literal">Accept Train</code> process</strong></p><p>
								
<pre class="screen">Train from: Zagreb, to: Belgrade,  is on rail: 1</pre>
							</p></div></li></ol></div></section></section><section class="chapter" id="additional_resources"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-process-services"><span class="emphasis"><em>Getting started with business processes</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-managing-and-monitoring-business-processes"><span class="emphasis"><em>Managing and monitoring business processes in Business Central</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-interacting-with-processes"><span class="emphasis"><em>Interacting with processes and tasks</em></span></a>
					</li></ul></div></section></div><div class="part" id="assembly-interacting-with-processes"><div class="titlepage"><div><div><h1 class="title">Part II. Interacting with processes and tasks</h1></div></div></div><div class="partintro" id="idm140093627601792"><div/><p>
				As a knowledge worker, you use Business Central in Red Hat Process Automation Manager to run processes and tasks of the business process application developed by citizen developers. A business process is a series of steps that are executed as defined in the process flow. To effectively interact with processes and tasks, you must have a clear understanding of the business process and be able to determine the current step of a process or task. You can start and stop tasks; search and filter tasks and process instances; delegate, claim, and release tasks; set a due date and priority of tasks; view and add comments to tasks; and view the task history log.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat Process Automation Manager is installed. For installation options, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#interacting_with_processes_overview_con">18. Business processes in Business Central</a></span><ul><li><span class="section"><a href="#interacting-with-processes-user-definition-con">18.1. Knowledge worker user</a></span></li></ul></li><li><span class="chapter"><a href="#interacting-with-processes-knowledge-worker-tasks-con">19. Knowledge worker tasks in Business Central</a></span><ul><li><span class="section"><a href="#interacting-with-processes-starting-tasks-proc">19.1. Starting a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-stopping-tasks-proc">19.2. Stopping a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-delegating-tasks-proc">19.3. Delegating a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-claiming-tasks-proc">19.4. Claiming a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-releasing-tasks-proc">19.5. Releasing a task</a></span></li><li><span class="section"><a href="#interacting-with-processes-bulk-actions-on-tasks-con">19.6. Bulk actions on tasks</a></span><ul><li><span class="section"><a href="#interacting-with-processes-claiming-tasks-in-bulk-proc">19.6.1. Claiming tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-releasing-tasks-in-bulk-proc">19.6.2. Releasing tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-resuming-tasks-in-bulk-proc">19.6.3. Resuming tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-suspending-tasks-in-bulk-proc">19.6.4. Suspending tasks in bulk</a></span></li><li><span class="section"><a href="#interacting-with-processes-reassigning-tasks-in-bulk-proc">19.6.5. Reassigning tasks in bulk</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#interacting-with-processes-filter-tasks-con">20. Task filtering in Business Central</a></span><ul><li><span class="section"><a href="#task-inbox-columns-proc">20.1. Managing task list columns</a></span></li><li><span class="section"><a href="#interacting-with-processes-tasks-basic-filters-proc">20.2. Filtering tasks using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-tasks-advanced-filters-proc">20.3. Filtering tasks using advanced filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-tasks-default-filters-proc">20.4. Managing tasks using default filter</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-task-variables-basic-filters-proc">20.5. Viewing task variables using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-task-variables-advanced-filters-proc">20.6. Viewing task variables using advanced filters</a></span></li></ul></li><li><span class="chapter"><a href="#interacting-with-processes-process-instances-filters-con">21. Process instance filtering in Business Central</a></span><ul><li><span class="section"><a href="#interacting-with-processes-process-instances-basic-filters-proc">21.1. Filtering process instances using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-process-instances-advanced-filters-proc">21.2. Filtering process instances using advanced filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-process-instances-default-filters-proc">21.3. Managing process instances using default filter</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-process-instances-variables-basic-filters-proc">21.4. Viewing process instance variables using basic filters</a></span></li><li><span class="section"><a href="#interacting-with-processes-viewing-process-instances-variables-advanced-filters-proc">21.5. Viewing process instance variables using advanced filters</a></span></li></ul></li><li><span class="chapter"><a href="#configuring-emails-in-task-notification-proc">22. Configuring emails in task notification</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-setting-date-priority-proc">23. Setting the due date and priority of a task</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-viewing-adding-comments-proc">24. Viewing and adding comments to a task</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-viewing-task-history-log-proc">25. Viewing the history log of a task</a></span></li><li><span class="chapter"><a href="#interacting-with-processes-viewing-process-instance-history-log-proc_interacting-with-processes">26. Viewing the history log of a process instance</a></span></li></ul></div></div><section class="chapter" id="interacting_with_processes_overview_con"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Business processes in Business Central</h2></div></div></div><p>
				A business process application created by a citizen developer in Business Central depicts the flow of the business process as a series of steps. Each step executes according to the process flow chart. A process can consist of one or more smaller discrete tasks. As a knowledge worker, you work on processes and tasks that occur during business process execution.
			</p><p>
				As an example, using Red Hat Process Automation Manager, the mortgage department of a financial institution can automate the complete business process for a mortgage loan. When a new mortgage request comes in, a new process instance is created in the mortgage application. Because all requests follow the same set of rules for processing, consistency in every step is ensured. This results in an efficient process that reduces processing time and effort.
			</p><section class="section" id="interacting-with-processes-user-definition-con"><div class="titlepage"><div><div><h2 class="title">18.1. Knowledge worker user</h2></div></div></div><p>
					Consider the example of a customer account representative processing mortgage loan requests at a financial institution. As a customer account representative, you can perform the following tasks:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Accept and decline mortgage requests
						</li><li class="listitem">
							Search and filter through requests
						</li><li class="listitem">
							Delegate, claim, and release requests
						</li><li class="listitem">
							Set a due date and priority on requests
						</li><li class="listitem">
							View and comment on requests
						</li><li class="listitem">
							View the request history log
						</li></ul></div></section></section><section class="chapter" id="interacting-with-processes-knowledge-worker-tasks-con"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Knowledge worker tasks in Business Central</h2></div></div></div><p>
				A task is a part of the business process flow that a given user can claim and perform. You can handle tasks in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span> in Business Central. It displays the task list for the logged-in user. A task can be assigned to a particular user, multiple users, or to a group of users. If a task is assigned to multiple users or a group of users, it is visible in the task lists of all the users and any user can claim the task. When a task is claimed by a user, it is removed from the task list of other users.
			</p><section class="section" id="interacting-with-processes-starting-tasks-proc"><div class="titlepage"><div><div><h2 class="title">19.1. Starting a task</h2></div></div></div><p>
					You can start user tasks in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> and in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span> in Business Central.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Ensure that you are logged in and have appropriate permissions for starting and stopping tasks.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Work</strong></span> tab of the task page, click <span class="strong strong"><strong>Start</strong></span>. Once you start a task, its status changes to <span class="strong strong"><strong>InProgress</strong></span>.
						</p><p class="simpara">
							You can view the status of tasks on the <span class="strong strong"><strong>Task Inbox</strong></span> as well as on the <span class="strong strong"><strong>Manage Tasks</strong></span> page.
						</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Only users with the <code class="literal">process-admin</code> role can view the task list on the <span class="strong strong"><strong>Manage Tasks</strong></span> page. Users with the <code class="literal">admin</code> role can access the <span class="strong strong"><strong>Manage Tasks</strong></span> page, however they see only an empty task list.
					</p></div></div></section><section class="section" id="interacting-with-processes-stopping-tasks-proc"><div class="titlepage"><div><div><h2 class="title">19.2. Stopping a task</h2></div></div></div><p>
					You can stop user tasks from the <span class="strong strong"><strong>Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span> page.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Work</strong></span> tab of the task page, click <span class="strong strong"><strong>Complete</strong></span>.
						</li></ol></div></section><section class="section" id="interacting-with-processes-delegating-tasks-proc"><div class="titlepage"><div><div><h2 class="title">19.3. Delegating a task</h2></div></div></div><p>
					After tasks are created in Business Central, you can delegate them to others.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						A user assigned with any role can delegate, claim, or release tasks visible to the user. On the <span class="strong strong"><strong>Task Inbox</strong></span> page, the <span class="strong strong"><strong>Actual Owner</strong></span> column displays the name of the current owner of the task.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
						</li><li class="listitem">
							On the task page, click the <span class="strong strong"><strong>Assignments</strong></span> tab.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>User</strong></span> field, enter the name of the user or group you want to delegate the task to.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Delegate</strong></span>. Once a task is delegated, the owner of the task changes.
						</li></ol></div></section><section class="section" id="interacting-with-processes-claiming-tasks-proc"><div class="titlepage"><div><div><h2 class="title">19.4. Claiming a task</h2></div></div></div><p>
					After tasks are created in Business Central, you can claim the released tasks. A user can claim a task from the <span class="strong strong"><strong>Task Inbox</strong></span> page only if the task is assigned to a group the user belongs to.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Work</strong></span> tab of the task page, click <span class="strong strong"><strong>Claim</strong></span>.
						</li><li class="listitem"><p class="simpara">
							To claim the released task from the <span class="strong strong"><strong>Task Inbox</strong></span> page, do any of the following tasks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Click <span class="strong strong"><strong>Claim</strong></span> from the three dots in the <span class="strong strong"><strong>Actions</strong></span> column.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Claim and Work</strong></span> from the three dots in the <span class="strong strong"><strong>Actions</strong></span> column to open, view, and modify the details of a task.
								</li></ul></div></li></ol></div><p>
					The user who claims a task becomes the owner of the task.
				</p></section><section class="section" id="interacting-with-processes-releasing-tasks-proc"><div class="titlepage"><div><div><h2 class="title">19.5. Releasing a task</h2></div></div></div><p>
					After tasks are created in Business Central, you can release your tasks for others to claim.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
						</li><li class="listitem">
							On the task page, click <span class="strong strong"><strong>Release</strong></span>. A released task has no owner.
						</li></ol></div></section><section class="section" id="interacting-with-processes-bulk-actions-on-tasks-con"><div class="titlepage"><div><div><h2 class="title">19.6. Bulk actions on tasks</h2></div></div></div><p>
					In the <span class="strong strong"><strong>Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span> pages in Business Central, you can perform bulk actions over multiple tasks in a single operation.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If a specified bulk action is not permitted based on the task status, a notification is displayed and the operation is not executed on that particular task.
					</p></div></div><section class="section" id="interacting-with-processes-claiming-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">19.6.1. Claiming tasks in bulk</h3></div></div></div><p>
						After you create tasks in Business Central, you can claim the available tasks in bulk.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To claim the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Claim</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Claim</strong></span> on the <span class="strong strong"><strong>Claim selected tasks</strong></span> window.
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="interacting-with-processes-releasing-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">19.6.2. Releasing tasks in bulk</h3></div></div></div><p>
						You can release your owned tasks in bulk for others to claim.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To release the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Release</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Release</strong></span> on the <span class="strong strong"><strong>Release selected tasks</strong></span> window .
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="interacting-with-processes-resuming-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">19.6.3. Resuming tasks in bulk</h3></div></div></div><p>
						If there are suspended tasks in Business Central, you can resume them in bulk.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To resume the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Resume</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Resume</strong></span> on the <span class="strong strong"><strong>Resume selected tasks</strong></span> window.
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="interacting-with-processes-suspending-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">19.6.4. Suspending tasks in bulk</h3></div></div></div><p>
						After you create tasks in Business Central, you can suspend the tasks in bulk.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To suspend the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Suspend</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Suspend</strong></span> on the <span class="strong strong"><strong>Suspend selected tasks</strong></span> window .
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="interacting-with-processes-reassigning-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">19.6.5. Reassigning tasks in bulk</h3></div></div></div><p>
						After you create tasks in Business Central, you can reassign your tasks in bulk and delegate them to others.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To reassign the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Reassign</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Tasks reassignment</strong></span> window, enter the user ID of the user to whom you want to reassign the tasks.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Delegate</strong></span>.
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section></section></section><section class="chapter" id="interacting-with-processes-filter-tasks-con"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Task filtering in Business Central</h2></div></div></div><p>
				Business Central provides built-in filters to help you search tasks. You can filter tasks by attributes such as <span class="strong strong"><strong>Status</strong></span>, <span class="strong strong"><strong>Filter By</strong></span>, <span class="strong strong"><strong>Process Definition Id</strong></span>, and <span class="strong strong"><strong>Created On</strong></span>. It is also possible to create custom task filters using the <span class="strong strong"><strong>Advanced Filters</strong></span> option. The newly created custom filter is added to the <span class="strong strong"><strong>Saved Filters</strong></span> pane, which is accessible by clicking on the star icon on the left of the <span class="strong strong"><strong>Task Inbox</strong></span> page.
			</p><section class="section" id="task-inbox-columns-proc"><div class="titlepage"><div><div><h2 class="title">20.1. Managing task list columns</h2></div></div></div><p>
					In the task list on the <span class="strong strong"><strong>Task Inbox</strong></span> and <span class="strong strong"><strong>Manage Tasks</strong></span> windows, you can specify what columns to view and you can change the order of columns to better manage task information.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Only users with the <code class="literal">process-admin</code> role can view the task list on the <span class="strong strong"><strong>Manage Tasks</strong></span> page. Users with the <code class="literal">admin</code> role can access the <span class="strong strong"><strong>Manage Tasks</strong></span> page, however they see only an empty task list.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> or <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Task</strong></span> or <span class="strong strong"><strong>Task Inbox</strong></span> page, click the <span class="strong strong"><strong>Show/hide columns</strong></span> icon to the right of <span class="strong strong"><strong>Bulk Actions</strong></span>.
						</li><li class="listitem">
							Select or deselect columns to display. As you make changes to the list, columns in the task list appear or disapper.
						</li><li class="listitem"><p class="simpara">
							To rearrange the columns, drag the column heading to a new position. Note that your pointer must change to the icon shown in the following illustration before you can drag the column:
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/processes/column-icon.png" alt="column icon"/></div></div></li><li class="listitem">
							To save your changes as a filter, click <span class="strong strong"><strong>Save Filters</strong></span>, enter a name, and click <span class="strong strong"><strong>Save</strong></span>.
						</li><li class="listitem">
							To use your new filter, click the <span class="strong strong"><strong>Saved Filters</strong></span> icon (star) on the left of the screen and select your filter from the list.
						</li></ol></div></section><section class="section" id="interacting-with-processes-tasks-basic-filters-proc"><div class="titlepage"><div><div><h2 class="title">20.2. Filtering tasks using basic filters</h2></div></div></div><p>
					Business Central provides basic filters for filtering and searching through tasks based on their attributes such as <span class="strong strong"><strong>Status</strong></span>, <span class="strong strong"><strong>Filter By</strong></span>, <span class="strong strong"><strong>Process Definition Id</strong></span>, and <span class="strong strong"><strong>Created On</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the filter icon on the left of the page to expand the <span class="strong strong"><strong>Filters</strong></span> pane and select the filters you want to use:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Status</strong></span>: Filter tasks based on their status.
								</li><li class="listitem">
									<span class="strong strong"><strong>Filter By</strong></span>: Filter tasks based on <span class="strong strong"><strong>Id</strong></span>, <span class="strong strong"><strong>Task</strong></span>, <span class="strong strong"><strong>Correlation Key</strong></span>, <span class="strong strong"><strong>Actual Owner</strong></span>, or <span class="strong strong"><strong>Process Instance Description</strong></span> attribute.
								</li><li class="listitem">
									<span class="strong strong"><strong>Process Definition Id</strong></span>: Filter tasks based on process definition ids.
								</li><li class="listitem">
									<span class="strong strong"><strong>Created On</strong></span>: Filter tasks based on their creation date.
								</li></ul></div></li></ol></div><p>
					You can use the <span class="strong strong"><strong>Advanced Filters</strong></span> option to create custom filters in Business Central.
				</p></section><section class="section" id="interacting-with-processes-tasks-advanced-filters-proc"><div class="titlepage"><div><div><h2 class="title">20.3. Filtering tasks using advanced filters</h2></div></div></div><p>
					You can create custom task filters using the <span class="strong strong"><strong>Advanced Filters</strong></span> option in Business Central.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the advanced filters icon on the left of the page to expand the <span class="strong strong"><strong>Advanced Filters</strong></span> panel.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the filter name and description, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem">
							Select an attribute from the <span class="strong strong"><strong>Select column</strong></span> drop-down list, such as <span class="strong strong"><strong>Name</strong></span>. The content of the drop-down changes to <span class="strong strong"><strong>Name != value1</strong></span>.
						</li><li class="listitem">
							Click the drop-down again and choose the required logical query. For the <span class="strong strong"><strong>Name</strong></span> attribute, choose <span class="strong strong"><strong>equals to</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Change the value of the text field to the name of the task you want to filter.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The name must match the value defined in the business process of the project.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> and the tasks are filtered according to the filter definition.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> pane.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> pane, you can view the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="interacting-with-processes-tasks-default-filters-proc"><div class="titlepage"><div><div><h2 class="title">20.4. Managing tasks using default filter</h2></div></div></div><p>
					You can set a task filter as a default filter using the <span class="strong strong"><strong>Saved Filter</strong></span> option in Business Central. A default filter will be executed every time when the page is open by the user.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span> or go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, click the star icon on the left of the page to expand the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view the saved advanced filters.
						</p><div class="formalpara"><p class="title"><strong>Default filter selection for Tasks or Task Inbox</strong></p><p>
								<span class="inlinemediaobject"><img src="images/_images/processes/task-default-filters.png" alt="Default filter selection for Tasks or Task Inbox"/></span>
							</p></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, set a saved task filter as the default filter.
						</li></ol></div></section><section class="section" id="interacting-with-processes-viewing-task-variables-basic-filters-proc"><div class="titlepage"><div><div><h2 class="title">20.5. Viewing task variables using basic filters</h2></div></div></div><p>
					Business Central provides basic filters to view task variables in <span class="strong strong"><strong>Manage Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span>. You can view the task variables of the task as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> or go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the filter icon on the left of the page to expand the <span class="strong strong"><strong>Filters</strong></span> panel
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Filters</strong></span> panel, select the <span class="strong strong"><strong>Task Name</strong></span>.
						</p><p class="simpara">
							The filter is applied to the current task list.
						</p></li><li class="listitem">
							Click <span class="strong strong"><strong>Show/hide columns</strong></span> on the upper right of the tasks list and the task variables of the specified task id will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="interacting-with-processes-viewing-task-variables-advanced-filters-proc"><div class="titlepage"><div><div><h2 class="title">20.6. Viewing task variables using advanced filters</h2></div></div></div><p>
					You can use the <span class="strong strong"><strong>Advanced Filters</strong></span> option in Business Central to view task variables in <span class="strong strong"><strong>Manage Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span>. When you create a filter with the task defined, you can view the task variables of the task as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> or go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Tasks</strong></span> page or the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the advanced filters icon to expand the <span class="strong strong"><strong>Advanced Filters</strong></span> panel.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the name and description of the filter, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select the <code class="literal">name</code> attribute. The value will change to <span class="strong strong"><strong>name != value1</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select <span class="strong strong"><strong>equals to</strong></span> for the logical query.
						</li><li class="listitem">
							In the text field, enter the name of the task.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> and the filter is applied on the current task list.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Show/hide columns</strong></span> on the upper right of the tasks list and the task variables of the specified task id will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section></section><section class="chapter" id="interacting-with-processes-process-instances-filters-con"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Process instance filtering in Business Central</h2></div></div></div><p>
				Business Central now provides you with basic and advanced filters to help you filter and search through process instances. You can filter processes by attributes such as <span class="strong strong"><strong>State</strong></span>, <span class="strong strong"><strong>Errors</strong></span>, <span class="strong strong"><strong>Filter By</strong></span>, <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Start Date</strong></span>, and <span class="strong strong"><strong>Last update</strong></span>. You can also create custom filters using the <span class="strong strong"><strong>Advanced Filters</strong></span> option. The newly created custom filter is added to the <span class="strong strong"><strong>Saved Filters</strong></span> pane, which is accessible by clicking on the star icon on the left of the <span class="strong strong"><strong>Manage Process Instances</strong></span> page.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					All users except those with <code class="literal">manager</code> or <code class="literal">rest-all</code> roles can access and filter process instances in Business Central.
				</p></div></div><section class="section" id="interacting-with-processes-process-instances-basic-filters-proc"><div class="titlepage"><div><div><h2 class="title">21.1. Filtering process instances using basic filters</h2></div></div></div><p>
					Business Central provides basic filters for filtering and searching through process instances based on their attributes such as <span class="strong strong"><strong>State</strong></span>, <span class="strong strong"><strong>Errors</strong></span>, <span class="strong strong"><strong>Filter By</strong></span>, <span class="strong strong"><strong>Name</strong></span>, <span class="strong strong"><strong>Start Date</strong></span>, and <span class="strong strong"><strong>Last update</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the filter icon on the left of the page to expand the <span class="strong strong"><strong>Filters</strong></span> pane and select the filters you want to use:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>State</strong></span>: Filter process instances based on their state (<span class="strong strong"><strong>Active</strong></span>, <span class="strong strong"><strong>Aborted</strong></span>, <span class="strong strong"><strong>Completed</strong></span>, <span class="strong strong"><strong>Pending</strong></span>, and <span class="strong strong"><strong>Suspended</strong></span>).
								</li><li class="listitem">
									<span class="strong strong"><strong>Errors</strong></span>: Filter process instances that contain at least one or no errors.
								</li><li class="listitem">
									<span class="strong strong"><strong>Filter By</strong></span>: Filter process instances based on <span class="strong strong"><strong>Id</strong></span>, <span class="strong strong"><strong>Initiator</strong></span>, <span class="strong strong"><strong>Correlation Key</strong></span>, or <span class="strong strong"><strong>Description</strong></span> attribute.
								</li><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span>: Filter process instances based on process definition name.
								</li><li class="listitem">
									<span class="strong strong"><strong>Definition ID</strong></span>: The ID of the instance definition.
								</li><li class="listitem">
									<span class="strong strong"><strong>Deployment ID</strong></span>: The ID of the instance deployment.
								</li><li class="listitem">
									<span class="strong strong"><strong>SLA Compliance</strong></span>: SLA compliance status (<span class="strong strong"><strong>Aborted</strong></span>, <span class="strong strong"><strong>Met</strong></span>, <span class="strong strong"><strong>N/A</strong></span>, <span class="strong strong"><strong>Pending</strong></span>, and <span class="strong strong"><strong>Violated</strong></span>).
								</li><li class="listitem">
									<span class="strong strong"><strong>Parent Process ID</strong></span>: The ID of the parent process instance.
								</li><li class="listitem">
									<span class="strong strong"><strong>Start Date</strong></span>: Filter process instances based on their creation date.
								</li><li class="listitem">
									<span class="strong strong"><strong>Last update</strong></span>: Filter process instances based on their last modified date.
								</li></ul></div></li></ol></div><p>
					You can also use the <span class="strong strong"><strong>Advanced Filters</strong></span> option to create custom filters in Business Central.
				</p></section><section class="section" id="interacting-with-processes-process-instances-advanced-filters-proc"><div class="titlepage"><div><div><h2 class="title">21.2. Filtering process instances using advanced filters</h2></div></div></div><p>
					You can create custom process instance filters using the <span class="strong strong"><strong>Advanced Filters</strong></span> option in Business Central.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, click <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the <span class="strong strong"><strong>Advanced Filters</strong></span> icon.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> pane, enter the name and description of the filter, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem">
							Select an attribute from the <span class="strong strong"><strong>Select column</strong></span> drop-down list, for example, <span class="strong strong"><strong>processName</strong></span>. The content of the drop-down changes to <span class="strong strong"><strong>processName != value1</strong></span>.
						</li><li class="listitem">
							Click the drop-down again and choose the required logical query. For the <span class="strong strong"><strong>processName</strong></span> attribute, choose <span class="strong strong"><strong>equals to</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Change the value of the text field to the name of the process you want to filter.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">processName</code> must match the value defined in the business process of the project.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> and the processes are filtered according to the filter definition.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> pane.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> pane, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="interacting-with-processes-process-instances-default-filters-proc"><div class="titlepage"><div><div><h2 class="title">21.3. Managing process instances using default filter</h2></div></div></div><p>
					You can set a process instance filter as a default filter using the <span class="strong strong"><strong>Saved Filter</strong></span> option in Business Central. A default filter will be executed every time when the page is open by the user.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the star icon on the left of the page to expand the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view the saved advanced filters.
						</p><div class="formalpara"><p class="title"><strong>Default filter selection for Process Instances</strong></p><p>
								<span class="inlinemediaobject"><img src="images/_images/processes/process-instance-default-filters.png" alt="Default filter selection for Process Instances"/></span>
							</p></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, set a saved process instance filter as the default filter.
						</li></ol></div></section><section class="section" id="interacting-with-processes-viewing-process-instances-variables-basic-filters-proc"><div class="titlepage"><div><div><h2 class="title">21.4. Viewing process instance variables using basic filters</h2></div></div></div><p>
					Business Central provides basic filters to view process instance variables. You can view the process instance variables of the process as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the filter icon on the left of the page to expand the <span class="strong strong"><strong>Filters</strong></span> panel.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Filters</strong></span> panel, select the <span class="strong strong"><strong>Definition Id</strong></span>.
						</p><p class="simpara">
							The filter is applied on the current process instance list.
						</p></li><li class="listitem">
							Click <span class="strong strong"><strong>Show/hide columns</strong></span> on the upper right of the process instances list and the process instance variables of the specified process id will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="interacting-with-processes-viewing-process-instances-variables-advanced-filters-proc"><div class="titlepage"><div><div><h2 class="title">21.5. Viewing process instance variables using advanced filters</h2></div></div></div><p>
					You can use the <span class="strong strong"><strong>Advanced Filters</strong></span> option in Business Central to view process instance variables. When you create a filter over the column <code class="literal">processId</code>, you can view the process instance variables of the process as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the advanced filters icon to expand the <span class="strong strong"><strong>Advanced Filters</strong></span> panel.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the name and description of the filter, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select the <code class="literal">processId</code> attribute. The value will change to <span class="strong strong"><strong>processId != value1</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select <span class="strong strong"><strong>equals to</strong></span> for the logical query.
						</li><li class="listitem">
							In the text field, enter the name of the process id.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> and the filter is applied on the current process instance list.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Show/hide columns</strong></span> on the upper right of the process instances list and the process instance variables of the specified process id will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section></section><section class="chapter" id="configuring-emails-in-task-notification-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 22. Configuring emails in task notification</h2></div></div></div><p>
				Earlier it was possible to send notifications only to users or group of users in Business Central. Now you can directly add any email addresses as well.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You have created a project in Business Central.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a business process.
					</p><p class="simpara">
						For more information about creating a business process in Business Central, see <a class="xref" href="#design-bus-proc" title="Chapter 5. Creating a business process in Business Central">Chapter 5, <em>Creating a business process in Business Central</em></a>.
					</p></li><li class="listitem"><p class="simpara">
						Create a user task.
					</p><p class="simpara">
						For more information about creating a user task in Business Central, see <a class="xref" href="#create-user-task-proc" title="5.4. Creating user tasks">Section 5.4, “Creating user tasks”</a>.
					</p></li><li class="listitem">
						In the upper-right corner of the screen, click the <span class="strong strong"><strong>Properties</strong></span> icon.
					</li><li class="listitem">
						Expand <span class="strong strong"><strong>Implementation/Execution</strong></span> and click 
						<span class="inlinemediaobject"><img src="images/_images/getting-started/btn_assign.png" alt="btn assign"/></span>
						 next to <span class="strong strong"><strong>Notifications</strong></span>, to open the <span class="strong strong"><strong>Notifications</strong></span> window.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Notifications</strong></span> window, enter an email address in the <span class="strong strong"><strong>To: email(s)</strong></span> field to set the recipients of the task notification emails.
					</p><p class="simpara">
						You can add multiple email addresses separated by comma.
					</p></li><li class="listitem">
						Enter the subject and body of the email.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Ok</strong></span>.
					</p><p class="simpara">
						You can see the added email addresses in the <span class="strong strong"><strong>To: email(s)</strong></span> column in the <span class="strong strong"><strong>Notifications</strong></span> window.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>Ok</strong></span>.
					</li></ol></div></section><section class="chapter" id="interacting-with-processes-setting-date-priority-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 23. Setting the due date and priority of a task</h2></div></div></div><p>
				You can set the priority, due date, and time of a task in Business Central from the <span class="strong strong"><strong>Task Inbox</strong></span> page. Note that all users may not have permissions for setting priority and the due date of a task.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
					</li><li class="listitem">
						On the task page, click the <span class="strong strong"><strong>Details</strong></span> tab.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Due Date</strong></span> field, select the required date from the calendar and the due time from the drop-down list.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>Priority</strong></span> field, select the required priority.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Update</strong></span>.
					</li></ol></div></section><section class="chapter" id="interacting-with-processes-viewing-adding-comments-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 24. Viewing and adding comments to a task</h2></div></div></div><p>
				You can add comments to a task and also view the existing comments of a task in Business Central.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
					</li><li class="listitem">
						On the task page, click the <span class="strong strong"><strong>Work</strong></span> tab or the <span class="strong strong"><strong>Comments</strong></span> tab.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Comment</strong></span> field, enter the task related comment and click <span class="strong strong"><strong>Add Comment</strong></span> icon.
					</p><p class="simpara">
						All task related comments are displayed in a tabular form in the <span class="strong strong"><strong>Work</strong></span> as well as <span class="strong strong"><strong>Comments</strong></span> tab.
					</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To select or clear the <span class="strong strong"><strong>Show task comments at work tab</strong></span> check box, go to the Business Central home page, click the <span class="strong strong"><strong>Settings</strong></span> icon and select the <span class="strong strong"><strong>Process Administration</strong></span> option. Only users with the <code class="literal">admin</code> role have access to enable or disable this feature.
				</p></div></div></section><section class="chapter" id="interacting-with-processes-viewing-task-history-log-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 25. Viewing the history log of a task</h2></div></div></div><p>
				You can view the history log of a task in Business Central from the <span class="strong strong"><strong>Logs</strong></span> tab of task. The history log lists all the events in the "Date Time: Task event" format.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the task to open it.
					</li><li class="listitem"><p class="simpara">
						On the task page, click the <span class="strong strong"><strong>Logs</strong></span> tab.
					</p><p class="simpara">
						All events that take place during the task life cycle is listed in the <span class="strong strong"><strong>Logs</strong></span> tab.
					</p></li></ol></div></section><section class="chapter" id="interacting-with-processes-viewing-process-instance-history-log-proc_interacting-with-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 26. Viewing the history log of a process instance</h2></div></div></div><p>
				You can view the history log of a process instance in Business Central from its <span class="strong strong"><strong>Logs</strong></span> tab. The log lists all the events in the <code class="literal">Date Time: Event Node Type: Event Type</code> format.
			</p><p>
				You can filter the logs based on <span class="strong strong"><strong>Event Node Type</strong></span> and <span class="strong strong"><strong>Event Type</strong></span>. You can also view the details of the human nodes in the logs.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Process Instances</strong></span> page, click the process instance whose log you want to view.
					</li><li class="listitem">
						On the instance page, click the <span class="strong strong"><strong>Logs</strong></span> tab.
					</li><li class="listitem">
						Select the required check boxes from <span class="strong strong"><strong>Event Node Type</strong></span> and <span class="strong strong"><strong>Event Type</strong></span> pane to filter the log as per your need.
					</li><li class="listitem">
						To view additional information regarding human nodes, expand <span class="strong strong"><strong>Details</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Reset</strong></span> to revert to the default filter selection.
					</p><p class="simpara">
						All events that occur in a process instance life cycle are listed in the <span class="strong strong"><strong>Logs</strong></span> tab.
					</p></li></ol></div></section></div><div class="part" id="assembly-managing-and-monitoring-business-processes"><div class="titlepage"><div><div><h1 class="title">Part III. Managing and monitoring business processes in Business Central</h1></div></div></div><div class="partintro" id="idm140093628298784"><div/><p>
				As a process administrator, you can use Business Central in Red Hat Process Automation Manager to manage and monitor process instances and tasks running on a number of projects. From Business Central you can start a new process instance, verify the state of all process instances, and abort processes. You can view the list of jobs and tasks associated with your processes, as well as understand and communicate any process errors.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat JBoss Enterprise Application Platform 7.3 is installed. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/installation_guide/"><span class="emphasis"><em>Red Hat JBoss Enterprise Application Platform 7.3 Installation Guide</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is installed. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is running and you can log in to Business Central with the <code class="literal">process-admin</code> role. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#monitor-project-managing-and-monitoring-processes">27. Process monitoring</a></span></li><li><span class="chapter"><a href="#process-definitions-and-instances-con-managing-and-monitoring-processes">28. Process definitions and process instances in Business Central</a></span><ul><li><span class="section"><a href="#starting-process-instance-from-definition-proc_managing-and-monitoring-processes">28.1. Starting a process instance from the process definitions page</a></span></li><li><span class="section"><a href="#starting-process-instance-from-instances-proc_managing-and-monitoring-processes">28.2. Starting a process instance from the process instances page</a></span></li><li><span class="section"><a href="#generate-process-docs-proc_managing-and-monitoring-processes">28.3. Generating process documentation in Business Central</a></span></li></ul></li><li><span class="chapter"><a href="#process-instance-details-con-managing-and-monitoring-processes">29. Process instance management</a></span><ul><li><span class="section"><a href="#sect-process-instance-filtering-managing-and-monitoring-processes">29.1. Process instance filtering</a></span></li><li><span class="section"><a href="#creating-creating-new-process-instance-list-proc-managing-and-monitoring-processes">29.2. Creating a custom process instance list</a></span></li><li><span class="section"><a href="#process-instances-default-filters-proc">29.3. Managing process instances using a default filter</a></span></li><li><span class="section"><a href="#viewing-process-instances-variables-basic-filters-in-bc-proc">29.4. Viewing process instance variables using basic filters</a></span></li><li><span class="section"><a href="#viewing-process-instances-variables-advanced-filters-in-bc-proc">29.5. Viewing process instance variables using advanced filters</a></span></li><li><span class="section"><a href="#aborting-a-process-instance-from-central-proc-managing-and-monitoring-processes">29.6. Aborting a process instance using Business Central</a></span></li><li><span class="section"><a href="#signalling-process-instances-from-central-proc-managing-and-monitoring-processes">29.7. Signaling process instances from Business Central</a></span></li><li><span class="section"><a href="#asynchronous-signal-events-con">29.8. Asynchronous signal events</a></span><ul><li><span class="section"><a href="#asynchronous-signal-intermediate-events-proc">29.8.1. Configuring asynchronous signals for intermediate events</a></span></li><li><span class="section"><a href="#asynchronous-signal-end-events-proc">29.8.2. Configuring asynchronous signals for end events</a></span></li></ul></li><li><span class="section"><a href="#process-instance-admin-con">29.9. Process instance operations</a></span></li></ul></li><li><span class="chapter"><a href="#manage-tasks-con-managing-and-monitoring-processes">30. Task management</a></span><ul><li><span class="section"><a href="#sect-task-filtering-managing-and-monitoring-processes">30.1. Task filtering</a></span></li><li><span class="section"><a href="#creating_custom_tasks_filters-managing-and-monitoring-processes">30.2. Creating custom task filters</a></span></li><li><span class="section"><a href="#tasks-default-filters-proc">30.3. Managing tasks using a default filter</a></span></li><li><span class="section"><a href="#viewing-task-variables-basic-filters-in-bc-proc">30.4. Viewing task variables using basic filters</a></span></li><li><span class="section"><a href="#viewing-task-variables-advanced-filters-in-bc-proc">30.5. Viewing task variables using advanced filters</a></span></li><li><span class="section"><a href="#manage-service-tasks-proc_managing-and-monitoring-processes">30.6. Managing custom tasks in Business Central</a></span></li><li><span class="section"><a href="#user-task-admin-con">30.7. User task administration</a></span></li><li><span class="section"><a href="#managing-business-processes-bulk-actions-on-tasks-con">30.8. Bulk actions on tasks</a></span><ul><li><span class="section"><a href="#managing-business-processes-claiming-tasks-in-bulk-proc">30.8.1. Claiming tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-releasing-tasks-in-bulk-proc">30.8.2. Releasing tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-resuming-tasks-in-bulk-proc">30.8.3. Resuming tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-suspending-tasks-in-bulk-proc">30.8.4. Suspending tasks in bulk</a></span></li><li><span class="section"><a href="#managing-business-processes-reassigning-tasks-in-bulk-proc">30.8.5. Reassigning tasks in bulk</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#execution-error-management-con_managing-and-monitoring-processes">31. Execution error management</a></span><ul><li><span class="section"><a href="#view-process-instance-errors-proc-managing-and-monitoring-processes">31.1. Viewing process execution errors in Business Central</a></span></li><li><span class="section"><a href="#manage-execution-errors-proc-managing-and-monitoring-processes">31.2. Managing execution errors</a></span></li><li><span class="section"><a href="#filtering-errors-proc-managing-and-monitoring-processes">31.3. Error filtering</a></span></li></ul></li><li><span class="chapter"><a href="#process-instance-migration-con">32. Process instance migration</a></span><ul><li><span class="section"><a href="#process-instance-migration-installing-service-proc">32.1. Installing the process instance migration service</a></span></li><li><span class="section"><a href="#process-instance-migration-creating-plan-proc">32.2. Creating a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-editing-plan-proc">32.3. Editing a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-exporting-plan-proc">32.4. Exporting a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-executing-plan-proc">32.5. Executing a migration plan</a></span></li><li><span class="section"><a href="#process-instance-migration-deleting-plan-proc">32.6. Deleting a migration plan</a></span></li></ul></li></ul></div></div><section class="chapter" id="monitor-project-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 27. Process monitoring</h2></div></div></div><p>
				Red Hat Process Automation Manager provides real-time monitoring for your business processes and includes the following capabilities:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Business managers can monitor processes in real time.
					</li><li class="listitem">
						Customers can monitor the current status of their requests.
					</li><li class="listitem">
						Administrators can easily monitor any errors related to process execution.
					</li></ul></div></section><section class="chapter" id="process-definitions-and-instances-con-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 28. Process definitions and process instances in Business Central</h2></div></div></div><p>
				A process definition is a Business Process Model and Notation (BPMN) 2.0 file that serves as a container for a process and its BPMN diagram. The process definition shows all of the available information about the business process, such as any associated subprocesses or the number of users and groups that are participating in the selected definition.
			</p><p>
				A process definition also defines the <code class="literal">import</code> entry for imported processes that the process definition uses, and the <code class="literal">relationship</code> entries.
			</p><div class="formalpara"><p class="title"><strong>BPMN2 source of a process definition</strong></p><p>
					
<pre class="screen">&lt;definitions id="Definition"
               targetNamespace="http://www.jboss.org/drools"
               typeLanguage="http://www.java.com/javaTypes"
               expressionLanguage="http://www.mvel.org/2.0"
               xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"Rule Task
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
               xmlns:g="http://www.jboss.org/drools/flow/gpd"
               xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
               xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
               xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
               xmlns:tns="http://www.jboss.org/drools"&gt;

    &lt;process&gt;
      PROCESS
    &lt;/process&gt;

    &lt;bpmndi:BPMNDiagram&gt;
     BPMN DIAGRAM DEFINITION
    &lt;/bpmndi:BPMNDiagram&gt;

    &lt;/definitions&gt;</pre>
				</p></div><p>
				After you have created, configured, and deployed your project that includes your business processes, you can view the list of all the process definitions in Business Central <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>. You can refresh the list of deployed process definitions at any time by clicking the refresh button in the upper-right corner.
			</p><p>
				The process definition list shows all the available process definitions that are deployed into the platform. Click any of the process definitions listed to show the corresponding process definition details. This displays information about the process definition, such as if there is a sub-process associated with it, or how many users and groups exist in the process definition. The <span class="strong strong"><strong>Diagram</strong></span> tab in the process definition details page contains the BPMN2-based diagram of the process definition.
			</p><p>
				Within each selected process definition, you can start a new process instance for the process definition by clicking the <span class="strong strong"><strong>New Process Instance</strong></span> button in the upper-right corner. Process instances that you start from the available process definitions are listed in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
			</p><p>
				You can also define the default pagination option for all users under the <span class="strong strong"><strong>Manage</strong></span> drop-down menu (<span class="strong strong"><strong>Process Definition</strong></span>, <span class="strong strong"><strong>Process Instances</strong></span>, <span class="strong strong"><strong>Tasks</strong></span>, <span class="strong strong"><strong>Jobs</strong></span>, and <span class="strong strong"><strong>Execution Errors</strong></span>) and in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
			</p><section class="section" id="starting-process-instance-from-definition-proc_managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">28.1. Starting a process instance from the process definitions page</h2></div></div></div><p>
					You can start a process instance in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>. This is useful for environments where you are working with several projects or process definitions at the same time.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A project with a process definition has been deployed in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Definitions</strong></span>.
						</li><li class="listitem">
							Select the process definition for which you want to start a new process instance from the list. The details page of the definition opens.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>New Process Instance</strong></span> in the upper-right corner to start a new process instance.
						</li><li class="listitem">
							Provide any required information for the process instance.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit</strong></span> to create the process instance.
						</li><li class="listitem">
							View the new process instance in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li></ol></div></section><section class="section" id="starting-process-instance-from-instances-proc_managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">28.2. Starting a process instance from the process instances page</h2></div></div></div><p>
					You can create new process instances or view the list of all the running process instances in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A project with a process definition has been deployed in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>New Process Instance</strong></span> in the upper-right corner and select the process definition for which you want to start a new process instance from the drop-down list.
						</li><li class="listitem">
							Provide any information required to start a new process instance.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Start</strong></span> to create the process instance.
						</p><p class="simpara">
							The new process instance appears in the <span class="strong strong"><strong>Manage Process Instances</strong></span> list.
						</p></li></ol></div></section><section class="section" id="generate-process-docs-proc_managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">28.3. Generating process documentation in Business Central</h2></div></div></div><p>
					In the process designer in Business Central, you can view and print a report of the process definition. The process documentation summarizes the components, data, and visual flow of the process in a format (PDF) that you can print and share more easily.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, navigate to a project that contains a business process and select the process.
						</li><li class="listitem"><p class="simpara">
							In the process designer, click the <span class="strong strong"><strong>Documentation</strong></span> tab to view the summary of the process file, and click <span class="strong strong"><strong>Print</strong></span> in the top-right corner of the window to print the PDF report.
						</p><div class="figure" id="idm140093624650560"><p class="title"><strong>Figure 28.1. Generate process documentation</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/processes/generate-process-docs.png" alt="Project-level service task settings"/></div></div></div></li></ol></div></section></section><section class="chapter" id="process-instance-details-con-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 29. Process instance management</h2></div></div></div><p>
				To view process instances, in Business Central, click <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>. Each row in the <span class="strong strong"><strong>Manage Process Instances</strong></span> list represents a process instance from a particular process definition. Each execution is differentiated from all the others by the internal state of the information that the process is manipulating. Click on a process instance to view the corresponding tabs with runtime information related to the process.
			</p><div class="figure" id="idm140093624640672"><p class="title"><strong>Figure 29.1. Process instance tab view</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/instance-tabs.png" alt="Process instance tab view"/></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Instance Details</strong></span>: Provides an overview about what is going on inside the process. It displays the current state of the instance and the current activity that is being executed.
					</li><li class="listitem">
						<span class="strong strong"><strong>Process Variables</strong></span>: Displays all of the process variables that are being manipulated by the instance, with the exception of the variables that contain documents. You can edit the process variable value and view its history.
					</li><li class="listitem">
						<span class="strong strong"><strong>Documents</strong></span>: Displays process documents if the process contains a variable of the type <span class="strong strong"><strong>org.jbpm.Document</strong></span>. This enables access, download, and manipulation of the attached documents.
					</li><li class="listitem">
						<span class="strong strong"><strong>Logs</strong></span>: Displays process instance logs for the end users. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#interacting-with-processes-viewing-process-instance-history-log-proc_interacting-with-processes"><span class="emphasis"><em>Interacting with processes and tasks</em></span></a>.
					</li><li class="listitem">
						<span class="strong strong"><strong>Diagram</strong></span>: Tracks the progress of the process instance through the BPMN2 diagram. The node or nodes of the process flow that are in progress are highlighted in red. Reusable subprocesses appear collapsed within the parent process. Double-click on the reusable subprocess node to open its diagram from the parent process diagram.
					</li></ul></div><p>
				For information on user credentials and conditions to be met to access KIE Server runtime data, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
			</p><section class="section" id="sect-process-instance-filtering-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">29.1. Process instance filtering</h2></div></div></div><p>
					For process instances in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>, you can use the <span class="strong strong"><strong>Filters</strong></span> and <span class="strong strong"><strong>Advanced Filters</strong></span> panels to sort process instances as needed.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the <span class="strong strong"><strong>Filters</strong></span> icon on the left of the page to select the filters that you want to use:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>State</strong></span>: Filter process instances based on their state (<span class="strong strong"><strong>Active</strong></span>, <span class="strong strong"><strong>Aborted</strong></span>, <span class="strong strong"><strong>Completed</strong></span>, <span class="strong strong"><strong>Pending</strong></span>, and <span class="strong strong"><strong>Suspended</strong></span>).
								</li><li class="listitem">
									<span class="strong strong"><strong>Errors</strong></span>: Filter process instances that contain at least one or no errors.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Filter By</strong></span>: Filter process instances based on the following attributes:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Id</strong></span>: Filter by process instance ID.
										</p><p class="simpara">
											Input: <code class="literal">Numeric</code>
										</p></li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Initiator</strong></span>: Filter by the user ID of the process instance initiator.
										</p><p class="simpara">
											The user ID is a unique value, and depends on the ID management system.
										</p><p class="simpara">
											Input: <code class="literal">String</code>
										</p></li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Correlation key</strong></span>: Filter by correlation key.
										</p><p class="simpara">
											Input: <code class="literal">String</code>
										</p></li><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Description</strong></span>: Filter by process instance description.
										</p><p class="simpara">
											Input: <code class="literal">String</code>
										</p></li></ul></div></li><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span>: Filter process instances based on process definition name.
								</li><li class="listitem">
									<span class="strong strong"><strong>Definition ID</strong></span>: The ID of the instance definition.
								</li><li class="listitem">
									<span class="strong strong"><strong>Deployment ID</strong></span>: The ID of the instance deployment.
								</li><li class="listitem">
									<span class="strong strong"><strong>SLA Compliance</strong></span>: SLA compliance status (<span class="strong strong"><strong>Aborted</strong></span>, <span class="strong strong"><strong>Met</strong></span>, <span class="strong strong"><strong>N/A</strong></span>, <span class="strong strong"><strong>Pending</strong></span>, and <span class="strong strong"><strong>Violated</strong></span>).
								</li><li class="listitem">
									<span class="strong strong"><strong>Parent Process ID</strong></span>: The ID of the parent process.
								</li><li class="listitem">
									<span class="strong strong"><strong>Start Date</strong></span>: Filter process instances based on their creation date.
								</li><li class="listitem">
									<span class="strong strong"><strong>Last update</strong></span>: Filter process instances based on their last modified date.
								</li></ul></div></li></ol></div><p>
					You can also use the <span class="strong strong"><strong>Advanced Filters</strong></span> option to create custom filters in Business Central.
				</p></section><section class="section" id="creating-creating-new-process-instance-list-proc-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">29.2. Creating a custom process instance list</h2></div></div></div><p>
					You can view the list of all the running process instances in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> in Business Central. From this page, you can manage the instances during run time and monitor their execution. You can customize which columns are displayed, the number of rows displayed per page, and filter the results. You can also create a custom process instance list.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A project with a process definition has been deployed in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the advanced filters icon on the left to open the list of process instance <span class="strong strong"><strong>Advanced Filters</strong></span> options.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the name and description of the filter that you want to use for your custom process instance list, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem"><p class="simpara">
							From the list of filter values, select the parameters and values to configure the custom process instance list, and click <span class="strong strong"><strong>Save</strong></span>.
						</p><p class="simpara">
							A new filter is created and immediately applied to the process instances list. The filter is also saved in the <span class="strong strong"><strong>Saved Filters</strong></span> list. You can access saved filters by clicking the star icon on the left side of the <span class="strong strong"><strong>Manage Process Instances</strong></span> page.
						</p></li></ol></div></section><section class="section" id="process-instances-default-filters-proc"><div class="titlepage"><div><div><h2 class="title">29.3. Managing process instances using a default filter</h2></div></div></div><p>
					You can set a process instance filter as a default filter using the <span class="strong strong"><strong>Saved Filter</strong></span> option in Business Central. A default filter will be executed every time when the page is open by the user.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the star icon on the left of the page to expand the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view the saved advanced filters.
						</p><div class="formalpara"><p class="title"><strong>Default filter selection for Process Instances</strong></p><p>
								<span class="inlinemediaobject"><img src="images/_images/admin-and-config/default-filters-process-instance.png" alt="Default filter selection for Process Instances"/></span>
							</p></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, set a saved process instance filter as the default filter.
						</li></ol></div></section><section class="section" id="viewing-process-instances-variables-basic-filters-in-bc-proc"><div class="titlepage"><div><div><h2 class="title">29.4. Viewing process instance variables using basic filters</h2></div></div></div><p>
					Business Central provides basic filters to view process instance variables. You can view the process instance variables of the process as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the filter icon on the left of the page to expand the <span class="strong strong"><strong>Filters</strong></span> panel.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Filters</strong></span> panel, select the <span class="strong strong"><strong>Definition Id</strong></span> and select a definition ID from the list.
						</p><p class="simpara">
							The filter is applied to the current process instance list.
						</p></li><li class="listitem">
							Click columns icon (to the right of <span class="strong strong"><strong>Bulk Actions)</strong></span> in the upper-right of the screen to diplay or hide columns in the process instances table.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="viewing-process-instances-variables-advanced-filters-in-bc-proc"><div class="titlepage"><div><div><h2 class="title">29.5. Viewing process instance variables using advanced filters</h2></div></div></div><p>
					You can use the <span class="strong strong"><strong>Advanced Filters</strong></span> option in Business Central to view process instance variables. When you create a filter over the column <code class="literal">processId</code>, you can view the process instance variables of the process as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, click the advanced filters icon to expand the <span class="strong strong"><strong>Advanced Filters</strong></span> panel.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the name and description of the filter, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select the <code class="literal">processId</code> attribute. The value will change to <span class="strong strong"><strong>processId != value1</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select <span class="strong strong"><strong>equals to</strong></span> for the query.
						</li><li class="listitem">
							In the text field, enter the name of the process id.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> and the filter is applied on the current process instance list.
						</li><li class="listitem">
							Click the columns icon (to the right of <span class="strong strong"><strong>Bulk Actions</strong></span>) in the upper-right of the process instances list and the process instance variables of the specified process ID will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="aborting-a-process-instance-from-central-proc-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">29.6. Aborting a process instance using Business Central</h2></div></div></div><p>
					If a process instance becomes obsolete, you can abort the process instance in Business Central.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> to view the list of available process instances.
						</li><li class="listitem">
							Select the process instance you want to abort from the list.
						</li><li class="listitem">
							In the process details page, click the <span class="strong strong"><strong>Abort</strong></span> button in the upper-right corner.
						</li></ol></div></section><section class="section" id="signalling-process-instances-from-central-proc-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">29.7. Signaling process instances from Business Central</h2></div></div></div><p>
					You can signal a process instance from Business Central.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A project with a process definition has been deployed in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
						</li><li class="listitem">
							Locate the required process instance, click the 
							<span class="inlinemediaobject"><img src="images/_images/processes/dotdotdotbutton.png" alt="Actions"/></span>
							 button and select <span class="strong strong"><strong>Signal</strong></span> from the drop-down menu.
						</li><li class="listitem"><p class="simpara">
							Fill the following fields:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Signal Name</strong></span>: Corresponds to the <code class="literal">SignalRef</code> or <code class="literal">MessageRef</code> attributes of the signal. This field is required.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										You can also send a <code class="literal">Message</code> event to the process by adding the <code class="literal">Message-</code> prefix in front of the <code class="literal">MessageRef</code> value.
									</p></div></div></li><li class="listitem">
									<span class="strong strong"><strong>Signal Data</strong></span>: Corresponds to data accompanying the signal. This field is optional.
								</li></ul></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When using the Business Central user interface, you can only signal Signal intermediate catch events.
					</p></div></div></section><section class="section" id="asynchronous-signal-events-con"><div class="titlepage"><div><div><h2 class="title">29.8. Asynchronous signal events</h2></div></div></div><p>
					When several process instances from different process definitions are waiting for the same signal, they are executed sequentially in the same thread. But, if one of those process instances throws a runtime exception, all the other process instances are affected and usually result in a rolled back transaction. To avoid this situation, Red Hat Process Automation Manager supports using asynchronous signals events for:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Throwing intermediate signal events
						</li><li class="listitem">
							End events
						</li></ul></div><section class="section" id="asynchronous-signal-intermediate-events-proc"><div class="titlepage"><div><div><h3 class="title">29.8.1. Configuring asynchronous signals for intermediate events</h3></div></div></div><p>
						Intermediate events drive the flow of a business process. Intermediate events are used to either catch or throw an event during the execution of the business process. An intermediate event handles a particular situation that occurs during process execution. A throwing signal intermediate event produces a signal object based on the defined properties.
					</p><p>
						You can configure an asynchronous signal for intermediate events in Business Central.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have created a project in Business Central and it contains at least one business process asset.
							</li><li class="listitem">
								A project with a process definition has been deployed in Business Central.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Open a business process asset.
							</li><li class="listitem">
								In the process designer canvas, drag and drop the <span class="strong strong"><strong>Intermediate Signal</strong></span> from the left toolbar.
							</li><li class="listitem">
								In the upper-right corner, click 
								<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
								 to open the <span class="strong strong"><strong>Properties</strong></span> panel.
							</li><li class="listitem">
								Expand <span class="strong strong"><strong>Data Assignments</strong></span>.
							</li><li class="listitem">
								Click the box under the <span class="strong strong"><strong>Assignments</strong></span> sub-section. The <span class="strong strong"><strong>Task Data I/O</strong></span> dialog box opens.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Data Inputs and Assignments</strong></span>.
							</li><li class="listitem">
								Enter a name of the throw event as <span class="strong strong"><strong>async</strong></span> in the <span class="strong strong"><strong>Name</strong></span> field.
							</li><li class="listitem">
								Leave the <span class="strong strong"><strong>Data Type</strong></span> and <span class="strong strong"><strong>Source</strong></span> fields blank.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>OK</strong></span>.
							</li></ol></div><p>
						It will automatically set the executor service on each session. This ensures that each process instance is signaled in a different transaction.
					</p></section><section class="section" id="asynchronous-signal-end-events-proc"><div class="titlepage"><div><div><h3 class="title">29.8.2. Configuring asynchronous signals for end events</h3></div></div></div><p>
						End events indicate the completion of a business process. All end events, with the exception of the none and terminate end events, are throw events. A throwing signal end event is used to finish a process or subprocess flow. When the execution flow enters the element, the execution flow finishes and produces a signal identified by its <code class="literal">SignalRef</code> property.
					</p><p>
						You can configure an asynchronous signal for end events in Business Central.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You have created a project in Business Central and it contains at least one business process asset.
							</li><li class="listitem">
								A project with a process definition has been deployed in Business Central.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Open a business process asset.
							</li><li class="listitem">
								In the process designer canvas, drag and drop the <span class="strong strong"><strong>End Signal</strong></span> from the left toolbar.
							</li><li class="listitem">
								In the upper-right corner, click 
								<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
								 to open the <span class="strong strong"><strong>Properties</strong></span> panel.
							</li><li class="listitem">
								Expand <span class="strong strong"><strong>Data Assignments</strong></span>.
							</li><li class="listitem">
								Click the box under the <span class="strong strong"><strong>Assignments</strong></span> sub-section. The <span class="strong strong"><strong>Task Data I/O</strong></span> dialog box opens.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Data Inputs and Assignments</strong></span>.
							</li><li class="listitem">
								Enter a name of the throw event as <span class="strong strong"><strong>async</strong></span> in the <span class="strong strong"><strong>Name</strong></span> field.
							</li><li class="listitem">
								Leave the <span class="strong strong"><strong>Data Type</strong></span> and <span class="strong strong"><strong>Source</strong></span> fields blank.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>OK</strong></span>.
							</li></ol></div><p>
						It will automatically set the executor service on each session. This ensures that each process instance is signaled in a different transaction.
					</p></section></section><section class="section" id="process-instance-admin-con"><div class="titlepage"><div><div><h2 class="title">29.9. Process instance operations</h2></div></div></div><p>
					Process instance administration API exposes the following operations for the process engine and the individual process instance.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>get process nodes - by process instance id</strong></span>: Returns all nodes, including all embedded subprocesses that exist in the process instance. You must retrieve the nodes from the specified process instance to ensure that the node exists and includes a valid ID so that it can be used by other administration operations.
						</li><li class="listitem">
							<span class="strong strong"><strong>cancel node instance - by process instance id and node instance id</strong></span>: Cancels a node instance within a process instance using the process and node instance IDs.
						</li><li class="listitem">
							<span class="strong strong"><strong>retrigger node instance - by process instance id and node instance id</strong></span>: Re-triggers a node instance by canceling the active node instance and creates a new node instance of the same type using the process and node instance IDs.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>update timer - by process instance id and timer id</strong></span>: Updates the timer expiration of an active timer based on the time elapsed since the timer was scheduled. For example, if a timer was initially created with delay of one hour and after thirty minutes you set it to update in two hours, it expires in one and a half hours from the time it was updated.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong>delay</strong></span>: The duration after the timer expires.
								</li><li class="listitem">
									<span class="strong strong"><strong>period</strong></span>: The interval between the timer expiration for cycle timers.
								</li><li class="listitem">
									<span class="strong strong"><strong>repeat limit</strong></span>: Limits the expiration for a specified number for cycle timers.
								</li></ul></div></li><li class="listitem">
							<span class="strong strong"><strong>update timer relative to current time - by process instance id and timer id</strong></span>: Updates the timer expiration of an active timer based on the current time. For example, if a timer was initially created with delay of one hour and after thirty minutes you set it to update in two hours, it expires in two hours from the time it was updated.
						</li><li class="listitem">
							<span class="strong strong"><strong>list timer instances - by process instance id</strong></span>: Returns all active timers for a specified process instance.
						</li><li class="listitem">
							<span class="strong strong"><strong>trigger node - by process instance id and node id</strong></span>: Triggers any node in a process instance at any time.
						</li></ul></div></section></section><section class="chapter" id="manage-tasks-con-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 30. Task management</h2></div></div></div><p>
				Tasks that are assigned to the current user appear in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span> in Business Central. You can click a task to open and begin working on it.
			</p><p>
				A user task can be assigned to a particular user, multiple users, or to a group. If assigned to multiple users or a group it appears in the task lists of all assigned users and any of the possible actors can claim the task. When a task is assigned to another user it no longer appears in your <span class="strong strong"><strong>Task Inbox</strong></span>.
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/admin-and-config/task-inbox.png" alt="Task inbox"/></div></div><p>
				Business administrators can view and manage all user tasks from the <span class="strong strong"><strong>Tasks</strong></span> page in Business Central, located under <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>. Users with the <code class="literal">admin</code> or <code class="literal">process-admin</code> role can access the <span class="strong strong"><strong>Tasks</strong></span> page but do not have access rights to view and manage tasks by default.
			</p><p>
				To manage all the tasks, a user must be specified as a process administrator by defining any of the following conditions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						User is specified as <code class="literal">task admin user</code>. The default value is <code class="literal">Administrator</code>.
					</li><li class="listitem">
						User belongs to the task administrators group. The default value is <code class="literal">Administrators</code>.
					</li></ul></div><p>
				You can configure the user and user group assignment with the <code class="literal">org.jbpm.ht.admin.user</code> and <code class="literal">org.jbpm.ht.admin.group</code> system properties.
			</p><p>
				You can open, view, and modify the details of a task, such as the due date, the priority, or the task description, by clicking a task in the list. The following tabs are available in the task page:
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/admin-and-config/task-details.png" alt="Task details"/></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Work</strong></span>: Displays basic details about the task and the task owner. You can click the <span class="strong strong"><strong>Claim</strong></span> button to claim the task. To undo the claim process, click the <span class="strong strong"><strong>Release</strong></span> button.
					</li><li class="listitem">
						<span class="strong strong"><strong>Details</strong></span>: Displays information such as task description, status, and due date.
					</li><li class="listitem">
						<span class="strong strong"><strong>Assignments</strong></span>: Displays the current owner of the task and enables you to delegate the task to another person or group.
					</li><li class="listitem">
						<span class="strong strong"><strong>Comments</strong></span>: Displays comments added by task user(s). You can delete an existing comment and add a new comment.
					</li><li class="listitem">
						<span class="strong strong"><strong>Admin</strong></span>: Displays the potential owner of the task and enables you to to forward the task to another person or group. It also displays the actual owner of the task and you can send a reminder to the actual owner of the task.
					</li><li class="listitem">
						<span class="strong strong"><strong>Logs</strong></span>: Displays task logs containing task life cycle events (such as task started, claimed, completed), updates made to task fields (such as task due date and priority).
					</li></ul></div><p>
				You can filter the tasks based on the filter parameters available by clicking the <span class="strong strong"><strong>Filters</strong></span> icon on the left side of the page. For more information about filtering, see <a class="xref" href="#sect-task-filtering-managing-and-monitoring-processes" title="30.1. Task filtering">Section 30.1, “Task filtering”</a>.
			</p><p>
				In addition to these, you can create custom filters to filter tasks based on the query parameters you define. For more information about custom tasks filters, see <a class="xref" href="#creating_custom_tasks_filters-managing-and-monitoring-processes" title="30.2. Creating custom task filters">Section 30.2, “Creating custom task filters”</a>.
			</p><section class="section" id="sect-task-filtering-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">30.1. Task filtering</h2></div></div></div><p>
					For tasks in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> and in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>, you can use the <span class="strong strong"><strong>Filters</strong></span> and <span class="strong strong"><strong>Advanced Filters</strong></span> panels to sort tasks as needed.
				</p><div class="figure" id="idm140093628443456"><p class="title"><strong>Figure 30.1. Filtering Tasks - Default View</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/TaskAdminSearchSmall.png" alt="Filtering Tasks - Default View"/></div></div></div><p>
					The <span class="strong strong"><strong>Manage Tasks</strong></span> page is only available to administrators and process administrators.
				</p><p>
					You can filter tasks by the following attributes in the <span class="strong strong"><strong>Filters</strong></span> panel:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Status</span></dt><dd><p class="simpara">
								Filter by task status. You can select more than one status to display results that meet any of the selected states. Removing the status filter displays all processes, regardless of status.
							</p><p class="simpara">
								The following filter states are available:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Completed
									</li><li class="listitem">
										Created
									</li><li class="listitem">
										Error
									</li><li class="listitem">
										Exited
									</li><li class="listitem">
										Failed
									</li><li class="listitem">
										InProgress
									</li><li class="listitem">
										Obsolete
									</li><li class="listitem">
										Ready
									</li><li class="listitem">
										Reserved
									</li><li class="listitem">
										Suspended
									</li></ul></div></dd><dt><span class="term">Id</span></dt><dd><p class="simpara">
								Filter by process instance ID.
							</p><p class="simpara">
								Input: <code class="literal">Numeric</code>
							</p></dd><dt><span class="term">Task</span></dt><dd><p class="simpara">
								Filter by task name.
							</p><p class="simpara">
								Input: <code class="literal">String</code>
							</p></dd><dt><span class="term">Correlation key</span></dt><dd><p class="simpara">
								Filter by correlation key.
							</p><p class="simpara">
								Input: <code class="literal">String</code>
							</p></dd><dt><span class="term">Actual Owner</span></dt><dd><p class="simpara">
								Filter by the task owner.
							</p><p class="simpara">
								The actual owner refers to the user responsible for executing the task. The search is based on user ID, which is a unique value and depends on the ID management system.
							</p><p class="simpara">
								Input: <code class="literal">String</code>
							</p></dd><dt><span class="term">Process Instance Description</span></dt><dd><p class="simpara">
								Filter by process instance description.
							</p><p class="simpara">
								Input: <code class="literal">String</code>
							</p></dd><dt><span class="term">Task Name</span></dt><dd>
								Filter by task name.
							</dd><dt><span class="term">Process Definition Id</span></dt><dd>
								Filter by process definition Id.
							</dd><dt><span class="term">SLA Compliance</span></dt><dd><p class="simpara">
								Filter by SLA compliance state.
							</p><p class="simpara">
								The following filter states are available:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Aborted
									</li><li class="listitem">
										Met
									</li><li class="listitem">
										N/A
									</li><li class="listitem">
										Pending
									</li><li class="listitem">
										Violated
									</li></ul></div></dd><dt><span class="term">Created On</span></dt><dd><p class="simpara">
								Filtering by date or time.
							</p><p class="simpara">
								This filter has the following quick filter options:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Last Hour
									</li><li class="listitem">
										Today
									</li><li class="listitem">
										Last 24 Hours
									</li><li class="listitem">
										Last 7 Days
									</li><li class="listitem">
										Last 30 Days
									</li><li class="listitem"><p class="simpara">
										Custom
									</p><p class="simpara">
										Selecting <span class="strong strong"><strong>Custom</strong></span> date and time filtering opens a calendar tool for selecting a date and time range.
									</p><div class="figure" id="idm140093624021056"><p class="title"><strong>Figure 30.2. Search by Date</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/DateRangeSearch.png" alt="Search by Date Range"/></div></div></div></li></ul></div></dd></dl></div></section><section class="section" id="creating_custom_tasks_filters-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">30.2. Creating custom task filters</h2></div></div></div><p>
					You can create a custom task filter based on a provided query in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>, or in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span> for tasks assigned to the current user.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Manage Tasks</strong></span> page, click the advanced filters icon on the left to open the list of <span class="strong strong"><strong>Advanced Filters</strong></span> options.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the name and description of the filter, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Select column</strong></span> drop-down menu, choose <span class="strong strong"><strong>name</strong></span>.
						</p><p class="simpara">
							The content of the drop-down menu changes to <code class="literal">name != value1</code>.
						</p></li><li class="listitem">
							Click the drop-down menu again and choose <span class="strong strong"><strong>equals to</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Rewrite the value of the text field to the name of the task you want to filter. Note that the name must match the value defined in the associated business process:
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/admin-and-config/task-name.png" alt="task name"/></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Ok</strong></span> to save the custom task filter.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/admin-and-config/new-fl-final.png" alt="new fl final"/></div></div><p class="simpara">
							After you apply the filter with a specified restriction, the set of configurable columns is based on the specific custom task filter and contains the following column options:
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/admin-and-config/in_name-column-new.png" alt="in name column new"/></div></div></li></ol></div></section><section class="section" id="tasks-default-filters-proc"><div class="titlepage"><div><div><h2 class="title">30.3. Managing tasks using a default filter</h2></div></div></div><p>
					You can set a task filter as a default filter using the <span class="strong strong"><strong>Saved Filter</strong></span> option in Business Central. A default filter will be executed every time when the page is open by the user.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span> or go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, click the star icon on the left of the page to expand the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view the saved advanced filters.
						</p><div class="formalpara"><p class="title"><strong>Default filter selection for Tasks or Task Inbox</strong></p><p>
								<span class="inlinemediaobject"><img src="images/_images/admin-and-config/default-filters-task.png" alt="Default filter selection for Tasks or Task Inbox"/></span>
							</p></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, set a saved task filter as the default filter.
						</li></ol></div></section><section class="section" id="viewing-task-variables-basic-filters-in-bc-proc"><div class="titlepage"><div><div><h2 class="title">30.4. Viewing task variables using basic filters</h2></div></div></div><p>
					Business Central provides basic filters to view task variables in <span class="strong strong"><strong>Manage Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span>. You can view the task variables of the task as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> or go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the filter icon on the left of the page to expand the <span class="strong strong"><strong>Filters</strong></span> panel
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Filters</strong></span> panel, select the <span class="strong strong"><strong>Task Name</strong></span>.
						</p><p class="simpara">
							The filter is applied on the current task list.
						</p></li><li class="listitem">
							Click <span class="strong strong"><strong>Show/hide columns</strong></span> on the upper right of the tasks list and the task variables of the specified task id will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="viewing-task-variables-advanced-filters-in-bc-proc"><div class="titlepage"><div><div><h2 class="title">30.5. Viewing task variables using advanced filters</h2></div></div></div><p>
					You can use the <span class="strong strong"><strong>Advanced Filters</strong></span> option in Business Central to view task variables in <span class="strong strong"><strong>Manage Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span>. When you create a filter with the task defined, you can view the task variables of the task as columns using <span class="strong strong"><strong>Show/hide columns</strong></span>.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span> or go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Manage Tasks</strong></span> page or the <span class="strong strong"><strong>Task Inbox</strong></span> page, click the advanced filters icon to expand the <span class="strong strong"><strong>Advanced Filters</strong></span> panel.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Advanced Filters</strong></span> panel, enter the name and description of the filter, and click <span class="strong strong"><strong>Add New</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select the <code class="literal">name</code> attribute. The value will change to <span class="strong strong"><strong>name != value1</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Select column</strong></span> list, select <span class="strong strong"><strong>equals to</strong></span> for the logical query.
						</li><li class="listitem">
							In the text field, enter the name of the task.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> and the filter is applied on the current task list.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Show/hide columns</strong></span> on the upper right of the tasks list and the task variables of the specified task id will be displayed.
						</li><li class="listitem"><p class="simpara">
							Click the star icon to open the <span class="strong strong"><strong>Saved Filters</strong></span> panel.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Saved Filters</strong></span> panel, you can view all the saved advanced filters.
						</p></li></ol></div></section><section class="section" id="manage-service-tasks-proc_managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">30.6. Managing custom tasks in Business Central</h2></div></div></div><p>
					Custom tasks (work items) are tasks that you can customize and reuse across multiple business processes or across all projects in Business Central. Red Hat Process Automation Manager provides a set of custom tasks within the custom task repository in Business Central. You can enable or disable the default custom tasks and upload custom tasks into Business Central to implement the tasks in the relevant processes.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Red Hat Process Automation Manager includes a limited set of supported custom tasks. Custom tasks that are not included in Red Hat Process Automation Manager are not supported.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In Business Central, click 
							<span class="inlinemediaobject"><img src="images/_images/project-data/gear-icon.png" alt="gear icon"/></span>
							 in the upper-right corner and select <span class="strong strong"><strong>Custom Tasks Administration</strong></span>.
						</p><p class="simpara">
							This page lists the custom task installation settings and available custom tasks for processes in projects throughout Business Central. The custom tasks that you enable on this page become available in the project-level settings where you can then install each custom task to be used in processes. The way in which the custom tasks are installed in a project is determined by the global settings that you enable or disable under <span class="strong strong"><strong>Settings</strong></span> on this <span class="strong strong"><strong>Custom Tasks Administration</strong></span> page.
						</p></li><li class="listitem"><p class="simpara">
							Under <span class="strong strong"><strong>Settings</strong></span>, enable or disable each setting to determine how the available custom tasks are implemented when a user installs them at the project level.
						</p><p class="simpara">
							The following custom task settings are available:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Install as Maven artifact</strong></span>: Uploads the custom task JAR file to the Maven repository that is configured with Business Central, if the file is not already present.
								</li><li class="listitem">
									<span class="strong strong"><strong>Install custom task dependencies into project</strong></span>: Adds any custom task dependencies to the <code class="literal">pom.xml</code> file of the project where the task is installed.
								</li><li class="listitem">
									<span class="strong strong"><strong>Use version range when installing custom task into project</strong></span>: Uses a version range instead of a fixed version of a custom task that is added as a project dependency. Example: <code class="literal">[7.16,)</code> instead of <code class="literal">7.16.0.Final</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Enable or disable (set to <span class="strong strong"><strong>ON</strong></span> or <span class="strong strong"><strong>OFF</strong></span>) any available custom tasks as needed. Custom tasks that you enable are displayed in project-level settings for all projects in Business Central.
						</p><div class="figure" id="idm140093625757120"><p class="title"><strong>Figure 30.3. Enable custom tasks and custom task settings</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/manage-service-tasks.png" alt="Custom Tasks Administration page"/></div></div></div></li><li class="listitem">
							To add a custom task, click <span class="strong strong"><strong>Add Custom Task</strong></span>, browse to the relevant JAR file, and click the <span class="strong strong"><strong>Upload</strong></span> icon. The JAR file must contain work item handler implementations annotated with <code class="literal">@Wid</code>.
						</li><li class="listitem">
							Optional: To remove a custom task, click <span class="strong strong"><strong>remove</strong></span> on the row of the custom task you want to remove and click <span class="strong strong"><strong>Ok</strong></span> to confirm removal.
						</li><li class="listitem">
							After you configure all required custom tasks, navigate to a project in Business Central and go to the project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Custom Tasks</strong></span> page to view the available custom tasks that you enabled.
						</li><li class="listitem">
							For each custom task, click <span class="strong strong"><strong>Install</strong></span> to make the task available to the processes in that project or click <span class="strong strong"><strong>Uninstall</strong></span> to exclude the task from the processes in the project.
						</li><li class="listitem"><p class="simpara">
							If you are prompted for additional information when you install a custom task, enter the required information and click <span class="strong strong"><strong>Install</strong></span> again.
						</p><p class="simpara">
							The required parameters for the custom task depend on the type of task. For example, rule and decision tasks require artifact GAV information (Group ID, Artifact ID, Version), email tasks require host and port access information, and REST tasks require API credentials. Other custom tasks might not require any additional parameters.
						</p><div class="figure" id="idm140093623769376"><p class="title"><strong>Figure 30.4. Install custom tasks for use in processes</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/manage-service-tasks-project.png" alt="Project-level custom task settings"/></div></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Return to the project page, select or add a business process in the project, and in the process designer palette, select the <span class="strong strong"><strong>Custom Tasks</strong></span> option to view the available custom tasks that you enabled and installed:
						</p><div class="figure" id="idm140093623761808"><p class="title"><strong>Figure 30.5. Access installed custom tasks in process designer</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/manage-service-tasks-process.png" alt="Custom tasks in process designer"/></div></div></div></li></ol></div></section><section class="section" id="user-task-admin-con"><div class="titlepage"><div><div><h2 class="title">30.7. User task administration</h2></div></div></div><p>
					User tasks enable you to include human actions as input to the business processes that you create. User task administration provides methods to manipulate user and group task assignments, data handling, time-based automatic notifications, and reassignments.
				</p><p>
					The following user task operations are available in Business Central:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>add/remove potential owners - by task id</strong></span>: Adds or removes users and groups using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>add/remove excluded owners - by task id</strong></span>: Adds or removes excluded owners using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>add/remove business administrators - by task id</strong></span>: Adds or removes business administrators using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>add task inputs - by task id</strong></span>: Provides a way to modify task input content after a task is created using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>remove task inputs - by task id</strong></span>: Removes task input variables using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>remove task output - by task id</strong></span>: Removes task output variables using the task ID.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>schedules new reassignment to given users/groups after given time elapses - by task id</strong></span>: Schedules automatic reassignment based on the time expression and the state of the task:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong>reassign if not started</strong></span>: Used if the task was not moved to the <code class="literal">InProgress</code> state.
								</li><li class="listitem">
									<span class="strong strong"><strong>reassign if not completed</strong></span>: Used if the task was not moved to the <code class="literal">Completed</code> state.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>schedules new email notification to given users/groups after given time elapses - by task id</strong></span>: Schedules automatic email notification based on the time expression and the state of the task:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong>notify if not started</strong></span>: Used if the task was not moved to the <code class="literal">InProgress</code> state.
								</li><li class="listitem">
									<span class="strong strong"><strong>notify if not completed</strong></span>: Used if the task was not moved to the <code class="literal">Completed</code> state.
								</li></ul></div></li><li class="listitem">
							<span class="strong strong"><strong>list scheduled task notifications - by task id</strong></span>: Returns all active task notifications using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>list scheduled task reassignments - by task id</strong></span>: Returns all active tasks reassignments using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>cancel task notification - by task id and notification id</strong></span>: Cancels and unschedules task notification using the task ID.
						</li><li class="listitem">
							<span class="strong strong"><strong>cancel task reassignment - by task id and reassignment id</strong></span>: Cancels and unschedules task reassignment using the task ID.
						</li></ul></div></section><section class="section" id="managing-business-processes-bulk-actions-on-tasks-con"><div class="titlepage"><div><div><h2 class="title">30.8. Bulk actions on tasks</h2></div></div></div><p>
					In the <span class="strong strong"><strong>Tasks</strong></span> and <span class="strong strong"><strong>Task Inbox</strong></span> pages in Business Central, you can perform bulk actions over multiple tasks in a single operation.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If a specified bulk action is not permitted based on the task status, a notification is displayed and the operation is not executed on that particular task.
					</p></div></div><section class="section" id="managing-business-processes-claiming-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">30.8.1. Claiming tasks in bulk</h3></div></div></div><p>
						After you create tasks in Business Central, you can claim the available tasks in bulk.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To claim the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Claim</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Claim</strong></span> on the <span class="strong strong"><strong>Claim selected tasks</strong></span> window.
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="managing-business-processes-releasing-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">30.8.2. Releasing tasks in bulk</h3></div></div></div><p>
						You can release your owned tasks in bulk for others to claim.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To release the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Release</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Release</strong></span> on the <span class="strong strong"><strong>Release selected tasks</strong></span> window .
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="managing-business-processes-resuming-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">30.8.3. Resuming tasks in bulk</h3></div></div></div><p>
						If there are suspended tasks in Business Central, you can resume them in bulk.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To resume the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Resume</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Resume</strong></span> on the <span class="strong strong"><strong>Resume selected tasks</strong></span> window.
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="managing-business-processes-suspending-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">30.8.4. Suspending tasks in bulk</h3></div></div></div><p>
						After you create tasks in Business Central, you can suspend the tasks in bulk.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To suspend the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Suspend</strong></span>.
							</li><li class="listitem">
								To confirm, click <span class="strong strong"><strong>Suspend</strong></span> on the <span class="strong strong"><strong>Suspend selected tasks</strong></span> window .
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section><section class="section" id="managing-business-processes-reassigning-tasks-in-bulk-proc"><div class="titlepage"><div><div><h3 class="title">30.8.5. Reassigning tasks in bulk</h3></div></div></div><p>
						After you create tasks in Business Central, you can reassign your tasks in bulk and delegate them to others.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In Business Central, complete one of the following steps:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To view the <span class="strong strong"><strong>Task Inbox</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
									</li><li class="listitem">
										To view the <span class="strong strong"><strong>Tasks</strong></span> page, select <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>.
									</li></ul></div></li><li class="listitem">
								To reassign the tasks in bulk, on the <span class="strong strong"><strong>Task Inbox</strong></span> page or the <span class="strong strong"><strong>Manage Tasks</strong></span> page, select two or more tasks from the <span class="strong strong"><strong>Task</strong></span> table.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Bulk Actions</strong></span> drop-down list, select <span class="strong strong"><strong>Bulk Reassign</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Tasks reassignment</strong></span> window, enter the user ID of the user to whom you want to reassign the tasks.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Delegate</strong></span>.
							</li></ol></div><p>
						For each task selected, a notification is displayed showing the result.
					</p></section></section></section><section class="chapter" id="execution-error-management-con_managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">Chapter 31. Execution error management</h2></div></div></div><p>
				When an execution error occurs for a business process, the process stops and reverts to the most recent stable state (the closest safe point) and continues its execution. If an error of any kind is not handled by the process the entire transaction rolls back, leaving the process instance in the previous wait state. Any trace of this is only visible in the logs, and usually displayed to the caller who sent the request to the process engine.
			</p><p>
				Users with process administrator (<code class="literal">process-admin</code>) or administrator (<code class="literal">admin</code>) roles are able to access error messages in Business Central. Execution error messaging provides the following primary benefits:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Better traceability
					</li><li class="listitem">
						Visibility in case of critical processes
					</li><li class="listitem">
						Reporting and analytics based on error situations
					</li><li class="listitem">
						External system error handling and compensation
					</li></ul></div><p>
				Configurable error handling is responsible for receiving any technical errors thrown throughout the process engine execution (including task service). The following technical exceptions apply:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Anything that extends <code class="literal">java.lang.Throwable</code>
					</li><li class="listitem">
						Process level error handling and any other exceptions not previously handled
					</li></ul></div><p>
				There are several components that make up the error handling mechanism and allow a pluggable approach to extend its capabilities.
			</p><p>
				The process engine entry point for error handling is the <code class="literal">ExecutionErrorManager</code>. This is integrated with <code class="literal">RuntimeManager</code>, which is then responsible for providing it to the underlying <code class="literal">KieSession</code> and <code class="literal">TaskService</code>.
			</p><p>
				From an API point of view, <code class="literal">ExecutionErrorManager</code> provides access to the following components:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">ExecutionErrorHandler</code>: The primary mechanism for error handling
					</li><li class="listitem">
						<code class="literal">ExecutionErrorStorage</code>: Pluggable storage for execution error information
					</li></ul></div><section class="section" id="view-process-instance-errors-proc-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">31.1. Viewing process execution errors in Business Central</h2></div></div></div><p>
					You can view process errors in two locations in Business Central:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Execution Errors</strong></span>
						</li></ul></div><p>
					In the <span class="strong strong"><strong>Manage Process Instances</strong></span> page, the <span class="strong strong"><strong>Errors</strong></span> column displays the number of errors, if any, for the current process instance.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An error has occurred while running a process in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> and hover over the number shown in the <span class="strong strong"><strong>Errors</strong></span> column.
						</li><li class="listitem"><p class="simpara">
							Click the number of errors shown in the <span class="strong strong"><strong>Errors</strong></span> column to navigate to the <span class="strong strong"><strong>Manage Execution Errors</strong></span> page.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Manage Execution Errors</strong></span> page shows a list of errors for all process instances.
						</p></li></ol></div></section><section class="section" id="manage-execution-errors-proc-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">31.2. Managing execution errors</h2></div></div></div><p>
					By definition, every process error that is detected and stored is unacknowledged and must be handled by someone or something (in case of automatic error recovery). Errors are filtered on the basis of whether or not they have been acknowledged. Acknowledging an error saves the user information and time stamp for traceability. You can access the <span class="strong strong"><strong>Error Management</strong></span> view at any time.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Execution Errors</strong></span>.
						</li><li class="listitem">
							Select an error from the list to open the <span class="strong strong"><strong>Details</strong></span> tab. This displays information about the error or errors.
						</li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Acknowledge</strong></span> button to acknowledge and clear the error. You can view the error later by selecting <span class="strong strong"><strong>Yes</strong></span> on the <span class="strong strong"><strong>Acknowledged</strong></span> filter in the <span class="strong strong"><strong>Manage Execution Errors</strong></span> page.
						</p><p class="simpara">
							If the error was related to a task, a <span class="strong strong"><strong>Go to Task</strong></span> button is displayed.
						</p></li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Go to Task</strong></span> button, if applicable, to view the associated job information in the <span class="strong strong"><strong>Manage Tasks</strong></span> page.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Manage Tasks</strong></span> page, you can restart, reschedule, or retry the corresponding task.
						</p></li></ol></div></section><section class="section" id="filtering-errors-proc-managing-and-monitoring-processes"><div class="titlepage"><div><div><h2 class="title">31.3. Error filtering</h2></div></div></div><p>
					For execution errors in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Execution Errors</strong></span>, you can use the <span class="strong strong"><strong>Filters</strong></span> and <span class="strong strong"><strong>Advanced Filters</strong></span> panels to sort errors as needed.
				</p><div class="figure" id="idm140093627767584"><p class="title"><strong>Figure 31.1. Filtering Errors - Default View</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/ErrorsSearchSmall.png" alt="Filtering Errors"/></div></div></div><p>
					You can filter execution errors by the following attributes in the <span class="strong strong"><strong>Filters</strong></span> panel:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Type</span></dt><dd><p class="simpara">
								Filter by errors by type. You can select multiple type filters. Removing the status filter displays all processes, regardless of status.
							</p><p class="simpara">
								The following filter states are available:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										DB
									</li><li class="listitem">
										Task
									</li><li class="listitem">
										Process
									</li><li class="listitem">
										Job
									</li></ul></div></dd><dt><span class="term">Process Instance Id</span></dt><dd><p class="simpara">
								Filter by process instance ID.
							</p><p class="simpara">
								Input: <code class="literal">Numeric</code>
							</p></dd><dt><span class="term">Job Id</span></dt><dd><p class="simpara">
								Filter by job ID. The job id is created automatically when the job is created.
							</p><p class="simpara">
								Input: <code class="literal">Numeric</code>
							</p></dd><dt><span class="term">Id</span></dt><dd><p class="simpara">
								Filter by process instance ID.
							</p><p class="simpara">
								Input: <code class="literal">Numeric</code>
							</p></dd><dt><span class="term">Acknowledged</span></dt><dd>
								Filter errors that have been or have not been acknowledged.
							</dd><dt><span class="term">Error Date</span></dt><dd><p class="simpara">
								Filtering by the date or time that the error occurred.
							</p><p class="simpara">
								This filter has the following quick filter options:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Last Hour
									</li><li class="listitem">
										Today
									</li><li class="listitem">
										Last 24 Hours
									</li><li class="listitem">
										Last 7 Days
									</li><li class="listitem">
										Last 30 Days
									</li><li class="listitem"><p class="simpara">
										Custom
									</p><p class="simpara">
										Selecting <span class="strong strong"><strong>Custom</strong></span> date and time filtering opens a calendar tool for selecting a date and time range.
									</p><div class="figure" id="idm140093625161248"><p class="title"><strong>Figure 31.2. Search by Date</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/DateRangeSearch.png" alt="Search by Date Range"/></div></div></div></li></ul></div></dd></dl></div></section></section><section class="chapter" id="process-instance-migration-con"><div class="titlepage"><div><div><h2 class="title">Chapter 32. Process instance migration</h2></div></div></div><p>
				Process instance migration (PIM) is a standalone service containing a user interface and a back-end. It is packaged as a Thorntail uber-JAR. You can use the PIM service to define the migration between two different process definitions, known as a migration plan. The user can then apply the migration plan to the running process instance in a specific KIE Server.
			</p><p>
				For more information about the PIM service, see <a class="link" href="https://github.com/kiegroup/droolsjbpm-integration/tree/master/process-migration-service">Process Instance Migration Service</a> in <a class="link" href="https://github.com/kiegroup"><span class="emphasis"><em>KIE (Drools, OptaPlanner and jBPM )</em></span></a>.
			</p><section class="section" id="process-instance-migration-installing-service-proc"><div class="titlepage"><div><div><h2 class="title">32.1. Installing the process instance migration service</h2></div></div></div><p>
					You can use the process instance migration (PIM) service to create, export and execute migration plans. The PIM service is provided through a GitHub repository. To install the PIM service, clone the GitHub repository, then run the service and access it in a web browser.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in a backup-ed Red Hat Process Automation Manager development environment.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the <code class="literal">rhpam-7.10.0-add-ons.zip</code> file from the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhpam&amp;productChanged=yes">Software Downloads</a> page for Red Hat Process Automation Manager 7.10.
						</li><li class="listitem">
							Unzip the downloaded archive.
						</li><li class="listitem">
							Move the <code class="literal">rhpam-7.10.0-process-migration-service-standalone.jar</code> file from the add-ons archive to a desired location.
						</li><li class="listitem"><p class="simpara">
							In the location, create a YAML file containing the kieserver and Thorntail configuration, for example:
						</p><pre class="screen">thorntail:
  deployment:
    process-migration.war:
      jaxrs:
        application-path: /rest
      web:
        login-config:
          auth-method: BASIC
          security-domain: pim
        security-constraints:
          - url-pattern: /*
            roles: [ admin ]
          - url-pattern: /health/*
  datasources:
    data-sources:
      pimDS:
        driver-name: h2
        connection-url: jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
        user-name: DS_USERNAME
        password: DS_PASSWORD
  security:
    security-domains:
      pim:
        classic-authentication:
          login-modules:
            UsersRoles:
              code: UsersRoles
              flag: required
              module-options:
                usersProperties: application-users.properties
                rolesProperties: application-roles.properties
kieservers:
  - host: http://localhost:8080/kie-server/services/rest/server
    username: KIESERVER_USERNAME
    password: KIESERVER_PASSWORD
  - host: http://localhost:8280/kie-server/services/rest/server
    username: KIESERVER_USERNAME
    password: KIESERVER_PASSWORD1</pre></li><li class="listitem"><p class="simpara">
							Start the PIM service:
						</p><pre class="screen">$ java -jar rhpam-7.10.0-process-migration-service-standalone.jar -s./config.yml</pre></li><li class="listitem">
							After the PIM service is up and running, enter <code class="literal">http://localhost:8080</code> in a web browser.
						</li></ol></div></section><section class="section" id="process-instance-migration-creating-plan-proc"><div class="titlepage"><div><div><h2 class="title">32.2. Creating a migration plan</h2></div></div></div><p>
					You can define the migration between two different process definitions, known as a migration plan, in the process instance migration (PIM) service web UI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in a backup-ed Red Hat Process Automation Manager development environment.
						</li><li class="listitem">
							The process instance migration service is running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Enter <code class="literal">http://localhost:8080</code> in a web browser.
						</li><li class="listitem">
							Log in to the PIM service.
						</li><li class="listitem">
							In the upper right corner of the <span class="strong strong"><strong>Process Instance Migration</strong></span> page, from the KIE Service list select the KIE Service you want to add a migration plan for.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add Plan</strong></span>. The <span class="strong strong"><strong>Add Migration Plan Wizard</strong></span> window opens.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Name</strong></span> field, enter a name for the migration plan.
						</li><li class="listitem">
							Optional: In the <span class="strong strong"><strong>Description</strong></span> field, enter a description for the migration plan.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Source ContainerID</strong></span> field, enter the source container ID.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Source ProcessId</strong></span> field, enter the source process ID.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Copy Source To Target</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Target ContainerID</strong></span> field, update the target container ID.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Retrieve Definition from backend</strong></span> and click <span class="strong strong"><strong>Next</strong></span>.
						</p><div class="informalfigure"><div style="text-align: center; " class="mediaobject"><img style="text-align: middle" src="images/_images/processes/pim-migration-wizard.png" alt="pim migration wizard"/></div></div></li><li class="listitem">
							From the <span class="strong strong"><strong>Source Nodes</strong></span> list, select the source node you want to map.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Target Nodes</strong></span> list, select the target node you want to map.
						</li><li class="listitem">
							If the <span class="strong strong"><strong>Source Process Definition Diagram</strong></span> pane is not displayed, click <span class="strong strong"><strong>Show Source Diagram</strong></span>.
						</li><li class="listitem">
							If the <span class="strong strong"><strong>Target Process Definition Diagram</strong></span> pane is not displayed, click <span class="strong strong"><strong>Show Target Diagram</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Optional: To modify the view in the diagram panes, perform any of the following tasks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									To select text, select the 
									<span class="inlinemediaobject"><img src="images/_images/processes/pim-selection-icon.png" alt="pim selection icon"/></span>
									 icon.
								</li><li class="listitem">
									To pan, select the 
									<span class="inlinemediaobject"><img src="images/_images/processes/pim-pan-icon.png" alt="pim pan icon"/></span>
									 icon.
								</li><li class="listitem">
									To zoom in, select the 
									<span class="inlinemediaobject"><img src="images/_images/processes/pim-zoom-in-icon.png" alt="pim zoom in icon"/></span>
									 icon.
								</li><li class="listitem">
									To zoom out, select the 
									<span class="inlinemediaobject"><img src="images/_images/processes/pim-zoom-out-icon.png" alt="pim zoom out icon"/></span>
									 icon.
								</li><li class="listitem">
									To fit to viewer, select the 
									<span class="inlinemediaobject"><img src="images/_images/processes/pim-fit-to-icon.png" alt="pim fit to icon"/></span>
									 icon.
								</li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Map these two nodes</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Optional: To export as a <code class="literal">JSON</code> file, click <span class="strong strong"><strong>Export</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Review &amp; Submit</strong></span> tab, review the plan and click <span class="strong strong"><strong>Submit Plan</strong></span>.
						</li><li class="listitem">
							Optional: To export as a <code class="literal">JSON</code> file, click <span class="strong strong"><strong>Export</strong></span>.
						</li><li class="listitem">
							Review the response and click <span class="strong strong"><strong>Close</strong></span>.
						</li></ol></div></section><section class="section" id="process-instance-migration-editing-plan-proc"><div class="titlepage"><div><div><h2 class="title">32.3. Editing a migration plan</h2></div></div></div><p>
					You can edit a migration plan in the process instance migration (PIM) service web UI. You can modify the migration plan name, description, specified nodes, and process instances.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in a backup-ed Red Hat Process Automation Manager development environment.
						</li><li class="listitem">
							The PIM service is running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Enter <code class="literal">http://localhost:8080</code> in a web browser.
						</li><li class="listitem">
							Log in to the PIM service.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Process Instance Migration</strong></span> page, select the <span class="strong strong"><strong>Edit Migration Plan</strong></span> <span class="inlinemediaobject"><img src="images/_images/processes/pim-edit-icon.png" alt="pim edit icon"/></span>
							 icon on the row of the migration plan you want to edit. The <span class="strong strong"><strong>Edit Migration Plan</strong></span> window opens.
						</li><li class="listitem">
							On each tab, modify the details you want to change.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Optional: To export as a <code class="literal">JSON</code> file, click <span class="strong strong"><strong>Export</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Review &amp; Submit</strong></span> tab, review the plan and click <span class="strong strong"><strong>Submit Plan</strong></span>.
						</li><li class="listitem">
							Optional: To export as a <code class="literal">JSON</code> file, click <span class="strong strong"><strong>Export</strong></span>.
						</li><li class="listitem">
							Review the response and click <span class="strong strong"><strong>Close</strong></span>.
						</li></ol></div></section><section class="section" id="process-instance-migration-exporting-plan-proc"><div class="titlepage"><div><div><h2 class="title">32.4. Exporting a migration plan</h2></div></div></div><p>
					You can export migration plans as a JSON file using the process instance migration (PIM) service web UI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in a backup-ed Red Hat Process Automation Manager development environment.
						</li><li class="listitem">
							The PIM service is running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Enter <code class="literal">http://localhost:8080</code> in a web browser.
						</li><li class="listitem">
							Log in to the PIM service.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Process Instance Migration</strong></span> page, select the <span class="strong strong"><strong>Export Migration Plan</strong></span> <span class="inlinemediaobject"><img src="images/_images/processes/pim-export-icon.png" alt="pim export icon"/></span>
							 icon on the row of the migration plan you want to execute. The <span class="strong strong"><strong>Export Migration Plan</strong></span> window opens.
						</li><li class="listitem">
							Review and click <span class="strong strong"><strong>Export</strong></span>.
						</li></ol></div></section><section class="section" id="process-instance-migration-executing-plan-proc"><div class="titlepage"><div><div><h2 class="title">32.5. Executing a migration plan</h2></div></div></div><p>
					You can execute the migration plan in the process instance migration (PIM) service web UI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in a backup-ed Red Hat Process Automation Manager development environment.
						</li><li class="listitem">
							The PIM service is running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Enter <code class="literal">http://localhost:8080</code> in a web browser.
						</li><li class="listitem">
							Log in to the PIM service.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Process Instance Migration</strong></span> page, select the <span class="strong strong"><strong>Execute Migration Plan</strong></span> <span class="inlinemediaobject"><img src="images/_images/processes/pim-execute-icon.png" alt="pim execute icon"/></span>
							 icon on the row of the migration plan you want to execute. The <span class="strong strong"><strong>Execute Migration Plan Wizard</strong></span> window opens.
						</li><li class="listitem">
							From the migration plan table, select the check box on the row of each running process instance you want to migrate, and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Callback URL</strong></span> field, enter the callback URL.
						</li><li class="listitem"><p class="simpara">
							To the right of <span class="strong strong"><strong>Run migration</strong></span>, perform one of the following tasks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									To execute the migration immediately, select <span class="strong strong"><strong>Now</strong></span>.
								</li><li class="listitem">
									To schedule the migration, select <span class="strong strong"><strong>Schedule</strong></span> and in the text field, enter the date and time, for example <code class="literal">06/20/2019 10:00 PM</code>.
								</li></ul></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Optional: To export as a <code class="literal">JSON</code> file, click <span class="strong strong"><strong>Export</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Execute Plan</strong></span>.
						</li><li class="listitem">
							Optional: To export as a <code class="literal">JSON</code> file, click <span class="strong strong"><strong>Export</strong></span>.
						</li><li class="listitem">
							Check the response and click <span class="strong strong"><strong>Close</strong></span>.
						</li></ol></div></section><section class="section" id="process-instance-migration-deleting-plan-proc"><div class="titlepage"><div><div><h2 class="title">32.6. Deleting a migration plan</h2></div></div></div><p>
					You can delete a migration plan in the process instance migration (PIM) service web UI.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in a backup-ed Red Hat Process Automation Manager development environment.
						</li><li class="listitem">
							The PIM service is running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Enter <code class="literal">http://localhost:8080</code> in a web browser.
						</li><li class="listitem">
							Log in to the PIM service.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Process Instance Migration</strong></span> page, select the <span class="strong strong"><strong>Delete</strong></span> <span class="inlinemediaobject"><img src="images/_images/processes/pim-delete-icon.png" alt="pim delete icon"/></span>
							 icon on the row of the migration plan you want to delete. The <span class="strong strong"><strong>Delete Migration Plan</strong></span> window opens.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Delete</strong></span> to confirm deletion.
						</li></ol></div></section></section></div><div class="part" id="assembly-designing-and-building-cases"><div class="titlepage"><div><div><h1 class="title">Part IV. Designing and building cases for case management</h1></div></div></div><div class="partintro" id="idm140093625590000"><div/><p>
				As a developer, you can use Business Central to configure Red Hat Process Automation Manager assets for case management.
			</p><p>
				Case management differs from Business Process Management (BPM). It focuses more on the actual data being handled throughout the case rather than on the sequence of steps taken to complete a goal. Case data is the most important piece of information in automated case handling, while business context and decision-making are in the hands of the human case worker.
			</p><p>
				Red Hat Process Automation Manager includes the <span class="strong strong"><strong>IT_Orders</strong></span> sample project in Business Central. This document refers to the sample project to explain case management concepts and provide examples.
			</p><p>
				The <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-case-management"><span class="emphasis"><em>Getting started with case management</em></span></a> tutorial describes how to create and test a new <code class="literal">IT_Orders</code> project in Business Central. After reviewing the concepts in this guide, follow the procedures in the tutorial to ensure that you are able to successfully create, deploy, and test your own case project.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat JBoss Enterprise Application Platform 7.3 is installed. For information about installing Red Hat JBoss Enterprise Application Platform 7.3, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.3/html-single/installation_guide/"><span class="emphasis"><em>Red Hat JBoss Enterprise Application Platform 7.3 Installation Guide</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is installed. For information about installing Red Hat Process Automation Manager, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is running and you can log in to Business Central with the <code class="literal">user</code> role. For information about users and permissions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li><li class="listitem">
						The Showcase application is deployed. For information about how to install and log in to the Showcase application, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#case-management-overview-con_case-management-design">33. Case management</a></span></li><li><span class="chapter"><a href="#case-management-cmmn-con-case-management-design">34. Case Management Model and Notation</a></span></li><li><span class="chapter"><a href="#case-management-case-file-con-case-management-design">35. Case files</a></span><ul><li><span class="section"><a href="#case-management-case-key-prefix-proc-case-management-design">35.1. Configuring case ID prefixes</a></span></li><li><span class="section"><a href="#case-management-case-key-expression-proc-case-management-design">35.2. Configuring case ID expressions</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-subcases-concase-management-design">36. Subcases</a></span></li><li><span class="chapter"><a href="#case-management-adhoc-con-case-management-design">37. Ad hoc and dynamic tasks</a></span></li><li><span class="chapter"><a href="#case-management-adding-dynamic-tasks-using-API-proc">38. Adding dynamic tasks and processes to a case using the KIE Server REST API</a></span><ul><li><span class="section"><a href="#case-management-dynamic-user-task-API-proc">38.1. Creating a dynamic user task using the KIE Server REST API</a></span></li><li><span class="section"><a href="#case-management-dynamic-service-task-API-proc">38.2. Creating a dynamic service task using the KIE Server REST API</a></span></li><li><span class="section"><a href="#case-management-dynamic-subprocess-API-proc">38.3. Creating a dynamic subprocess using the KIE Server REST API</a></span></li></ul></li><li><span class="chapter"><a href="#comments">39. Comments</a></span></li><li><span class="chapter"><a href="#case-management-roles-con-case-management-design">40. Case roles</a></span><ul><li><span class="section"><a href="#case-management-creating-roles-proc-case-management-design">40.1. Creating case roles</a></span></li><li><span class="section"><a href="#case-management-role-authorization-proc-case-management-design">40.2. Role authorization</a></span></li><li><span class="section"><a href="#case-management-assign-task-to-role-proc-case-management-design">40.3. Assigning a task to a role</a></span></li><li><span class="section"><a href="#case-management-modifying-roles-during-runtime-proc-case-management-design">40.4. Modifying case role assignments during run time using Showcase</a></span></li><li><span class="section"><a href="#case-management-modifying-roles-during-runtime-API-proc-case-management-design">40.5. Modifying case role assignments during run time using REST API</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-stages-con-case-management-design">41. Stages</a></span><ul><li><span class="section"><a href="#case-management-defining-a-stage-proc-case-management-design">41.1. Defining a stage</a></span></li><li><span class="section"><a href="#case-management-stage-activation-and-completion-conditions-proc">41.2. Configuring stage activation and completion conditions</a></span></li><li><span class="section"><a href="#case-management-dynamic-tasks-during-stages-proc">41.3. Adding a dynamic task to a stage</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-milestones-con">42. Milestones</a></span><ul><li><span class="section"><a href="#case-management-milestone-triggering-case-management-design">42.1. Configuring and triggering milestones</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-variable-tags-con">43. Variable tags</a></span></li><li><span class="chapter"><a href="#case-management-case-listener-con">44. Case event listener</a></span></li><li><span class="chapter"><a href="#case-management-rules-con">45. Rules in case management</a></span><ul><li><span class="section"><a href="#case-management-using-rules-proc">45.1. Using rules to drive cases</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-security-con-case-management-design">46. Case management security</a></span><ul><li><span class="section"><a href="#case-management-security-configuration-proc-case-management-design">46.1. Configuring security for case management</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-closing-cases-ref">47. Closing cases</a></span><ul><li><span class="section"><a href="#case-management-close-case-using-API-proc-case-management-design">47.1. Closing a case using the KIE Server REST API</a></span></li><li><span class="section"><a href="#case-management-close-case-proc-case-management-design">47.2. Closing a case in the Showcase application</a></span></li></ul></li><li><span class="chapter"><a href="#case-management-cancel-or-destroy-case-proc-case-management-design">48. Canceling or destroying a case</a></span><ul><li><span class="section"><a href="#case-management-clean-case-log-con">48.1. Case log removal from the database</a></span></li></ul></li><li><span class="chapter"><a href="#additional_resources_2">49. Additional resources</a></span></li></ul></div></div><section class="chapter" id="case-management-overview-con_case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 33. Case management</h2></div></div></div><p>
				Case management is an extension of Business Process Management (BPM) that enables you to manage adaptable business processes.
			</p><p>
				BPM is a management practice used to automate tasks that are repeatable and have a common pattern, with a focus on optimization by perfecting a process. Business processes are usually modeled with clearly defined paths leading to a business goal. This requires a lot of predictability, usually based on mass-production principles. However, many real-world applications cannot be described completely from start to finish (including all possible paths, deviations, and exceptions). Using a process-oriented approach in certain cases can lead to complex solutions that are hard to maintain.
			</p><p>
				Case management provides problem resolution for non-repeatable, unpredictable processes as opposed to the efficiency-oriented approach of BPM for routine, predictable tasks. It manages one-off situations when the process cannot be predicted in advance. A case definition usually consists of loosely coupled process fragments that can be connected directly or indirectly to lead to certain milestones and ultimately a business goal, while the process is managed dynamically in response to changes that occur during run time.
			</p><p>
				In Red Hat Process Automation Manager, case management includes the following core process engine features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Case file instance
					</li><li class="listitem">
						A per case runtime strategy
					</li><li class="listitem">
						Case comments
					</li><li class="listitem">
						Milestones
					</li><li class="listitem">
						Stages
					</li><li class="listitem">
						Ad hoc fragments
					</li><li class="listitem">
						Dynamic tasks and processes
					</li><li class="listitem">
						Case identifier (correlation key)
					</li><li class="listitem">
						Case lifecycle (close, reopen, cancel, destroy)
					</li></ul></div><p>
				A case definition is always an ad hoc process definition and does not require an explicit start node. The case definition is the main entry point for the business use case.
			</p><p>
				A process definition is introduced as a supporting construct of the case and can be invoked either as defined in the case definition or dynamically to bring in additional processing when required. A case definition defines the following new objects:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Activities (required)
					</li><li class="listitem">
						Case file (required)
					</li><li class="listitem">
						Milestones
					</li><li class="listitem">
						Roles
					</li><li class="listitem">
						Stages
					</li></ul></div></section><section class="chapter" id="case-management-cmmn-con-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 34. Case Management Model and Notation</h2></div></div></div><p>
				You can use Business Central to import, view, and modify the content of Case Management Model and Notation (CMMN) files. When authoring a project, you can import your case management model and then select it from the asset list to view or modify it in a standard XML editor.
			</p><p>
				The following CMMN constructs are currently available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Tasks (human task, process task, decision task, case task)
					</li><li class="listitem">
						Discretionary tasks (same as above)
					</li><li class="listitem">
						Stages
					</li><li class="listitem">
						Milestones
					</li><li class="listitem">
						Case file items
					</li><li class="listitem">
						Sentries (entry and exit)
					</li></ul></div><p>
				The following tasks are not supported:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Required
					</li><li class="listitem">
						Repeat
					</li><li class="listitem">
						Manual activation
					</li></ul></div><p>
				Sentries for individual tasks are limited to entry criteria while entry and exit criteria are supported for stages and milestones. Decision tasks map by default to a DMN decision. Event listeners are not supported.
			</p><p>
				Red Hat Process Automation Manager does not provide any modeling capabilities for CMMN and focuses solely on the execution of the model.
			</p></section><section class="chapter" id="case-management-case-file-con-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 35. Case files</h2></div></div></div><p>
				A case instance is a single instance of a case definition and encapsulates the business context. All case instance data is stored in the case file, which is accessible to all process instances that might participate in the particular case instance. Each case instance and its case file are completely isolated from the other cases. Only case instance participants can access the case file.
			</p><p>
				A case file is used in case management as a repository of data for the entire case instance. It contains all roles, data objects, the data map, and any other data. The case can be closed and reopened at a later date with the same case file attached. A case instance can be closed at any time and does not require a specific resolution to be completed.
			</p><p>
				The case file can also include embedded documentation, references, PDF attachments, web links, and other options.
			</p><section class="section" id="case-management-case-key-prefix-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">35.1. Configuring case ID prefixes</h2></div></div></div><p>
					The <code class="literal">caseId</code> parameter is a string value that is the identifier of the case instance. You can configure the <span class="strong strong"><strong>Case ID Prefix</strong></span> in Red Hat Process Automation Manager designer to distinguish different types of cases.
				</p><p>
					The following procedures uses the <span class="strong strong"><strong>IT_Orders</strong></span> sample project to demonstrate how to create unique case ID prefixes for specific business needs.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>IT_Orders</strong></span> sample project is open in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>. If there are existing projects, you can access the samples by clicking the <span class="strong strong"><strong>MySpace</strong></span> default space and selecting <span class="strong strong"><strong>Try Samples</strong></span> from the <span class="strong strong"><strong>Add Project</strong></span> drop-down menu. If there are no existing projects, click <span class="strong strong"><strong>Try samples</strong></span>.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>IT_Orders</strong></span> and click <span class="strong strong"><strong>Ok</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Assets</strong></span> window, click the <span class="strong strong"><strong>orderhardware</strong></span> business process to open the designer.
						</li><li class="listitem">
							Click on an empty space on the canvas and in the upper-right corner, click the <span class="strong strong"><strong>Properties</strong></span> <span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
							 icon.
						</li><li class="listitem">
							Scroll down and expand <span class="strong strong"><strong>Case Management</strong></span>.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Case ID Prefix</strong></span> field, enter an ID value. The ID format is internally defined as <code class="literal">ID-XXXXXXXXXX</code>, where <code class="literal">XXXXXXXXXX</code> is a generated number that provides a unique ID for the case instance.
						</p><p class="simpara">
							If a prefix is not provided, the default prefix is <code class="literal">CASE</code> with the following identifiers:
						</p><p class="simpara">
							<code class="literal">CASE-0000000001</code>
						</p><p class="simpara">
							<code class="literal">CASE-0000000002</code>
						</p><p class="simpara">
							<code class="literal">CASE-0000000003</code>
						</p><p class="simpara">
							You can specify any prefix. For example, if you specify the prefix <code class="literal">IT</code>, the following identifiers are generated:
						</p><p class="simpara">
							<code class="literal">IT-0000000001</code>
						</p><p class="simpara">
							<code class="literal">IT-0000000002</code>
						</p><p class="simpara">
							<code class="literal">IT-0000000003</code>
						</p><div class="figure" id="idm140093623935808"><p class="title"><strong>Figure 35.1. Case ID Prefix field</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/case-prefix.png" alt="case prefix"/></div></div></div></li></ol></div></section><section class="section" id="case-management-case-key-expression-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">35.2. Configuring case ID expressions</h2></div></div></div><p>
					The following procedures uses the <span class="strong strong"><strong>IT_Orders</strong></span> sample project to demonstrate how set metadata attribute keys to customize expressions for generating the <code class="literal">caseId</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>IT_Orders</strong></span> sample project is open in Business Central.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span>. If there are existing projects, you can access the samples by clicking the <span class="strong strong"><strong>MySpace</strong></span> default space and selecting <span class="strong strong"><strong>Try Samples</strong></span> from the <span class="strong strong"><strong>Add Project</strong></span> drop-down menu. If there are no existing projects, click <span class="strong strong"><strong>Try samples</strong></span>.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>IT_Orders</strong></span> and click <span class="strong strong"><strong>Ok</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Assets</strong></span> window, click the <span class="strong strong"><strong>orderhardware</strong></span> business process to open the designer.
						</li><li class="listitem">
							Click on an empty space on the canvas and in the upper-right corner, click the <span class="strong strong"><strong>Properties</strong></span> <span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
							 icon.
						</li><li class="listitem">
							Expand the <span class="strong strong"><strong>Advanced</strong></span> menu to access the <span class="strong strong"><strong>Metadata Attributes</strong></span> fields.
						</li><li class="listitem"><p class="simpara">
							Specify one of the following functions for the <code class="literal">customCaseIdPrefix</code> metadata attribute:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>LPAD</strong></span>: Left padding
								</li><li class="listitem">
									<span class="strong strong"><strong>RPAD</strong></span>: Right padding
								</li><li class="listitem">
									<span class="strong strong"><strong>TRUNCATE</strong></span>: Truncate
								</li><li class="listitem">
									<span class="strong strong"><strong>UPPER</strong></span>: Upper case
								</li></ul></div><div class="figure" id="idm140093627176672"><p class="title"><strong>Figure 35.2. Setting the UPPER function for the customCaseIdPrefix metadata attribute</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/expressions.png" alt="expressions"/></div></div></div><p class="simpara">
							In this example, <code class="literal">type</code> is a variable set in the <span class="strong strong"><strong>Case File Variables</strong></span> field, which during runtime a user may define to it the value <code class="literal">type1</code>. <code class="literal">UPPER</code> is a pre-built function to uppercase a variable, and <code class="literal">IT-</code> is a static prefix. The results are dynamic case IDs such as <code class="literal">IT-TYPE1-0000000001</code>, <code class="literal">IT-TYPE1-0000000002</code>, and <code class="literal">IT-TYPE1-0000000003</code>.
						</p><div class="figure" id="idm140093627168000"><p class="title"><strong>Figure 35.3. Case File Variables</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/case-vars.png" alt="case vars"/></div></div></div><p class="simpara">
							If the <code class="literal">customCaseIdPrefixIsSequence</code> case metadata attribute is set to <code class="literal">false</code> (default value is <code class="literal">true</code>), the case instance will not create any sequence and the <code class="literal">caseIdPrefix</code> expression is the case ID. For example, if generating case IDs based on social security numbers, no specific sequence or instance identifiers are required.
						</p><p class="simpara">
							The <code class="literal">customCaseIdPrefixIsSequence</code> metadata attribute is optionally added and set to <code class="literal">false</code> (default value is <code class="literal">true</code>) to disable the numeric sequences for the case IDs. This is useful if an expression used for custom case IDs already contains a case file variable to express unique business identifiers instead of the generic sequence values. For example, if generating case IDs based on social security numbers, no specific sequence or instance identifiers are required. For the example below, <code class="literal">SOCIAL_SECURITY_NUMBER</code> is also a variable declared as a case file variable.
						</p><div class="figure" id="idm140093627362480"><p class="title"><strong>Figure 35.4. customCaseIdPrefixIsSequence metadata attribute</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/prefix-false.png" alt="prefix false"/></div></div></div><p class="simpara">
							The <code class="literal">IS_PREFIX_SEQUENCE</code> case file variable is optionally added as a flag during runtime to disable or enable the sequence generation for case IDs. For example, there is no need to create a sequence suffix for medical insurance coverage for an individual. For a multi-family insurance policy, the company might set the <code class="literal">IS_PREFIX_SEQUENCE</code> case variable to <code class="literal">true</code> to aggregate a sequence number for each member of the family.
						</p><p class="simpara">
							The result of using the <code class="literal">customCaseIdPrefixIsSequence</code> metadata attribute statically as <code class="literal">false</code> or using the <code class="literal">IS_PREFIX_SEQUENCE</code> case file variable and setting during runtime for it the value <code class="literal">false</code>, is the same.
						</p><div class="figure" id="idm140093627353888"><p class="title"><strong>Figure 35.5. IS_PREFIX_SEQUENCE case variable</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/prefix-sequence.png" alt="prefix sequence"/></div></div></div></li></ol></div></section></section><section class="chapter" id="case-management-subcases-concase-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 36. Subcases</h2></div></div></div><p>
				Subcases provide the flexibility to compose complex cases that consist of other cases. This means that you can split large and complex cases into multiple layers of abstraction and even multiple case projects. This is similar to splitting a process into multiple subprocesses.
			</p><p>
				A subcase is another case definition that is invoked from within another case instance or a regular process instance. It has all of the capabilities of a regular case instance:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						It has a dedicated case file.
					</li><li class="listitem">
						It is isolated from any other case instance.
					</li><li class="listitem">
						It has its own set of case roles.
					</li><li class="listitem">
						It has its own case prefix.
					</li></ul></div><p>
				You can use the process designer to add subcases to your case definition. A subcase is a case within your case project, similar to having a subprocess within your process. Subcases can also be added to a regular business process. Doing this enables you to start a case from within a process instance.
			</p><p>
				For more information about adding a subcase to your case definition, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-case-management"><span class="emphasis"><em>Getting started with case management</em></span></a>.
			</p><p>
				The <span class="strong strong"><strong>Sub Case Data I/O</strong></span> window supports the following set of input parameters that enable you to configure and start the subcase:
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-subcase-dataio.png" alt="case management subcase dataio"/></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Independent</span></dt><dd>
							Optional indicator that tells the process engine whether or not the case instance is independent. If it is independent, the main case instance does not wait for its completion. The value of this property is <code class="literal">false</code> by default.
						</dd><dt><span class="term">GroupRole_XXX</span></dt><dd>
							Optional group to case role mapping. The role names belonging to this case instance can be referenced here, meaning that participants of the main case can be mapped to participants of the subcase. This means that the group assigned to the main case is automatically assigned to the subcase, where <code class="literal">XXX</code> is the role name and the value of the property is the value of the group role assignment.
						</dd><dt><span class="term">DataAccess_XXX</span></dt><dd>
							Optional data access restrictions where <code class="literal">XXX</code> is the name of the data item and the value of the property is the access restrictions.
						</dd><dt><span class="term">DestroyOnAbort</span></dt><dd>
							Optional indicator that tells the process engine whether to cancel or destroy the subcase when the subcase activity is aborted. The default value is <code class="literal">true</code>.
						</dd><dt><span class="term">UserRole_XXX</span></dt><dd>
							Optional user to case role mapping. You can reference the case instance role names here, meaning that an owner of the main case can be mapped to an owner of the subcase. The person assigned to the main case is automatically assigned to the subcase, where <code class="literal">XXX</code> is the role name and the value of the property is the value of the user role assignment.
						</dd><dt><span class="term">Data_XXX</span></dt><dd>
							Optional data mapping from this case instance or business process to a subcase, where <code class="literal">XXX</code> is the name of the data in the subcase being targeted. This parameter can be provided as many times as needed.
						</dd><dt><span class="term">DeploymentId</span></dt><dd>
							Optional deployment ID (or container ID in the context of KIE Server) that indicates where the targeted case definition is located.
						</dd><dt><span class="term">CaseDefinitionId</span></dt><dd>
							The mandatory case definition ID to be started.
						</dd><dt><span class="term">CaseId</span></dt><dd>
							The case instance ID of the subcase after it is started.
						</dd></dl></div></section><section class="chapter" id="case-management-adhoc-con-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 37. Ad hoc and dynamic tasks</h2></div></div></div><p>
				You can use case management to carry out tasks ad hoc, rather than following a strict end-to-end process. You can also add tasks to a case dynamically during run time.
			</p><p>
				Ad hoc tasks are defined in the case modeling phase. Ad hoc tasks that are not configured as <code class="literal">AdHoc Autostart</code> are optional and might not be used during a case. Therefore, they must be triggered by a signal event or by a Java API.
			</p><p>
				Dynamic tasks are defined during the case execution and are not present in the case definition model. Dynamic tasks address specific needs that arise during the case. They can be added to the case and worked on at any time using a case application, as demonstrated in the Red Hat Process Automation Manager Showcase application. Dynamic tasks can also be added by Java and Remote API calls.
			</p><p>
				Dynamic tasks can be user or service activities, while ad hoc tasks can be any type of task. For more information about task types, see "BPMN2 tasks in process designer" in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-designing-business-processes"><span class="emphasis"><em>Designing business processes using BPMN models</em></span></a>.
			</p><p>
				Dynamic processes are any reusable sub-process from a case project.
			</p><p>
				Ad hoc nodes with no incoming connections are configured in the node’s <code class="literal">AdHoc Autostart</code> property and are triggered automatically when the case instance is started.
			</p><p>
				Ad hoc tasks are optional tasks that are configured in a case definition. Because they are ad hoc, they must be triggered in some way, usually by a signal event or Java API call.
			</p></section><section class="chapter" id="case-management-adding-dynamic-tasks-using-API-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 38. Adding dynamic tasks and processes to a case using the KIE Server REST API</h2></div></div></div><p>
				You can add dynamic tasks and processes to a case during run time to address unforeseen changes that can occur during the lifecycle of a case. Dynamic activities are not defined in the case definition and therefore they cannot be signaled the way that a defined ad hoc task or process can.
			</p><p>
				You can add the following dynamic activities to a case:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						User tasks
					</li><li class="listitem">
						Service tasks (any type that is implemented as a work item)
					</li><li class="listitem">
						Reusable subprocesses
					</li></ul></div><p>
				Dynamic user and service tasks are added to a case instance and immediately executed. Depending on the nature of a dynamic task, it might start and wait for completion (user task) or directly complete after execution (service task). For dynamic subprocesses, the process engine requires a KJAR containing the process definition for that dynamic process to locate the process by its ID and execute it. This subprocess belongs to the case and has access to all of the data in the case file.
			</p><p>
				You can use the Swagger REST API application to create dynamic tasks and subprocesses.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in to Business Central and a case instance has been started using the Showcase application. For more information about using Showcase, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In a web browser, open the following URL:
					</p><p class="simpara">
						<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>
					</p></li><li class="listitem">
						Open the list of available endpoints under <span class="strong strong"><strong>Case instances :: Case Management</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Locate the <code class="literal">POST</code> method endpoints for creating dynamic activities.
					</p><p class="simpara">
						<code class="literal">POST /server/containers/{id}/cases/instances/{caseId}/tasks</code>
					</p><p class="simpara">
						Adds a dynamic task (user or service depending on the payload) to case instance.
					</p><p class="simpara">
						<code class="literal">POST /server/containers/{id}/cases/instances/{caseId}/stages/{caseStageId}/tasks</code>
					</p><p class="simpara">
						Adds a dynamic task (user or service depending on the payload) to specific stage within the case instance.
					</p><p class="simpara">
						<code class="literal">POST /server/containers/{id}/cases/instances/{caseId}/processes/{pId}</code>
					</p><p class="simpara">
						Adds a dynamic subprocess identified by the process ID to case instance.
					</p><p class="simpara">
						<code class="literal">POST /server/containers/{id}/cases/instances/{caseId}/stages/{caseStageId}/processes/{pId}</code>
					</p><p class="simpara">
						Adds a dynamic subprocess identified by process ID to stage within a case instance.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/swagger-case-management-dynamic.png" alt="swagger case management dynamic"/></div></div></li><li class="listitem">
						To open the documentation, click the REST endpoint required to create the dynamic task or process.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Try it out</strong></span> and enter the parameters and body required to create the dynamic activity.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Execute</strong></span> to create the dynamic task or subprocess using the REST API.
					</li></ol></div><section class="section" id="case-management-dynamic-user-task-API-proc"><div class="titlepage"><div><div><h2 class="title">38.1. Creating a dynamic user task using the KIE Server REST API</h2></div></div></div><p>
					You can create a dynamic user task during case run time using the REST API. To create a dynamic user task, you must provide the following information:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Task name
						</li><li class="listitem">
							Task subject (optional, but recommended)
						</li><li class="listitem">
							Actors or groups (or both)
						</li><li class="listitem">
							Input data
						</li></ul></div><p>
					Use the following procedure to create a dynamic user task for the <span class="strong strong"><strong>IT_Orders</strong></span> sample project available in Business Central using the Swagger REST API tool. The same endpoint can be used for REST API without Swagger.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You are logged in to Business Central and an IT Orders case instance has been started using the Showcase application. For more information about using Showcase, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In a web browser, open the following URL:
						</p><p class="simpara">
							<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>.
						</p></li><li class="listitem">
							Open the list of available endpoints under <span class="strong strong"><strong>Case instances :: Case Management</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click click the following <code class="literal">POST</code> method endpoint to open the details:
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}/tasks</code>
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Try it out</strong></span> and then input the following parameters:
						</p><div class="table" id="idm140093624328912"><p class="title"><strong>Table 38.1. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093624324080" scope="col">Name</th><th align="left" valign="top" id="idm140093624322992" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093624324080">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624322992">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624324080">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624322992">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Request body</strong></p><p>
								
<pre class="screen">{
 "name" : "RequestManagerApproval",
 "data" : {
   "reason" : "Fixed hardware spec",
   "caseFile_hwSpec" : "#{caseFile_hwSpec}"
  },
 "subject" : "Ask for manager approval again",
 "actors" : "manager",
 "groups" : ""
}</pre>
							</p></div></li><li class="listitem">
							In the Swagger application, click <span class="strong strong"><strong>Execute</strong></span> to create the dynamic task.
						</li></ol></div><p>
					This procedure creates a new user task associated with case <code class="literal">IT-000000001</code>. The task is assigned to the person assigned to the <code class="literal">manager</code> case role. This task has two input variables:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">reason</code>
						</li><li class="listitem">
							<code class="literal">caseFile_hwSpec</code>: defined as an expression to allow run time capturing of a process or case data.
						</li></ul></div><p>
					Some tasks include a form that provides a user-friendly UI for the task, which you can locate by task name. In the IT Orders case, the <code class="literal">RequestManagerApproval</code> task includes the form <code class="literal">RequestManagerApproval-taskform.form</code> in its KJAR.
				</p><p>
					After it is created, the task appears in the assignee’s <span class="strong strong"><strong>Task Inbox</strong></span> in Business Central.
				</p></section><section class="section" id="case-management-dynamic-service-task-API-proc"><div class="titlepage"><div><div><h2 class="title">38.2. Creating a dynamic service task using the KIE Server REST API</h2></div></div></div><p>
					Service tasks are usually less complex than user tasks, although they might need more data to execute properly. Service tasks require the following information:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">name</code>: The name of the activity
						</li><li class="listitem">
							<code class="literal">nodeType</code>: The type of node that will be used to find the work item handler
						</li><li class="listitem">
							<code class="literal">data</code>: The map of the data to properly deal with execution
						</li></ul></div><p>
					During case run time, you can create a dynamic service task with the same endpoint as a user task, but with a different body payload.
				</p><p>
					Use the following procedure using the Swagger REST API to create a dynamic service task for the <span class="strong strong"><strong>IT_Orders</strong></span> sample project available in Business Central. You can use the same endpoint for REST API without Swagger.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You are logged in to Business Central and an IT Orders case instance has been started using the Showcase application. For more information about using Showcase, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In a web browser, open the following URL:
						</p><p class="simpara">
							<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>
						</p></li><li class="listitem">
							Open the list of available endpoints under <span class="strong strong"><strong>Case instances :: Case Management</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click the following <code class="literal">POST</code> method endpoint to open the details:
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}/stages/{caseStageId}/tasks</code>
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Try it out</strong></span> and then enter the following parameters:
						</p><div class="table" id="idm140093624055120"><p class="title"><strong>Table 38.2. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093624050288" scope="col">Name</th><th align="left" valign="top" id="idm140093624049200" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093624050288">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624049200">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624050288">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624049200">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Request body</strong></p><p>
								
<pre class="screen">{
 "name" : "InvokeService",
 "data" : {
   "Parameter" : "Fixed hardware spec",
   "Interface" : "org.jbpm.demo.itorders.services.ITOrderService",
   "Operation" : "printMessage",
   "ParameterType" : "java.lang.String"
  },
 "nodeType" : "Service Task"
}</pre>
							</p></div></li><li class="listitem">
							In the Swagger application, click <span class="strong strong"><strong>Execute</strong></span> to create the dynamic task.
						</li></ol></div><p>
					In this example, a Java-based service is executed. It consists of an interface with the public class <code class="literal">org.jbpm.demo.itorders.services.ITOrderService</code> and the public <code class="literal">printMessage</code> method with a single <code class="literal">String</code> argument. When executed, the parameter value is passed to the method for execution.
				</p><p>
					Numbers, names, and other types of data given to create service tasks depend on the implementation of a service task’s handler. In the example provided, the <code class="literal">org.jbpm.process.workitem.bpmn2.ServiceTaskHandler</code> handler is used.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For any custom service tasks, ensure the handler is registered in the deployment descriptor in the <span class="strong strong"><strong>Work Item Handlers</strong></span> section, where the name is the same as the <code class="literal">nodeType</code> used for creating a dynamic service task.
					</p></div></div></section><section class="section" id="case-management-dynamic-subprocess-API-proc"><div class="titlepage"><div><div><h2 class="title">38.3. Creating a dynamic subprocess using the KIE Server REST API</h2></div></div></div><p>
					When creating a dynamic subprocess, only optional data is provided. There are no special parameters as there are when creating dynamic tasks.
				</p><p>
					The following procedure describes how to use the Swagger REST API to create a dynamic subprocess task for the <span class="strong strong"><strong>IT_Orders</strong></span> sample project available in Business Central. The same endpoint can be used for REST API without Swagger.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You are logged in to Business Central and an IT Orders case instance has been started using the Showcase application. For more information about using Showcase, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In a web browser, open the following URL:
						</p><p class="simpara">
							<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>.
						</p></li><li class="listitem">
							Open the list of available endpoints under <span class="strong strong"><strong>Case instances :: Case Management</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click the following <code class="literal">POST</code> method endpoint to open the details:
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}/processes/{pId}</code>
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Try it out</strong></span> and enter the following parameters:
						</p><div class="table" id="idm140093623887008"><p class="title"><strong>Table 38.3. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093623882176" scope="col">Name</th><th align="left" valign="top" id="idm140093623881088" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093623882176">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623881088">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093623882176">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623881088">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093623882176">
										<p>
											<code class="literal">pId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623881088">
										<p>
											<code class="literal">itorders-data.place-order</code>
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							The <code class="literal">pId</code> is the process ID of the subprocess to be created.
						</p><div class="formalpara"><p class="title"><strong>Request body</strong></p><p>
								
<pre class="screen">{
 "placedOrder" : "Manually"
}</pre>
							</p></div></li><li class="listitem">
							In the Swagger application, click <span class="strong strong"><strong>Execute</strong></span> to start the dynamic subprocess.
						</li></ol></div><p>
					In this example, the <code class="literal">place-order</code> subprocess has been started in the IT Orders case with the case ID <code class="literal">IT-0000000001</code>. You can see this process in Business Central under <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
				</p><p>
					If the described example has executed correctly, the <code class="literal">place-order</code> process appears in the list of process instances. Open the details of the process and note that the correlation key for the process includes the IT Orders case instance ID, and the <span class="strong strong"><strong>Process Variables</strong></span> list includes the variable <code class="literal">placedOrder</code> with the value <code class="literal">Manually</code>, as delivered in the REST API body.
				</p></section></section><section class="chapter" id="comments"><div class="titlepage"><div><div><h2 class="title">Chapter 39. Comments</h2></div></div></div><p>
				In case management, comments facilitate collaboration within the case instance, and allow case workers to easily communicate with each other to exchange information.
			</p><p>
				Comments are bound to the case instance. Case instances are part of the case file, so you can use comments to take action on the instances. Basic text-based comments can have a complete operations set, similar to CRUD (create, read, update, and delete).
			</p></section><section class="chapter" id="case-management-roles-con-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 40. Case roles</h2></div></div></div><p>
				Case roles provide an additional layer of abstraction for user participation in case handling. Roles, users, and groups are used for different purposes in case management.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Roles</span></dt><dd>
							Roles drive the authorization for a case instance and are used for user activity assignments. A user or one or more groups can be assigned to the owner role. The owner is whoever the case belongs to. Roles are not restricted to a single set of people or groups as part of a case definition. Use roles to specify task assignments instead of assigning a specific user or group to a task assignment to ensure that the case remains dynamic.
						</dd><dt><span class="term">Groups</span></dt><dd>
							A group is a collection of users who are able to carry out a particular task or have a set of specified responsibilities. You can assign any number of people to a group and assign any group to a role. You can add or change members of a group at any time. Do not hard code a group to a particular task.
						</dd><dt><span class="term">Users</span></dt><dd><p class="simpara">
							A user is an individual who can be given a particular task when you assign them a role or add them to a group.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Do not create a user called <code class="literal">unknown</code> in process engine or KIE Server. The <code class="literal">unknown</code> user account is a reserved system name with superuser access. The <code class="literal">unknown</code> user account performs tasks related to the SLA violation listener when there are no users logged in.
							</p></div></div></dd></dl></div><p>
				The following example illustrates how the preceding case management concepts apply to a hotel reservation with the following information:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Role</strong></span>: <code class="literal">Guest</code>
					</li><li class="listitem">
						<span class="strong strong"><strong>Group</strong></span>: <code class="literal">Receptionist</code>, <code class="literal">Maid</code>
					</li><li class="listitem">
						<span class="strong strong"><strong>User</strong></span>: <code class="literal">Marilyn</code>
					</li></ul></div><p>
				The <code class="literal">Guest</code> role assignment affects the specific work of the associated case and is unique to all case instances. The number of users or groups that can be assigned to a role is limited by the case <code class="literal">Cardinality</code>, which is set during role creation in the process designer and case definition. For example, the hotel reservation case has only one guest while the <span class="strong strong"><strong>IT_Orders</strong></span> sample project has two suppliers of IT hardware.
			</p><p>
				When roles are defined, ensure that roles are not hard-coded to a single set of people or groups as part of case definition and that they can differ for each case instance. This is why case role assignments are important.
			</p><p>
				Role assignments can be assigned or removed when a case starts or at any time when a case is active. Although roles are optional, use roles in case definitions to maintain an organized workflow.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Always use roles for task assignments instead of actual user or group names. This ensures that the case remains dynamic and actual user or group assignments can be made as late as required.
				</p></div></div><p>
				Roles are assigned to users or groups and authorized to perform tasks when a case instance is started.
			</p><section class="section" id="case-management-creating-roles-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">40.1. Creating case roles</h2></div></div></div><p>
					You can create and define case roles in the case definition when you design the case in the process designer. Case roles are configured on the case definition level to keep them separate from the actors involved in handling the case instance. Roles can be assigned to user tasks or used as contact references throughout the case lifecycle, but they are not defined in the case as a specific user or group of users.
				</p><p>
					Case instances include the individuals that are actually handling the case work. Assign roles when starting a new case instance. In order to keep cases flexible, you can modify case role assignment during case run time, although doing this has no effect on tasks already created based on the previous role assignment. The actor assigned to a role is flexible but the role itself remains the same for each case.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A case project that has a case definition exists in Business Central.
						</li><li class="listitem">
							The case definition asset is open in the process designer.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							To define the roles involved in the case, click on an empty space in the editor’s canvas, and click 
							<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
							 to open the <span class="strong strong"><strong>Properties</strong></span> menu.
						</li><li class="listitem"><p class="simpara">
							Expand <span class="strong strong"><strong>Case Management</strong></span> to add a case role.
						</p><p class="simpara">
							The case role requires a name for the role and a case cardinality. Case cardinality is the number of actors that are assigned to the role in any case instance. For example, the <span class="strong strong"><strong>IT_Orders</strong></span> sample case management project includes the following roles:
						</p><div class="figure" id="idm140093628383136"><p class="title"><strong>Figure 40.1. ITOrders Case Roles</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/case_roles.png" alt="Case Roles"/></div></div></div><p class="simpara">
							In this example, you can assign only one actor (a user or a group) as the case <code class="literal">owner</code> and assign only one actor to the <code class="literal">manager</code> role. The <code class="literal">supplier</code> role can have two actors assigned. Depending on the case, you can assign any number of actors to a particular role based on the configured case cardinality of the role.
						</p></li></ol></div></section><section class="section" id="case-management-role-authorization-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">40.2. Role authorization</h2></div></div></div><p>
					Roles are authorized to perform specific case management tasks when starting a new case instance using the Showcase application or the REST API.
				</p><p>
					Use the following procedure to start a new IT Orders case using the REST API.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>IT_Orders</strong></span> sample project has been imported in Business Central and deployed to the KIE Server.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">POST</code> REST API call with the following endpoint:
						</p><p class="simpara">
							<code class="literal">http://host:port/kie-server/services/rest/server/containers/itorders/cases/itorders.orderhardware/instances</code>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">itorders</code>: The container alias that has been deployed to the KIE Server.
								</li><li class="listitem">
									<code class="literal">itorders.orderhardware</code>: The name of the case definition.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Provide the following role configuration in the request body:
						</p><pre class="programlisting language-java">{
  "case-data" : {  },
  "case-user-assignments" : {
    "owner" : "cami",
    "manager" : "cami"
  },
  "case-group-assignments" : {
    "supplier" : "IT"
 }
}</pre><p class="simpara">
							This starts a new case with defined roles, as well as autostart activities, which are started and ready to be worked on. Two of the roles are user assignments (<code class="literal">owner</code> and <code class="literal">manager</code>) and the third is a group assignment (<code class="literal">supplier</code>).
						</p><p class="simpara">
							After the case instance is successfully started, the case instance returns the <code class="literal">IT-0000000001</code> case ID.
						</p></li></ol></div><p>
					For information about how to start a new case instance using the Showcase application, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
				</p></section><section class="section" id="case-management-assign-task-to-role-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">40.3. Assigning a task to a role</h2></div></div></div><p>
					Case management processes need to be as flexible as possible to accommodate changes that can happen dynamically during run time. This includes changing user assignments for new case instances or for active cases. For this reason, ensure that you do not hard code roles to a single set of users or groups in the case definition. Instead, role assignments can be defined on the task nodes in the case definition, with users or groups assigned to the roles on case creation.
				</p><p>
					Red Hat Process Automation Manager contains a predefined selection of node types to simplify business process creation. The predefined node panel is located on the left side of the diagram editor.
				</p><p>
					<span class="inlinemediaobject"><img src="images/_images/cases/node_task_panel.png" alt="node task panel"/></span>
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A case definition has been created with case roles configured at the case definition level. For more information about creating case roles, see <a class="link" href="#case-management-creating-roles-proc-case-management-design" title="40.1. Creating case roles">Creating case roles</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the <span class="strong strong"><strong>Activities</strong></span> menu in the designer palette and drag the user or service task that you want to add to your case definition onto the process designer canvas.
						</li><li class="listitem">
							With the task node selected, click 
							<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
							 to open the <span class="strong strong"><strong>Properties</strong></span> panel on the right side of the designer.
						</li><li class="listitem"><p class="simpara">
							Expand <span class="strong strong"><strong>Implementation/Execution</strong></span>, click <span class="strong strong"><strong>Add</strong></span> below the <span class="strong strong"><strong>Actors</strong></span> property and either select or type the name of the role to which the task will be assigned. You can use the <span class="strong strong"><strong>Groups</strong></span> property in the same way for group assignments.
						</p><p class="simpara">
							For example, in the <span class="strong strong"><strong>IT_Orders</strong></span> sample project, the <code class="literal">Manager approval</code> user task is assigned to the <code class="literal">manager</code> role:
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-task-assignment.png" alt="case management task assignment"/></div></div><p class="simpara">
							In this example, after the <code class="literal">Prepare hardware spec</code> user task has been completed, the user assigned to the <code class="literal">manager</code> role will receive the <code class="literal">Manager approval</code> task in their <span class="strong strong"><strong>Task Inbox</strong></span> in Business Central.
						</p></li></ol></div><p>
					The user assigned to the role can be changed during the case run time, but the task itself continues to have the same role assignment. For example, the person originally assigned to the <code class="literal">manager</code> role might need to take time off (if they become ill, for example), or they might unexpectedly leave the company. To respond to this change in circumstances, you can edit the <code class="literal">manager</code> role assignment so that someone else can be assigned the tasks associated with that role.
				</p><p>
					For information about how to change role assignments during case run time, see <a class="link" href="#case-management-modifying-roles-during-runtime-proc-case-management-design" title="40.4. Modifying case role assignments during run time using Showcase">Modifying case role assignments during run time using Showcase</a> or <a class="link" href="#case-management-modifying-roles-during-runtime-API-proc-case-management-design" title="40.5. Modifying case role assignments during run time using REST API">Modifying case role assignments during run time using REST API</a>.
				</p></section><section class="section" id="case-management-modifying-roles-during-runtime-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">40.4. Modifying case role assignments during run time using Showcase</h2></div></div></div><p>
					You can change case instance role assignments during case run time using the Showcase application. Roles are defined in the case definition and assigned to tasks in the case lifecycle. Roles cannot change during run time because they are predefined, but you can change the actors assigned to the roles to change who is responsible for carrying out case tasks.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An active case instance with users or groups is already assigned to at least one case role.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the Showcase application, click the case you want to work on in the <span class="strong strong"><strong>Case list</strong></span> to open the case overview.
						</li><li class="listitem"><p class="simpara">
							Locate the role assignment that you want to change in the <span class="strong strong"><strong>Roles</strong></span> box in the lower-right corner of the page.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/showcase-role-assignments.png" alt="showcase role assignments"/></div></div></li><li class="listitem">
							To remove a single user or group from the role assignment, click the 
							<span class="inlinemediaobject"><img src="images/_images/cases/blue-x.png" alt="X"/></span>
							 next to the assignment. In the confirmation window, click <span class="strong strong"><strong>Remove</strong></span> to remove the user or group from the role.
						</li><li class="listitem">
							To remove all role assignments from a role, click the 
							<span class="inlinemediaobject"><img src="images/_images/cases/dotdotdotbutton.png" alt="three dots"/></span>
							 next to the role and select the <span class="strong strong"><strong>Remove all assignments</strong></span> option. In the confirmation window, click <span class="strong strong"><strong>Remove</strong></span> to remove all user and group assignments from the role.
						</li><li class="listitem">
							To change the role assignment from one user or group to another, click the 
							<span class="inlinemediaobject"><img src="images/_images/cases/dotdotdotbutton.png" alt="three dots"/></span>
							 next to the role and select the <span class="strong strong"><strong>Edit</strong></span> option.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Edit role assignment</strong></span> window, delete the name of the assignee that you want to remove from the role assignment. Type the name of the user you want to assign to the role into the <span class="strong strong"><strong>User</strong></span> field or the group you want to assign in the <span class="strong strong"><strong>Group</strong></span> field.
						</p><p class="simpara">
							At least one user or group must be assigned when editing a role assignment.
						</p></li><li class="listitem">
							Click <span class="strong strong"><strong>Assign</strong></span> to complete the role assignment.
						</li></ol></div></section><section class="section" id="case-management-modifying-roles-during-runtime-API-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">40.5. Modifying case role assignments during run time using REST API</h2></div></div></div><p>
					You can change case instance role assignments during case run time using the REST API or Swagger application. Roles are defined in the case definition and assigned to tasks in the case life cycle. Roles cannot change during run time because they are predefined, but you can change the actors assigned to the roles to change who is responsible for carrying out case tasks.
				</p><p>
					The following procedure includes examples based on the <span class="strong strong"><strong>IT_Orders</strong></span> sample project. You can use the same REST API endpoints in the Swagger application or any other REST API client, or using Curl.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An IT Orders case instance has been started with <code class="literal">owner</code>, <code class="literal">manager</code>, and <code class="literal">supplier</code> roles already assigned to actors.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Retrieve the list of current role assignments using a <code class="literal">GET</code> request on the following endpoint:
						</p><p class="simpara">
							<code class="literal">http://localhost:8080/kie-server/services/rest/server/containers/{id}/cases/instances/{caseId}/roles</code>
						</p><div class="table" id="idm140093625502496"><p class="title"><strong>Table 40.1. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093623740768" scope="col">Name</th><th align="left" valign="top" id="idm140093623739680" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093623740768">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623739680">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093623740768">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623739680">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							This returns the following response:
						</p><pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;case-role-assignment-list&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;owner&lt;/name&gt;
            &lt;users&gt;Aimee&lt;/users&gt;
      &lt;/role-assignments&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;manager&lt;/name&gt;
            &lt;users&gt;Katy&lt;/users&gt;
      &lt;/role-assignments&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;supplier&lt;/name&gt;
            &lt;groups&gt;Lenovo&lt;/groups&gt;
      &lt;/role-assignments&gt;
&lt;/case-role-assignment-list&gt;</pre></li><li class="listitem"><p class="simpara">
							To change the user assigned to the <code class="literal">manager</code> role, you must first remove the role assignment from the user <code class="literal">Katy</code> using <code class="literal">DELETE</code>.
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}/roles/{caseRoleName}</code>
						</p><p class="simpara">
							Include the following information in the Swagger client request:
						</p><div class="table" id="idm140093623722288"><p class="title"><strong>Table 40.2. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093623717456" scope="col">Name</th><th align="left" valign="top" id="idm140093623716368" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093623717456">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623716368">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093623717456">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623716368">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093623717456">
										<p>
											<code class="literal">caseRoleName</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623716368">
										<p>
											<code class="literal">manager</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093623717456">
										<p>
											<code class="literal">user</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093623716368">
										<p>
											<code class="literal">Katy</code>
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							Click <span class="strong strong"><strong>Execute</strong></span>.
						</p></li><li class="listitem"><p class="simpara">
							Execute the <code class="literal">GET</code> request from the first step again to check that the <code class="literal">manager</code> role no longer has a user assigned:
						</p><pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;case-role-assignment-list&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;owner&lt;/name&gt;
            &lt;users&gt;Aimee&lt;/users&gt;
      &lt;/role-assignments&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;manager&lt;/name&gt;
      &lt;/role-assignments&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;supplier&lt;/name&gt;
            &lt;groups&gt;Lenovo&lt;/groups&gt;
      &lt;/role-assignments&gt;
&lt;/case-role-assignment-list&gt;</pre></li><li class="listitem"><p class="simpara">
							Assign the user <code class="literal">Cami</code> to the <code class="literal">manager</code> role using a <code class="literal">PUT</code> request on the following endpoint:
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}/roles/{caseRoleName}</code>
						</p><p class="simpara">
							Include the following information in the Swagger client request:
						</p><div class="table" id="idm140093624885600"><p class="title"><strong>Table 40.3. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093624880768" scope="col">Name</th><th align="left" valign="top" id="idm140093624879680" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093624880768">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624879680">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624880768">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624879680">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624880768">
										<p>
											<code class="literal">caseRoleName</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624879680">
										<p>
											<code class="literal">manager</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624880768">
										<p>
											<code class="literal">user</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624879680">
										<p>
											<code class="literal">Cami</code>
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							Click <span class="strong strong"><strong>Execute</strong></span>.
						</p></li><li class="listitem"><p class="simpara">
							Execute the <code class="literal">GET</code> request from the first step again to check that the <code class="literal">manager</code> role is now assigned to <code class="literal">Cami</code>:
						</p><pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;case-role-assignment-list&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;owner&lt;/name&gt;
            &lt;users&gt;Aimee&lt;/users&gt;
      &lt;/role-assignments&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;manager&lt;/name&gt;
            &lt;users&gt;Cami&lt;/users&gt;
      &lt;/role-assignments&gt;
      &lt;role-assignments&gt;
            &lt;name&gt;supplier&lt;/name&gt;
            &lt;groups&gt;Lenovo&lt;/groups&gt;
      &lt;/role-assignments&gt;
&lt;/case-role-assignment-list&gt;</pre></li></ol></div></section></section><section class="chapter" id="case-management-stages-con-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 41. Stages</h2></div></div></div><p>
				Case management stages are a collection of tasks. A stage is an ad hoc subprocess that can be defined using the process designer and may include other case management nodes, such as a milestone. A milestone can also be configured as completed when a stage or a number of stages are completed. Therefore, a milestone may be activated or achieved by the completion of a stage, and a stage may include a milestone or a number of milestones.
			</p><p>
				For example, in a patient triage case, the first stage may consist of observing and noting any obvious physical symptoms or a description from the patient of what their symptoms are, followed by a second stage for tests, and a third for diagnosis and treatment.
			</p><p>
				There are three ways to complete a stage:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						By completion condition.
					</li><li class="listitem">
						By terminal end event.
					</li><li class="listitem">
						By setting the <code class="literal">Completion Condition</code> to <code class="literal">autocomplete</code>, which will automatically complete the stage when there are no active tasks left in the stage.
					</li></ul></div><section class="section" id="case-management-defining-a-stage-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">41.1. Defining a stage</h2></div></div></div><p>
					A stage can be modeled in BPMN2 using the process designer. Stages are a way of grouping related tasks in a way that clearly defines activities that, if the stage is activated, must complete before the next stage of the case commences. For example, the <span class="strong strong"><strong>IT_Orders</strong></span> case definition can also be defined using stages in the following way:
				</p><div class="figure" id="idm140093627999328"><p class="title"><strong>Figure 41.1. <span class="strong strong">IT_Orders</span> project stages example</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/itorders-stages.png" alt="IT_Orders - stages"/></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							From the predefined node panel located on the left side of the diagram editor, drag and drop an <span class="strong strong"><strong>Adhoc</strong></span> subprocess node onto the design canvas and provide a name for the stage node.
						</li><li class="listitem"><p class="simpara">
							Define how the stage is activated:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If the stage is being activated by an incoming node, connect the stage with a sequence flow line from the incoming node.
								</li><li class="listitem">
									If the stage is instead being activated by a signal event, configure the <code class="literal">SignalRef</code> on the signal node with the name of the stage that you configured in the first step.
								</li><li class="listitem">
									Alternatively, configure the <code class="literal">AdHocActivationCondition</code> property to activate the stage when the condition has been met.
								</li></ul></div></li><li class="listitem">
							Re-size the node as required to provide room to add the task nodes for the stage.
						</li><li class="listitem">
							Add the relevant tasks to the stage and configure them as required.
						</li><li class="listitem"><p class="simpara">
							Optional: Configure a completion condition for the stage. As an ad hoc subprocess, stages are configured as <code class="literal">autocomplete</code> by default, which means that the stage will automatically complete and trigger the next activity in the case definition once all instances in the stage are no longer active.
						</p><p class="simpara">
							To change the completion condition, select the stage node and open the <span class="strong strong"><strong>Properties</strong></span> panel on the right, expand <span class="strong strong"><strong>Implementation/Execution</strong></span>, and modify the <code class="literal">AdHocCompletionCondition</code> property field with a free-form Drools expression for the completion condition you require. For more information about stage completion conditions, see <a class="xref" href="#case-management-stage-activation-and-completion-conditions-proc" title="41.2. Configuring stage activation and completion conditions">Section 41.2, “Configuring stage activation and completion conditions”</a>.
						</p></li><li class="listitem">
							Once the stage has been configured, connect it to the next activity in the case definition using a sequence flow line.
						</li></ol></div></section><section class="section" id="case-management-stage-activation-and-completion-conditions-proc"><div class="titlepage"><div><div><h2 class="title">41.2. Configuring stage activation and completion conditions</h2></div></div></div><p>
					Stages can be triggered by a start node, intermediate node, or manually using an API call.
				</p><p>
					You can configure stages with both activation and completion conditions using free-form Drools rules, the same way that milestone completion conditions are configured. For example, in the <span class="strong strong"><strong>IT_Orders</strong></span> sample project, the <code class="literal">Milestone 2: Order shipped</code> completion condition (<code class="literal">org.kie.api.runtime.process.CaseData(data.get("shipped") == true)</code>) can also be used as the completion condition for the <code class="literal">Order delivery</code> stage represented here:
				</p><div class="figure" id="idm140093627972624"><p class="title"><strong>Figure 41.2. <code class="literal">IT_Orders</code> project stages example</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/itorders-stages.png" alt="IT_Orders - stages"/></div></div></div><p>
					Activation conditions can also be configured using a free-form Drools rule to configure the <code class="literal">AdHocActivationCondition</code> property to activate a stage.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a case definition in the Business Central process designer.
						</li><li class="listitem">
							You have added an ad hoc subprocess to the case definition that is to be used as a stage.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							With the stage selected, click 
							<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
							 to open the <span class="strong strong"><strong>Properties</strong></span> panel on the right side of the designer.
						</li><li class="listitem">
							Expand <span class="strong strong"><strong>Implementation/Execution</strong></span> and in the <code class="literal">AdHocActivationCondition</code> property editor define an activation condition for the start node. For example, set <code class="literal">autostart: true</code> to make the stage automatically activated when a new case instance is started.
						</li><li class="listitem">
							The <code class="literal">AdHocCompletionCondition</code> is set to <code class="literal">autocomplete</code> by default. To change this, input a completion condition using a free-form Drools expression. For example, set <code class="literal">org.kie.api.runtime.process.CaseData(data.get("ordered") == true)</code> to activate the second stage in the example shown previously.
						</li></ol></div><p>
					For more examples and information about the conditions used in the <span class="strong strong"><strong>IT_Orders</strong></span> sample project, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-case-management"><span class="emphasis"><em>Getting started with case management</em></span></a>.
				</p></section><section class="section" id="case-management-dynamic-tasks-during-stages-proc"><div class="titlepage"><div><div><h2 class="title">41.3. Adding a dynamic task to a stage</h2></div></div></div><p>
					Dynamic tasks can be added to a case stage during run time using a REST API request. This is similar to adding a dynamic task to a case instance, but you must also define the <code class="literal">caseStageId</code> of the stage to which the task is added.
				</p><p>
					Use the following procedure to add a dynamic task to a stage in the <span class="strong strong"><strong>IT_Orders</strong></span> sample project available in Business Central using the Swagger REST API tool. The same endpoint can be used for the REST API without Swagger.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>IT_Orders</strong></span> sample project BPMN2 case definition has been reconfigured to use stages instead of milestones, as demonstrated in the provided example. For information about configuring stages for case management, see <a class="xref" href="#case-management-defining-a-stage-proc-case-management-design" title="41.1. Defining a stage">Section 41.1, “Defining a stage”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start a new case using the Showcase application. For more information about using Showcase, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>.
						</p><p class="simpara">
							Because this case is designed using stages, the case details page shows stage tracking:
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-with-stages-showcase.png" alt="case with stages showcase"/></div></div><p class="simpara">
							The first stage starts automatically when the case instance is created.
						</p></li><li class="listitem"><p class="simpara">
							As a <code class="literal">manager</code> user, approve the hardware specification in Business Central under <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>, then check the progress of the case.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In Business Central, click <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> and open the active case instance <code class="literal">IT-0000000001</code>.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Diagram</strong></span> to see the case progress.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							In a web browser, open the following URL:
						</p><p class="simpara">
							<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>.
						</p></li><li class="listitem">
							Open the list of available endpoints under <span class="strong strong"><strong>Case instances :: Case Management</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click click the following <code class="literal">POST</code> method endpoint to open the details:
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}/stages/{caseStageId}/tasks</code>
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Try it out</strong></span> to complete the following parameters:
						</p><div class="table" id="idm140093624293232"><p class="title"><strong>Table 41.1. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093624288400" scope="col">Name</th><th align="left" valign="top" id="idm140093624287312" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093624288400">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624287312">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624288400">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624287312">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093624288400">
										<p>
											<code class="literal">caseStageId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093624287312">
										<p>
											<code class="literal">Order delivery</code>
										</p>
										</td></tr></tbody></table></div></div><p class="simpara">
							The <code class="literal">caseStageId</code> is the name of the stage in the case definition where the dynamic task is to be created. This can be any dynamic or service task payload. See <a class="link" href="#case-management-dynamic-subprocess-API-proc" title="38.3. Creating a dynamic subprocess using the KIE Server REST API">] or xref:case-management-dynamic-service-task-API-proc[</a> for examples.
						</p></li></ol></div><p>
					After the dynamic task has been added to the stage, it must be completed in order for the stage to complete and for the case process to move on to the next item in the case flow.
				</p></section></section><section class="chapter" id="case-management-milestones-con"><div class="titlepage"><div><div><h2 class="title">Chapter 42. Milestones</h2></div></div></div><p>
				Milestones are a special service task that can be configured in the case definition designer by adding the milestone node to the process designer palette. When creating a new case definition, a milestone configured as <code class="literal">AdHoc Autostart</code> is included on the design palette by default. Newly created milestones are not set to <code class="literal">AdHoc Autostart</code> by default.
			</p><p>
				Case management milestones generally occur at the end of a stage, but they can also be the result of achieving other milestones. A milestone always requires a condition to be defined in order to track progress. Milestones react to case file data when data is added to a case. A milestone represents a single point of achievement within the case instance. It can be used to flag certain events, which can be useful for Key Performance Indicator (KPI) tracking or identifying the tasks that are still to be completed.
			</p><p>
				Milestones can be in any of the following states during case execution:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">Active</code>: The condition has been defined on the milestone but it has not been met.
					</li><li class="listitem">
						<code class="literal">Completed</code>: The milestone condition has been met, the milestone has been achieved, and the case can proceed to the next task.
					</li><li class="listitem">
						<code class="literal">Terminated</code>: The milestone is no longer a part of the case process and is no longer required.
					</li></ul></div><p>
				While a milestone is available or completed it can be triggered manually by a signal or automatically if <code class="literal">AdHoc Autostart</code> is configured when a case instance starts. Milestones can be triggered as many times as required, however, it is directly achieved when the condition is met.
			</p><section class="section" id="case-management-milestone-triggering-case-management-design"><div class="titlepage"><div><div><h2 class="title">42.1. Configuring and triggering milestones</h2></div></div></div><p>
					Case milestones can be configured to start automatically when a case instance starts or they can triggered using a signal, which is configured manually during the case design.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A case project has been created in Business Central.
						</li><li class="listitem">
							A case definition has been created.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							From the predefined node panel located on the left side of the diagram editor, drag and drop a <code class="literal">Milestone</code> object onto the palette.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/milestone.png" alt="Milestone"/></div></div></li><li class="listitem">
							With the milestone selected, click 
							<span class="inlinemediaobject"><img src="images/_images/getting-started/diagram_properties.png" alt="diagram properties"/></span>
							 to open the <span class="strong strong"><strong>Properties</strong></span> panel on the right side of the designer.
						</li><li class="listitem">
							Expand <span class="strong strong"><strong>Data Assignments</strong></span> to add a completion condition. Milestones include a <code class="literal">Condition</code> parameter by default.
						</li><li class="listitem">
							To define the completion condition for the milestone, select <code class="literal">Constant</code> from the <span class="strong strong"><strong>Source</strong></span> list. The condition must be provided using the Drools syntax.
						</li><li class="listitem"><p class="simpara">
							Expand <span class="strong strong"><strong>Implementation/Execution</strong></span> to configure the <code class="literal">AdHoc Autostart</code> property.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Click the check box to set this property to <code class="literal">true</code> for milestones that are required to start automatically when a case instance starts.
								</li><li class="listitem">
									Leave the check box empty to set this property to <code class="literal">false</code> for milestones that are to be triggered by a signal event.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Optional: Configure a signal event to trigger a milestone once a case goal has been reached.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									With the signal event selected in the case design palette, open the <span class="strong strong"><strong>Properties</strong></span> panel on the right.
								</li><li class="listitem">
									Set the <code class="literal">Signal Scope</code> property to <code class="literal">Process Instance</code>.
								</li><li class="listitem"><p class="simpara">
									Open the <code class="literal">SignalRef</code> expression editor and type the name of the milestone to be triggered.
								</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/milestone-trigger-expression.png" alt="Milestone trigger expression"/></div></div></li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span>.
						</li></ol></div></section></section><section class="chapter" id="case-management-variable-tags-con"><div class="titlepage"><div><div><h2 class="title">Chapter 43. Variable tags</h2></div></div></div><p>
				Variables store data that is used during runtime. For greater control over variable behavior, you can tag case variables and local variables in the BPMN case file. Tags are simple string values that you add as metadata to a specific variable.
			</p><p>
				Red Hat Process Automation Manager supports the following tags for case and local variables:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>required</strong></span>: Sets the variable as a requirement in order to start a case. If a case starts without the required variable, Red Hat Process Automation Manager generates a <code class="literal">VariableViolationException</code> error.
					</li><li class="listitem">
						<span class="strong strong"><strong>readonly</strong></span>: Indicates that the variable is for informational purposes only and can be set only once during case execution. If the value of a read-only variable is modified at any time, Red Hat Process Automation Manager generates a <code class="literal">VariableViolationException</code> error.
					</li><li class="listitem">
						<span class="strong strong"><strong>restricted</strong></span>: A tag that is used with the <code class="literal">VariableGuardProcessEventListener</code> to indicate that permission is granted to modify the variable based on the existing role. The <span class="strong strong"><strong>restricted</strong></span> tag can be replaced by any other tag name if using the second constructor that passes the new tag name.
					</li></ul></div><p>
				The <code class="literal">VariableGuardProcessEventListener</code> class is extended from the <code class="literal">DefaultProcessEventListener</code> class and supports two different constructors:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<code class="literal">VariableGuardProcessEventListener</code>
					</p><pre class="programlisting language-java">public VariableGuardProcessEventListener(String requiredRole, IdentityProvider identityProvider) {
    this("restricted", requiredRole, identityProvider);
}</pre></li><li class="listitem"><p class="simpara">
						<code class="literal">VariableGuardProcessEventListener</code>
					</p><pre class="programlisting language-java">public VariableGuardProcessEventListener(String tag, String requiredRole, IdentityProvider identityProvider) {
    this.tag = tag;
    this.requiredRole = requiredRole;
    this.identityProvider = identityProvider;
}</pre><p class="simpara">
						Therefore, you must add an event listener to the session with the allowed role name and identity provider that returns the user role as shown in the following example:
					</p><pre class="programlisting language-java">ksession.addEventListener(new VariableGuardProcessEventListener("AdminRole", myIdentityProvider));</pre><p class="simpara">
						In the previous example, the <code class="literal">VariableGuardProcessEventListener</code> method verifies if a variable is tagged with a security constraint tag (<code class="literal">restricted</code>). If the user does not have the required role (for example, <code class="literal">AdminRole</code>), then Red Hat Process Automation Manager generates a <code class="literal">VariableViolationException</code> error. NOTE: The variable tags that appear in the Business Central UI, for example <code class="literal">internal</code>, <code class="literal">input</code>, <code class="literal">output</code>, <code class="literal">business-relevant</code>, and <code class="literal">tracked</code> are not supported in Red Hat Process Automation Manager.
					</p></li></ul></div><p>
				You can add the tag directly to the BPMN process source file as a <code class="literal">customTags</code> metadata property with the tag value defined in the format <code class="literal">![CDATA[<span class="emphasis"><em>TAG_NAME</em></span>]]</code>.
			</p><p>
				For example, the following BPMN process applies the <code class="literal">required</code> tag to an <code class="literal">approved</code> process variable:
			</p><div class="figure" id="idm140093626336384"><p class="title"><strong>Figure 43.1. Example variable tagged in the BPMN modeler</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/variable-tags.png" alt="Image of variable tags in BPMN modeler"/></div></div></div><div class="formalpara"><p class="title"><strong>Example variable tagged in a BPMN file</strong></p><p>
					
<pre class="programlisting language-xml">&lt;bpmn2:property id="approved" itemSubjectRef="ItemDefinition_9" name="approved"&gt;
  &lt;bpmn2:extensionElements&gt;
    &lt;tns:metaData name="customTags"&gt;
      &lt;tns:metaValue&gt;&lt;![CDATA[required]]&gt;&lt;/tns:metaValue&gt;
    &lt;/tns:metaData&gt;
  &lt;/bpmn2:extensionElements&gt;
&lt;/bpmn2:property&gt;</pre>
				</p></div><p>
				You can use more than one tag for a variable where applicable. You can also define custom variable tags in your BPMN files to make variable data available to Red Hat Process Automation Manager process event listeners. Custom tags do not influence the Red Hat Process Automation Manager runtime as the standard variable tags do and are for informational purposes only. You define custom variable tags in the same <code class="literal">customTags</code> metadata property format that you use for standard Red Hat Process Automation Manager variable tags.
			</p></section><section class="chapter" id="case-management-case-listener-con"><div class="titlepage"><div><div><h2 class="title">Chapter 44. Case event listener</h2></div></div></div><p>
				The <code class="literal">CaseEventListener</code> listener is used to initiate notifications for case-related events and operations that are invoked on a case instance. Implement the case event listener by overriding the methods as needed for your particular use case.
			</p><p>
				You can configure the listener using the deployment descriptors located in Business Central in <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong><span class="emphasis"><em>PROJECT_NAME</em></span></strong></span> → <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Deployments</strong></span>.
			</p><p>
				When a new project is created, a <code class="literal">kie-deployment-descriptor.xml</code> file is generated with default values.
			</p><div class="formalpara"><p class="title"><strong>CaseEventListener methods</strong></p><p>
					
<pre class="programlisting language-java">public interface CaseEventListener extends EventListener {

    default void beforeCaseStarted(CaseStartEvent event) {
    };

    default void afterCaseStarted(CaseStartEvent event) {
    };

    default void beforeCaseClosed(CaseCloseEvent event) {
    };

    default void afterCaseClosed(CaseCloseEvent event) {
    };

    default void beforeCaseCancelled(CaseCancelEvent event) {
    };

    default void afterCaseCancelled(CaseCancelEvent event) {
    };

    default void beforeCaseDestroyed(CaseDestroyEvent event) {
    };

    default void afterCaseDestroyed(CaseDestroyEvent event) {
    };

    default void beforeCaseReopen(CaseReopenEvent event) {
    };

    default void afterCaseReopen(CaseReopenEvent event) {
    };

    default void beforeCaseCommentAdded(CaseCommentEvent event) {
    };

    default void afterCaseCommentAdded(CaseCommentEvent event) {
    };

    default void beforeCaseCommentUpdated(CaseCommentEvent event) {
    };

    default void afterCaseCommentUpdated(CaseCommentEvent event) {
    };

    default void beforeCaseCommentRemoved(CaseCommentEvent event) {
    };

    default void afterCaseCommentRemoved(CaseCommentEvent event) {
    };

    default void beforeCaseRoleAssignmentAdded(CaseRoleAssignmentEvent event) {
    };

    default void afterCaseRoleAssignmentAdded(CaseRoleAssignmentEvent event) {
    };

    default void beforeCaseRoleAssignmentRemoved(CaseRoleAssignmentEvent event) {
    };

    default void afterCaseRoleAssignmentRemoved(CaseRoleAssignmentEvent event) {
    };

    default void beforeCaseDataAdded(CaseDataEvent event) {
    };

    default void afterCaseDataAdded(CaseDataEvent event) {
    };

    default void beforeCaseDataRemoved(CaseDataEvent event) {
    };

    default void afterCaseDataRemoved(CaseDataEvent event) {
    };

    default void beforeDynamicTaskAdded(CaseDynamicTaskEvent event) {
    };

    default void afterDynamicTaskAdded(CaseDynamicTaskEvent event) {
    };

    default void beforeDynamicProcessAdded(CaseDynamicSubprocessEvent event) {
    };

    default void afterDynamicProcessAdded(CaseDynamicSubprocessEvent event) {
    };
}</pre>
				</p></div></section><section class="chapter" id="case-management-rules-con"><div class="titlepage"><div><div><h2 class="title">Chapter 45. Rules in case management</h2></div></div></div><p>
				Cases are data-driven, rather than following a sequential flow. The steps required to resolve a case rely on data, which is provided by people involved in the case, or the system can be configured to trigger further actions based on the data available. In the latter case, you can use business rules to decide what further actions are required for the case to continue or reach a resolution.
			</p><p>
				Data can be inserted into the case file at any point during the case. The decision engine constantly monitors case file data, meaning that rules react to data that is contained in the case file. Using rules to monitor and respond to changes in the case file data provides a level of automation that drives cases forward.
			</p><section class="section" id="case-management-using-rules-proc"><div class="titlepage"><div><div><h2 class="title">45.1. Using rules to drive cases</h2></div></div></div><p>
					Refer to the case management <span class="strong strong"><strong>IT_Orders</strong></span> sample project in Business Central.
				</p><p>
					Suppose that the particular hardware specification provided by the supplier is incorrect or invalid. The supplier needs to provide a new, valid order so that the case can continue. Rather than wait for the manager to reject the invalid specification and create a new request for the supplier, you can create a business rule that will react immediately when the case data indicates that the provided specification is invalid. It can then create a new hardware specification request for the supplier.
				</p><p>
					The following procedure demonstrates how to create and use a business rule to execute this scenario.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>IT_Orders</strong></span> sample project is open in Business Central, but it is not deployed to the KIE Server.
						</li><li class="listitem"><p class="simpara">
							The <code class="literal">ServiceRegistry</code> is part of the <code class="literal">jbpm-services-api</code> module, and must be available on the class path.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If building the project outside of Business Central, the following dependencies must be added to the project:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">org.jbpm:jbpm-services-api</code>
									</li><li class="listitem">
										<code class="literal">org.jbpm:jbpm-case-mgmt-api</code>
									</li></ul></div></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the following business rule file called <code class="literal">validate-document.drl</code>:
						</p><pre class="programlisting language-java">package defaultPackage;

import java.util.Map;
import java.util.HashMap;
import org.jbpm.casemgmt.api.CaseService;
import org.jbpm.casemgmt.api.model.instance.CaseFileInstance;
import org.jbpm.document.Document;
import org.jbpm.services.api.service.ServiceRegistry;

rule "Invalid document name - reupload"
when
    $caseData : CaseFileInstance()
    Document(name == "invalid.pdf") from $caseData.getData("hwSpec")

then

    System.out.println("Hardware specification is invalid");
    $caseData.remove("hwSpec");
    update($caseData);
    CaseService caseService = (CaseService) ServiceRegistry.get().service(ServiceRegistry.CASE_SERVICE);
    caseService.triggerAdHocFragment($caseData.getCaseId(), "Prepare hardware spec", null);
end</pre><p class="simpara">
							This business rule detects when a file named <code class="literal">invalid.pdf</code> is uploaded to the case file. It then removes the <code class="literal">invalid.pdf</code> document and creates a new instance of the <code class="literal">Prepare hardware spec</code> user task.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Deploy</strong></span> to build the <span class="strong strong"><strong>IT_Orders</strong></span> project and deploy it to a KIE Server.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can also select the <span class="strong strong"><strong>Build &amp; Install</strong></span> option to build the project and publish the KJAR file to the configured Maven repository without deploying to a KIE Server. In a development environment, you can click <span class="strong strong"><strong>Deploy</strong></span> to deploy the built KJAR file to a KIE Server without stopping any running instances (if applicable), or click <span class="strong strong"><strong>Redeploy</strong></span> to deploy the built KJAR file and replace all instances. The next time you deploy or redeploy the built KJAR, the previous deployment unit (KIE container) is automatically updated in the same target KIE Server. In a production environment, the <span class="strong strong"><strong>Redeploy</strong></span> option is disabled and you can click <span class="strong strong"><strong>Deploy</strong></span> only to deploy the built KJAR file to a new deployment unit (KIE container) on a KIE Server.
							</p><p>
								To configure the KIE Server environment mode, set the <code class="literal">org.kie.server.mode</code> system property to <code class="literal">org.kie.server.mode=development</code> or <code class="literal">org.kie.server.mode=production</code>. To configure the deployment behavior for a corresponding project in Business Central, go to project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>General Settings</strong></span> → <span class="strong strong"><strong>Version</strong></span> and toggle the <span class="strong strong"><strong>Development Mode</strong></span> option. By default, KIE Server and all new projects in Business Central are in development mode. You cannot deploy a project with <span class="strong strong"><strong>Development Mode</strong></span> turned on or with a manually added <code class="literal">SNAPSHOT</code> version suffix to a KIE Server that is in production mode.
							</p></div></div></li><li class="listitem">
							Create a file called <code class="literal">invalid.pdf</code> and save it locally.
						</li><li class="listitem">
							Create a file called <code class="literal">valid-spec.pdf</code> and save it locally.
						</li><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Projects</strong></span> → <span class="strong strong"><strong>IT_Orders</strong></span> to open the <span class="strong strong"><strong>IT_Orders</strong></span> project.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Import Asset</strong></span> in the upper-right corner of the page.
						</li><li class="listitem"><p class="simpara">
							Upload the <code class="literal">validate-document.drl</code> file to the <code class="literal">default</code> package (<code class="literal">src/main/resources</code>) and click <span class="strong strong"><strong>Ok</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-validate-document-upload.png" alt="case management validate document upload"/></div></div><p class="simpara">
							The <code class="literal">validate-document.drl</code> rule is shown in the rule editor. Click <span class="strong strong"><strong>Save</strong></span> or close to exit the rule editor.
						</p></li><li class="listitem">
							Open the Showcase application by either clicking the <span class="strong strong"><strong>Apps launcher</strong></span> (if it is installed), or go to <code class="literal"><a class="link" href="http://localhost:8080/rhpam-case-mgmt-showcase/jbpm-cm.html">http://localhost:8080/rhpam-case-mgmt-showcase/jbpm-cm.html</a></code>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Start Case</strong></span> for the <span class="strong strong"><strong>IT_Orders</strong></span> project.
						</p><p class="simpara">
							In this example, Aimee is the case <code class="literal">owner</code>, Katy is the <code class="literal">manager</code>, and the supplier group is <code class="literal">supplier</code>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/showcase-start-case.png" alt="showcase start case"/></div></div></li><li class="listitem">
							Log out of Business Central, and log back in as a user that belongs to the <code class="literal">supplier</code> group.
						</li><li class="listitem">
							Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
						</li><li class="listitem">
							Open the <code class="literal">Prepare hardware spec</code> task and click <span class="strong strong"><strong>Claim</strong></span>. This assigns the task to the logged in user.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Start</strong></span> and click 
							<span class="inlinemediaobject"><img src="images/_images/cases/choose-file-button.png" alt="choose file"/></span>
							 to locate the <code class="literal">invalid.pdf</code> hardware specification file. Click 
							<span class="inlinemediaobject"><img src="images/_images/cases/upload-button.png" alt="the upload button"/></span>
							 to upload the file.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-invalid-spec.png" alt="case management invalid spec"/></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Complete</strong></span>.
						</p><p class="simpara">
							The value in the <span class="strong strong"><strong>Task Inbox</strong></span> for the <code class="literal">Prepare hardware spec</code> is <code class="literal">Ready</code>.
						</p></li><li class="listitem"><p class="simpara">
							In Showcase, click <span class="strong strong"><strong>Refresh</strong></span> in the upper-right corner. Notice that a <code class="literal">Prepare hardware task</code> message appears in the <span class="strong strong"><strong>Completed</strong></span> column and another appears in the <span class="strong strong"><strong>In Progress</strong></span> column.
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-new-spec-task.png" alt="case management new spec task"/></div></div><p class="simpara">
							This is because the first <code class="literal">Prepare hardware spec</code> task has been completed with the specification file <code class="literal">invalid.pdf</code>. As a result, the business rule causes the task and file to be discarded, and a new user task created.
						</p></li><li class="listitem">
							In the Business Central <span class="strong strong"><strong>Task Inbox</strong></span>, repeat the previous steps to upload the <code class="literal">valid-spec.pdf</code> file instead of <code class="literal">invalid.pdf</code>.
						</li></ol></div></section></section><section class="chapter" id="case-management-security-con-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 46. Case management security</h2></div></div></div><p>
				Cases are configured at the case definition level with case roles. These are generic participants that are involved in case handling. These roles can be assigned to user tasks or used as contact references. Roles are not hard-coded to specific users or groups to keep the case definition independent of the actual actors involved in any given case instance. You can modify case role assignments at any time as long as case instance is active, though modifying a role assignment does not affect tasks already created based on the previous role assignment.
			</p><p>
				Case instance security is enabled by default. The case definition prevents case data from being accessed by users who do not belong to the case. Unless a user has a case role assignment (either assigned as user or a group member) then they are not able to access the case instance.
			</p><p>
				Case security is one of the reasons why it is recommended that you assign case roles when starting a case instance, as this will prevent tasks being assigned to users who should not have access to the case.
			</p><section class="section" id="case-management-security-configuration-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">46.1. Configuring security for case management</h2></div></div></div><p>
					You can turn off case instance authorization by setting the following system property to <code class="literal">false</code>:
				</p><p>
					<code class="literal">org.jbpm.cases.auth.enabled</code>
				</p><p>
					This system property is just one of the security components for case instances. In addition, you can configure case operations at the execution server level using the <code class="literal">case-authorization.properties</code> file, available at the root of the class path of the execution server application (<code class="literal">kie-server.war/WEB-INF/classes</code>).
				</p><p>
					Using a simple configuration file for all possible case definitions encourages you to think about case management as domain-specific. <code class="literal">AuthorizationManager</code> for case security is pluggable, which allows you to include custom code for specific security handling.
				</p><p>
					You can restrict the following case instance operations to case roles:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">CANCEL_CASE</code>
						</li><li class="listitem">
							<code class="literal">DESTROY_CASE</code>
						</li><li class="listitem">
							<code class="literal">REOPEN_CASE</code>
						</li><li class="listitem">
							<code class="literal">ADD_TASK_TO_CASE</code>
						</li><li class="listitem">
							<code class="literal">ADD_PROCESS_TO_CASE</code>
						</li><li class="listitem">
							<code class="literal">ADD_DATA</code>
						</li><li class="listitem">
							<code class="literal">REMOVE_DATA</code>
						</li><li class="listitem">
							<code class="literal">MODIFY_ROLE_ASSIGNMENT</code>
						</li><li class="listitem">
							<code class="literal">MODIFY_COMMENT</code>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The Red Hat Process Automation Manager KIE Server is not running.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open the <code class="literal">JBOSS_HOME/standalone/deployments/kie-server.war/WEB-INF/classes/case-authorization.properties</code> file in your preferred editor.
						</p><p class="simpara">
							By default, the file contains the following operation restrictions:
						</p><pre class="screen">CLOSE_CASE=owner,admin
CANCEL_CASE=owner,admin
DESTROY_CASE=owner,admin
REOPEN_CASE=owner,admin</pre></li><li class="listitem"><p class="simpara">
							Add or remove role permissions for these operations as needed:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									To remove permission for a role to perform an operation, remove it from the list of authorized roles for that operation in the <code class="literal">case-authorization.properties</code> file. For example, removing the <code class="literal">admin</code> role from the <code class="literal">CLOSE_CASE</code> operation restricts permission to close a case to the case owner for all cases.
								</li><li class="listitem"><p class="simpara">
									To give a role permission to perform a case operation, add it to the list of authorized roles for that operation in the <code class="literal">case-authorization.properties</code> file. For example, to allow anyone with the <code class="literal">manager</code> role to perform a <code class="literal">CLOSE_CASE</code> operation, add it to the list of roles, separated by a comma:
								</p><p class="simpara">
									<code class="literal">CLOSE_CASE=owner,admin,manager</code>
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							To add role restrictions to other case operations listed in the file, remove the <code class="literal">#</code> from the line and list the role names in the following format:
						</p><p class="simpara">
							<code class="literal">OPERATION=role1,role2,roleN</code>
						</p><p class="simpara">
							Operations in the file that begin with <code class="literal">#</code> have restrictions ignored and can be performed by anyone involved in the case.
						</p></li><li class="listitem">
							When you have finished assigning role permissions, save and close the <code class="literal">case-authorization.properties</code> file.
						</li><li class="listitem"><p class="simpara">
							Start the execution server.
						</p><p class="simpara">
							The case authorization settings apply to all cases on the execution server.
						</p></li></ol></div></section></section><section class="chapter" id="case-management-closing-cases-ref"><div class="titlepage"><div><div><h2 class="title">Chapter 47. Closing cases</h2></div></div></div><p>
				A case instance can be completed when there are no more activities to be performed and the business goal is achieved, or it can be closed prematurely. Usually the case owner closes the case when all work is completed and the case goals have been met. When you close a case, consider adding a comment about why the case instance is being closed.
			</p><p>
				A closed case can be reopened later with the same case ID if required. When a case is reopened, stages that were active when the case was closed will be active when the case is reopened.
			</p><p>
				You can close case instances remotely using KIE Server REST API requests or directly in the Showcase application.
			</p><section class="section" id="case-management-close-case-using-API-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">47.1. Closing a case using the KIE Server REST API</h2></div></div></div><p>
					You can use a REST API request to close a case instance. Red Hat Process Automation Manager includes the Swagger client, which includes endpoints and documentation for REST API requests. Alternatively, you can use the same endpoints to make API calls using your preferred client or Curl.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A case instance has been started using Showcase.
						</li><li class="listitem">
							You are able to authenticate API requests as a user with the <code class="literal">admin</code> role.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open the Swagger REST API client in a web browser:
						</p><p class="simpara">
							<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>
						</p></li><li class="listitem"><p class="simpara">
							Under <span class="strong strong"><strong>Case Instances :: Case Management</strong></span>, open the <code class="literal">POST</code> request with the following endpoint:
						</p><p class="simpara">
							<code class="literal">/server/containers/{id}/cases/instances/{caseId}</code>
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Try it out</strong></span> and fill in the required parameters:
						</p><div class="table" id="idm140093625358816"><p class="title"><strong>Table 47.1. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093627279056" scope="col">Name</th><th align="left" valign="top" id="idm140093627277968" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093627279056">
										<p>
											<code class="literal">id</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093627277968">
										<p>
											<code class="literal">itorders</code>
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm140093627279056">
										<p>
											<code class="literal">caseId</code>
										</p>
										</td><td align="left" valign="top" headers="idm140093627277968">
										<p>
											<code class="literal">IT-0000000001</code>
										</p>
										</td></tr></tbody></table></div></div></li><li class="listitem">
							Optional: Include a comment to be included in the case file. To leave a comment, type it into the <code class="literal">body</code> text field as a <code class="literal">String</code>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Execute</strong></span> to close the case.
						</li><li class="listitem">
							To confirm the case is closed, open the Showcase application and change the case list status to <span class="strong strong"><strong>Closed</strong></span>.
						</li></ol></div></section><section class="section" id="case-management-close-case-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">47.2. Closing a case in the Showcase application</h2></div></div></div><p>
					A case instance is complete when no more activities need to be performed and the business goal has been achieved. After a case is complete, you can close the case to indicate that the case is complete and that no further work is required. When you close a case, consider adding a specific comment about why you are closing the case. If needed, you can reopen the case later with the same case ID.
				</p><p>
					You can use the Showcase application to close a case instance at any time. From Showcase, you can easily view the details of the case or leave a comment before closing it.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You are logged in to the Showcase application and are the owner or administrator for a case instance that you want to close.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the Showcase application, locate the case instance you want to close from the list of case instances.
						</li><li class="listitem">
							To close the case without viewing the details first, click <span class="strong strong"><strong>Close</strong></span>.
						</li><li class="listitem"><p class="simpara">
							To close the case from the case details page, click the case in the list to open it.
						</p><p class="simpara">
							From the case overview page you can add comments to the case and verify that you are closing the correct case based on the case information.
						</p></li><li class="listitem">
							Click <span class="strong strong"><strong>Close</strong></span> to close the case.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Back to Case List</strong></span> in the upper-left corner of the page to return to the Showcase case list view.
						</li><li class="listitem">
							Click the drop-down list next to <span class="strong strong"><strong>Status</strong></span> and select <span class="strong strong"><strong>Canceled</strong></span> to view the list of closed and canceled cases.
						</li></ol></div></section></section><section class="chapter" id="case-management-cancel-or-destroy-case-proc-case-management-design"><div class="titlepage"><div><div><h2 class="title">Chapter 48. Canceling or destroying a case</h2></div></div></div><p>
				Cases can be canceled if they are no longer required and do not require any case work to be performed. Cases that are canceled can be reopened later with the same case instance ID and case file data. In some cases, you might want to permanently destroy a case so that it cannot be reopened.
			</p><p>
				Cases can only be canceled or destroyed using an API request. Red Hat Process Automation Manager includes the Swagger client, which includes endpoints and documentation for REST API requests. Alternatively, you can use the same endpoints to make API calls using your preferred client or Curl.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A case instance has been started using Showcase.
					</li><li class="listitem">
						You are able to authenticate API requests as a user with the <code class="literal">admin</code> role.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the Swagger REST API client in a web browser:
					</p><p class="simpara">
						<code class="literal"><a class="link" href="http://localhost:8080/kie-server/docs">http://localhost:8080/kie-server/docs</a></code>
					</p></li><li class="listitem"><p class="simpara">
						Under <span class="strong strong"><strong>Case Instances :: Case Management</strong></span>, open the <code class="literal">DELETE</code> request with the following endpoint:
					</p><p class="simpara">
						<code class="literal">/server/containers/{id}/cases/instances/{caseId}</code>
					</p><p class="simpara">
						You can cancel a case using the <code class="literal">DELETE</code> request. Optionally, you can also destroy the case using the <code class="literal">destroy</code> parameter.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Try it out</strong></span> and fill in the required parameters:
					</p><div class="table" id="idm140093626688160"><p class="title"><strong>Table 48.1. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093626683328" scope="col">Name</th><th align="left" valign="top" id="idm140093626682240" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093626683328">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626682240">
									<p>
										<code class="literal">itorders</code>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626683328">
									<p>
										<code class="literal">caseId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626682240">
									<p>
										<code class="literal">IT-0000000001</code>
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626683328">
									<p>
										<code class="literal">destroy</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626682240">
									<p>
										<code class="literal">true</code>
									</p>
									<p>
										(Optional. Permanently destroys the case. This parameter is <code class="literal">false</code> by default.)
									</p>
									</td></tr></tbody></table></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Execute</strong></span> to cancel (or destroy) the case.
					</li><li class="listitem">
						To confirm the case is canceled, open the Showcase application and change the case list status to <span class="strong strong"><strong>Canceled</strong></span>. If the case has been destroyed, it will no longer appear in any case list.
					</li></ol></div><section class="section" id="case-management-clean-case-log-con"><div class="titlepage"><div><div><h2 class="title">48.1. Case log removal from the database</h2></div></div></div><p>
					Use the <code class="literal">CaseLogCleanupCommand</code> to clean up cases, such as canceled cases that are using up database space. The <code class="literal">CaseLogCleanupCommand</code> command contains logic to automatically clean-up all or selected cases.
				</p><p>
					You can use the following configuration options with the <code class="literal">CaseLogCleanupCommand</code> command:
				</p><div class="table" id="idm140093626657376"><p class="title"><strong>Table 48.2. CaseLogCleanupCommand parameters table</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093626651600" scope="col">Name</th><th align="left" valign="top" id="idm140093626650512" scope="col">Description</th><th align="left" valign="top" id="idm140093626649424" scope="col">Is Exclusive</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									SkipProcessLog
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Indicates whether or not the process and node instances, along with the process variable log clean-up will be skipped when the command runs. Default value: <code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									SkipTaskLog
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Indicates whether or not the task audit, the task event, and the task variable log clean-up will be skipped when the command runs. Default value: <code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									SkipExecutorLog
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Indicates if the Red Hat Process Automation Manager executor entries clean-up will be skipped when the command runs. Default value: <code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									SingleRun
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Indicates if the job routine will run only once. Default value: <code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									NextRun
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Schedules the next job execution. For example, set to <code class="literal">12h</code> for jobs to be executed every 12 hours. The schedule is ignored if you set <span class="strong strong"><strong>SingleRun</strong></span> to <code class="literal">true</code>, unless you set both <span class="strong strong"><strong>SingleRun</strong></span> and <span class="strong strong"><strong>NextRun</strong></span>. If both are set, the <span class="strong strong"><strong>NextRun</strong></span> schedule takes priority. The ISO format can be used to set the precise date. Default value: <code class="literal">24h</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									OlderThan
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Logs older than the specified date are removed. The date format is <code class="literal">YYYY-MM-DD</code>. Usually, this parameter is used for single run jobs.
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									Yes, cannot be used when the <code class="literal">OlderThanPeriod</code> parameter is used
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									OlderThanPeriod
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Logs older than the specified timer expression are removed. For example, set 30d to remove logs older than 30 days.
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									Yes, cannot be used when the <code class="literal">OlderThan</code> parameter is used
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									ForCaseDefId
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Specifies the case definition ID of the logs that are removed.
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									ForDeployment
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Specifies the deployment ID of the logs that are removed.
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									EmfName
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									The persistence unit name used to perform the delete operation. Default value: <code class="literal">org.jbpm.domain</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									N/A
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									DateFormat
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Specifies the date format for time-related parameters. Default value: <code class="literal">yyyy-MM-dd</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093626651600">
								<p>
									Status
								</p>
								</td><td align="left" valign="top" headers="idm140093626650512">
								<p>
									Status of the case instances of the logs that are removed.
								</p>
								</td><td align="left" valign="top" headers="idm140093626649424">
								<p>
									No, can be used with other parameters
								</p>
								</td></tr></tbody></table></div></div></section></section><section class="chapter" id="additional_resources_2"><div class="titlepage"><div><div><h2 class="title">Chapter 49. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-case-management"><span class="emphasis"><em>Getting started with case management</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-showcase-application"><span class="emphasis"><em>Using the Showcase application for case management</em></span></a>
					</li></ul></div></section></div><div class="part" id="assembly-showcase-application"><div class="titlepage"><div><div><h1 class="title">Part V. Using the Showcase application for case management</h1></div></div></div><div class="partintro" id="idm140093624966624"><div/><p>
				As a case worker or process administrator, you can use the Showcase application to manage and monitor case management applications while case work is carried out in Business Central.
			</p><p>
				Case management differs from business process management (BPM) in that it focuses on the actual data being handled throughout the case and less on the sequence of steps taken to complete a goal. Case data is the most important piece of information in case handling, while business context and decision-making is in the hands of the human case worker.
			</p><p>
				Use this document to install the Showcase application and start a case instance using the <span class="strong strong"><strong>IT_Orders</strong></span> sample case management project in Business Central. Use Business Central to complete the tasks required to complete an IT Orders case.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat JBoss Enterprise Application Platform 7.3 is installed. For installation information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.3/html-single/installation_guide/"><span class="emphasis"><em>Red Hat JBoss Enterprise Application Platform 7.3 Installation Guide</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is installed on Red Hat JBoss EAP and configured with KIE Server. For more information see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-install-on-eap"><span class="emphasis"><em>Installing and configuring Red Hat Process Automation Manager on Red Hat JBoss EAP 7.3</em></span></a>.
					</li><li class="listitem">
						<code class="literal">KieLoginModule</code> is configured in <code class="literal">standalone-full.xml</code>. This required to connect to the KIE Server. For more information about configuring the KIE Server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li><li class="listitem">
						Red Hat Process Automation Manager is running and you can log in to Business Central with a user that has both <code class="literal">kie-server</code> and <code class="literal">user</code> roles. For more information about roles, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/installing_and_configuring_red_hat_process_automation_manager#assembly-planning"><span class="emphasis"><em>Planning a Red Hat Process Automation Manager installation</em></span></a>.
					</li><li class="listitem">
						The <span class="strong strong"><strong>IT_Orders</strong></span> sample project has been imported in Business Central and deployed to the KIE Server. For more information about case management, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-case-management"><span class="emphasis"><em>Getting started with case management</em></span></a>.
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#case-management-overview-con_case-management-showcase">50. Case management</a></span></li><li><span class="chapter"><a href="#case-management-showcase-application-con-case-management-showcase">51. Case management Showcase application</a></span></li><li><span class="chapter"><a href="#case-management-install-and-login-to-showcase-proc-case-management-showcase">52. Installing and logging in to the Showcase application</a></span></li><li><span class="chapter"><a href="#case-management-roles-con-case-management-showcase">53. Case roles</a></span></li><li><span class="chapter"><a href="#case-management-dynamic-tasks-proc">54. Starting dynamic tasks and processes</a></span></li><li><span class="chapter"><a href="#case-management-starting-itorders-in-showcase-proc-case-management-showcase">55. Starting an IT Orders case in the Showcase application</a></span></li><li><span class="chapter"><a href="#case-management-showcase-completing-itorders-proc">56. Completing the <span class="strong strong"><strong>IT_Orders</strong></span> case using Showcase and Business Central</a></span></li><li><span class="chapter"><a href="#additional_resources_3">57. Additional resources</a></span></li></ul></div></div><section class="chapter" id="case-management-overview-con_case-management-showcase"><div class="titlepage"><div><div><h2 class="title">Chapter 50. Case management</h2></div></div></div><p>
				Case management is an extension of Business Process Management (BPM) that enables you to manage adaptable business processes.
			</p><p>
				BPM is a management practice used to automate tasks that are repeatable and have a common pattern, with a focus on optimization by perfecting a process. Business processes are usually modeled with clearly defined paths leading to a business goal. This requires a lot of predictability, usually based on mass-production principles. However, many real-world applications cannot be described completely from start to finish (including all possible paths, deviations, and exceptions). Using a process-oriented approach in certain cases can lead to complex solutions that are hard to maintain.
			</p><p>
				Case management provides problem resolution for non-repeatable, unpredictable processes as opposed to the efficiency-oriented approach of BPM for routine, predictable tasks. It manages one-off situations when the process cannot be predicted in advance. A case definition usually consists of loosely coupled process fragments that can be connected directly or indirectly to lead to certain milestones and ultimately a business goal, while the process is managed dynamically in response to changes that occur during run time.
			</p><p>
				In Red Hat Process Automation Manager, case management includes the following core process engine features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Case file instance
					</li><li class="listitem">
						A per case runtime strategy
					</li><li class="listitem">
						Case comments
					</li><li class="listitem">
						Milestones
					</li><li class="listitem">
						Stages
					</li><li class="listitem">
						Ad hoc fragments
					</li><li class="listitem">
						Dynamic tasks and processes
					</li><li class="listitem">
						Case identifier (correlation key)
					</li><li class="listitem">
						Case lifecycle (close, reopen, cancel, destroy)
					</li></ul></div><p>
				A case definition is always an ad hoc process definition and does not require an explicit start node. The case definition is the main entry point for the business use case.
			</p><p>
				A process definition is introduced as a supporting construct of the case and can be invoked either as defined in the case definition or dynamically to bring in additional processing when required. A case definition defines the following new objects:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Activities (required)
					</li><li class="listitem">
						Case file (required)
					</li><li class="listitem">
						Milestones
					</li><li class="listitem">
						Roles
					</li><li class="listitem">
						Stages
					</li></ul></div></section><section class="chapter" id="case-management-showcase-application-con-case-management-showcase"><div class="titlepage"><div><div><h2 class="title">Chapter 51. Case management Showcase application</h2></div></div></div><p>
				The Showcase application is included in the Red Hat Process Automation Manager distribution to demonstrate the capabilities of case management in an application environment. Showcase is intended to be used as a proof of concept that aims to show the interaction between business process management (BPM) and case management. You can use the application to start, close, monitor, and interact with cases.
			</p><p>
				Showcase must be installed in addition to the Business Central application and KIE Server. The Showcase application is required to start new case instances, however the case work is still performed in Business Central.
			</p><p>
				After a case instance is created and is being worked on, you can monitor the case in the Showcase application by clicking the case in the <span class="strong strong"><strong>Case List</strong></span> to open the case <span class="strong strong"><strong>Overview</strong></span> page.
			</p><h3 id="showcase_support">Showcase Support</h3><p>
				The Showcase application is not an integral part of Red Hat Process Automation Manager and is intended for demonstration purposes for case management. Showcase is provided to encourage customers to adopt and modify it to work for their specific needs. The content of the application itself does not carry product-specific Service Level Agreements (SLAs). We encourage you to report issues, request for enhancements, and any other feedback for consideration in Showcase updates.
			</p><p>
				Red Hat Support will provide guidance on the use of this template on a commercially reasonable basis for its intended use, excluding the provided example UI code provided within.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					<a class="link" href="https://access.redhat.com/support/offerings/production/soc">Production support</a> is limited to the Red Hat Process Automation Manager distribution.
				</p></div></div></section><section class="chapter" id="case-management-install-and-login-to-showcase-proc-case-management-showcase"><div class="titlepage"><div><div><h2 class="title">Chapter 52. Installing and logging in to the Showcase application</h2></div></div></div><p>
				The Showcase application is included with the Red Hat Process Automation Manager 7.10 distribution in the add-ons Zip file. The purpose of this application is to demonstrate the functionality of case management in Red Hat Process Automation Manager and enable you to interact with cases created in Business Central. You can install the Showcase application in a Red Hat JBoss Enterprise Application Platform instance or on OpenShift. This procedure describes how to install the Showcase application in Red Hat JBoss EAP.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Business Central and KIE Server are installed in an Red Hat JBoss EAP instance.
					</li><li class="listitem">
						You have created a user with <code class="literal">kie-server</code> and <code class="literal">user</code> roles. Only users with the <code class="literal">user</code> role are able to log in to the Showcase application. Users also require the <code class="literal">kie-server</code> role to perform remote operations on the running KIE Server.
					</li><li class="listitem">
						Business Central is not running.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Navigate to the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html">Software Downloads</a> page in the Red Hat Customer Portal (login required), and select the product and version from the drop-down options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Product: Red Hat Process Automation Manager
							</li><li class="listitem">
								Version: 7.10
							</li></ul></div></li><li class="listitem">
						Download <span class="strong strong"><strong>Red Hat Process Automation Manager 7.10 Add Ons</strong></span> (<code class="literal">rhpam-7.10.0-add-ons.zip</code>).
					</li><li class="listitem">
						Extract the (<code class="literal">rhpam-7.10.0-add-ons.zip</code>). file. The (<code class="literal">rhpam-7.10-case-mgmt-showcase-eap7-deployable.zip</code>). file is in the unzipped directory.
					</li><li class="listitem">
						Extract the (<code class="literal">rhpam-7.10-case-mgmt-showcase-eap7-deployable.zip</code>). archive to a temporary directory. In the following examples this directory is called <code class="literal"><span class="emphasis"><em>TEMP_DIR</em></span></code>.
					</li><li class="listitem"><p class="simpara">
						Copy the contents of the <code class="literal">_TEMP_DIR/rhpam-7.10-case-mgmt-showcase-eap7-deployable/jboss-eap-7.3</code> directory to <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span></code>.
					</p><p class="simpara">
						When asked to overwrite files or merge directories, select <span class="strong strong"><strong>Yes</strong></span>.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Ensure the names of the Red Hat Process Automation Manager deployments you copy do not conflict with your existing deployments in the Red Hat JBoss EAP instance.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Add the following system property to your deployment’s <code class="literal">7.3/jboss-eap-7.3/standalone/configuration/standalone-full.xml</code> file:
					</p><p class="simpara">
						<code class="literal">&lt;property name="org.jbpm.casemgmt.showcase.url" value="/rhpam-case-mgmt-showcase"/&gt;</code>
					</p></li><li class="listitem"><p class="simpara">
						In a terminal application, navigate to <span class="strong strong"><strong><span class="emphasis"><em>EAP_HOME</em></span>/bin</strong></span> and run the standalone configuration to start Business Central:
					</p><p class="simpara">
						<code class="literal">./standalone.sh -c standalone-full.xml</code>
					</p></li><li class="listitem"><p class="simpara">
						In a web browser, enter <code class="literal">localhost:8080/business-central</code>.
					</p><p class="simpara">
						If Red Hat Process Automation Manager has been configured to run from a domain name, replace <code class="literal">localhost</code> with the domain name, for example:
					</p><p class="simpara">
						<code class="literal"><a class="link" href="http://www.example.com:8080/business-central">http://www.example.com:8080/business-central</a></code>
					</p></li><li class="listitem"><p class="simpara">
						In the upper-right corner in Business Central, click the <span class="strong strong"><strong>Apps launcher</strong></span> button to launch the <span class="strong strong"><strong>Case Management Showcase</strong></span> in a new browser window.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/apps-launcher-showcase-button.png" alt="apps launcher showcase button"/></div></div></li><li class="listitem">
						Log in to the Showcase application using your Business Central user credentials.
					</li></ol></div></section><section class="chapter" id="case-management-roles-con-case-management-showcase"><div class="titlepage"><div><div><h2 class="title">Chapter 53. Case roles</h2></div></div></div><p>
				Case roles provide an additional layer of abstraction for user participation in case handling. Roles, users, and groups are used for different purposes in case management.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Roles</span></dt><dd>
							Roles drive the authorization for a case instance and are used for user activity assignments. A user or one or more groups can be assigned to the owner role. The owner is whoever the case belongs to. Roles are not restricted to a single set of people or groups as part of a case definition. Use roles to specify task assignments instead of assigning a specific user or group to a task assignment to ensure that the case remains dynamic.
						</dd><dt><span class="term">Groups</span></dt><dd>
							A group is a collection of users who are able to carry out a particular task or have a set of specified responsibilities. You can assign any number of people to a group and assign any group to a role. You can add or change members of a group at any time. Do not hard code a group to a particular task.
						</dd><dt><span class="term">Users</span></dt><dd><p class="simpara">
							A user is an individual who can be given a particular task when you assign them a role or add them to a group.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Do not create a user called <code class="literal">unknown</code> in process engine or KIE Server. The <code class="literal">unknown</code> user account is a reserved system name with superuser access. The <code class="literal">unknown</code> user account performs tasks related to the SLA violation listener when there are no users logged in.
							</p></div></div></dd></dl></div><p>
				The following example illustrates how the preceding case management concepts apply to a hotel reservation with the following information:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Role</strong></span>: <code class="literal">Guest</code>
					</li><li class="listitem">
						<span class="strong strong"><strong>Group</strong></span>: <code class="literal">Receptionist</code>, <code class="literal">Maid</code>
					</li><li class="listitem">
						<span class="strong strong"><strong>User</strong></span>: <code class="literal">Marilyn</code>
					</li></ul></div><p>
				The <code class="literal">Guest</code> role assignment affects the specific work of the associated case and is unique to all case instances. The number of users or groups that can be assigned to a role is limited by the case <code class="literal">Cardinality</code>, which is set during role creation in the process designer and case definition. For example, the hotel reservation case has only one guest while the <span class="strong strong"><strong>IT_Orders</strong></span> sample project has two suppliers of IT hardware.
			</p><p>
				When roles are defined, ensure that roles are not hard-coded to a single set of people or groups as part of case definition and that they can differ for each case instance. This is why case role assignments are important.
			</p><p>
				Role assignments can be assigned or removed when a case starts or at any time when a case is active. Although roles are optional, use roles in case definitions to maintain an organized workflow.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Always use roles for task assignments instead of actual user or group names. This ensures that the case remains dynamic and actual user or group assignments can be made as late as required.
				</p></div></div><p>
				Roles are assigned to users or groups and authorized to perform tasks when a case instance is started.
			</p></section><section class="chapter" id="case-management-dynamic-tasks-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 54. Starting dynamic tasks and processes</h2></div></div></div><p>
				You can add dynamic tasks and processes to a case during run time. Dynamic actions are a way to address changing situations, where an unanticipated change during the case requires a new task or process to be incorporated into the case.
			</p><p>
				Use a case application to add a dynamic task during run time. For demonstration purposes, the Business Central distribution includes a Showcase application where you can start a new dynamic task or process for the IT Orders application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						KIE Server is deployed and connected to Business Central.
					</li><li class="listitem">
						The IT Orders project is deployed to KIE Server.
					</li><li class="listitem">
						The Showcase application <code class="literal">.war</code> file has been deployed alongside Business Central.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						With the <span class="strong strong"><strong>IT_Orders_New</strong></span> project deployed and running in the KIE Server, in a web browser, navigate to the Showcase login page <code class="literal"><a class="link" href="http://localhost:8080/rhpam-case-mgmt-showcase/">http://localhost:8080/rhpam-case-mgmt-showcase/</a></code>.
					</p><p class="simpara">
						Alternatively, if you have configured Business Central to display the <span class="strong strong"><strong>Apps launcher</strong></span> button, use it to open a new browser window with the Showcase login page.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/apps-launcher-showcase-button.png" alt="apps launcher showcase button"/></div></div></li><li class="listitem">
						Log in to the Showcase application using your Business Central login credentials.
					</li><li class="listitem">
						Select an active case instance from the list to open it.
					</li><li class="listitem"><p class="simpara">
						Under <span class="strong strong"><strong>Overview</strong></span> → <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Available</strong></span>, click the 
						<span class="inlinemediaobject"><img src="images/_images/cases/dotdotdotbutton.png" alt="dotdotdotbutton"/></span>
						 button next to <span class="strong strong"><strong>New user task</strong></span> or <span class="strong strong"><strong>New process task</strong></span> to add a new task or process task.
					</p><div class="figure" id="idm140093625827248"><p class="title"><strong>Figure 54.1. Showcase dynamic actions</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/showcase-dynamic-actions.png" alt="showcase dynamic actions"/></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create a dynamic user task, start a <span class="strong strong"><strong>New user task</strong></span> and complete the required information:
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/showcase-dynamic-user-task.png" alt="showcase dynamic user task"/></div></div></li><li class="listitem"><p class="simpara">
								To create a dynamic process task, start a <span class="strong strong"><strong>New process task</strong></span> and complete the required information:
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/showcase-dynamic-process-task.png" alt="showcase dynamic process task"/></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						To view a dynamic user task in Business Central, click <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>. The user task that was added dynamically using the Showcase application appears in the <span class="strong strong"><strong>Task Inbox</strong></span> of users assigned to the task during task creation.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/task-inbox-dynamic-task.png" alt="task inbox dynamic task"/></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the dynamic task in the <span class="strong strong"><strong>Task Inbox</strong></span> to open the task. A number of action tabs are available from this page.
							</li><li class="listitem">
								Using the actions available under the task tabs, you can begin working on the task.
							</li><li class="listitem">
								In the Showcase application, click the refresh button in the upper-right corner. Case tasks and processes that are in progress appear under <span class="strong strong"><strong>Overview</strong></span> → <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>In progress</strong></span>.
							</li><li class="listitem">
								When you have completed working on the task, click the <span class="strong strong"><strong>Complete</strong></span> button under the <span class="strong strong"><strong>Work</strong></span> tab.
							</li><li class="listitem">
								In the Showcase application, click the refresh button in the upper-right corner. The completed task appears under <span class="strong strong"><strong>Overview</strong></span> → <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Completed</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						To view a dynamic process task in Business Central, click <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span>.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/dynamic-process-instance.png" alt="dynamic process instance"/></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the dynamic process instance in the list of available process instances to view information about the process instance.
							</li><li class="listitem">
								In the Showcase application, click the refresh button in the upper-right corner. Case tasks and processes that are in progress appear under <span class="strong strong"><strong>Overview</strong></span> → <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>In progress</strong></span>.
							</li></ol></div></li></ol></div></section><section class="chapter" id="case-management-starting-itorders-in-showcase-proc-case-management-showcase"><div class="titlepage"><div><div><h2 class="title">Chapter 55. Starting an IT Orders case in the Showcase application</h2></div></div></div><p>
				You can start a new case instance for the IT Orders sample case management project in the Showcase application.
			</p><p>
				The IT Orders sample case management project includes the following roles:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">owner</code>: The employee who is making the hardware order request. There can be only one of these roles.
					</li><li class="listitem">
						<code class="literal">manager</code>: The employee’s manager; the person who will approve or deny the requested hardware. There is only one manager in the IT Orders project.
					</li><li class="listitem">
						<code class="literal">supplier</code>: The available suppliers of IT hardware in the system. There is usually more than one supplier.
					</li></ul></div><p>
				These roles are configured at the case definition level:
			</p><div class="figure" id="idm140093626707440"><p class="title"><strong>Figure 55.1. ITOrders Case Roles</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/cases/case_roles-2.png" alt="Case Roles"/></div></div></div><p>
				Assign users or groups to these roles when starting a new case file instance.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have imported and deployed the IT Orders sample project in Business Central.
					</li><li class="listitem">
						You have installed and logged in to the Showcase application as instructed in <a class="xref" href="#case-management-install-and-login-to-showcase-proc-case-management-showcase" title="Chapter 52. Installing and logging in to the Showcase application">Chapter 52, <em>Installing and logging in to the Showcase application</em></a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Showcase application, start a new case instance by clicking the <span class="strong strong"><strong>Start Case</strong></span> button.
					</li><li class="listitem"><p class="simpara">
						Select the <code class="literal">Order for IT hardware</code> case name from the list and complete the role information as shown:
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/showcase-start-case.png" alt="showcase start case"/></div></div><p class="simpara">
						In this example, Aimee is the case <code class="literal">owner</code>, Katy is the <code class="literal">manager</code>, and the supplier group is <code class="literal">supplier</code>.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>Start</strong></span> to start the case instance.
					</li><li class="listitem"><p class="simpara">
						Select the case from the <span class="strong strong"><strong>Case List</strong></span>. The <span class="strong strong"><strong>Overview</strong></span> page opens.
					</p><p class="simpara">
						From the <span class="strong strong"><strong>Overview</strong></span> page, you can monitor the case progress, add comments, start new dynamic tasks and processes, and complete and close cases.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-showcase-overview.png" alt="case management showcase overview"/></div></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Cases can be started and closed using the Showcase application, but they cannot be reopened using this application. You can only reopen a case using a JMS or REST API call.
				</p></div></div></section><section class="chapter" id="case-management-showcase-completing-itorders-proc"><div class="titlepage"><div><div><h2 class="title">Chapter 56. Completing the <span class="strong strong"><strong>IT_Orders</strong></span> case using Showcase and Business Central</h2></div></div></div><p>
				When a case instance is started using the Showcase application, tasks that are configured as <code class="literal">AdHoc Autostart</code> in the case definition are automatically assigned and made available to users with the role assignment for each task. Case workers can then work on the tasks in Business Central and complete them to move the case forward.
			</p><p>
				In the <span class="strong strong"><strong>IT_Orders</strong></span> case project, the following case definition nodes are configured with the <code class="literal">AdHoc Autostart</code> property:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">Prepare hardware spec</code>
					</li><li class="listitem">
						<code class="literal">Hardware spec ready</code>
					</li><li class="listitem">
						<code class="literal">Manager decision</code>
					</li><li class="listitem">
						<code class="literal">Milestone 1: Order placed</code>
					</li></ul></div><p>
				Of these, the only user task is <code class="literal">Prepare hardware spec</code>, which is assigned to the <code class="literal">supplier</code> group. This is the first human task to be completed in the IT Orders case. When this task is complete, the <code class="literal">Manager approval</code> task becomes available to the user assigned to the <code class="literal">manager</code> role, and after the rest of the case work is finished, the <code class="literal">Customer satisfaction survey</code> task is assigned to the case owner for completion.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						As the <code class="literal">wbadmin</code> user, you have started an <span class="strong strong"><strong>IT_Orders</strong></span> case in the Showcase application.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log out of Business Central and log back in as a user that belongs to the <code class="literal">supplier</code> group.
					</li><li class="listitem">
						Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>.
					</li><li class="listitem">
						Open the <code class="literal">Prepare hardware spec</code> task and click <span class="strong strong"><strong>Claim</strong></span>. This assigns the task to the logged in user.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Start</strong></span> and click 
						<span class="inlinemediaobject"><img src="images/_images/cases/choose-file-button.png" alt="choose file"/></span>
						 to locate the hardware specification file. Click 
						<span class="inlinemediaobject"><img src="images/_images/cases/upload-button.png" alt="the upload button"/></span>
						 to upload the file.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-valid-spec.png" alt="case management valid spec"/></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Complete</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In Showcase, click <span class="strong strong"><strong>Refresh</strong></span> in the upper-right corner. Notice that the <code class="literal">Prepare hardware task</code> user task and the <code class="literal">Hardware spec ready</code> milestone appear in the <span class="strong strong"><strong>Completed</strong></span> column.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/case-management-ordered.png" alt="case management ordered"/></div></div></li><li class="listitem"><p class="simpara">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>. Open the <code class="literal">Manager approval</code> task for <span class="strong strong"><strong>wbadmin</strong></span>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Claim</strong></span> and then click <span class="strong strong"><strong>Start</strong></span>.
							</li><li class="listitem">
								Check the <code class="literal">approve</code> box for the task that includes the <code class="literal">valid-spec.pdf</code> file, then click <span class="strong strong"><strong>Complete</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> and open the <span class="strong strong"><strong>Order for IT hardware</strong></span> process instance.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <span class="strong strong"><strong>Diagram</strong></span> tab. Note that the <code class="literal">Place order</code> task is complete.
							</li><li class="listitem"><p class="simpara">
								Refresh the Showcase page to see that the <code class="literal">Manager approval</code> task and the <code class="literal">Manager decision</code> milestone are in the <span class="strong strong"><strong>Completed</strong></span> column. The <span class="strong strong"><strong>Milestones</strong></span> pane in the lower-left corner of the Showcase overview page also shows the completed and pending milestones.
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/showcase-milestones-ordered.png" alt="showcase milestones ordered"/></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						In Business Central go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Tasks</strong></span>. Click the <code class="literal">Place order</code> task to open it.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Claim</strong></span> and then click <span class="strong strong"><strong>Start</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Select the <code class="literal">Is order placed</code> check box and click <span class="strong strong"><strong>Complete</strong></span>.
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/itorders-order-placed.png" alt="itorders order placed"/></div></div><p class="simpara">
								The process instance diagram now shows the <span class="strong strong"><strong>Milestones 2: Order shipped</strong></span> case progress:
							</p></li><li class="listitem">
								Refresh the Showcase page to view the case progress.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> and open the <span class="strong strong"><strong>Order for IT hardware</strong></span>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <span class="strong strong"><strong>Process Variables</strong></span> tab. Locate the <code class="literal">caseFile_shipped</code> variable and click <span class="strong strong"><strong>Edit</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the <span class="strong strong"><strong>Edit</strong></span> window, type <code class="literal">true</code> and click <span class="strong strong"><strong>Save</strong></span>.
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/itorders-shipped-variable.png" alt="itorders shipped variable"/></div></div></li><li class="listitem"><p class="simpara">
								Refresh the Showcase page. Note that the <code class="literal">Milestone 2: Order shipped</code> milestone is shown as <span class="strong strong"><strong>Completed</strong></span>.
							</p><p class="simpara">
								The final milestone, <code class="literal">Milestone 3: Delivered to customer</code> is <span class="strong strong"><strong>In progress</strong></span>.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> and open the <span class="strong strong"><strong>Order for IT hardware</strong></span>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <span class="strong strong"><strong>Process Variables</strong></span> tab. Locate the <code class="literal">caseFile_delivered</code> variable and click <span class="strong strong"><strong>Edit</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Edit</strong></span> window, type <code class="literal">true</code> and click <span class="strong strong"><strong>Save</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Refresh the Showcase page. Note that the <code class="literal">Milestone 3: Delivered to customer</code> milestone is shown as <span class="strong strong"><strong>Completed</strong></span>. All milestones under the <span class="strong strong"><strong>Milestones</strong></span> pane in the lower-left corner are shown as complete.
							</p><p class="simpara">
								The final task of the IT Orders case, <code class="literal">Customer satisfaction survey</code> is shown under <span class="strong strong"><strong>In progress</strong></span>.
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/itorders-customer-survey.png" alt="itorders customer survey"/></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
						In Business Central go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Track</strong></span> → <span class="strong strong"><strong>Task Inbox</strong></span>. Click the <code class="literal">Customer satisfaction survey</code> task to open it.
					</p><p class="simpara">
						This task is already reserved for <span class="strong strong"><strong>wbadmin</strong></span>.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Start</strong></span> and fill out the survey.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/itorders-complete-survey.png" alt="itorders complete survey"/></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Complete</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Manage</strong></span> → <span class="strong strong"><strong>Process Instances</strong></span> and open the <span class="strong strong"><strong>Order for IT hardware</strong></span> process instance.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <span class="strong strong"><strong>Diagram</strong></span> tab. This shows that all required case process nodes are complete and there is nothing left to do for this case instance.
							</li><li class="listitem">
								Refresh the Showcase page and note that there are no actions under <span class="strong strong"><strong>In progress</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						In Showcase, type a comment in to the field under <span class="strong strong"><strong>Comments</strong></span>. Click 
						<span class="inlinemediaobject"><img src="images/_images/cases/round-plus-button.png" alt="round plus"/></span>
						 to add the comment to the case file.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/_images/cases/itorders-comment.png" alt="itorders comment"/></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Close</strong></span> in the upper-right corner of the Showcase page to complete and close the case.
					</li></ol></div></section><section class="chapter" id="additional_resources_3"><div class="titlepage"><div><div><h2 class="title">Chapter 57. Additional resources</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#assembly-designing-and-building-cases"><span class="emphasis"><em>Designing and building cases for case management</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/getting_started_with_red_hat_process_automation_manager#assembly-getting-started-case-management"><span class="emphasis"><em>Getting started with case management</em></span></a>
					</li></ul></div></section></div><div class="part" id="assembly-custom-tasks-and-work-item-handlers"><div class="titlepage"><div><div><h1 class="title">Part VI. Custom tasks and work item handlers in Business Central</h1></div></div></div><div class="partintro" id="idm140093626365728"><div/><p>
				As a business rules developer, you can create custom tasks and work item handlers in Business Central to execute custom code within your process flows and extend the operations available for use in Red Hat Process Automation Manager. You can use custom tasks to develop operations that Red Hat Process Automation Manager does not directly provide and include them in process diagrams.
			</p><p>
				In Business Central, each task in a process diagram has a <code class="literal">WorkItem</code> Java class with an associated <code class="literal">WorkItemHandler</code> Java class. The work item handler contains Java code registered with Business Central and implements <code class="literal">org.kie.api.runtime.process.WorkItemHandler</code>.
			</p><p>
				The Java code of the work item handler is executed when the task is triggered. You can customize and register a work item handler to execute your own Java code in custom tasks.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Business Central is deployed and is running on a web or application server.
					</li><li class="listitem">
						You are logged in to Business Central.
					</li><li class="listitem">
						Maven is installed.
					</li><li class="listitem">
						The host has access to the Internet. The build process uses the Internet for downloading Maven packages from external repositories.
					</li><li class="listitem">
						Your system has access to the Red Hat Maven repository either locally or online
					</li></ul></div><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#manage-service-tasks-proc_custom-tasks">58. Managing custom tasks in Business Central</a></span></li><li><span class="chapter"><a href="#custom-tasks-creating-work-item-handler-projects-proc-custom-tasks">59. Creating work item handler projects</a></span></li><li><span class="chapter"><a href="#custom-tasks-work-item-handler-project-customization-con-custom-tasks">60. Work item handler project customization</a></span></li><li><span class="chapter"><a href="#custom-tasks-work-item-definitions-con-custom-tasks">61. Work item definitions</a></span><ul><li><span class="section"><a href="#wid_annotation">61.1. @Wid Annotation</a></span></li><li><span class="section"><a href="#text_file">61.2. Text File</a></span></li></ul></li><li><span class="chapter"><a href="#custom-tasks-deploying-custom-tasks-proc-custom-tasks">62. Deploying custom tasks</a></span><ul><li><span class="section"><a href="#using_a_business_central_custom_task_repository">62.1. Using a Business Central custom task repository</a></span></li><li><span class="section"><a href="#uploading_jar_artifact_to_business_central">62.2. Uploading JAR Artifact to Business Central</a></span></li><li><span class="section"><a href="#manually_copying_work_item_definitions_to_business_central_maven_repository">62.3. Manually copying work item definitions to Business Central Maven repository</a></span></li></ul></li><li><span class="chapter"><a href="#registering-custom-tasks-proc-custom-tasks">63. Registering custom tasks</a></span><ul><li><span class="section"><a href="#registering_custom_tasks_using_the_deployment_descriptor_inside_business_central">63.1. Registering custom tasks using the deployment descriptor inside Business Central</a></span></li><li><span class="section"><a href="#registering_custom_tasks_using_the_deployment_descriptor_outside_business_central">63.2. Registering custom tasks using the deployment descriptor outside Business Central</a></span></li></ul></li><li><span class="chapter"><a href="#custom-tasks-placing-custom-tasks-proc-custom-tasks">64. Placing custom tasks</a></span></li></ul></div></div><section class="chapter" id="manage-service-tasks-proc_custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 58. Managing custom tasks in Business Central</h2></div></div></div><p>
				Custom tasks (work items) are tasks that you can customize and reuse across multiple business processes or across all projects in Business Central. Red Hat Process Automation Manager provides a set of custom tasks within the custom task repository in Business Central. You can enable or disable the default custom tasks and upload custom tasks into Business Central to implement the tasks in the relevant processes.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Red Hat Process Automation Manager includes a limited set of supported custom tasks. Custom tasks that are not included in Red Hat Process Automation Manager are not supported.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In Business Central, click 
						<span class="inlinemediaobject"><img src="images/_images/project-data/gear-icon.png" alt="gear icon"/></span>
						 in the upper-right corner and select <span class="strong strong"><strong>Custom Tasks Administration</strong></span>.
					</p><p class="simpara">
						This page lists the custom task installation settings and available custom tasks for processes in projects throughout Business Central. The custom tasks that you enable on this page become available in the project-level settings where you can then install each custom task to be used in processes. The way in which the custom tasks are installed in a project is determined by the global settings that you enable or disable under <span class="strong strong"><strong>Settings</strong></span> on this <span class="strong strong"><strong>Custom Tasks Administration</strong></span> page.
					</p></li><li class="listitem"><p class="simpara">
						Under <span class="strong strong"><strong>Settings</strong></span>, enable or disable each setting to determine how the available custom tasks are implemented when a user installs them at the project level.
					</p><p class="simpara">
						The following custom task settings are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Install as Maven artifact</strong></span>: Uploads the custom task JAR file to the Maven repository that is configured with Business Central, if the file is not already present.
							</li><li class="listitem">
								<span class="strong strong"><strong>Install custom task dependencies into project</strong></span>: Adds any custom task dependencies to the <code class="literal">pom.xml</code> file of the project where the task is installed.
							</li><li class="listitem">
								<span class="strong strong"><strong>Use version range when installing custom task into project</strong></span>: Uses a version range instead of a fixed version of a custom task that is added as a project dependency. Example: <code class="literal">[7.16,)</code> instead of <code class="literal">7.16.0.Final</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Enable or disable (set to <span class="strong strong"><strong>ON</strong></span> or <span class="strong strong"><strong>OFF</strong></span>) any available custom tasks as needed. Custom tasks that you enable are displayed in project-level settings for all projects in Business Central.
					</p><div class="figure" id="idm140093625051664"><p class="title"><strong>Figure 58.1. Enable custom tasks and custom task settings</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/manage-service-tasks.png" alt="Custom Tasks Administration page"/></div></div></div></li><li class="listitem">
						To add a custom task, click <span class="strong strong"><strong>Add Custom Task</strong></span>, browse to the relevant JAR file, and click the <span class="strong strong"><strong>Upload</strong></span> icon. The JAR file must contain work item handler implementations annotated with <code class="literal">@Wid</code>.
					</li><li class="listitem">
						Optional: To remove a custom task, click <span class="strong strong"><strong>remove</strong></span> on the row of the custom task you want to remove and click <span class="strong strong"><strong>Ok</strong></span> to confirm removal.
					</li><li class="listitem">
						After you configure all required custom tasks, navigate to a project in Business Central and go to the project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Custom Tasks</strong></span> page to view the available custom tasks that you enabled.
					</li><li class="listitem">
						For each custom task, click <span class="strong strong"><strong>Install</strong></span> to make the task available to the processes in that project or click <span class="strong strong"><strong>Uninstall</strong></span> to exclude the task from the processes in the project.
					</li><li class="listitem"><p class="simpara">
						If you are prompted for additional information when you install a custom task, enter the required information and click <span class="strong strong"><strong>Install</strong></span> again.
					</p><p class="simpara">
						The required parameters for the custom task depend on the type of task. For example, rule and decision tasks require artifact GAV information (Group ID, Artifact ID, Version), email tasks require host and port access information, and REST tasks require API credentials. Other custom tasks might not require any additional parameters.
					</p><div class="figure" id="idm140093625034032"><p class="title"><strong>Figure 58.2. Install custom tasks for use in processes</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/manage-service-tasks-project.png" alt="Project-level custom task settings"/></div></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Return to the project page, select or add a business process in the project, and in the process designer palette, select the <span class="strong strong"><strong>Custom Tasks</strong></span> option to view the available custom tasks that you enabled and installed:
					</p><div class="figure" id="idm140093625026464"><p class="title"><strong>Figure 58.3. Access installed custom tasks in process designer</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/admin-and-config/manage-service-tasks-process.png" alt="Custom tasks in process designer"/></div></div></div></li></ol></div></section><section class="chapter" id="custom-tasks-creating-work-item-handler-projects-proc-custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 59. Creating work item handler projects</h2></div></div></div><p>
				Create the software project to contain all configurations, mappings, and executable code for the custom task.
			</p><p>
				You can create a work item handler from scratch or use a Maven archetype to create an example project. Red Hat Process Automation Manager provides the <code class="literal">jbpm-workitems-archetype</code> from the Red Hat Maven repository for this purpose.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the command line and create a directory where you will build your work item handler such as <code class="literal">workitem-home</code>:
					</p><pre class="screen">$ mkdir workitem-home</pre></li><li class="listitem"><p class="simpara">
						Check the Maven <code class="literal">settings.xml</code> file and ensure that the Red Hat Maven repository is included in the repository list.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Setting up Maven is outside the scope of this guide.
						</p></div></div><p class="simpara">
						For example, to add the online Red Hat Maven repository to your Maven <code class="literal">settings.xml</code> file:
					</p><pre class="screen">&lt;settings&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;my-profile&lt;/id&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;redhat-ga&lt;/id&gt;
          &lt;url&gt;http://maven.repository.redhat.com/ga/&lt;/url&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
          &lt;/snapshots&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
        &lt;/repository&gt;
        ...
      &lt;/repositories&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
  ...
&lt;/settings&gt;</pre></li><li class="listitem"><p class="simpara">
						Find the Red Hat library version and perform one of the following tasks:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To find the library version online, see <a class="link" href="https://access.redhat.com/solutions/3405361">What is the mapping between Red Hat Process Automation Manager and the Maven library version?</a>.
							</li><li class="listitem">
								To find the library version offline, check <code class="literal">Implementation-Version</code> in <code class="literal">business-central.war/META-INF/MANIFEST.MF</code> or <code class="literal">Implementation-Version</code> in <code class="literal">kie-server.war/META-INF/MANIFEST.MF</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						In the <code class="literal">workitem-home</code> directory, execute the following command:
					</p><pre class="screen">$ mvn archetype:generate \
-DarchetypeGroupId=org.jbpm \
-DarchetypeArtifactId=jbpm-workitems-archetype \
-DarchetypeVersion=&lt;redhat-library-version&gt; \
-Dversion=1.0.0-SNAPSHOT \
-DgroupId=com.redhat \
-DartifactId=myworkitem \
-DclassPrefix=MyWorkItem</pre><div class="table" id="idm140093626271024"><p class="title"><strong>Table 59.1. Parameter descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093626266192" scope="col">Parameter</th><th align="left" valign="top" id="idm140093626265104" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-DarchetypeGroupId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										Specific to the archetype and must remain unchanged.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-DarchetypeArtifactId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										Specific to the archetype and must remain unchanged.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-DarchetypeVersion</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										Red Hat library version that is searched for when Maven attempts to download the <code class="literal">jbpm-workitems-archetype</code> artifact.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-Dversion</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										Version of your specific project. For example, <code class="literal">1.0.0-SNAPSHOT</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-DgroupId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										Maven group of your specific project. For example, <code class="literal">com.redhat</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-DartifactId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										Maven ID of your specific project. For example, <code class="literal">myworkitem</code>.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626266192">
									<p>
										<code class="literal">-DclassPrefix</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626265104">
									<p>
										String added to the beginning of Java classes when Maven generates the classes for easier identification. For example, <code class="literal">MyWorkItem</code>.
									</p>
									</td></tr></tbody></table></div></div><p class="simpara">
						A <code class="literal">myworkitem</code> folder is created in the <code class="literal">workitem-home</code> directory. For example:
					</p><pre class="screen">assembly/
  assembly.xml
src/
  main/
    java/
      com/
        redhat/
          MyWorkItemWorkItemHandler.java
    repository/
    resources/
  test/
    java/
      com/
        redhat/
          MyWorkItemWorkItemHandlerTest.java
          MyWorkItemWorkItemIntegrationTest.java
    resources/
      com/
        redhat/
pom.xml</pre></li><li class="listitem">
						Add any Maven dependencies required by the work item handler class to the <code class="literal">pom.xml</code> file.
					</li><li class="listitem"><p class="simpara">
						To create a deployable JAR for this project, in the parent project folder where the pom.xml file is located, execute the following command:
					</p><pre class="screen">$ mvn clean package</pre><p class="simpara">
						Several files are created in the <code class="literal">target/</code> directory which include the following two main files:
					</p><div class="table" id="idm140093626225040"><p class="title"><strong>Table 59.2. File descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093626220208" scope="col">Parameter</th><th align="left" valign="top" id="idm140093626219120" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093626220208">
									<p>
										<code class="literal">myworkitems-&lt;version&gt;.jar</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626219120">
									<p>
										Used for direct deployment to Red Hat Process Automation Manager.
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093626220208">
									<p>
										<code class="literal">myworkitems-&lt;version&gt;.zip</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093626219120">
									<p>
										Used for deployment using a service repository.
									</p>
									</td></tr></tbody></table></div></div></li></ol></div></section><section class="chapter" id="custom-tasks-work-item-handler-project-customization-con-custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 60. Work item handler project customization</h2></div></div></div><p>
				You can customize the code of a work item handler project. There are two Java methods required by a work item handler, <code class="literal">executeWorkItem</code> and <code class="literal">abortWorkItem</code>.
			</p><div class="table" id="idm140093626205008"><p class="title"><strong>Table 60.1. Java method descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093626200160" scope="col">Java Method</th><th align="left" valign="top" id="idm140093626199072" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093626200160">
							<p>
								<code class="literal">executeWorkItem(WorkItem workItem, WorkItemManager manager)</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093626199072">
							<p>
								Executed by default when the work item handler is run.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093626200160">
							<p>
								<code class="literal">abortWorkItem(WorkItem workItem, WorkItemManager manager)</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093626199072">
							<p>
								Executed when the work item is aborted.
							</p>
							</td></tr></tbody></table></div></div><p>
				In both methods, the <code class="literal">WorkItem</code> parameter contains any of the parameters entered into the custom task through a GUI or API call, and the <code class="literal">WorkItemManager</code> parameter is responsible for tracking the state of the custom task.
			</p><div class="formalpara"><p class="title"><strong>Example code structure</strong></p><p>
					
<pre class="programlisting language-java">public class MyWorkItemWorkItemHandler extends AbstractLogOrThrowWorkItemHandler {

  public void executeWorkItem(WorkItem workItem, WorkItemManager manager) {
    try {
      RequiredParameterValidator.validate(this.getClass(), workItem);

      // sample parameters
      String sampleParam = (String) workItem.getParameter("SampleParam");
      String sampleParamTwo = (String) workItem.getParameter("SampleParamTwo");

      // complete workitem impl...

      // return results
      String sampleResult = "sample result";
      Map&lt;String, Object&gt; results = new HashMap&lt;String, Object&gt;();
      results.put("SampleResult", sampleResult);
      manager.completeWorkItem(workItem.getId(), results);
    } catch(Throwable cause) {
      handleException(cause);
    }
	}

	@Override
	public void abortWorkItem(WorkItem workItem, WorkItemManager manager) {
    // similar
	}
}</pre>
				</p></div><div class="table" id="idm140093628082128"><p class="title"><strong>Table 60.2. Parameter descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"/><col style="width: 60%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628077296" scope="col">Parameter</th><th align="left" valign="top" id="idm140093628076208" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628077296">
							<p>
								<code class="literal">RequiredParameterValidator.validate(this.getClass(), workItem);</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093628076208">
							<p>
								Checks that all parameters marked “required” are present. If they are not, an <code class="literal">IllegalArgumentException</code> is thrown.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093628077296">
							<p>
								<code class="literal">String sampleParam = (String) workItem.getParameter("SampleParam");</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093628076208">
							<p>
								Example of getting a parameter from the <code class="literal">WorkItem</code> class. The name is always a string. For example, <code class="literal">WorkItem</code>. In the example, <code class="literal">SampleParam</code> is always a string but the object associated with it can be many things and require a cast in order to avoid errors.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093628077296">
							<p>
								<code class="literal">// complete workitem impl…</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093628076208">
							<p>
								Executes the custom Java code when a parameter is received.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093628077296">
							<p>
								<code class="literal">results.put("SampleResult", sampleResult);</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093628076208">
							<p>
								Passes results to the custom task. The results are placed in the data output areas of the custom task.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093628077296">
							<p>
								<code class="literal">manager.completeWorkItem(workItem.getId(), results);</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093628076208">
							<p>
								Marks the work item handler as complete. The <code class="literal">WorkItemManager</code> controls the state of the work item and is responsible for getting the <code class="literal">WorkItem</code> ID and associate the results with the correct custom task.
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm140093628077296">
							<p>
								<code class="literal">abortWorkItem()</code>
							</p>
							</td><td align="left" valign="top" headers="idm140093628076208">
							<p>
								Aborts the custom Java code. May be left blank if the work item is not designed to be aborted
							</p>
							</td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Red Hat Process Automation Manager includes a limited set of supported custom tasks. Custom tasks that are not included in Red Hat Process Automation Manager are not supported.
				</p></div></div></section><section class="chapter" id="custom-tasks-work-item-definitions-con-custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 61. Work item definitions</h2></div></div></div><p>
				Red Hat Process Automation Manager requires a work item definition (WID) file to identify the data fields to show in Business Central and accept API calls. The WID file is a mapping between user interactions with Red Hat Process Automation Manager and the data that is passed to the work item handler. The WID file also handles the UI details such as the name of the custom task, the category it is displayed as on the palette in Business Central, the icon used to designate the custom task, and the work item handler the custom task will map to.
			</p><p>
				In Red Hat Process Automation Manager you can create a WID file in two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use a <code class="literal">@Wid</code> annotation when coding the work item handler.
					</li><li class="listitem">
						Create a <code class="literal">.wid</code> text file. For example, <code class="literal">definitions-example.wid</code>.
					</li></ul></div><section class="section" id="wid_annotation"><div class="titlepage"><div><div><h2 class="title">61.1. @Wid Annotation</h2></div></div></div><p>
					The <code class="literal">@Wid</code> annotation is automatically created when you generate a work item handler project using the Maven archetype. You can also add the annotation manually.
				</p><div class="formalpara"><p class="title"><strong>@Wid Example</strong></p><p>
						
<pre class="screen">@Wid(widfile="MyWorkItemDefinitions.wid",
    name="MyWorkItemDefinitions",
    displayName="MyWorkItemDefinitions",
    icon="",
    defaultHandler="mvel: new com.redhat.MyWorkItemWorkItemHandler()",
    documentation = "myworkitem/index.html",
    parameters={
      @WidParameter(name="SampleParam", required = true),
      @WidParameter(name="SampleParamTwo", required = true)
    },
    results={
      @WidResult(name="SampleResult")
    },
    mavenDepends={
      @WidMavenDepends(group="com.redhat",
      artifact="myworkitem",
      version="7.26.0.Final-example-00004")
    },
    serviceInfo={
      @WidService(category = "myworkitem",
      description = "${description}",
      keywords = "",
      action = @WidAction(title = "Sample Title"),
      authinfo = @WidAuth(required = true,
      params = {"SampleParam", "SampleParamTwo"},
      paramsdescription = {"SampleParam", "SampleParamTwo"},
      referencesite = "referenceSiteURL"))
    }
)</pre>
					</p></div><div class="table" id="idm140093628031936"><p class="title"><strong>Table 61.1. @Wid descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628027104" scope="col"> </th><th align="left" valign="top" id="idm140093628026176" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">@Wid</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Top-level annotation to auto-generate WID files.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">widfile</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Name of the file that is automatically created for the custom task when it is deployed in Red Hat Process Automation Manager.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">name</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Name of the custom task, used internally. This name must be unique to custom tasks deployed in Red Hat Process Automation Manager.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">displayName</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Displayed name of the custom task. This name is displayed in the palette in Business Central.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">icon</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Path from <code class="literal">src/main/resources/</code> to an icon located in the current project. The icon is displayed in the palette in Business Central. The icon, if specified, must be a PNG or GIF file and 16x16 pixels. This value can be left blank to use a default “Service Task” icon.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">description</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Description of the custom task.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">defaultHandler</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									The work item handler Java class that is linked to the custom task. This entry is in the format <code class="literal">&lt;language&gt; : &lt;class&gt;</code>. Red Hat Process Automation Manager recommends using <code class="literal">mvel</code> as the language value for this attribute but <code class="literal">java</code> can also be used. For more information about mvel, see <a class="link" href="http://mvel.documentnode.com/">MVEL Documentation</a>.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">documentation</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Path to an HTML file in the current project that contains a description of the custom task.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">@WidParameter</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Child annotation of <code class="literal">@Wid</code>. Specifies values that will be populated in the Business Central GUI or expected by API calls as data inputs for the custom task. More than one parameter can be specified:
								</p>
								<p>
									<code class="literal">name</code> - A name for the parameter.
								</p>
								<div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Due to the possibility of this name being used in API calls over transfer methods such as REST or SOAP, this name should not contain spaces or special characters.
									</p></div></div>
								<p>
									<code class="literal">required</code> - Boolean value indicating whether the parameter is required for the custom task to execute.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">@WidResult</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Child annotation of <code class="literal">@Wid</code>. Specifies values that will be populated in the Business Central GUI or expected by API calls as data outputs for the custom task. You can specify more than one result:
								</p>
								<p>
									<code class="literal">name</code> - A name for the result.
								</p>
								<div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Due to the possibility of this name being used in API calls over transfer methods such as REST or SOAP, this name should not contain spaces or special characters.
									</p></div></div>
								<p>
									<code class="literal">@WidMavenDepends</code> - Child annotation of <code class="literal">@Wid</code>. Specifies Maven dependencies that will be required for the correct functioning of the work item handler. You can specify more than one dependency:
								</p>
								<p>
									<code class="literal">group</code> - Maven group ID of the dependency.
								</p>
								<p>
									<code class="literal">artifact</code> - Maven artifact ID of the dependency.
								</p>
								<p>
									<code class="literal">version</code> - Maven version number of the dependency.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">@WidService</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Child annotation of <code class="literal">@Wid</code>. Specifies values that will be populated in the service repository.
								</p>
								<p>
									<code class="literal">category</code> - The UI palette category that the handler will be placed. This value should match the <code class="literal">category</code> field of the <code class="literal">@Wid</code> annotation.
								</p>
								<p>
									<code class="literal">description</code> - Description of the handler that will be displayed in the service repository.
								</p>
								<p>
									<code class="literal">keywords</code> - Comma-separated list of keywords that apply to the handler. Note: Currently not used by the Business Central service repository.
								</p>
								<p>
									<code class="literal">action</code> - The <code class="literal">@WidAction</code> object. Contains the fields <code class="literal">title</code> and <code class="literal">description</code>.
								</p>
								<p>
									<code class="literal">authinfo</code> - The <code class="literal">@WidAuth</code> object. Optional. Contains the fields <code class="literal">required</code>, <code class="literal">params</code>, <code class="literal">paramsdescription</code>, <code class="literal">referencesite</code>.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">@WidAction</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Object of <code class="literal">@WidService</code> that describes the handler purpose.
								</p>
								<p>
									<code class="literal">title</code> - The title for the handler action.
								</p>
								<p>
									<code class="literal">description</code> - The description for the handler action.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093628027104">
								<p>
									<code class="literal">@WidAuth</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093628026176">
								<p>
									Object of <code class="literal">@WidService</code> that defines the authentication required by the handler.
								</p>
								<p>
									<code class="literal">required</code> - The boolean value that determines whether authentication is required.
								</p>
								<p>
									<code class="literal">params</code> - The array containing the authentication parameters required.
								</p>
								<p>
									<code class="literal">paramsdescription</code> - The array containing the descriptions for each authentication parameter.
								</p>
								<p>
									<code class="literal">referencesite</code> - The URL to where the handler documentation can be found. Note: Currently not used by the Business Central service repository.
								</p>
								</td></tr></tbody></table></div></div></section><section class="section" id="text_file"><div class="titlepage"><div><div><h2 class="title">61.2. Text File</h2></div></div></div><p>
					A global <code class="literal">WorkDefinitions</code> WID text file is automatically generated by new projects when a business process is added. The WID text file is similar to the JSON format but is not a completely valid JSON file. You can open this file in Business Central. You can create additional WID files by selecting <span class="strong strong"><strong>Add Asset</strong></span> &gt; <span class="strong strong"><strong>Work item definitions</strong></span> from an existing project.
				</p><div class="formalpara"><p class="title"><strong>Text file example</strong></p><p>
						
<pre class="programlisting language-json">[
  [
    "name" : "MyWorkItemDefinitions",
    "displayName" : "MyWorkItemDefinitions",
    "category" : "",
    "description" : "",
    "defaultHandler" : "mvel: new com.redhat.MyWorkItemWorkItemHandler()",
    "documentation" : "myworkitem/index.html",
    "parameters" : [
      "SampleParam" : new StringDataType(),
      "SampleParamTwo" : new StringDataType()
    ],
    "results" : [
      "SampleResult" : new StringDataType()
    ],
    "mavenDependencies" : [
      "com.redhat:myworkitem:7.26.0.Final-example-00004"
    ],
    "icon" : ""
  ]
]</pre>
					</p></div><p>
					The file is structured as a plain-text file using a JSON-like structure. The filename extension is <code class="literal">.wid</code>.
				</p><div class="table" id="idm140093627935424"><p class="title"><strong>Table 61.2. Text file descriptions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 70%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093627930704" scope="col"> </th><th align="left" valign="top" id="idm140093627929776" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">name</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Name of the custom task, used internally. This name must be unique to custom tasks deployed in Red Hat Process Automation Manager.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">displayName</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Displayed name of the custom task. This name is displayed in the palette in Business Central.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">icon</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Path from <code class="literal">src/main/resources/</code> to an icon located in the current project. The icon is displayed in the palette in Business Central. The icon, if specified, must be a PNG or GIF file and 16x16 pixels. This value can be left blank to use a default “Service Task” icon.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">category</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Name of a category within the Business Central palette under which this custom task is displayed.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">description</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Description of the custom task.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">defaultHandler</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									The work item handler Java class that is linked to the custom task. This entry is in the format <code class="literal">&lt;language&gt; : &lt;class&gt;</code>. Red Hat Process Automation Manager recommends using <code class="literal">mvel</code> as the language value for this attribute but <code class="literal">java</code> can also be used. For more information about mvel, see <a class="link" href="http://mvel.documentnode.com/">MVEL Documentation</a>.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">documentation</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Path to an HTML file in the current project that contains a description of the custom task.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">parameters</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Specifies the values to be populated in the Business Central GUI or expected by API calls as data inputs for the custom task. Parameters use the <code class="literal">&lt;key&gt; : &lt;DataType&gt;</code> format. Accepted data types are <code class="literal">StringDataType()</code>, <code class="literal">IntegerDataType()</code>, and <code class="literal">ObjectDataType()</code>. More than one parameter can be specified.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">results</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Specifies the values to be populated in the Business Central GUI or expected by API calls as data outputs for the custom task. Results use the <code class="literal">&lt;key&gt; : &lt;DataType&gt;</code> format. Accepted data types are <code class="literal">StringDataType()</code>, <code class="literal">IntegerDataType()</code>, and <code class="literal">ObjectDataType()</code>. More than one result can be specified.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093627930704">
								<p>
									<code class="literal">mavenDependencies</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093627929776">
								<p>
									Optional: Specifies Maven dependencies required for the correct functioning of the work item handler. Dependencies can also be specified in the work item handler <code class="literal">pom.xml</code> file. Dependencies are in the format <code class="literal">&lt;group&gt;:&lt;artifact&gt;:&lt;version&gt;</code>. More than one dependency may be specified
								</p>
								</td></tr></tbody></table></div></div><p>
					Red Hat Process Automation Manager tries to locate a <code class="literal">*.wid</code> file in two locations by default:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Within Business Central in the project’s top-level <code class="literal">global/</code> directory. This is the location of the default <code class="literal">WorkDefinitions.wid</code> file that is created automatically when a project first adds a business process asset.
						</li><li class="listitem">
							Within Business Central in the project’s <code class="literal">src/main/resources/</code> directory. This is where WID files created within a project in Business Central will be placed. A WID file may be created at any level of a Java package, so a WID file created at a package location of <code class="literal">&lt;default&gt;</code> will be created directly inside <code class="literal">src/main/resources/</code> while a WID file created at a package location of <code class="literal">com.redhat</code> will be created at <code class="literal">src/main/resources/com/redhat/</code>
						</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Red Hat Process Automation Manager does not validate that the value for the <code class="literal">defaultHandler</code> tag is executable or is a valid Java class. Specifying incorrect or invalid classes for this tag will return errors.
					</p></div></div></section></section><section class="chapter" id="custom-tasks-deploying-custom-tasks-proc-custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 62. Deploying custom tasks</h2></div></div></div><p>
				Work item handlers, as custom code, are created outside of Red Hat Process Automation Manager. To use the code in your custom task, the code must be deployed to the server. Work item handler projects must be Java JAR files that can be placed into a Maven repository.
			</p><p>
				In Red Hat Process Automation Manager you can deploy custom tasks using three methods:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Within a Business Central custom task repository. For more information, see <a class="xref" href="#manage-service-tasks-proc_custom-tasks" title="Chapter 58. Managing custom tasks in Business Central">Chapter 58, <em>Managing custom tasks in Business Central</em></a>.
					</li><li class="listitem">
						Within Business Central where you can use both the legacy and current editors to upload the work item handler JAR to the Business Central Maven repository as an artifact.
					</li><li class="listitem">
						Outside of Business Central, you can manually copy the JAR files into the Maven repository.
					</li></ul></div><section class="section" id="using_a_business_central_custom_task_repository"><div class="titlepage"><div><div><h2 class="title">62.1. Using a Business Central custom task repository</h2></div></div></div><p>
					You can enable, disable, and deploy custom tasks within a Business Central custom task repository. For more information, see <a class="xref" href="#manage-service-tasks-proc_custom-tasks" title="Chapter 58. Managing custom tasks in Business Central">Chapter 58, <em>Managing custom tasks in Business Central</em></a>.
				</p></section><section class="section" id="uploading_jar_artifact_to_business_central"><div class="titlepage"><div><div><h2 class="title">62.2. Uploading JAR Artifact to Business Central</h2></div></div></div><p>
					You can upload the work item handler JAR to the Business Central Maven repository as an artifact by using the legacy and current editors.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, select the <span class="strong strong"><strong>Admin</strong></span> icon in the top-right corner of the screen and select <span class="strong strong"><strong>Artifacts</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Upload</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Artifact Upload</strong></span> window, click the <span class="strong strong"><strong>Choose File</strong></span> icon.
						</li><li class="listitem">
							Navigate to the location of the work item handler JAR, select the file and click <span class="strong strong"><strong>Open</strong></span>.
						</li><li class="listitem"><p class="simpara">
							In the pop-up dialog, click the <span class="strong strong"><strong>Upload</strong></span> icon.
						</p><p class="simpara">
							The artifact is uploaded and can now be viewed on the <span class="strong strong"><strong>Artifacts</strong></span> page and referenced.
						</p></li></ol></div></section><section class="section" id="manually_copying_work_item_definitions_to_business_central_maven_repository"><div class="titlepage"><div><div><h2 class="title">62.3. Manually copying work item definitions to Business Central Maven repository</h2></div></div></div><p>
					Business Central automatically creates or reuses the Maven repository folder. By default the location is based on the location of the user launched Red Hat JBoss EAP. For example, the full default path would be <code class="literal">&lt;startup location&gt;/repositories/kie/global</code>. It is possible to replicate a standard Maven repository folder layout of <code class="literal">&lt;groupId&gt;/&lt;artifactId&gt;/&lt;versionId&gt;/</code> in this folder and copy work item handler JAR files to this location. For example:
				</p><pre class="screen">&lt;startup location&gt;/repositories/kie/global/com/redhat/myworkitem/1.0.0-SNAPSHOT/myworkitems-1.0.0-SNAPSHOT.jar</pre><p>
					Any artifacts copied in this fashion are available to Red Hat Process Automation Manager without a server restart. Viewing the artifact in the Business Central <span class="strong strong"><strong>Artifacts</strong></span> page requires clicking <span class="strong strong"><strong>Refresh</strong></span>.
				</p></section></section><section class="chapter" id="registering-custom-tasks-proc-custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 63. Registering custom tasks</h2></div></div></div><p>
				Red Hat Process Automation Manager must know how to associate a custom task work item with the code executed by the work item handler. The work item definition file links the custom task with the work item handler by name and Java class. The work item handler’s Java class has to be registered as usable in Red Hat Process Automation Manager.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Service repositories contain domain-specific services that provide integration of your processes with different types of systems. Registering a custom task is not necessary when using a service repository because the import process registers the custom task.
				</p></div></div><p>
				Red Hat Process Automation Manager creates a WID file by default for projects that contain at least one business process. You can create a WID file when registering a work item handler or edit the default WID file. For more information about WID file locations or formatting, see <a class="xref" href="#custom-tasks-work-item-definitions-con-custom-tasks" title="Chapter 61. Work item definitions">Chapter 61, <em>Work item definitions</em></a>.
			</p><p>
				For non-service repository deployments, work item handlers can be registered in two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Registering using the deployment descriptor.
					</li><li class="listitem">
						Registering using the spring component registration.
					</li></ul></div><section class="section" id="registering_custom_tasks_using_the_deployment_descriptor_inside_business_central"><div class="titlepage"><div><div><h2 class="title">63.1. Registering custom tasks using the deployment descriptor inside Business Central</h2></div></div></div><p>
					You can register a custom task work item with the work item handler using the deployment descriptor in Business Central.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span> and select the project name.
						</li><li class="listitem">
							In the project pane, select <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Deployments</strong></span> → <span class="strong strong"><strong>Work Item Handlers</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Add Work Item Handler</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Name</strong></span> field, enter the display name for the custom task.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>Resolver</strong></span> list, select <span class="strong strong"><strong>MVEL</strong></span>, <span class="strong strong"><strong>Reflection</strong></span> or <span class="strong strong"><strong>Spring</strong></span>.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Value</strong></span> field, enter the value based on the resolver type:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For MVEL, use the format <code class="literal">new &lt;full Java package&gt;.&lt;Java work item handler class name&gt;()</code>
								</p><p class="simpara">
									Example: <code class="literal">new com.redhat.MyWorkItemWorkItemHandler()</code>
								</p></li><li class="listitem"><p class="simpara">
									For Reflection, use the format <code class="literal">&lt;full Java package&gt;.&lt;Java work item handler class name&gt;</code>
								</p><p class="simpara">
									Example: <code class="literal">com.redhat.MyWorkItemWorkItemHandler</code>
								</p></li><li class="listitem"><p class="simpara">
									For Spring, use the format <code class="literal">&lt;Spring bean identifier&gt;</code>
								</p><p class="simpara">
									Example: <code class="literal">workItemSpringBean</code>
								</p></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The value fields may be filled automatically.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Save</strong></span> to save your changes
						</li></ol></div></section><section class="section" id="registering_custom_tasks_using_the_deployment_descriptor_outside_business_central"><div class="titlepage"><div><div><h2 class="title">63.2. Registering custom tasks using the deployment descriptor outside Business Central</h2></div></div></div><p>
					You can register a custom task work item with the work item handler using the deployment descriptor outside Business Central.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the file <code class="literal">src/main/resources/META-INF/kie-deployment-descriptor.xml</code>.
						</li><li class="listitem"><p class="simpara">
							Add the following content based on the resolver type under <code class="literal">&lt;work-item-handlers&gt;</code>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For MVEL, add the following:
								</p><pre class="screen">&lt;work-item-handler&gt;
  &lt;resolver&gt;mvel&lt;/resolver&gt;
  &lt;identifier&gt;new com.redhat.MyWorkItemWorkItemHandler()&lt;/identifier&gt;
  &lt;parameters/&gt;
  &lt;name&gt;MyWorkItem&lt;/name&gt;
&lt;/work-item-handler&gt;</pre></li><li class="listitem"><p class="simpara">
									For Reflections, add the following:
								</p><pre class="screen">&lt;work-item-handler&gt;
  &lt;resolver&gt;reflection&lt;/resolver&gt;
  &lt;identifier&gt;com.redhat.MyWorkItemWorkItemHandler&lt;/identifier&gt;
  &lt;parameters/&gt;
  &lt;name&gt;MyWorkItem&lt;/name&gt;
&lt;/work-item-handler&gt;</pre></li><li class="listitem"><p class="simpara">
									For Spring, add the following and ensure the identifier is the identifier of a Spring bean:
								</p><pre class="screen">&lt;work-item-handler&gt;
  &lt;resolver&gt;spring&lt;/resolver&gt;
  &lt;identifier&gt;beanIdentifier&lt;/identifier&gt;
  &lt;parameters/&gt;
  &lt;name&gt;MyWorkItem&lt;/name&gt;
&lt;/work-item-handler&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you are using Spring to discover and configure Spring beans, it is possible to use an annotation of the <code class="literal">org.springframework.stereotype.Component</code> class to automatically register work item handlers.
									</p><p>
										Within a work item handler, add the annotation <code class="literal">@Component("&lt;Name&gt;")</code> before the declaration of the work item handler class. For example: <code class="literal">@Component("MyWorkItem") public class MyWorkItemWorkItemHandler extends AbstractLogOrThrowWorkItemHandler {</code>
									</p></div></div></li></ul></div></li></ol></div></section></section><section class="chapter" id="custom-tasks-placing-custom-tasks-proc-custom-tasks"><div class="titlepage"><div><div><h2 class="title">Chapter 64. Placing custom tasks</h2></div></div></div><p>
				When a custom task is registered in Red Hat Process Automation Manager it appears in the process designer palette. The custom task is named and categorized according to the entries in its corresponding WID file.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A custom task is registered in Red Hat Process Automation Manager. For information about registering custom tasks, see <a class="xref" href="#registering-custom-tasks-proc-custom-tasks" title="Chapter 63. Registering custom tasks">Chapter 63, <em>Registering custom tasks</em></a>.
					</li><li class="listitem">
						The custom task is named and categorized according to the corresponding WID file. For more information about WID file locations or formatting, see <a class="xref" href="#custom-tasks-work-item-definitions-con-custom-tasks" title="Chapter 61. Work item definitions">Chapter 61, <em>Work item definitions</em></a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Business Central, go to <span class="strong strong"><strong>Menu</strong></span> → <span class="strong strong"><strong>Design</strong></span> → <span class="strong strong"><strong>Projects</strong></span> and click a project.
					</li><li class="listitem">
						Select the business process that you want to add a custom task to.
					</li><li class="listitem">
						Select the custom task from the palette and drag it to the BPMN2 diagram.
					</li><li class="listitem">
						Optional: Change the custom task attributes. For example, change the data output and input from the corresponding WID file.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the WID file is not visible in your project and no <code class="literal">Work Item Definition</code> object is visible in the <span class="strong strong"><strong>Others</strong></span> category of your project, you must register the custom task. For more information about registering a custom task, see <a class="xref" href="#registering-custom-tasks-proc-custom-tasks" title="Chapter 63. Registering custom tasks">Chapter 63, <em>Registering custom tasks</em></a>.
				</p></div></div></section></div><div class="part" id="assembly-process-engine"><div class="titlepage"><div><div><h1 class="title">Part VII. Process engine in Red Hat Process Automation Manager</h1></div></div></div><div class="partintro" id="idm140093627733792"><div/><p>
				As a business process analyst or developer, your understanding of the process engine in Red Hat Process Automation Manager can help you design more effective business assets and a more scalable process management architecture. The process engine implements the Business Process Management (BPM) paradigm in Red Hat Process Automation Manager and manages and executes business assets that comprise processes. This document describes concepts and functions of the process engine to consider as you create your business process management system and process services in Red Hat Process Automation Manager.
			</p><div class="toc"><p><strong>Table of Contents</strong></p><ul class="toc"><li><span class="chapter"><a href="#processengine-overview-con">65. Process engine in Red Hat Process Automation Manager</a></span></li><li><span class="chapter"><a href="#processengine-core-con_process-engine">66. Core engine API for the process engine</a></span><ul><li><span class="section"><a href="#kie-base-session-con_process-engine">66.1. KIE base and KIE session</a></span><ul><li><span class="section"><a href="#kiebase-con-process-engine">66.1.1. KIE base</a></span></li><li><span class="section"><a href="#kiesession-con-process-engine">66.1.2. KIE session</a></span></li><li><span class="section"><a href="#processruntime-con-process-engine">66.1.3. ProcessRuntime interface</a></span></li><li><span class="section"><a href="#correlation-keys-con_process-engine">66.1.4. Correlation Keys</a></span></li></ul></li><li><span class="section"><a href="#runtime-manager-con_process-engine">66.2. Runtime manager</a></span><ul><li><span class="section"><a href="#runtime-manager-strategies-con_process-engine">66.2.1. Runtime manager strategies</a></span></li><li><span class="section"><a href="#runtime-manager-usage-con_process-engine">66.2.2. Typical usage scenario for the runtime manager</a></span></li><li><span class="section"><a href="#runtime-environment-con_process-engine">66.2.3. Runtime environment configuration object</a></span></li><li><span class="section"><a href="#runtime-environment-builder-con_process-engine">66.2.4. Runtime environment builder</a></span></li><li><span class="section"><a href="#registering-handlers-con_process-engine">66.2.5. Registration of handlers and listeners for runtime engines</a></span></li></ul></li><li><span class="section"><a href="#services-con_process-engine">66.3. Services in the process engine</a></span><ul><li><span class="section"><a href="#services-modules-ref_process-engine">66.3.1. Modules for process engine services</a></span></li><li><span class="section"><a href="#service-deployment-con_process-engine">66.3.2. Deployment service</a></span></li><li><span class="section"><a href="#service-definition-con_process-engine">66.3.3. Definition service</a></span></li><li><span class="section"><a href="#service-process-con_process-engine">66.3.4. Process service</a></span></li><li><span class="section"><a href="#service-quartz-con_process-engine">66.3.5. Quartz-based timer service</a></span></li><li><span class="section"><a href="#service-query-con_process-engine">66.3.6. Query service</a></span></li><li><span class="section"><a href="#service-advanceruntimedata-con_process-engine">66.3.7. Advanced query service</a></span></li><li><span class="section"><a href="#service-migration-con_process-engine">66.3.8. Process instance migration service</a></span></li><li><span class="section"><a href="#deployment-versions-con_process-engine">66.3.9. Deployments and different process versions</a></span></li><li><span class="section"><a href="#deployment-synchronization-con_process-engine">66.3.10. Deployment synchronization</a></span></li></ul></li><li><span class="section"><a href="#threads-process-con_process-engine">66.4. Threads in the process engine</a></span></li><li><span class="section"><a href="#event-listeners-con_process-engine">66.5. Event Listeners in the process engine</a></span><ul><li><span class="section"><a href="#runtime-logger-listener-con_process-engine">66.5.1. <code class="literal">KieRuntimeLogger</code> event listener</a></span></li></ul></li><li><span class="section"><a href="#process-engine-configuration-ref_process-engine">66.6. Process engine configuration</a></span></li></ul></li><li><span class="chapter"><a href="#persistence-con_process-engine">67. Persistence and transactions in the process engine</a></span><ul><li><span class="section"><a href="#persistence-processstate-con_process-engine">67.1. Persistence of process runtime states</a></span><ul><li><span class="section"><a href="#safepoints-con_process-engine">67.1.1. Safe points for persistence</a></span></li></ul></li><li><span class="section"><a href="#auditlog-con_process-engine">67.2. The persistent audit log</a></span><ul><li><span class="section"><a href="#auditlog-datamodel-ref_process-engine">67.2.1. The process engine audit log data model</a></span></li><li><span class="section"><a href="#log-to-database-con_process-engine">67.2.2. Configuration for storing the process events log in a database</a></span></li><li><span class="section"><a href="#log-to-jms-con_process-engine">67.2.3. Configuration for sending the process events log to a JMS queue</a></span></li><li><span class="section"><a href="#variables-auditing-con_process-engine">67.2.4. Auditing of variables</a></span></li></ul></li><li><span class="section"><a href="#transactions-con_process-engine">67.3. Transactions in the process engine</a></span><ul><li><span class="section"><a href="#transaction-register-con_process-engine">67.3.1. Registration of a transaction manager</a></span></li><li><span class="section"><a href="#transaction-cmt-proc_process-engine">67.3.2. Configuring container-managed transactions</a></span></li></ul></li><li><span class="section"><a href="#persistence-configuration-con_process-engine">67.4. Configuration of persistence in the process engine</a></span><ul><li><span class="section"><a href="#persistence-configuration-file-con_process-engine">67.4.1. Configuration in the <code class="literal">persistence.xml</code> file</a></span></li><li><span class="section"><a href="#persistence-datasources-con_process-engine">67.4.2. Configuration of data sources for process engine persistence</a></span></li><li><span class="section"><a href="#persistence-dependencies-ref_process-engine">67.4.3. Dependencies for persistence</a></span></li><li><span class="section"><a href="#persistence-kiesession-proc_process-engine">67.4.4. Creating a KIE session with persistence</a></span></li><li><span class="section"><a href="#persistence-runtimemanager-con_process-engine">67.4.5. Persistence in the runtime manager</a></span></li></ul></li><li><span class="section"><a href="#process-variables-persist-proc_process-engine">67.5. Persisting process variables in a separate database schema in Red Hat Process Automation Manager</a></span></li></ul></li><li><span class="chapter"><a href="#integration-java-con_process-engine">68. Integration with Java frameworks</a></span><ul><li><span class="section"><a href="#integration-maven-con_process-engine">68.1. Integration with Apache Maven</a></span><ul><li><span class="section"><a href="#integration-maven-kjar-con_process-engine">68.1.1. Maven artifacts as deployment units</a></span></li><li><span class="section"><a href="#integration-maven-dependency-con_process-engine">68.1.2. Dependency management with Maven</a></span></li></ul></li><li><span class="section"><a href="#integration-cdi-con_process-engine">68.2. Integration with CDI</a></span><ul><li><span class="section"><a href="#cdi-deployment-service-con_process-engine">68.2.1. Deployment service for CDI</a></span></li><li><span class="section"><a href="#cdi-form-provider-service-con_process-engine">68.2.2. Form provider service for CDI</a></span></li><li><span class="section"><a href="#cdi-runtime-data-service-con_process-engine">68.2.3. Runtime data service for CDI</a></span></li><li><span class="section"><a href="#cdi-definition-service-con_process-engine">68.2.4. Definition service for CDI</a></span></li><li><span class="section"><a href="#cdi-integration-configuration-con_process-engine">68.2.5. CDI integration configuration</a></span></li></ul></li><li><span class="section"><a href="#integration-spring-con_process-engine">68.3. Integration with Spring</a></span><ul><li><span class="section"><a href="#spring-runtime-manager-con_process-engine">68.3.1. Direct use of the runtime manager API in Spring</a></span></li><li><span class="section"><a href="#spring-process-services-con_process-engine">68.3.2. Process engine services with Spring</a></span></li></ul></li><li><span class="section"><a href="#integration-ejb-con_process-engine">68.4. Integration with EJB</a></span><ul><li><span class="section"><a href="#ejb-implementations-ref_process-engine">68.4.1. Implementations for EJB services</a></span></li><li><span class="section"><a href="#ejb-interfaces-local-ref_process-engine">68.4.2. Local EJB interfaces</a></span></li><li><span class="section"><a href="#ejb-interfaces-remote-ref_process-engine">68.4.3. Remote EJB interfaces</a></span></li><li><span class="section"><a href="#ejb-remote-client-con_process-engine">68.4.4. Remote EJB client</a></span></li></ul></li><li><span class="section"><a href="#integration-osgi-con_process-engine">68.5. Integration with OSGi</a></span></li></ul></li></ul></div></div><section class="chapter" id="processengine-overview-con"><div class="titlepage"><div><div><h2 class="title">Chapter 65. Process engine in Red Hat Process Automation Manager</h2></div></div></div><p>
				The process engine implements the Business Process Management (BPM) paradigm in Red Hat Process Automation Manager. BPM is a business methodology that enables modeling, measuring, and optimizing processes within an enterprise.
			</p><p>
				In BPM, a repeatable business process is represented as a workflow diagram. The Business Process Model and Notation (BPMN) specification defines the available elements of this diagram. The process engine implements a large subset of the BPMN 2.0 specification.
			</p><p>
				With the process engine, business analysts can develop the diagram itself. Developers can implement the business logic of every element of the flow in code, making an executable business process. Users can execute the business process and interact with it as necessary. Analysts can generate metrics that reflect the efficiency of the process.
			</p><p>
				The workflow diagram consists of a number of nodes. The BPMN specification defines many kinds of nodes, including the following principal types:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="emphasis"><em>Event</em></span>: Nodes representing something happening in the process or outside of the process. Typical events are the start and the end of a process. An event can throw messages to other processes and catch such messages. Circles on the diagram represent events.
					</li><li class="listitem">
						<span class="emphasis"><em>Activity</em></span>: Nodes representing an action that must be taken (whether automatically or with user involvement). Typical events are a task, which represents an action taken within the process, and a call to a subprocess. Rounded rectangles on the diagram represent activities.
					</li><li class="listitem">
						<span class="emphasis"><em>Gateway</em></span>: A branching or merging node. A typical gateway evaluates an expression and, depending on the result, continues to one of several execution paths. Diamond shapes on the diagram represent gateways.
					</li></ul></div><p>
				When a user starts the process, a process instance is created. The process instance contains a set of data, or <span class="emphasis"><em>context</em></span>, stored in process variables. The <span class="emphasis"><em>state</em></span> of a process instance includes all the context data and also the current active node (or, in some cases, several active nodes).
			</p><p>
				Some of these variables can be initialized when a user starts the process. An activity can read from process variables and write to process variables. A gateway can evaluate process variables to determine the execution path.
			</p><p>
				For example, a purchase process in a shop can be a business process. The content of the user’s cart can be the initial process context. At the end of execution, the process context can contain the payment confirmation and shipment tracking details.
			</p><p>
				Optionally, you can use the BPMN data modeler in Business Central to design the model for the data in process variables.
			</p><p>
				The workflow diagram is represented in code by an XML <span class="emphasis"><em>business process definition</em></span>. The logic of events, gateways, and subprocess calls are defined within the business process definition.
			</p><p>
				Some task types (for example, script tasks and the standard decision engine rule task) are implemented in the engine. For other task types, including all custom tasks, when the task must be executed the process engine executes a call using the <span class="emphasis"><em>Work Item Handler API</em></span>. Code external to the engine can implement this API, providing a flexible mechanism for implementing various tasks.
			</p><p>
				The process engine includes a number of predefined types of tasks. These types include a script task that runs user Java code, a service task that calls a Java method or a Web Service, a decision task that calls a decision engine service, and other custom tasks (for example, REST and database calls).
			</p><p>
				Another predefined type of task is a <span class="emphasis"><em>user task</em></span>, which includes interaction with a user. User tasks in the process can be assigned to users and groups.
			</p><p>
				The process engine uses the <span class="emphasis"><em>KIE API</em></span> to interact with other software components. You can run business processes as services on a KIE Server and interact with them using a REST implementation of the KIE API. Alternatively, you can embed business processes in your application and interact with them using KIE API Java calls. In this case, you can run the process engine in any Java environment.
			</p><p>
				Business Central includes a user interface for users executing human tasks and a form modeler for creating the web forms for human tasks. However, you can also implement a custom user interface that interacts with the process engine using the KIE API.
			</p><p>
				The process engine supports the following additional features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Support for persistence of the process information using the JPA standard. Persistence preserves the state and context (data in process variables) of every process instance, so that they are not lost in case any components are restarted or taken offline for some time. You can use an SQL database engine to store the persistence information.
					</li><li class="listitem">
						Pluggable support for transactional execution of process elements using the JTA standard. If you use a JTA transaction manager, every element of the business process starts as a transaction. If the element does not complete, the context of the process instance is restored to the state in which it was before the element started.
					</li><li class="listitem">
						Support for custom extension code, including new node types and other process languages.
					</li><li class="listitem">
						Support for custom listener classes that are notified about various events.
					</li><li class="listitem">
						Support for migrating running process instances to a new version of their process definition
					</li></ul></div><p>
				The process engine can also be integrated with other independent core services:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <span class="emphasis"><em>human task service</em></span> can manage user tasks when human actors need to participate in the process. It is fully pluggable and the default implementation is based on the WS-HumanTask specification. The human task service manages the lifecycle of the tasks, task lists, task forms, and some more advanced features like escalation, delegation, and rule-based assignments.
					</li><li class="listitem">
						The <span class="emphasis"><em>history log</em></span> can store all information about the execution of all the processes in the process engine. While runtime persistence stores the current state of all active process instances, you need the history log to ensure access to historic information. The history log contains all current and historic states of all active and completed process instances. You can use the log to query for any information related to the execution of process instances for monitoring and analysis.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/developing_process_services_in_red_hat_process_automation_manager#bpmn-con_business-processes"><span class="emphasis"><em>Designing business processes using BPMN models</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/deploying_and_managing_red_hat_process_automation_manager_services#kie-server-commands-con_kie-apis"><span class="emphasis"><em>Interacting with Red Hat Process Automation Manager using KIE APIs</em></span></a>
					</li><li class="listitem">
						<a class="link" href="https://docs.jboss.org/drools/release/7.48.0.Final/kie-api-javadoc/index.html">Java documentation</a> for the public KIE API
					</li></ul></div></section><section class="chapter" id="processengine-core-con_process-engine"><div class="titlepage"><div><div><h2 class="title">Chapter 66. Core engine API for the process engine</h2></div></div></div><p>
				The process engine executes business processes. To define the processes, you create <span class="emphasis"><em>business assets</em></span>, including process definitions and custom tasks.
			</p><p>
				You can use the Core Engine API to load, execute, and manage processes in the process engine.
			</p><p>
				Several levels of control are available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						At the lowest level, you can directly create a <span class="emphasis"><em>KIE base</em></span> and a <span class="emphasis"><em>KIE session</em></span>. A KIE base represents all the assets in a business process. A KIE session is an entity in the process engine that runs instances of a business process. This level provides fine-grained control, but requires explicit declaration and configuration of process instances, task handlers, event handlers, and other process engine entities in your code.
					</li><li class="listitem">
						You can use the <span class="emphasis"><em>RuntimeManager</em></span> class to manage sessions and processes. This class provides sessions for required process instances using a configurable strategy. It automatically configures the interaction between the KIE session and task services. It disposes of process engine entities that are no longer necessary, ensuring optimal use of resources. You can use a fluent API to instantiate <code class="literal">RuntimeManager</code> with the necessary business assets and to configure its environment.
					</li><li class="listitem"><p class="simpara">
						You can use the <span class="emphasis"><em>Services API</em></span> to manage the execution of processes. For example, the deployment service deploys business assets into the engine, forming a <span class="emphasis"><em>deployment unit</em></span>. The process service runs a process from this deployment unit.
					</p><p class="simpara">
						If you want to embed the process engine in your application, the Services API is the most convenient option, because it hides the internal details of configuring and managing the engine.
					</p></li><li class="listitem"><p class="simpara">
						Finally, you can deploy a <span class="emphasis"><em>KIE Server</em></span> that loads business assets from KJAR files and runs processes. The KIE Server provides a REST API for loading and managing the processes. You can also use Business Central to manage a KIE Server.
					</p><p class="simpara">
						If you use a KIE Server, you do not need to use the Core Engine API. For information about deploying and managing processes on a KIE Server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/deploying_and_managing_red_hat_process_automation_manager_services#assembly-packaging-deploying"><span class="emphasis"><em>Packaging and deploying a Red Hat Process Automation Manager project</em></span></a>.
					</p></li></ul></div><p>
				For the full reference information for all public process engine API calls, see the <a class="link" href="https://docs.jboss.org/drools/release/7.48.0.Final/kie-api-javadoc/index.html">Java documentation</a>. Other API classes also exist in the code, but they are internal APIs that can be changed in later versions. Use public APIs in applications that you develop and maintain.
			</p><section class="section" id="kie-base-session-con_process-engine"><div class="titlepage"><div><div><h2 class="title">66.1. KIE base and KIE session</h2></div></div></div><p>
					A <span class="emphasis"><em>KIE base</em></span> contains a reference to all process definitions and other assets relevant for a process. The engine uses this KIE base to look up all information for the process, or for several processes, whenever necessary.
				</p><p>
					You can load assets into a KIE base from various sources, such as a class path, file system, or process repository. Creating a KIE base is a resource-heavy operation, as it involves loading and parsing assets from various sources. You can dynamically modify the KIE base to add or remove process definitions and other assets at run time.
				</p><p>
					After you create a KIE base, you can instantiate a <span class="emphasis"><em>KIE session</em></span> based on this KIE base. Use this KIE session to run processes based on the definitions in the KIE base.
				</p><p>
					When you use the KIE session to start a process, a new <span class="emphasis"><em>process instance</em></span> is created. This instance maintains a specific process state. Different instances in the same KIE session can use the same process definition but have different states.
				</p><div class="figure" id="idm140093627671712"><p class="title"><strong>Figure 66.1. KIE base and KIE session in the process engine</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/CoreEngine/KnowledgeBaseAndSession.png" alt="KnowledgeBaseAndSession"/></div></div></div><p>
					For example, if you develop an application to process sales orders, you can create one or more process definitions that determine how an order should be processed. When starting the application, you first need to create a KIE base that contains those process definitions. You can then create a session based on this KIE base. When a new sales order comes in, start a new process instance for the order. This process instance contains the state of the process for the specific sales request.
				</p><p>
					You can create many KIE sessions for the same KIE base and you can create many instances of the process within the same KIE session. Creating a KIE session, and also creating a process instance within the KIE session, uses far fewer resources than creating a KIE base. If you modify a KIE base, all the KIE sessions that use it can use the modifications automatically.
				</p><p>
					In most simple use cases, you can use a single KIE session to execute all processes. You can also use several sessions if needed. For example, if you want order processing for different customers to be completely independent, you can create a KIE session for each customer. You can also use multiple sessions for scalability reasons.
				</p><p>
					In typical applications you do not need to create a KIE base or KIE session directly. However, when you use other levels of the process engine API, you can interact with elements of the API that this level defines.
				</p><section class="section" id="kiebase-con-process-engine"><div class="titlepage"><div><div><h3 class="title">66.1.1. KIE base</h3></div></div></div><p>
						The KIE base includes all process definitions and other assets that your application might need to execute a business process.
					</p><p>
						To create a KIE base, use a <code class="literal">KieHelper</code> instance to load processes from various resources, such as the class path or the file system, and to create a new KIE base.
					</p><p>
						The following code snippet shows how to create a KIE base consisting of only one process definition, which is loaded from from the class path.
					</p><div class="formalpara"><p class="title"><strong>Creating a KIE base containing one process definition</strong></p><p>
							
<pre class="programlisting language-java">  KieHelper kieHelper = new KieHelper();
  KieBase kieBase = kieHelper
    .addResource(ResourceFactory.newClassPathResource("MyProcess.bpmn"))
    .build();</pre>
						</p></div><p>
						The <code class="literal">ResourceFactory</code> class has similar methods to load resources from a file, a URL, an InputStream, a Reader, and other sources.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This "manual" process of creating a KIE base is simpler than other alternatives, but can make an application hard to maintain. Use other methods of creating a KIE base, such as the <code class="literal">RuntimeManager</code> class or the Services API, for applications that you expect to develop and maintain over long periods of time.
						</p></div></div></section><section class="section" id="kiesession-con-process-engine"><div class="titlepage"><div><div><h3 class="title">66.1.2. KIE session</h3></div></div></div><p>
						After creating and loading the KIE base, you can create a KIE session to interact with the process engine. You can use this session to start and manage processes and to signal events.
					</p><p>
						The following code snippet creates a session based on the KIE base that you created previously and then starts a process instance, referencing the ID in the process definition.
					</p><div class="formalpara"><p class="title"><strong>Creating a KIE session and starting a process instance</strong></p><p>
							
<pre class="programlisting language-java">KieSession ksession = kbase.newKieSession();
ProcessInstance processInstance = ksession.startProcess("com.sample.MyProcess");</pre>
						</p></div></section><section class="section" id="processruntime-con-process-engine"><div class="titlepage"><div><div><h3 class="title">66.1.3. ProcessRuntime interface</h3></div></div></div><p>
						The <code class="literal">KieSession</code> class exposes the <code class="literal">ProcessRuntime</code> interface, which defines all the session methods for interacting with processes, as the following definition shows.
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">ProcessRuntime</code> interface</strong></p><p>
							
<pre class="programlisting language-java">  /**
	 * Start a new process instance.  Use the process (definition) that
	 * is referenced by the given process ID.
	 *
	 * @param processId  The ID of the process to start
	 * @return the ProcessInstance that represents the instance of the process that was started
	 */
    ProcessInstance startProcess(String processId);

    /**
	 * Start a new process instance.  Use the process (definition) that
	 * is referenced by the given process ID.  You can pass parameters
	 * to the process instance as name-value pairs, and these parameters set
	 * variables of the process instance.
   *
	 * @param processId  the ID of the process to start
   * @param parameters  the process variables to set when starting the process instance
	 * @return the ProcessInstance that represents the instance of the process that was started
     */
    ProcessInstance startProcess(String processId,
                                 Map&lt;String, Object&gt; parameters);

    /**
     * Signals the process engine that an event has occurred. The type parameter defines
     * the type of event and the event parameter can contain additional information
     * related to the event.  All process instances that are listening to this type
     * of (external) event will be notified.  For performance reasons, use this type of
     * event signaling only if one process instance must be able to notify
     * other process instances. For internal events within one process instance, use the
     * signalEvent method that also include the processInstanceId of the process instance
     * in question.
     *
     * @param type the type of event
     * @param event the data associated with this event
     */
    void signalEvent(String type,
                     Object event);

    /**
     * Signals the process instance that an event has occurred. The type parameter defines
     * the type of event and the event parameter can contain additional information
     * related to the event.  All node instances inside the given process instance that
     * are listening to this type of (internal) event will be notified.  Note that the event
     * will only be processed inside the given process instance.  All other process instances
     * waiting for this type of event will not be notified.
     *
     * @param type the type of event
     * @param event the data associated with this event
     * @param processInstanceId the id of the process instance that should be signaled
     */
    void signalEvent(String type,
                     Object event,
                     long processInstanceId);

    /**
     * Returns a collection of currently active process instances.  Note that only process
     * instances that are currently loaded and active inside the process engine are returned.
     * When using persistence, it is likely not all running process instances are loaded
     * as their state is stored persistently.  It is best practice not to use this
     * method to collect information about the state of your process instances but to use
     * a history log for that purpose.
     *
     * @return a collection of process instances currently active in the session
     */
    Collection&lt;ProcessInstance&gt; getProcessInstances();

    /**
     * Returns the process instance with the given ID.  Note that only active process instances
     * are returned. If a process instance has been completed already, this method returns
     * null.
     *
     * @param id the ID of the process instance
     * @return the process instance with the given ID, or null if it cannot be found
     */
    ProcessInstance getProcessInstance(long processInstanceId);

    /**
     * Aborts the process instance with the given ID. If the process instance has been completed
     * (or aborted), or if the process instance cannot be found, this method will throw an
     * IllegalArgumentException.
     *
     * @param id the ID of the process instance
     */
    void abortProcessInstance(long processInstanceId);

    /**
     * Returns the WorkItemManager related to this session. This object can be used to
     * register new WorkItemHandlers or to complete (or abort) WorkItems.
     *
     * @return the WorkItemManager related to this session
     */
    WorkItemManager getWorkItemManager();</pre>
						</p></div></section><section class="section" id="correlation-keys-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.1.4. Correlation Keys</h3></div></div></div><p>
						When working with processes, you might need to assign a business identifier to a process instance and then use the identifier to reference the instance without storing the generated instance ID.
					</p><p>
						To provide such capabilities, the process engine uses the <code class="literal">CorrelationKey</code> interface, which can define <code class="literal">CorrelationProperties</code>. A class that implements <code class="literal">CorrelationKey</code> can have either a single property describing it or a multi-property set. The value of the property or a combination of values of several properties refers to a unique instance.
					</p><p>
						The <code class="literal">KieSession</code> class implements the <code class="literal">CorrelationAwareProcessRuntime</code> interface to support correlation capabilities. This interface exposes the following methods:
					</p><div class="formalpara"><p class="title"><strong>Methods of the <code class="literal">CorrelationAwareProcessRuntime</code> interface</strong></p><p>
							
<pre class="programlisting language-java">      /**
      * Start a new process instance.  Use the process (definition) that
      * is referenced by the given process ID.  You can pass parameters
      * to the process instance (as name-value pairs), and these parameters set
      * variables of the process instance.
      *
      * @param processId  the ID of the process to start
      * @param correlationKey custom correlation key that can be used to identify the process instance
      * @param parameters  the process variables to set when starting the process instance
      * @return the ProcessInstance that represents the instance of the process that was started
      */
      ProcessInstance startProcess(String processId, CorrelationKey correlationKey, Map&lt;String, Object&gt; parameters);

      /**
      * Create a new process instance (but do not yet start it).  Use the process
      * (definition) that is referenced by the given process ID.
      * You can pass to the process instance (as name-value pairs),
      * and these parameters set variables of the process instance.
      * Use this method if you need a reference to the process instance before actually
      * starting it.  Otherwise, use startProcess.
      *
      * @param processId  the ID of the process to start
      * @param correlationKey custom correlation key that can be used to identify the process instance
      * @param parameters  the process variables to set when creating the process instance
      * @return the ProcessInstance that represents the instance of the process that was created (but not yet started)
      */
      ProcessInstance createProcessInstance(String processId, CorrelationKey correlationKey, Map&lt;String, Object&gt; parameters);

      /**
      * Returns the process instance with the given correlationKey.  Note that only active process instances
      * are returned.  If a process instance has been completed already, this method will return
      * null.
      *
      * @param correlationKey the custom correlation key assigned when the process instance was created
      * @return the process instance identified by the key or null if it cannot be found
      */
      ProcessInstance getProcessInstance(CorrelationKey correlationKey);</pre>
						</p></div><p>
						Correlation is usually used with long-running processes. You must enable persistence if you want to store correlation information permanently.
					</p></section></section><section class="section" id="runtime-manager-con_process-engine"><div class="titlepage"><div><div><h2 class="title">66.2. Runtime manager</h2></div></div></div><p>
					The <code class="literal">RuntimeManager</code> class provides a layer in the process engine API that simplifies and empowers its usage. This class encapsulates and manages the KIE base and KIE session, as well as the task service that provides handlers for all tasks in the process. The KIE session and the task service within the runtime manager are already configured to work with each other and you do not need to provide such configuration. For example, you do not need to register a human task handler and to ensure that it is connected to the required service.
				</p><p>
					The runtime manager manages the KIE session according to a predefined strategy. The following strategies are available:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>Singleton</em></span>: The runtime manager maintains a single <code class="literal">KieSession</code> and uses it for all the requested processes.
						</li><li class="listitem">
							<span class="emphasis"><em>Per Request</em></span>: The runtime manager creates a new <code class="literal">KieSession</code> for every request.
						</li><li class="listitem">
							<span class="emphasis"><em>Per Process Instance</em></span>: The runtime manager maintains mapping between process instance and <code class="literal">KieSession</code> and always provides the same <code class="literal">KieSession</code> whenever working with a given process instance.
						</li></ul></div><p>
					Regardless of the strategy, the <code class="literal">RuntimeManager</code> class ensures the same capabilities in initialization and configuration of the process engine components:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">KieSession</code> instances are loaded with the same factories (either in memory or JPA based).
						</li><li class="listitem">
							Work item handlers are registered on every <code class="literal">KieSession</code> instance (either loaded from the database or newly created).
						</li><li class="listitem">
							Event listeners (<code class="literal">Process</code>, <code class="literal">Agenda</code>, <code class="literal">WorkingMemory</code>) are registered on every KIE session, whether the session is loaded from the database or newly created.
						</li><li class="listitem"><p class="simpara">
							The task service is configured with the following required components:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The JTA transaction manager
								</li><li class="listitem">
									The same entity manager factory as the one used for <code class="literal">KieSession</code> instances
								</li><li class="listitem">
									The <code class="literal">UserGroupCallback</code> instance that can be configured in the environment
								</li></ul></div></li></ul></div><p>
					The runtime manager also enables disposing the process engine cleanly. It provides dedicated methods to dispose a <code class="literal">RuntimeEngine</code> instance when it is no longer needed, releasing any resources it might have acquired.
				</p><p>
					The following code shows the definition of the <code class="literal">RuntimeManager</code> interface:
				</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">RuntimeManager</code> interface</strong></p><p>
						
<pre class="programlisting language-java">public interface RuntimeManager {

	/**
	 * Returns a &lt;code&gt;RuntimeEngine&lt;/code&gt; instance that is fully initialized:
	 * &lt;ul&gt;
	 * 	&lt;li&gt;KieSession is created or loaded depending on the strategy&lt;/li&gt;
	 * 	&lt;li&gt;TaskService is initialized and attached to the KIE session (through a listener)&lt;/li&gt;
	 * 	&lt;li&gt;WorkItemHandlers are initialized and registered on the KIE session&lt;/li&gt;
	 * 	&lt;li&gt;EventListeners (process, agenda, working memory) are initialized and added to the KIE session&lt;/li&gt;
	 * &lt;/ul&gt;
	 * @param context the concrete implementation of the context that is supported by given &lt;code&gt;RuntimeManager&lt;/code&gt;
	 * @return instance of the &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 */
    RuntimeEngine getRuntimeEngine(Context&lt;?&gt; context);

    /**
     * Unique identifier of the &lt;code&gt;RuntimeManager&lt;/code&gt;
     * @return
     */
    String getIdentifier();

    /**
     * Disposes &lt;code&gt;RuntimeEngine&lt;/code&gt; and notifies all listeners about that fact.
     * This method should always be used to dispose &lt;code&gt;RuntimeEngine&lt;/code&gt; that is not needed
     * anymore. &lt;br/&gt;
     * Do not use KieSession.dispose() used with RuntimeManager as it will break the internal
     * mechanisms of the manager responsible for clear and efficient disposal.&lt;br/&gt;
     * Disposing is not needed if &lt;code&gt;RuntimeEngine&lt;/code&gt; was obtained within an active JTA transaction,
     * if the getRuntimeEngine method was invoked during active JTA transaction, then disposing of
     * the runtime engine will happen automatically on transaction completion.
     * @param runtime
     */
    void disposeRuntimeEngine(RuntimeEngine runtime);

    /**
     * Closes &lt;code&gt;RuntimeManager&lt;/code&gt; and releases its resources. Call this method when
     * a runtime manager is not needed anymore. Otherwise it will still be active and operational.
     */
    void close();

}</pre>
					</p></div><p>
					The <code class="literal">RuntimeManager</code> class also provides the <code class="literal">RuntimeEngine</code> class, which includes methods to get access to underlying process engine components:
				</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">RuntimeEngine</code> interface</strong></p><p>
						
<pre class="programlisting language-java">public interface RuntimeEngine {

	/**
	 * Returns the &lt;code&gt;KieSession&lt;/code&gt; configured for this &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 * @return
	 */
    KieSession getKieSession();

    /**
	 * Returns the &lt;code&gt;TaskService&lt;/code&gt; configured for this &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 * @return
	 */
    TaskService getTaskService();
}</pre>
					</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						An identifier of the <code class="literal">RuntimeManager</code> class is used as <code class="literal">deploymentId</code> during runtime execution. For example, the identifier is persisted as <code class="literal">deploymentId</code> of a <code class="literal">Task</code> when the <code class="literal">Task</code> is persisted. The <code class="literal">deploymentID</code> of a <code class="literal">Task</code> associates it with the <code class="literal">RuntimeManager</code> when the <code class="literal">Task</code> is completed and the process instance is resumed.
					</p><p>
						The same <code class="literal">deploymentId</code> is also persisted as <code class="literal">externalId</code> in history log tables.
					</p><p>
						If you don’t specify an identifier when creating a <code class="literal">RuntimeManager</code> instance, a default value is applied, depending on the strategy (for example, <code class="literal">default-per-pinstance</code> for <code class="literal">PerProcessInstanceRuntimeManager</code>). That means your application uses the same deployment of the <code class="literal">RuntimeManager</code> class in its entire lifecycle.
					</p><p>
						If you maintain multiple runtime managers in your application, you must specify a unique identifier for every <code class="literal">RuntimeManager</code> instance.
					</p><p>
						For example, the deployment service maintains multiple runtime managers and uses the GAV value of the KJAR file as an identifier. The same logic is used in Business Central and in KIE Server, because they depend on the deployment service.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When you need to interact with the process engine or task service from within a handler or a listener, you can use the <code class="literal">RuntimeManager</code> interface to retrieve the <code class="literal">RuntimeEngine</code> instance for the given process instance, and then use the <code class="literal">RuntimeEngine</code> instance to retrieve the <code class="literal">KieSession</code> or <code class="literal">TaskService</code> instance. This approach ensures that the proper state of the engine, managed according to the selected strategy, is preserved.
					</p></div></div><section class="section" id="runtime-manager-strategies-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.2.1. Runtime manager strategies</h3></div></div></div><p>
						The <code class="literal">RuntimeManager</code> class supports the following strategies for managing KIE sessions.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Singleton strategy</span></dt><dd><p class="simpara">
									This strategy instructs the runtime manager to maintain a single <code class="literal">RuntimeEngine</code> instance (and in turn single <code class="literal">KieSession</code> and <code class="literal">TaskService</code> instances). Access to the runtime engine is synchronized and, therefore, thread safe, although it comes with a performance penalty due to synchronization.
								</p><p class="simpara">
									Use this strategy for simple use cases.
								</p><p class="simpara">
									This strategy has the following characteristics:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											It has a small memory footprint, with single instances of the runtime engine and the task service.
										</li><li class="listitem">
											It is simple and compact in design and usage.
										</li><li class="listitem">
											It is a good fit for low-to-medium load on the process engine because of synchronized access.
										</li><li class="listitem">
											In this strategy, because of the single <code class="literal">KieSession</code> instance, all state objects (such as facts) are directly visible to all process instances and vice versa.
										</li><li class="listitem">
											The strategy is not contextual. When you retrieve instances of <code class="literal">RuntimeEngine</code> from a singleton <code class="literal">RuntimeManager</code>, you do not need to take the <code class="literal">Context</code> instance into account. Usually, you can use <code class="literal">EmptyContext.get()</code> as the context, although a null argument is acceptable as well.
										</li><li class="listitem"><p class="simpara">
											In this strategy, the runtime manager keeps track of the ID of the <code class="literal">KieSession</code>, so that the same session remains in use after a <code class="literal">RuntimeManager</code> restart. The ID is stored as a serialized file in a temporary location in the file system that, depending on the environment, can be one of the following directories:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
													The value of the <code class="literal">jbpm.data.dir</code> system property
												</li><li class="listitem">
													The value of the <code class="literal">jboss.server.data.dir</code> system property
												</li><li class="listitem">
													The value of the <code class="literal">java.io.tmpdir</code> system property
												</li></ul></div></li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
										A combination of the Singleton strategy and the EJB Timer Scheduler might raise Hibernate issues under load. Do not use this combination in production applications. The EJB Timer Scheduler is the default scheduler in the KIE Server.
									</p></div></div></dd><dt><span class="term">Per request strategy</span></dt><dd><p class="simpara">
									This strategy instructs the runtime manager to provide a new instance of <code class="literal">RuntimeEngine</code> for every request. One or more invocations of the process engine within a single transaction are considered a single request.
								</p><p class="simpara">
									The same instance of <code class="literal">RuntimeEngine</code> must be used within a single transaction to ensure correctness of state. Otherwise, an operation completed in one call would not be visible in the next call.
								</p><p class="simpara">
									This strategy is stateless, as process state is preserved only within the request. When a request is completed, the <code class="literal">RuntimeEngine</code> instance is permanently destroyed. If persistence is used, information related to the KIE session is removed from the persistence database as well.
								</p><p class="simpara">
									This strategy has the following characteristics:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											It provides completely isolated process engine and task service operations for every request.
										</li><li class="listitem">
											It is completely stateless, because facts are stored only for the duration of the request.
										</li><li class="listitem">
											It is a good fit for high-load, stateless processes, where no facts or timers must be preserved between requests.
										</li><li class="listitem">
											In this strategy, the KIE session is only available during the life of a request and is destroyed at the end of the request.
										</li><li class="listitem">
											The strategy is not contextual. When you retrieve instances of <code class="literal">RuntimeEngine</code> from a per-request <code class="literal">RuntimeManager</code>, you do not need to take the <code class="literal">Context</code> instance into account. Usually, you can use <code class="literal">EmptyContext.get()</code> as the context, although a null argument is acceptable as well.
										</li></ul></div></dd><dt><span class="term">Per process instance strategy</span></dt><dd><p class="simpara">
									This strategy instructs <code class="literal">RuntimeManager</code> to maintain a strict relationship between a KIE session and a process instance. Each <code class="literal">KieSession</code> is available as long as the <code class="literal">ProcessInstance</code> to which it belongs is active.
								</p><p class="simpara">
									This strategy provides the most flexible approach for using advanced capabilities of the process engine, such as rule evaluation and isolation between process instances. It maximizes performance and reduces potential bottlenecks introduced by synchronization. At the same time, unlike the request strategy, it reduces the number of KIE sessions to the actual number of process instances, rather than the total number of requests.
								</p><p class="simpara">
									This strategy has the following characteristics:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											It provides isolation for every process instance.
										</li><li class="listitem">
											It maintains a strict relationship between <code class="literal">KieSession</code> and <code class="literal">ProcessInstance</code> to ensure that it always delivers the same <code class="literal">KieSession</code> for a given <code class="literal">ProcessInstance</code>.
										</li><li class="listitem">
											It merges the lifecycle of <code class="literal">KieSession</code> with <code class="literal">ProcessInstance</code>, and both are disposed when the process instance completes or aborts.
										</li><li class="listitem">
											It enables maintenance of data, such as facts and timers, in the scope of the process instance. Only the process instance has access to the data.
										</li><li class="listitem">
											It introduces some overhead because of the need to look up and load the <code class="literal">KieSession</code> for the process instance.
										</li><li class="listitem">
											It validates every usage of a <code class="literal">KieSession</code> so it cannot be used for other process instances. An exception is thrown if another process instance uses the same <code class="literal">KieSession</code>.
										</li><li class="listitem"><p class="simpara">
											The strategy is contextual and accepts the following context instances:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
													<code class="literal">EmptyContext</code> or null: Used when starting a process instance because no process instance ID is available yet
												</li><li class="listitem">
													<code class="literal">ProcessInstanceIdContext</code>: Used after the process instance is created
												</li><li class="listitem">
													<code class="literal">CorrelationKeyContext</code>: Used as an alternative to <code class="literal">ProcessInstanceIdContext</code> to use a custom (business) key instead of the process instance ID
												</li></ul></div></li></ul></div></dd></dl></div></section><section class="section" id="runtime-manager-usage-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.2.2. Typical usage scenario for the runtime manager</h3></div></div></div><p>
						The typical usage scenario for the runtime manager consists of the following stages:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								At application startup time, complete the following stage:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Build a <code class="literal">RuntimeManager</code> instance and keep it for the entire lifetime of the application, as it is thread-safe and can be accessed concurrently.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								At request time, complete the following stages:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Get <code class="literal">RuntimeEngine</code> from the <code class="literal">RuntimeManager</code>, using the proper context instance as determined by the strategy that you configured for the <code class="literal">RuntimeManager</code> class.
									</li><li class="listitem">
										Get the <code class="literal">KieSession</code> and <code class="literal">TaskService</code> objects from the <code class="literal">RuntimeEngine</code>.
									</li><li class="listitem">
										Use the <code class="literal">KieSession</code> and <code class="literal">TaskService</code> objects for operations such as <code class="literal">startProcess</code> or <code class="literal">completeTask</code>.
									</li><li class="listitem">
										After completing processing, dispose <code class="literal">RuntimeEngine</code> using the <code class="literal">RuntimeManager.disposeRuntimeEngine</code> method.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								At application shutdown time, complete the following stage:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Close the <code class="literal">RuntimeManager</code> instance.
									</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When <code class="literal">RuntimeEngine</code> is obtained from <code class="literal">RuntimeManager</code> within an active JTA transaction, you do not need to dispose <code class="literal">RuntimeEngine</code> at the end, as <code class="literal">RuntimeManager</code> automatically disposes the <code class="literal">RuntimeEngine</code> on transaction completion (regardless of the completion status: commit or rollback).
						</p></div></div><p>
						The following example shows how you can build a <code class="literal">RuntimeManager</code> instance and get a <code class="literal">RuntimeEngine</code> instance (that encapsulates <code class="literal">KieSession</code> and <code class="literal">TaskService</code> classes) from it:
					</p><div class="formalpara"><p class="title"><strong>Building a <code class="literal">RuntimeManager</code> instance and then getting <code class="literal">RuntimeEngine</code> and <code class="literal">KieSession</code></strong></p><p>
							
<pre class="programlisting language-java">    // First, configure the environment to be used by RuntimeManager
    RuntimeEnvironment environment = RuntimeEnvironmentBuilder.Factory.get()
    .newDefaultInMemoryBuilder()
    .addAsset(ResourceFactory.newClassPathResource("BPMN2-ScriptTask.bpmn2"), ResourceType.BPMN2)
    .get();

    // Next, create the RuntimeManager - in this case the singleton strategy is chosen
    RuntimeManager manager = RuntimeManagerFactory.Factory.get().newSingletonRuntimeManager(environment);

    // Then get RuntimeEngine from the runtime manager, using an empty context because singleton does not keep track
    // of runtime engine as there is only one
    RuntimeEngine runtime = manager.getRuntimeEngine(EmptyContext.get());

    // Get the KieSession from the RuntimeEngine - already initialized with all handlers, listeners, and other requirements
    // configured on the environment
    KieSession ksession = runtimeEngine.getKieSession();

    // Add invocations of the process engine here,
    // for example, ksession.startProcess(processId);

    // Finally, dispose the runtime engine
    manager.disposeRuntimeEngine(runtimeEngine);</pre>
						</p></div><p>
						This example provides the simplest, or minimal, way of using <code class="literal">RuntimeManager</code> and <code class="literal">RuntimeEngine</code> classes. It has the following characteristics:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">KieSession</code> instance is created in memory, using the <code class="literal">newDefaultInMemoryBuilder</code> builder.
							</li><li class="listitem">
								A single process, which is added as an asset, is available for execution.
							</li><li class="listitem">
								The <code class="literal">TaskService</code> class is configured and attached to the <code class="literal">KieSession</code> instance through the <code class="literal">LocalHTWorkItemHandler</code> interface to support user task capabilities within processes.
							</li></ul></div></section><section class="section" id="runtime-environment-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.2.3. Runtime environment configuration object</h3></div></div></div><p>
						The <code class="literal">RuntimeManager</code> class encapsulates internal process engine complexity, such as creating, disposing, and registering handlers.
					</p><p>
						It also provides fine-grained control over process engine configuration. To set this configuration, you must create a <code class="literal">RuntimeEnvironment</code> object and then use it to create the <code class="literal">RuntimeManager</code> object.
					</p><p>
						The following definition shows the methods available in the <code class="literal">RuntimeEnvironment</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Methods in the <code class="literal">RuntimeEnvironment</code> interface</strong></p><p>
							
<pre class="programlisting language-java">  public interface RuntimeEnvironment {

	/**
	 * Returns &lt;code&gt;KieBase&lt;/code&gt; that is to be used by the manager
	 * @return
	 */
    KieBase getKieBase();

    /**
     * KieSession environment that is to be used to create instances of &lt;code&gt;KieSession&lt;/code&gt;
     * @return
     */
    Environment getEnvironment();

    /**
     * KieSession configuration that is to be used to create instances of &lt;code&gt;KieSession&lt;/code&gt;
     * @return
     */
    KieSessionConfiguration getConfiguration();

    /**
     * Indicates if persistence is to be used for the KieSession instances
     * @return
     */
    boolean usePersistence();

    /**
     * Delivers a concrete implementation of &lt;code&gt;RegisterableItemsFactory&lt;/code&gt; to obtain handlers and listeners
     * that is to be registered on instances of &lt;code&gt;KieSession&lt;/code&gt;
     * @return
     */
    RegisterableItemsFactory getRegisterableItemsFactory();

    /**
     * Delivers a concrete implementation of &lt;code&gt;UserGroupCallback&lt;/code&gt; that is to be registered on instances
     * of &lt;code&gt;TaskService&lt;/code&gt; for managing users and groups.
     * @return
     */
    UserGroupCallback getUserGroupCallback();

    /**
     * Delivers a custom class loader that is to be used by the process engine and task service instances
     * @return
     */
    ClassLoader getClassLoader();

    /**
     * Closes the environment, permitting closing of all dependent components such as ksession factories
     */
    void close();</pre>
						</p></div></section><section class="section" id="runtime-environment-builder-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.2.4. Runtime environment builder</h3></div></div></div><p>
						To create an instance of <code class="literal">RuntimeEnvironment</code> that contains the required data, use the <code class="literal">RuntimeEnvironmentBuilder</code> class. This class provides a fluent API to configure a <code class="literal">RuntimeEnvironment</code> instance with predefined settings.
					</p><p>
						The following definition shows the methods in the <code class="literal">RuntimeEnvironmentBuilder</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Methods in the <code class="literal">RuntimeEnvironmentBuilder</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface RuntimeEnvironmentBuilder {

	public RuntimeEnvironmentBuilder persistence(boolean persistenceEnabled);

	public RuntimeEnvironmentBuilder entityManagerFactory(Object emf);

	public RuntimeEnvironmentBuilder addAsset(Resource asset, ResourceType type);

	public RuntimeEnvironmentBuilder addEnvironmentEntry(String name, Object value);

	public RuntimeEnvironmentBuilder addConfiguration(String name, String value);

	public RuntimeEnvironmentBuilder knowledgeBase(KieBase kbase);

	public RuntimeEnvironmentBuilder userGroupCallback(UserGroupCallback callback);

	public RuntimeEnvironmentBuilder registerableItemsFactory(RegisterableItemsFactory factory);

	public RuntimeEnvironment get();

	public RuntimeEnvironmentBuilder classLoader(ClassLoader cl);

	public RuntimeEnvironmentBuilder schedulerService(Object globalScheduler);</pre>
						</p></div><p>
						Use the <code class="literal">RuntimeEnvironmentBuilderFactory</code> class to obtain instances of <code class="literal">RuntimeEnvironmentBuilder</code>. Along with empty instances with no settings, you can get builders with several preconfigured sets of configuration options for the runtime manager.
					</p><p>
						The following definition shows the methods in the <code class="literal">RuntimeEnvironmentBuilderFactory</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Methods in the <code class="literal">RuntimeEnvironmentBuilderFactory</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface RuntimeEnvironmentBuilderFactory {

	/**
     * Provides a completely empty &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; instance to manually
     * set all required components instead of relying on any defaults.
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt;
     */
    public RuntimeEnvironmentBuilder newEmptyBuilder();

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newDefaultBuilder();

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
     * but does not have persistence for the process engine configured so it will only store process instances in memory
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newDefaultInMemoryBuilder();

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
     * This method is tailored to work smoothly with KJAR files
     * @param groupId group id of kjar
     * @param artifactId artifact id of kjar
     * @param version version number of kjar
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newDefaultBuilder(String groupId, String artifactId, String version);

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
     * This method is tailored to work smoothly with KJAR files and use the kbase and ksession settings in the KJAR
     * @param groupId group id of kjar
     * @param artifactId artifact id of kjar
     * @param version version number of kjar
     * @param kbaseName name of the kbase defined in kmodule.xml stored in kjar
     * @param ksessionName name of the ksession define in kmodule.xml stored in kjar
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newDefaultBuilder(String groupId, String artifactId, String version, String kbaseName, String ksessionName);

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
     * This method is tailored to work smoothly with KJAR files and use the release ID defined in the KJAR
     * @param releaseId &lt;code&gt;ReleaseId&lt;/code&gt; that described the kjar
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newDefaultBuilder(ReleaseId releaseId);

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
		 * This method is tailored to work smoothly with KJAR files and use the kbase, ksession, and release ID settings in the KJAR
     * @param releaseId &lt;code&gt;ReleaseId&lt;/code&gt; that described the kjar
     * @param kbaseName name of the kbase defined in kmodule.xml stored in kjar
     * @param ksessionName name of the ksession define in kmodule.xml stored in kjar
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newDefaultBuilder(ReleaseId releaseId, String kbaseName, String ksessionName);

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
     * It relies on KieClasspathContainer that requires the presence of kmodule.xml in the META-INF folder which
     * defines the kjar itself.
     * Expects to use default kbase and ksession from kmodule.
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newClasspathKmoduleDefaultBuilder();

    /**
     * Provides default configuration of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is based on:
     * &lt;ul&gt;
     * 	&lt;li&gt;DefaultRuntimeEnvironment&lt;/li&gt;
     * &lt;/ul&gt;
		 * It relies on KieClasspathContainer that requires the presence of kmodule.xml in the META-INF folder which
     * defines the kjar itself.
     * @param kbaseName name of the kbase defined in kmodule.xml
     * @param ksessionName name of the ksession define in kmodule.xml
     * @return new instance of &lt;code&gt;RuntimeEnvironmentBuilder&lt;/code&gt; that is already preconfigured with defaults
     *
     * @see DefaultRuntimeEnvironment
     */
    public RuntimeEnvironmentBuilder newClasspathKmoduleDefaultBuilder(String kbaseName, String ksessionName);</pre>
						</p></div><p>
						The runtime manager also provides access to a <code class="literal">TaskService</code> object as an integrated component of a <code class="literal">RuntimeEngine</code> object, configured to communicate with the KIE session. If you use one of the default builders, the following configuration settings for the task service are present:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The persistence unit name is set to <code class="literal">org.jbpm.persistence.jpa</code> (for both process engine and task service).
							</li><li class="listitem">
								The human task handler is registered on the KIE session.
							</li><li class="listitem">
								The JPA-based history log event listener is registered on the KIE session.
							</li><li class="listitem">
								An event listener to trigger rule task evaluation (<code class="literal">fireAllRules</code>) is registered on the KIE session.
							</li></ul></div></section><section class="section" id="registering-handlers-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.2.5. Registration of handlers and listeners for runtime engines</h3></div></div></div><p>
						If you use the runtime manager API, the runtime engine object represents the process engine.
					</p><p>
						To extend runtime engines with your own handlers or listeners, you can implement the <code class="literal">RegisterableItemsFactory</code> interface and then include it in the runtime environment using the <code class="literal">RuntimeEnvironmentBuilder.registerableItemsFactory()</code> method. Then the runtime manager automatically adds the handlers or listeners to every runtime engine it creates.
					</p><p>
						The following definition shows the methods in the <code class="literal">RegisterableItemsFactory</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Methods in the <code class="literal">RegisterableItemsFactory</code> interface</strong></p><p>
							
<pre class="programlisting language-java">	/**
	 * Returns new instances of &lt;code&gt;WorkItemHandler&lt;/code&gt; that will be registered on &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 * @param runtime provides &lt;code&gt;RuntimeEngine&lt;/code&gt; in case handler need to make use of it internally
	 * @return map of handlers to be registered - in case of no handlers empty map shall be returned.
	 */
    Map&lt;String, WorkItemHandler&gt; getWorkItemHandlers(RuntimeEngine runtime);

    /**
	 * Returns new instances of &lt;code&gt;ProcessEventListener&lt;/code&gt; that will be registered on &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 * @param runtime provides &lt;code&gt;RuntimeEngine&lt;/code&gt; in case listeners need to make use of it internally
	 * @return list of listeners to be registered - in case of no listeners empty list shall be returned.
	 */
    List&lt;ProcessEventListener&gt; getProcessEventListeners(RuntimeEngine runtime);

    /**
	 * Returns new instances of &lt;code&gt;AgendaEventListener&lt;/code&gt; that will be registered on &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 * @param runtime provides &lt;code&gt;RuntimeEngine&lt;/code&gt; in case listeners need to make use of it internally
	 * @return list of listeners to be registered - in case of no listeners empty list shall be returned.
	 */
    List&lt;AgendaEventListener&gt; getAgendaEventListeners(RuntimeEngine runtime);

    /**
	 * Returns new instances of &lt;code&gt;WorkingMemoryEventListener&lt;/code&gt; that will be registered on &lt;code&gt;RuntimeEngine&lt;/code&gt;
	 * @param runtime provides &lt;code&gt;RuntimeEngine&lt;/code&gt; in case listeners need to make use of it internally
	 * @return list of listeners to be registered - in case of no listeners empty list shall be returned.
	 */
    List&lt;WorkingMemoryEventListener&gt; getWorkingMemoryEventListeners(RuntimeEngine runtime);</pre>
						</p></div><p>
						The process engine provides default implementations of <code class="literal">RegisterableItemsFactory</code>. You can extend these implementations to define custom handlers and listeners.
					</p><p>
						The following available implementations might be useful:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.jbpm.runtime.manager.impl.SimpleRegisterableItemsFactory</code>: The simplest possible implementation. It does not have any predefined content and uses reflection to produce instances of handlers and listeners based on given class names.
							</li><li class="listitem">
								<code class="literal">org.jbpm.runtime.manager.impl.DefaultRegisterableItemsFactory</code>: An extension of the Simple implementation that introduces the same defaults as the default runtime environment builder and still provides the same capabilities as the Simple implementation.
							</li><li class="listitem">
								<code class="literal">org.jbpm.runtime.manager.impl.cdi.InjectableRegisterableItemsFactory</code>: An extension of the Default implementation that is tailored for CDI environments and provides a CDI style approach to finding handlers and listeners using producers.
							</li></ul></div><section class="section" id="registering-handlers-file-proc_process-engine"><div class="titlepage"><div><div><h4 class="title">66.2.5.1. Registering work item handlers using a file</h4></div></div></div><p>
							You can register simple work item handlers, which are stateless or rely on the <code class="literal">KieSession</code> state, by defining them in the <code class="literal">CustomWorkItem.conf</code> file and placing the file on the class path.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
									Create a file named <code class="literal">drools.session.conf</code> in the <code class="literal">META-INF</code> subdirectory of the root of the class path. For web applications the directory is <code class="literal">WEB-INF/classes/META-INF</code>.
								</li><li class="listitem"><p class="simpara">
									Add the following line to the <code class="literal">drools.session.conf</code> file:
								</p><pre class="screen">drools.workItemHandlers = CustomWorkItemHandlers.conf</pre></li><li class="listitem">
									Create a file named <code class="literal">CustomWorkItemHandlers.conf</code> in the same directory.
								</li><li class="listitem"><p class="simpara">
									In the <code class="literal">CustomWorkItemHandlers.conf</code> file, define custom work item handlers using the MVEL style, similar to the following example:
								</p><pre class="screen">[
  "Log": new org.jbpm.process.instance.impl.demo.SystemOutWorkItemHandler(),
  "WebService": new org.jbpm.process.workitem.webservice.WebServiceWorkItemHandler(ksession),
  "Rest": new org.jbpm.process.workitem.rest.RESTWorkItemHandler(),
  "Service Task" : new org.jbpm.process.workitem.bpmn2.ServiceTaskHandler(ksession)
]</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Result</strong></p><p>
								The work item handlers that you listed are registered for any KIE session created by the application, regardless of whether the application uses the runtime manager API.
							</p></div></section><section class="section" id="registering-handlers-cdi-con_process-engine"><div class="titlepage"><div><div><h4 class="title">66.2.5.2. Registration of handlers and listeners in a CDI environment</h4></div></div></div><p>
							If your application uses the runtime manager API and runs in a CDI environment, your classes can implement the dedicated producer interfaces to provide custom work item handlers and event listeners to all runtime engines.
						</p><p>
							To create a work item handler, you must implement the <code class="literal">WorkItemHandlerProducer</code> interface.
						</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">WorkItemHandlerProducer</code> interface</strong></p><p>
								
<pre class="programlisting language-java">public interface WorkItemHandlerProducer {

    /**
     * Returns a map of work items (key = work item name, value=  work item handler instance)
     * to be registered on the KieSession
     * &lt;br/&gt;
     * The following parameters are accepted:
     * &lt;ul&gt;
     *  &lt;li&gt;ksession&lt;/li&gt;
     *  &lt;li&gt;taskService&lt;/li&gt;
     *  &lt;li&gt;runtimeManager&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * @param identifier - identifier of the owner - usually RuntimeManager that allows the producer to filter out
     * and provide valid instances for given owner
     * @param params - the owner might provide some parameters, usually KieSession, TaskService, RuntimeManager instances
     * @return map of work item handler instances (recommendation is to always return new instances when this method is invoked)
     */
    Map&lt;String, WorkItemHandler&gt; getWorkItemHandlers(String identifier, Map&lt;String, Object&gt; params);
}</pre>
							</p></div><p>
							To create an event listener, you must implement the <code class="literal">EventListenerProducer</code> interface. Annotate the event listener producer with the proper qualifier to indicate the type of listeners that it provides. Use one of the following annotations:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">@Process</code> for <code class="literal">ProcessEventListener</code>
								</li><li class="listitem">
									<code class="literal">@Agenda</code> for <code class="literal">AgendaEventListener</code>
								</li><li class="listitem">
									<code class="literal">@WorkingMemory</code> for <code class="literal">WorkingMemoryEventListener</code>
								</li></ul></div><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">EventListenerProducer</code> interface</strong></p><p>
								
<pre class="programlisting language-java">public interface EventListenerProducer&lt;T&gt; {

    /**
     * Returns a list of instances for given (T) type of listeners
     * &lt;br/&gt;
     * The following parameters are accepted:
     * &lt;ul&gt;
     *  &lt;li&gt;ksession&lt;/li&gt;
     *  &lt;li&gt;taskService&lt;/li&gt;
     *  &lt;li&gt;runtimeManager&lt;/li&gt;
     * &lt;/ul&gt;
     * @param identifier - identifier of the owner - usually RuntimeManager that allows the producer to filter out
     * and provide valid instances for given owner
     * @param params - the owner might provide some parameters, usually KieSession, TaskService, RuntimeManager instances
     * @return list of listener instances (recommendation is to always return new instances when this method is invoked)
     */
    List&lt;T&gt; getEventListeners(String identifier, Map&lt;String, Object&gt;  params);
}</pre>
							</p></div><p>
							Package your implementations of these interfaces as a bean archive by including <code class="literal">beans.xml</code> in the <code class="literal">META-INF</code> subdirectory. Place the bean archive on the application class path, for example, in <code class="literal">WEB-INF/lib</code> for a web application. The CDI-based runtime manager discovers the packages and registers the work item handlers and event listeners in every <code class="literal">KieSession</code> that it creates or loads from the data store.
						</p><p>
							The process engine provides certain parameters to the producers to enable stateful and advanced operation. For example, the handlers or listeners can use the parameters to signal the process engine or the process instance in case of an error. The process engine provides the following components as parameters:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">KieSession</code>
								</li><li class="listitem">
									<code class="literal">TaskService</code>
								</li><li class="listitem">
									<code class="literal">RuntimeManager</code>
								</li></ul></div><p>
							In addition, the identifier of the <code class="literal">RuntimeManager</code> class instance is provided as a parameter. You can apply filtering to the identifier to decide whether this <code class="literal">RuntimeManager</code> instance receives the handlers and listeners.
						</p></section></section></section><section class="section" id="services-con_process-engine"><div class="titlepage"><div><div><h2 class="title">66.3. Services in the process engine</h2></div></div></div><p>
					The process engine provides a set of high-level services, running on top of the runtime manager API.
				</p><p>
					The services provide the most convenient way to embed the process engine in your application. The KIE Server also uses these services internally.
				</p><p>
					When you use services, you do not need to implement your own handling of the runtime manager, runtime engines, sessions, and other process engine entities. However, you can access the underlying <code class="literal">RuntimeManager</code> objects through the services when necessary.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you use the EJB remote client for the services API, the <code class="literal">RuntimeManager</code> objects are not available, because they would not operate correctly on the client side after serialization.
					</p></div></div><section class="section" id="services-modules-ref_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.1. Modules for process engine services</h3></div></div></div><p>
						The process engine services are provided as a set of modules. These modules are grouped by their framework dependencies. You can choose the suitable modules and use only these modules, without making your application dependent on the frameworks that other modules use.
					</p><p>
						The following modules are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">jbpm-services-api</code>: Only API classes and interfaces
							</li><li class="listitem">
								<code class="literal">jbpm-kie-services</code>: A code implementation of the services API in pure Java without any framework dependencies
							</li><li class="listitem">
								<code class="literal">jbpm-services-cdi</code>: A CDI wrapper on top of the core services implementation
							</li><li class="listitem">
								<code class="literal">jbpm-services-ejb-api</code>: An extension of the services API to support EJB requirements
							</li><li class="listitem">
								<code class="literal">jbpm-services-ejb-impl</code>: EJB wrappers on top of the core services implementation
							</li><li class="listitem">
								<code class="literal">jbpm-services-ejb-timer</code>: A scheduler service based on the EJB timer service to support time-based operations, such as timer events and deadlines
							</li><li class="listitem">
								<code class="literal">jbpm-services-ejb-client</code>: An EJB remote client implementation, currently supporting only Red Hat JBoss EAP
							</li></ul></div></section><section class="section" id="service-deployment-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.2. Deployment service</h3></div></div></div><p>
						The deployment service deploys and undeploys units in the process engine.
					</p><p>
						A <span class="emphasis"><em>deployment unit</em></span> represents the contents of a KJAR file. A deployment unit includes business assets, such as process definitions, rules, forms, and data models. After deploying the unit you can execute the processes it defines. You can also query the available deployment units.
					</p><p>
						Every deployment unit has a unique identifier string, <code class="literal">deploymentId</code>, also known as <code class="literal">deploymentUnitId</code>. You can use this identifier to apply any service actions to the deployment unit.
					</p><p>
						In a typical use case for this service, you can load and unload multiple KJARs at the same time and, when necessary, execute processes simultaneously.
					</p><p>
						The following code sample shows simple use of the deployment service.
					</p><div class="formalpara"><p class="title"><strong>Using the deployment service</strong></p><p>
							
<pre class="programlisting language-java">// Create deployment unit by providing the GAV of the KJAR
DeploymentUnit deploymentUnit = new KModuleDeploymentUnit(GROUP_ID, ARTIFACT_ID, VERSION);
// Get the deploymentId for the deployed unit
String deploymentId = deploymentUnit.getIdentifier();
// Deploy the unit
deploymentService.deploy(deploymentUnit);
// Retrieve the deployed unit
DeployedUnit deployed = deploymentService.getDeployedUnit(deploymentId);
// Get the runtime manager
RuntimeManager manager = deployed.getRuntimeManager();</pre>
						</p></div><p>
						The following definition shows the complete <code class="literal">DeploymentService</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">DeploymentService</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface DeploymentService {

    void deploy(DeploymentUnit unit);

    void undeploy(DeploymentUnit unit);

    RuntimeManager getRuntimeManager(String deploymentUnitId);

    DeployedUnit getDeployedUnit(String deploymentUnitId);

    Collection&lt;DeployedUnit&gt; getDeployedUnits();

    void activate(String deploymentId);

    void deactivate(String deploymentId);

    boolean isDeployed(String deploymentUnitId);
}</pre>
						</p></div></section><section class="section" id="service-definition-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.3. Definition service</h3></div></div></div><p>
						When you deploy a process definition using the deployment service, the definition service automatically scans the definition, parses the process, and extracts the information that the process engine requires.
					</p><p>
						You can use the definition service API to retrieve information about the process definition. The service extracts this information directly from the BPMN2 process definition. The following information is available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="emphasis"><em>Process definition</em></span> such as ID, name, and description
							</li><li class="listitem">
								<span class="emphasis"><em>Process variables</em></span> including the name and type of every variable
							</li><li class="listitem">
								<span class="emphasis"><em>Reusable subprocesses</em></span> used in the process (if any)
							</li><li class="listitem">
								<span class="emphasis"><em>Service tasks</em></span> that represent domain-specific activities
							</li><li class="listitem">
								<span class="emphasis"><em>User tasks</em></span> including assignment information
							</li><li class="listitem">
								<span class="emphasis"><em>Task data</em></span> with input and output information
							</li></ul></div><p>
						The following code sample shows simple use of the definition service. The <code class="literal">processID</code> must correspond to the ID of a process definition in a KJAR file that you already deployed using the deployment service.
					</p><div class="formalpara"><p class="title"><strong>Using the definition service</strong></p><p>
							
<pre class="programlisting language-java">String processId = "org.jbpm.writedocument";

Collection&lt;UserTaskDefinition&gt; processTasks =
bpmn2Service.getTasksDefinitions(deploymentUnit.getIdentifier(), processId);

Map&lt;String, String&gt; processData =
bpmn2Service.getProcessVariables(deploymentUnit.getIdentifier(), processId);

Map&lt;String, String&gt; taskInputMappings =
bpmn2Service.getTaskInputMappings(deploymentUnit.getIdentifier(), processId, "Write a Document" );</pre>
						</p></div><p>
						You can also use the definition service to scan a definition that you provide as BPMN2-compliant XML content, without the use of a KJAR file. The <code class="literal">buildProcessDefinition</code> method provides this capability.
					</p><p>
						The following definition shows the complete <code class="literal">DefinitionService</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">DefinitionService</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface DefinitionService {

    ProcessDefinition buildProcessDefinition(String deploymentId, String bpmn2Content, ClassLoader classLoader, boolean cache) throws IllegalArgumentException;

    ProcessDefinition getProcessDefinition(String deploymentId, String processId);

    Collection&lt;String&gt; getReusableSubProcesses(String deploymentId, String processId);

    Map&lt;String, String&gt; getProcessVariables(String deploymentId, String processId);

    Map&lt;String, String&gt; getServiceTasks(String deploymentId, String processId);

    Map&lt;String, Collection&lt;String&gt;&gt; getAssociatedEntities(String deploymentId, String processId);

    Collection&lt;UserTaskDefinition&gt; getTasksDefinitions(String deploymentId, String processId);

    Map&lt;String, String&gt; getTaskInputMappings(String deploymentId, String processId, String taskName);

    Map&lt;String, String&gt; getTaskOutputMappings(String deploymentId, String processId, String taskName);

}</pre>
						</p></div></section><section class="section" id="service-process-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.4. Process service</h3></div></div></div><p>
						The deployment and definition services prepare process data in the process engine. To execute processes based on this data, use the process service. The process service supports interaction with the process engine execution environment, including the following actions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Starting a new process instance
							</li><li class="listitem">
								Working with an existing process instance, for example, signalling events, getting information details, and setting values of variables
							</li><li class="listitem">
								Working with work items
							</li></ul></div><p>
						The process service is also a command executor. You can use it to execute commands on the KIE session to extend its capabilities.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The process service is optimized for runtime operations. Use it when you need to alter the process instance, for example, signal events or change variables. For read operations, for example, showing available process instances, use the runtime data service.
						</p></div></div><p>
						The following code sample shows deploying and running a process:
					</p><div class="formalpara"><p class="title"><strong>Deploying and runing a process using the deployment and process services</strong></p><p>
							
<pre class="programlisting language-java">KModuleDeploymentUnit deploymentUnit = new KModuleDeploymentUnit(GROUP_ID, ARTIFACT_ID, VERSION);

deploymentService.deploy(deploymentUnit);

long processInstanceId = processService.startProcess(deploymentUnit.getIdentifier(), "customtask");

ProcessInstance pi = processService.getProcessInstance(processInstanceId);</pre>
						</p></div><p>
						The <code class="literal">startProcess</code> method expects <code class="literal">deploymentId</code> as the first argument. Using this argument, you can start processes in a certain deployment when your application might have multiple deployments.
					</p><p>
						For example, you might deploy different versions of the same process from different KJAR files. You can then start the required version using the correct <code class="literal">deploymentId</code>.
					</p><p>
						The following definition shows the complete <code class="literal">ProcessService</code> interface:
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">ProcessService</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface ProcessService {

	/**
	 * Starts a process with no variables
	 *
	 * @param deploymentId deployment identifier
	 * @param processId process identifier
	 * @return process instance IDentifier
	 * @throws RuntimeException in case of encountered errors
	 * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
	 * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active
	 */
	Long startProcess(String deploymentId, String processId);

	/**
	 * Starts a process and sets variables
	 *
	 * @param deploymentId deployment identifier
	 * @param processId process identifier
	 * @param params process variables
	 * @return process instance IDentifier
	 * @throws RuntimeException in case of encountered errors
	 * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
	 * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active
	 */
    Long startProcess(String deploymentId, String processId, Map&lt;String, Object&gt; params);

	/**
	 * Starts a process with no variables and assigns a correlation key
	 *
	 * @param deploymentId deployment identifier
	 * @param processId process identifier
	 * @param correlationKey correlation key to be assigned to the process instance - must be unique
	 * @return process instance IDentifier
	 * @throws RuntimeException in case of encountered errors
	 * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
     * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active
	 */
	Long startProcess(String deploymentId, String processId, CorrelationKey correlationKey);

	/**
	 * Starts a process, sets variables, and assigns a correlation key
	 *
	 * @param deploymentId deployment identifier
	 * @param processId process identifier
	 * @param correlationKey correlation key to be assigned to the process instance - must be unique
	 * @param params process variables
	 * @return process instance IDentifier
	 * @throws RuntimeException in case of encountered errors
	 * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
     * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active
	 */
    Long startProcess(String deploymentId, String processId, CorrelationKey correlationKey, Map&lt;String, Object&gt; params);

    /**
     * Starts a process at the listed nodes, instead of the normal starting point.
     * This method can be used for restarting a process that was aborted. However,
     * it does not restore the context of a previous process instance. You must
     * supply all necessary variables when calling this method.
     * This method does not guarantee that the process is started in a valid state.
     *
     * @param deploymentId deployment identifier
     * @param processId process identifier
     * @param params process variables
     * @param nodeIds list of BPMN node identifiers where the process must start
     * @return process instance IDentifier
     * @throws RuntimeException in case of encountered errors
     * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
     * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active
     */
    Long startProcessFromNodeIds(String deploymentId, String processId, Map&lt;String, Object&gt; params, String... nodeIds);

    /**
    * Starts a process at the listed nodes, instead of the normal starting point,
    * and assigns a correlation key.
    * This method can be used for restarting a process that was aborted. However,
    * it does not restore the context of a previous process instance. You must
    * supply all necessary variables when calling this method.
    * This method does not guarantee that the process is started in a valid state.
     *
     * @param deploymentId deployment identifier
     * @param processId process identifier
     * @param key correlation key (must be unique)
     * @param params process variables
     * @param nodeIds list of BPMN node identifiers where the process must start.
     * @return process instance IDentifier
     * @throws RuntimeException in case of encountered errors
     * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
     * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active
     */
    Long startProcessFromNodeIds(String deploymentId, String processId, CorrelationKey key, Map&lt;String, Object&gt; params, String... nodeIds);

    /**
     * Aborts the specified process
     *
     * @param processInstanceId process instance unique identifier
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void abortProcessInstance(Long processInstanceId);

    /**
     * Aborts the specified process
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId process instance unique identifier
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void abortProcessInstance(String deploymentId, Long processInstanceId);

    /**
	 * Aborts all specified processes
	 *
	 * @param processInstanceIds list of process instance unique identifiers
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	 */
    void abortProcessInstances(List&lt;Long&gt; processInstanceIds);

    /**
     * Aborts all specified processes
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceIds list of process instance unique identifiers
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void abortProcessInstances(String deploymentId, List&lt;Long&gt; processInstanceIds);

    /**
	 * Signals an event to a single process instance
	 *
	 * @param processInstanceId the process instance unique identifier
	 * @param signalName the ID of the signal in the process
	 * @param event the event object to be passed with the event
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	 */
    void signalProcessInstance(Long processInstanceId, String signalName, Object event);

    /**
     * Signals an event to a single process instance
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId the process instance unique identifier
     * @param signalName the ID of the signal in the process
     * @param event the event object to be passed with the event
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void signalProcessInstance(String deploymentId, Long processInstanceId, String signalName, Object event);

    /**
	 * Signal an event to a list of process instances
	 *
	 * @param processInstanceIds list of process instance unique identifiers
	 * @param signalName the ID of the signal in the process
	 * @param event the event object to be passed with the event
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	 */
    void signalProcessInstances(List&lt;Long&gt; processInstanceIds, String signalName, Object event);

    /**
     * Signal an event to a list of process instances
     *
     * @param deploymentId deployment to which the process instances belong
     * @param processInstanceIds list of process instance unique identifiers
     * @param signalName the ID of the signal in the process
     * @param event the event object to be passed with the event
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void signalProcessInstances(String deploymentId, List&lt;Long&gt; processInstanceIds, String signalName, Object event);

		/**
     * Signal an event to a single process instance by correlation key
     *
     * @param correlationKey the unique correlation key of the process instance
     * @param signalName the ID of the signal in the process
     * @param event the event object to be passed in with the event
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given key was not found
     */
    void signalProcessInstanceByCorrelationKey(CorrelationKey correlationKey, String signalName, Object event);

		/**
		 * Signal an event to a single process instance by correlation key
		 *
		 * @param deploymentId deployment to which the process instance belongs
		 * @param correlationKey the unique correlation key of the process instance
		 * @param signalName the ID of the signal in the process
		 * @param event the event object to be passed in with the event
		 * @throws DeploymentNotFoundException in case the deployment unit was not found
		 * @throws ProcessInstanceNotFoundException in case a process instance with the given key was not found
		 */
		void signalProcessInstanceByCorrelationKey(String deploymentId, CorrelationKey correlationKey, String signalName, Object event);

		/**
		 * Signal an event to given list of correlation keys
		 *
		 * @param correlationKeys list of unique correlation keys of process instances
		 * @param signalName the ID of the signal in the process
		 * @param event the event object to be passed in with the event
		 * @throws DeploymentNotFoundException in case the deployment unit was not found
		 * @throws ProcessInstanceNotFoundException in case a process instance with one of the given keys was not found
		 */
		void signalProcessInstancesByCorrelationKeys(List&lt;CorrelationKey&gt; correlationKeys, String signalName, Object event);

		/**
		 * Signal an event to given list of correlation keys
		 *
		 * @param deploymentId deployment to which the process instances belong
		 * @param correlationKeys list of unique correlation keys of process instances
		 * @param signalName the ID of the signal in the process
		 * @param event the event object to be passed in with the event
		 * @throws DeploymentNotFoundException in case the deployment unit was not found
		 * @throws ProcessInstanceNotFoundException in case a process instance with one of the given keys was not found
		 */
		void signalProcessInstancesByCorrelationKeys(String deploymentId, List&lt;CorrelationKey&gt; correlationKeys, String signalName, Object event);

		/**
		 * Signal an event to a any process instance that listens to give signal that belongs to given deployment
		 *
		 * @param deployment information for the process's kjar
		 * @param signalName the signal's id in the process
		 * @param event the event object to be passed in with the event
		 * @throws DeploymentNotFoundException in case deployment unit was not found
		 */


    /**
     * Signal an event to a any process instance that listens to a given signal and belongs to a given deployment
     *
     * @param deployment identifier of the deployment
     * @param signalName the ID of the signal in the process
     * @param event the event object to be passed with the event
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     */
    void signalEvent(String deployment, String signalName, Object event);

    /**
	 * Returns process instance information. Will return null if no
	 * active process with the ID is found
	 *
	 * @param processInstanceId The process instance unique identifier
	 * @return Process instance information
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 */
    ProcessInstance getProcessInstance(Long processInstanceId);

    /**
     * Returns process instance information. Will return null if no
     * active process with the ID is found
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId The process instance unique identifier
     * @return Process instance information
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     */
    ProcessInstance getProcessInstance(String deploymentId, Long processInstanceId);

    /**
	 * Returns process instance information. Will return null if no
	 * active process with that correlation key is found
	 *
	 * @param correlationKey correlation key assigned to the process instance
	 * @return Process instance information
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 */
    ProcessInstance getProcessInstance(CorrelationKey correlationKey);

    /**
     * Returns process instance information. Will return null if no
     * active process with that correlation key is found
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param correlationKey correlation key assigned to the process instance
     * @return Process instance information
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     */
    ProcessInstance getProcessInstance(String deploymentId, CorrelationKey correlationKey);

    /**
	 * Sets a process variable.
	 * @param processInstanceId The process instance unique identifier
	 * @param variableId The variable ID to set
	 * @param value The variable value
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	 */
    void setProcessVariable(Long processInstanceId, String variableId, Object value);

    /**
     * Sets a process variable.
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId The process instance unique identifier
     * @param variableId The variable id to set.
     * @param value The variable value.
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void setProcessVariable(String deploymentId, Long processInstanceId, String variableId, Object value);

    /**
	 * Sets process variables.
	 *
	 * @param processInstanceId The process instance unique identifier
	 * @param variables map of process variables (key = variable name, value = variable value)
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	 */
    void setProcessVariables(Long processInstanceId, Map&lt;String, Object&gt; variables);

    /**
     * Sets process variables.
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId The process instance unique identifier
     * @param variables map of process variables (key = variable name, value = variable value)
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    void setProcessVariables(String deploymentId, Long processInstanceId, Map&lt;String, Object&gt; variables);

    /**
	 * Gets a process instance variable.
	 *
	 * @param processInstanceId the process instance unique identifier
	 * @param variableName the variable name to get from the process
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	*/
    Object getProcessInstanceVariable(Long processInstanceId, String variableName);

    /**
     * Gets a process instance variable.
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId the process instance unique identifier
     * @param variableName the variable name to get from the process
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
    */
    Object getProcessInstanceVariable(String deploymentId, Long processInstanceId, String variableName);

	/**
	 * Gets a process instance variable values.
	 *
	 * @param processInstanceId The process instance unique identifier
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
	*/
	Map&lt;String, Object&gt; getProcessInstanceVariables(Long processInstanceId);

	/**
     * Gets a process instance variable values.
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId The process instance unique identifier
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
    */
    Map&lt;String, Object&gt; getProcessInstanceVariables(String deploymentId, Long processInstanceId);

	/**
	 * Returns all signals available in current state of given process instance
	 *
	 * @param processInstanceId process instance ID
	 * @return list of available signals or empty list if no signals are available
	 */
    Collection&lt;String&gt; getAvailableSignals(Long processInstanceId);

    /**
     * Returns all signals available in current state of given process instance
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId process instance ID
     * @return list of available signals or empty list if no signals are available
     */
    Collection&lt;String&gt; getAvailableSignals(String deploymentId, Long processInstanceId);

	/**
	 * Completes the specified WorkItem with the given results
	 *
	 * @param id workItem ID
	 * @param results results of the workItem
	 * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws WorkItemNotFoundException in case a work item with the given ID was not found
	 */
    void completeWorkItem(Long id, Map&lt;String, Object&gt; results);

    /**
     * Completes the specified WorkItem with the given results
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId process instance ID to which the work item belongs
     * @param id workItem ID
     * @param results results of the workItem
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws WorkItemNotFoundException in case a work item with the given ID was not found
     */
    void completeWorkItem(String deploymentId, Long processInstanceId, Long id, Map&lt;String, Object&gt; results);

    /**
     * Abort the specified workItem
     *
     * @param id workItem ID
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws WorkItemNotFoundException in case a work item with the given ID was not found
     */
    void abortWorkItem(Long id);

    /**
     * Abort the specified workItem
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId process instance ID to which the work item belongs
     * @param id workItem ID
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws WorkItemNotFoundException in case a work item with the given ID was not found
     */
    void abortWorkItem(String deploymentId, Long processInstanceId, Long id);

    /**
     * Returns the specified workItem
     *
     * @param id workItem ID
     * @return The specified workItem
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws WorkItemNotFoundException in case a work item with the given ID was not found
     */
    WorkItem getWorkItem(Long id);

    /**
     * Returns the specified workItem
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId process instance ID to which the work item belongs
     * @param id workItem ID
     * @return The specified workItem
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws WorkItemNotFoundException in case a work item with the given ID was not found
     */
    WorkItem getWorkItem(String deploymentId, Long processInstanceId, Long id);

    /**
     * Returns active work items by process instance ID.
     *
     * @param processInstanceId process instance ID
     * @return The list of active workItems for the process instance
     * @throws DeploymentNotFoundException in case the deployment unit was not found
	 * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    List&lt;WorkItem&gt; getWorkItemByProcessInstance(Long processInstanceId);

    /**
     * Returns active work items by process instance ID.
     *
     * @param deploymentId deployment to which the process instance belongs
     * @param processInstanceId process instance ID
     * @return The list of active workItems for the process instance
     * @throws DeploymentNotFoundException in case the deployment unit was not found
     * @throws ProcessInstanceNotFoundException in case a process instance with the given ID was not found
     */
    List&lt;WorkItem&gt; getWorkItemByProcessInstance(String deploymentId, Long processInstanceId);


    /**
     * Executes the provided command on the underlying command executor (usually KieSession)
     * @param deploymentId deployment identifier
     * @param command actual command for execution
     * @return results of the command execution
     * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
     * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active for restricted commands (for example, start process)
     */
    public &lt;T&gt; T execute(String deploymentId, Command&lt;T&gt; command);

    /**
     * Executes the provided command on the underlying command executor (usually KieSession)
     * @param deploymentId deployment identifier
     * @param context context implementation to be used to get the runtime engine
     * @param command actual command for execution
     * @return results of the command execution
     * @throws DeploymentNotFoundException in case a deployment with the given deployment identifier does not exist
     * @throws DeploymentNotActiveException in case the deployment with the given deployment identifier is not active for restricted commands (for example, start process)
     */
    public &lt;T&gt; T execute(String deploymentId, Context&lt;?&gt; context, Command&lt;T&gt; command);

}</pre>
						</p></div><section class="section" id="service-runtime-data-con_process-engine"><div class="titlepage"><div><div><h4 class="title">66.3.4.1. Runtime Data Service</h4></div></div></div><p>
							You can use the runtime data service to retrieve all runtime information about processes, such as started process instances and executed node instances.
						</p><p>
							For example, you can build a list-based UI to show process definitions, process instances, tasks for a given user, and other data, based on information provided by the runtime data service.
						</p><p>
							This service is optimized to be as efficient as possible while providing all required information.
						</p><p>
							The following examples show various usage of this service.
						</p><div class="formalpara"><p class="title"><strong>Retrieving all process definitions</strong></p><p>
								
<pre class="programlisting language-java">Collection definitions = runtimeDataService.getProcesses(new QueryContext());</pre>
							</p></div><div class="formalpara"><p class="title"><strong>Retrieving active process instances</strong></p><p>
								
<pre class="programlisting language-java">Collection&lt;processinstancedesc&gt; instances = runtimeDataService.getProcessInstances(new QueryContext());</pre>
							</p></div><div class="formalpara"><p class="title"><strong>Retrieving active nodes for a particular process instance</strong></p><p>
								
<pre class="programlisting language-java">Collection&lt;nodeinstancedesc&gt; instances = runtimeDataService.getProcessInstanceHistoryActive(processInstanceId, new QueryContext());</pre>
							</p></div><div class="formalpara"><p class="title"><strong>Retrieving tasks assigned to the user <code class="literal">john</code></strong></p><p>
								
<pre class="programlisting language-java">List&lt;tasksummary&gt; taskSummaries = runtimeDataService.getTasksAssignedAsPotentialOwner("john", new QueryFilter(0, 10));</pre>
							</p></div><p>
							The runtime data service methods support two important parameters, <code class="literal">QueryContext</code> and <code class="literal">QueryFilter</code>. <code class="literal">QueryFilter</code> is an extension of <code class="literal">QueryContext</code>. You can use these parameters to manage the result set, providing pagination, sorting, and ordering. You can also use them to apply additional filtering when searching for user tasks.
						</p><p>
							The following definition shows the complete <code class="literal">RuntimeDataService</code> interface:
						</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">RuntimeDataService</code> interface</strong></p><p>
								
<pre class="programlisting language-java">public interface RuntimeDataService {

    // Process instance information

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstances(QueryContext queryContext);

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstances(List&lt;Integer&gt; states, String initiator, QueryContext queryContext);

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstancesByProcessId(List&lt;Integer&gt; states, String processId, String initiator, QueryContext queryContext);

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstancesByProcessName(List&lt;Integer&gt; states, String processName, String initiator, QueryContext queryContext);

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstancesByDeploymentId(String deploymentId, List&lt;Integer&gt; states, QueryContext queryContext);

    ProcessInstanceDesc getProcessInstanceById(long processInstanceId);

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstancesByProcessDefinition(String processDefId, QueryContext queryContext);

    Collection&lt;ProcessInstanceDesc&gt; getProcessInstancesByProcessDefinition(String processDefId, List&lt;Integer&gt; states, QueryContext queryContext);


    // Node and Variable instance information

    NodeInstanceDesc getNodeInstanceForWorkItem(Long workItemId);

    Collection&lt;NodeInstanceDesc&gt; getProcessInstanceHistoryActive(long processInstanceId, QueryContext queryContext);

    Collection&lt;NodeInstanceDesc&gt; getProcessInstanceHistoryCompleted(long processInstanceId, QueryContext queryContext);

    Collection&lt;NodeInstanceDesc&gt; getProcessInstanceFullHistory(long processInstanceId, QueryContext queryContext);

    Collection&lt;NodeInstanceDesc&gt; getProcessInstanceFullHistoryByType(long processInstanceId, EntryType type, QueryContext queryContext);

    Collection&lt;VariableDesc&gt; getVariablesCurrentState(long processInstanceId);

    Collection&lt;VariableDesc&gt; getVariableHistory(long processInstanceId, String variableId, QueryContext queryContext);


    // Process information

    Collection&lt;ProcessDefinition&gt; getProcessesByDeploymentId(String deploymentId, QueryContext queryContext);

    Collection&lt;ProcessDefinition&gt; getProcessesByFilter(String filter, QueryContext queryContext);

    Collection&lt;ProcessDefinition&gt; getProcesses(QueryContext queryContext);

    Collection&lt;String&gt; getProcessIds(String deploymentId, QueryContext queryContext);

    ProcessDefinition getProcessById(String processId);

    ProcessDefinition getProcessesByDeploymentIdProcessId(String deploymentId, String processId);

	// user task query operations

    UserTaskInstanceDesc getTaskByWorkItemId(Long workItemId);

    UserTaskInstanceDesc getTaskById(Long taskId);

    List&lt;TaskSummary&gt; getTasksAssignedAsBusinessAdministrator(String userId, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksAssignedAsBusinessAdministratorByStatus(String userId, List&lt;Status&gt; statuses, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksAssignedAsPotentialOwner(String userId, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksAssignedAsPotentialOwner(String userId, List&lt;String&gt; groupIds, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksAssignedAsPotentialOwnerByStatus(String userId, List&lt;Status&gt; status, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksAssignedAsPotentialOwner(String userId, List&lt;String&gt; groupIds, List&lt;Status&gt; status, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksAssignedAsPotentialOwnerByExpirationDateOptional(String userId, List&lt;Status&gt; status, Date from, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksOwnedByExpirationDateOptional(String userId, List&lt;Status&gt; strStatuses, Date from, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksOwned(String userId, QueryFilter filter);

    List&lt;TaskSummary&gt; getTasksOwnedByStatus(String userId, List&lt;Status&gt; status, QueryFilter filter);

    List&lt;Long&gt; getTasksByProcessInstanceId(Long processInstanceId);

    List&lt;TaskSummary&gt; getTasksByStatusByProcessInstanceId(Long processInstanceId, List&lt;Status&gt; status, QueryFilter filter);

    List&lt;AuditTask&gt; getAllAuditTask(String userId, QueryFilter filter);

}</pre>
							</p></div></section><section class="section" id="service-usertask-con_process-engine"><div class="titlepage"><div><div><h4 class="title">66.3.4.2. User Task Service</h4></div></div></div><p>
							The user task service covers the complete lifecycle of an individual task, and you can use the service to manage a user task from start to end.
						</p><p>
							Task queries are not a part of the user task service. Use the runtime data service to query for tasks. Use the user task service for scoped operations on one task, including the following actions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Modification of selected properties
								</li><li class="listitem">
									Access to task variables
								</li><li class="listitem">
									Access to task attachments
								</li><li class="listitem">
									Access to task comments
								</li></ul></div><p>
							The user task service is also a command executor. You can use it to execute custom task commands.
						</p><p>
							The following example shows starting a process and interacting with a task in the process:
						</p><div class="formalpara"><p class="title"><strong>Starting a process and interacting with a user task in this process</strong></p><p>
								
<pre class="programlisting language-java">long processInstanceId =
processService.startProcess(deployUnit.getIdentifier(), "org.jbpm.writedocument");

List&lt;Long&gt; taskIds =
runtimeDataService.getTasksByProcessInstanceId(processInstanceId);

Long taskId = taskIds.get(0);

userTaskService.start(taskId, "john");
UserTaskInstanceDesc task = runtimeDataService.getTaskById(taskId);

Map&lt;String, Object&gt; results = new HashMap&lt;String, Object&gt;();
results.put("Result", "some document data");
userTaskService.complete(taskId, "john", results);</pre>
							</p></div></section></section><section class="section" id="service-quartz-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.5. Quartz-based timer service</h3></div></div></div><p>
						The process engine provides a cluster-ready timer service using Quartz. You can use the service to dispose or load your KIE session at any time. The service can manage how long a KIE session is active in order to fire each timer appropriately.
					</p><p>
						The following example shows a basic Quartz configuration file for a clustered environment:
					</p><div class="formalpara"><p class="title"><strong>Quartz configuration file for a clustered environment</strong></p><p>
							
<pre class="programlisting language-xml">#============================================================================
# Configure Main Scheduler Properties
#============================================================================

org.quartz.scheduler.instanceName = jBPMClusteredScheduler
org.quartz.scheduler.instanceId = AUTO

#============================================================================
# Configure ThreadPool
#============================================================================

org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
org.quartz.threadPool.threadPriority = 5

#============================================================================
# Configure JobStore
#============================================================================

org.quartz.jobStore.misfireThreshold = 60000

org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreCMT
org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.useProperties=false
org.quartz.jobStore.dataSource=managedDS
org.quartz.jobStore.nonManagedTXDataSource=nonManagedDS
org.quartz.jobStore.tablePrefix=QRTZ_
org.quartz.jobStore.isClustered=true
org.quartz.jobStore.clusterCheckinInterval = 20000

#=========================================================================
# Configure Datasources
#=========================================================================
org.quartz.dataSource.managedDS.jndiURL=jboss/datasources/psbpmsDS
org.quartz.dataSource.nonManagedDS.jndiURL=jboss/datasources/quartzNonManagedDS</pre>
						</p></div><p>
						You must modify the previous example to fit your environment.
					</p></section><section class="section" id="service-query-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.6. Query service</h3></div></div></div><p>
						The query service provides advanced search capabilities that are based on Dashbuilder data sets.
					</p><p>
						With this approach, you can control how to retrieve data from underlying data store. You can use complex <code class="literal">JOIN</code> statements with external tables such as JPA entities tables or custom systems database tables.
					</p><p>
						The query service is built around the following two sets of operations:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Management operations:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Register a query definition
									</li><li class="listitem">
										Replace a query definition
									</li><li class="listitem">
										Unregister (remove) a query definition
									</li><li class="listitem">
										Get a query definition
									</li><li class="listitem">
										Get all registered query definitions
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Runtime operations:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Simple query based on <code class="literal">QueryParam</code> as the filter provider
									</li><li class="listitem">
										Advanced query based on <code class="literal">QueryParamBuilder</code> as the filter provider
									</li></ul></div></li></ul></div><p>
						Dashbuilder data sets provide support for multiple data sources, such as CSV, SQL, and Elastic Search. However, the process engine uses a RDBMS-based backend and focuses on SQL-based data sets.
					</p><p>
						Therefore, the process engine query service is a subset of Dashbuilder data set capabilities that enables efficient queries with a simple API.
					</p><section class="section" id="service-query-keyclasses-ref_process-engine"><div class="titlepage"><div><div><h4 class="title">66.3.6.1. Key classes of the query service</h4></div></div></div><p>
							The query service relies on the following key classes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">QueryDefinition</code>: Represents the definition of a data set. The definition consists of a unique name, an SQL expression (the query) and the <span class="emphasis"><em>source</em></span>, the JNDI name of the data source to use when performing queries.
								</li><li class="listitem">
									<code class="literal">QueryParam</code>: The basic structure that represents an individual query parameter or condition. This structure consists of the column name, operator, and expected values.
								</li><li class="listitem">
									<code class="literal">QueryResultMapper</code>: The class that maps raw dataset data (rows and columns) to an object representation.
								</li><li class="listitem">
									<code class="literal">QueryParamBuilder</code>: The class that builds query filters that are applied to the query definition to invoke the query.
								</li></ul></div><div class="formalpara"><p class="title"><strong>QueryResultMapper</strong></p><p>
								<code class="literal">QueryResultMapper</code> maps data taken from a database (dataset) to an object representation. It is similar to ORM providers such as <code class="literal">hibernate</code>, which map tables to entities.
							</p></div><p>
							Many object types can be used for representing dataset results. Therefore, existing mappers might not always suit your needs. Mappers in <code class="literal">QueryResultMapper</code> are pluggable and you can provide your own mapper when necessary, in order to transform dataset data into any type you need.
						</p><p>
							The process engine supplies the following mappers:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.ProcessInstanceQueryMapper</code>, registered with the name <code class="literal">ProcessInstances</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.ProcessInstanceWithVarsQueryMapper</code>, registered with the name <code class="literal">ProcessInstancesWithVariables</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.ProcessInstanceWithCustomVarsQueryMapper</code>, registered with the name <code class="literal">ProcessInstancesWithCustomVariables</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.UserTaskInstanceQueryMapper</code>, registered with the name <code class="literal">UserTasks</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.UserTaskInstanceWithVarsQueryMapper</code>, registered with the name <code class="literal">UserTasksWithVariables</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.UserTaskInstanceWithCustomVarsQueryMapper</code>, registered with name <code class="literal">UserTasksWithCustomVariables</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.TaskSummaryQueryMapper</code>, registered with the name <code class="literal">TaskSummaries</code>
								</li><li class="listitem">
									<code class="literal">org.jbpm.kie.services.impl.query.mapper.RawListQueryMapper</code>, registered with the name <code class="literal">RawList</code>
								</li></ul></div><p>
							Each <code class="literal">QueryResultMapper</code> is registered with a unique string name. You can look up mappers by this name instead of referencing the full class name. This feature is especially important when using EJB remote invocation of services, because it avoids relying on a particular implementation on the client side.
						</p><p>
							To reference a <code class="literal">QueryResultMapper</code> by the string name, use <code class="literal">NamedQueryMapper</code>, which is a part of the <code class="literal">jbpm-services-api</code> module. This class acts as a delegate (lazy delegate) and looks up the actual mapper when the query is performed.
						</p><div class="formalpara"><p class="title"><strong>Using <code class="literal">NamedQueryMapper</code></strong></p><p>
								
<pre class="programlisting language-java">queryService.query("my query def", new NamedQueryMapper&lt;Collection&lt;ProcessInstanceDesc&gt;&gt;("ProcessInstances"), new QueryContext());</pre>
							</p></div><div class="formalpara"><p class="title"><strong>QueryParamBuilder</strong></p><p>
								<code class="literal">QueryParamBuilder</code> provides an advanced way of building filters for data sets.
							</p></div><p>
							By default, when you use a query method of <code class="literal">QueryService</code> that accepts zero or more <code class="literal">QueryParam</code> instances, all of these parameters are joined with an <code class="literal">AND</code> operator, so a data entry must match all of them.
						</p><p>
							However, sometimes more complicated relationships between parameters are required. You can use <code class="literal">QueryParamBuilder</code> to build custom builders that provide filters at the time the query is issued.
						</p><p>
							One existing implementation of <code class="literal">QueryParamBuilder</code> is available in the process engine. It covers default <code class="literal">QueryParams</code> that are based on the <span class="emphasis"><em>core functions</em></span>.
						</p><p>
							These core functions are SQL-based conditions, including the following conditions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">IS_NULL</code>
								</li><li class="listitem">
									<code class="literal">NOT_NULL</code>
								</li><li class="listitem">
									<code class="literal">EQUALS_TO</code>
								</li><li class="listitem">
									<code class="literal">NOT_EQUALS_TO</code>
								</li><li class="listitem">
									<code class="literal">LIKE_TO</code>
								</li><li class="listitem">
									<code class="literal">GREATER_THAN</code>
								</li><li class="listitem">
									<code class="literal">GREATER_OR_EQUALS_TO</code>
								</li><li class="listitem">
									<code class="literal">LOWER_THAN</code>
								</li><li class="listitem">
									<code class="literal">LOWER_OR_EQUALS_TO</code>
								</li><li class="listitem">
									<code class="literal">BETWEEN</code>
								</li><li class="listitem">
									<code class="literal">IN</code>
								</li><li class="listitem">
									<code class="literal">NOT_IN</code>
								</li></ul></div><p>
							Before invoking a query, the process engine invokes the build method of the <code class="literal">QueryParamBuilder</code> interface as many times as necessary while the method returns a non-null value. Because of this approach, you can build up complex filter options that could not be expressed by a simple list of <code class="literal">QueryParams</code>.
						</p><p>
							The following example shows a basic implementation of <code class="literal">QueryParamBuilder</code>. It relies on the DashBuilder Dataset API.
						</p><div class="formalpara"><p class="title"><strong>Basic implementation of <code class="literal">QueryParamBuilder</code></strong></p><p>
								
<pre class="programlisting language-java">public class TestQueryParamBuilder implements QueryParamBuilder&lt;ColumnFilter&gt; {

    private Map&lt;String, Object&gt; parameters;
    private boolean built = false;
    public TestQueryParamBuilder(Map&lt;String, Object&gt; parameters) {
        this.parameters = parameters;
    }

    @Override
    public ColumnFilter build() {
        // return null if it was already invoked
        if (built) {
            return null;
        }

        String columnName = "processInstanceId";

        ColumnFilter filter = FilterFactory.OR(
                FilterFactory.greaterOrEqualsTo((Long)parameters.get("min")),
                FilterFactory.lowerOrEqualsTo((Long)parameters.get("max")));
        filter.setColumnId(columnName);

        built = true;
        return filter;
    }

}</pre>
							</p></div><p>
							After implementing the builder, you can use an instance of this class when performing a query with the <code class="literal">QueryService</code> service, as shown in the following example:
						</p><div class="formalpara"><p class="title"><strong>Running a query with the <code class="literal">QueryService</code> service</strong></p><p>
								
<pre class="programlisting language-java">queryService.query("my query def", ProcessInstanceQueryMapper.get(), new QueryContext(), paramBuilder);</pre>
							</p></div></section><section class="section" id="service-query-using-proc_process-engine"><div class="titlepage"><div><div><h4 class="title">66.3.6.2. Using the query service in a typical scenario</h4></div></div></div><p>
							The following procedure outlines the typical way in which your code might use the query service.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Define the data set, which is a view of the data you want to use. Use the <code class="literal">QueryDefinition</code> class in the services API to complete this operation:
								</p><div class="formalpara"><p class="title"><strong>Defining the data set</strong></p><p>
										
<pre class="programlisting language-java">SqlQueryDefinition query = new SqlQueryDefinition("getAllProcessInstances", "java:jboss/datasources/ExampleDS");
query.setExpression("select * from processinstancelog");</pre>
									</p></div><p class="simpara">
									This example represents the simplest possible query definition.
								</p><p class="simpara">
									The constructor requires the following parameters:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											A unique name that identifies the query at run time
										</li><li class="listitem"><p class="simpara">
											A JNDI data source name to use for performing queries with this definition
										</p><p class="simpara">
											The parameter of the <code class="literal">setExpression()</code> method is the SQL statement that builds up the data set view. Queries in the query service use data from this view and filter this data as necessary.
										</p></li></ul></div></li><li class="listitem"><p class="simpara">
									Register the query:
								</p><div class="formalpara"><p class="title"><strong>Registering a query</strong></p><p>
										
<pre class="programlisting language-java">queryService.registerQuery(query);</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									If required, collect all the data from the dataset, without any filtering:
								</p><div class="formalpara"><p class="title"><strong>Collecting all the data from the dataset</strong></p><p>
										
<pre class="programlisting language-java">Collection&lt;ProcessInstanceDesc&gt; instances = queryService.query("getAllProcessInstances", ProcessInstanceQueryMapper.get(), new QueryContext());</pre>
									</p></div><p class="simpara">
									This simple query uses defaults from <code class="literal">QueryContext</code> for paging and sorting.
								</p></li><li class="listitem"><p class="simpara">
									If required, use a <code class="literal">QueryContext</code> object that changes the defaults of the paging and sorting:
								</p><div class="formalpara"><p class="title"><strong>Changing defaults using a <code class="literal">QueryContext</code> object</strong></p><p>
										
<pre class="programlisting language-java">QueryContext ctx = new QueryContext(0, 100, "start_date", true);
         
Collection&lt;ProcessInstanceDesc&gt; instances = queryService.query("getAllProcessInstances", ProcessInstanceQueryMapper.get(), ctx);</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									If required, use the query to filter data:
								</p><div class="formalpara"><p class="title"><strong>Using a query to filter data</strong></p><p>
										
<pre class="programlisting language-java">// single filter param
Collection&lt;ProcessInstanceDesc&gt; instances = queryService.query("getAllProcessInstances", ProcessInstanceQueryMapper.get(), new QueryContext(), QueryParam.likeTo(COLUMN_PROCESSID, true, "org.jbpm%"));
 
// multiple filter params (AND)
Collection&lt;ProcessInstanceDesc&gt; instances = queryService.query("getAllProcessInstances", ProcessInstanceQueryMapper.get(), new QueryContext(),
 QueryParam.likeTo(COLUMN_PROCESSID, true, "org.jbpm%"),
 QueryParam.in(COLUMN_STATUS, 1, 3));</pre>
									</p></div></li></ol></div><p>
							With the query service, you can define what data to fetch and how to filter it. Limitation of the JPA provider or other similar limitations do not apply. You can tailor database queries to your environment to increase performance.
						</p></section></section><section class="section" id="service-advanceruntimedata-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.7. Advanced query service</h3></div></div></div><p>
						The advanced query service provides capabilities to search for processes and tasks, based on process and task attributes, process variables, and internal variables of user tasks. The search automatically covers all existing processes in the process engine.
					</p><p>
						The names and required values of attributes and variables are defined in <code class="literal">QueryParam</code> objects.
					</p><p>
						Process attributes include process instance ID, correlation key, process definition ID, and deployment ID. Task attributes include task name, owner, and status.
					</p><p>
						The following search methods are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">queryProcessByVariables</code>: Search for process instances based on a list of process attributes and process variable values. To be included in the result, a process instance must have the listed attributes and the listed values in its process variables.
							</li><li class="listitem">
								<code class="literal">queryProcessByVariablesAndTask</code>: Search for process instances based on a list of process attributes, process variable values, and task variable values. To be included in the result, a process instance must have the listed attributes and the listed values in its process variables. It also must include a task with the listed values in its task variables.
							</li><li class="listitem">
								<code class="literal">queryUserTasksByVariables</code>: Search for user tasks based on a list of task attributes, task variable values, and process variable values. To be included in the result, a task must have the listed attributes and listed values in its task variables. It also must be included in a process with the listed values in its process variables.
							</li></ul></div><p>
						The service is provided by the <code class="literal">AdvanceRuntimeDataService</code> class. The interface for this class also defines predefined task and process attribute names.
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">AdvanceRuntimeDataService</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface AdvanceRuntimeDataService {

    String TASK_ATTR_NAME = "TASK_NAME";
    String TASK_ATTR_OWNER = "TASK_OWNER";
    String TASK_ATTR_STATUS = "TASK_STATUS";
    String PROCESS_ATTR_INSTANCE_ID = "PROCESS_INSTANCE_ID";
    String PROCESS_ATTR_CORRELATION_KEY = "PROCESS_CORRELATION_KEY";
    String PROCESS_ATTR_DEFINITION_ID = "PROCESS_DEFINITION_ID";
    String PROCESS_ATTR_DEPLOYMENT_ID = "PROCESS_DEPLOYMENT_ID";
    String PROCESS_COLLECTION_VARIABLES = "ATTR_COLLECTION_VARIABLES";

    List&lt;ProcessInstanceWithVarsDesc&gt; queryProcessByVariables(List&lt;QueryParam&gt; attributes,
      List&lt;QueryParam&gt; processVariables, QueryContext queryContext);

    List&lt;ProcessInstanceWithVarsDesc&gt; queryProcessByVariablesAndTask(List&lt;QueryParam&gt; attributes,
       List&lt;QueryParam&gt; processVariables, List&lt;QueryParam&gt; taskVariables,
       List&lt;String&gt; potentialOwners, QueryContext queryContext);

    List&lt;UserTaskInstanceWithPotOwnerDesc&gt; queryUserTasksByVariables(List&lt;QueryParam&gt; attributes,
       List&lt;QueryParam&gt; taskVariables, List&lt;QueryParam&gt; processVariables,
       List&lt;String&gt; potentialOwners, QueryContext queryContext);
}</pre>
						</p></div></section><section class="section" id="service-migration-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.8. Process instance migration service</h3></div></div></div><p>
						The process instance migration service is a utility for migrating process instances from one deployment to another. Process or task variables are not affected by the migration. However, the new deployment can use a different process definition.
					</p><p>
						For the simplest approach to process migration, let active process instances finish and start new process instances in the new deployment. If this approach is not suitable to your needs, consider the following issues before starting process instance migration:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Backward compatibility
							</li><li class="listitem">
								Data change
							</li><li class="listitem">
								Need for node mapping
							</li></ul></div><p>
						Whenever possible, create backward-compatible processes by extending process definitions. For example, removing nodes from the process definition breaks compatibility. If you make such changes, you must provide node mapping. Process instance migration uses node mapping if an active process instance is in a node that has been removed.
					</p><p>
						A node map contains source node IDs from the old process definition mapped to target node IDs in the new process definition. You can map nodes of the same type only, such as a user task to a user task.
					</p><p>
						Red Hat Process Automation Manager offers several implementations of the migration service:
					</p><div class="formalpara"><p class="title"><strong>Methods in the <code class="literal">ProcessInstanceMigrationService</code> interface that implement the migration service</strong></p><p>
							
<pre class="programlisting language-java">public interface ProcessInstanceMigrationService {
 /**
 * Migrates a given process instance that belongs to the source deployment into the target process ID that belongs to the target deployment.
 * The following rules are enforced:
 * &lt;ul&gt;
 * &lt;li&gt;the source deployment ID must point to an existing deployment&lt;/li&gt;
 * &lt;li&gt;the process instance ID must point to an existing and active process instance&lt;/li&gt;
 * &lt;li&gt;the target deployment must exist&lt;/li&gt;
 * &lt;li&gt;the target process ID must exist in the target deployment&lt;/li&gt;
 * &lt;/ul&gt;
 * Returns a migration report regardless of migration being successful or not; examine the report for the outcome of the migration.
 * @param sourceDeploymentId deployment to which the process instance to be migrated belongs
 * @param processInstanceId ID of the process instance to be migrated
 * @param targetDeploymentId ID of the deployment to which the target process belongs
 * @param targetProcessId ID of the process to which the process instance should be migrated
 * @return returns complete migration report
 */
 MigrationReport migrate(String sourceDeploymentId, Long processInstanceId, String targetDeploymentId, String targetProcessId);
 /**
 * Migrates a given process instance (with node mapping) that belongs to source deployment into the target process ID that belongs to the target deployment.
 * The following rules are enforced:
 * &lt;ul&gt;
 * &lt;li&gt;the source deployment ID must point to an existing deployment&lt;/li&gt;
 * &lt;li&gt;the process instance ID must point to an existing and active process instance&lt;/li&gt;
 * &lt;li&gt;the target deployment must exist&lt;/li&gt;
 * &lt;li&gt;the target process ID must exist in the target deployment&lt;/li&gt;
 * &lt;/ul&gt;
 * Returns a migration report regardless of migration being successful or not; examine the report for the outcome of the migration.
 * @param sourceDeploymentId deployment to which the process instance to be migrated belongs
 * @param processInstanceId ID of the process instance to be migrated
 * @param targetDeploymentId ID of the deployment to which the target process belongs
 * @param targetProcessId ID of the process to which the process instance should be migrated
 * @param nodeMapping node mapping - source and target unique IDs of nodes to be mapped - from process instance active nodes to new process nodes
 * @return returns complete migration report
 */
 MigrationReport migrate(String sourceDeploymentId, Long processInstanceId, String targetDeploymentId, String targetProcessId, Map&lt;String, String&gt; nodeMapping);
 /**
 * Migrates given process instances that belong to the source deployment into a target process ID that belongs to the target deployment.
 * The following rules are enforced:
 * &lt;ul&gt;
 * &lt;li&gt;the source deployment ID must point to an existing deployment&lt;/li&gt;
 * &lt;li&gt;the process instance ID must point to an existing and active process instance&lt;/li&gt;
 * &lt;li&gt;the target deployment must exist&lt;/li&gt;
 * &lt;li&gt;the target process ID must exist in the target deployment&lt;/li&gt;
 * &lt;/ul&gt;
 * Returns a migration report regardless of migration being successful or not; examine the report for the outcome of the migration.
 * @param sourceDeploymentId deployment to which the process instances to be migrated belong
 * @param processInstanceIds list of process instance IDs to be migrated
 * @param targetDeploymentId ID of the deployment to which the target process belongs
 * @param targetProcessId ID of the process to which the process instances should be migrated
 * @return returns complete migration report
 */
 List&lt;MigrationReport&gt; migrate(String sourceDeploymentId, List&lt;Long&gt; processInstanceIds, String targetDeploymentId, String targetProcessId);
 /**
 * Migrates given process instances (with node mapping) that belong to the source deployment into a target process ID that belongs to the target deployment.
 * The following rules are enforced:
 * &lt;ul&gt;
 * &lt;li&gt;the source deployment ID must point to an existing deployment&lt;/li&gt;
 * &lt;li&gt;the process instance ID must point to an existing and active process instance&lt;/li&gt;
 * &lt;li&gt;the target deployment must exist&lt;/li&gt;
 * &lt;li&gt;the target process ID must exist in the target deployment&lt;/li&gt;
 * &lt;/ul&gt;
 * Returns a migration report regardless of migration being successful or not; examine the report for the outcome of the migration.
 * @param sourceDeploymentId deployment to which the process instances to be migrated belong
 * @param processInstanceIds list of process instance ID to be migrated
 * @param targetDeploymentId ID of the deployment to which the target process belongs
 * @param targetProcessId ID of the process to which the process instances should be migrated
 * @param nodeMapping node mapping - source and target unique IDs of nodes to be mapped - from process instance active nodes to new process nodes
 * @return returns list of migration reports one per each process instance
 */
 List&lt;MigrationReport&gt; migrate(String sourceDeploymentId, List&lt;Long&gt; processInstanceIds, String targetDeploymentId, String targetProcessId, Map&lt;String, String&gt; nodeMapping);
}</pre>
						</p></div><p>
						To migrate process instances on a KIE Server, use the following implementations. These methods are similar to the methods in the <code class="literal">ProcessInstanceMigrationService</code> interface, providing the same migration implementations for KIE Server deployments.
					</p><div class="formalpara"><p class="title"><strong>Methods in the <code class="literal">ProcessAdminServicesClient</code> interface that implement the migration service for KIE Server deployments</strong></p><p>
							
<pre class="programlisting language-java">public interface ProcessAdminServicesClient {

    MigrationReportInstance migrateProcessInstance(String containerId, Long processInstanceId, String targetContainerId, String targetProcessId);

    MigrationReportInstance migrateProcessInstance(String containerId, Long processInstanceId, String targetContainerId, String targetProcessId, Map&lt;String, String&gt; nodeMapping);

    List&lt;MigrationReportInstance&gt; migrateProcessInstances(String containerId, List&lt;Long&gt; processInstancesId, String targetContainerId, String targetProcessId);

    List&lt;MigrationReportInstance&gt; migrateProcessInstances(String containerId, List&lt;Long&gt; processInstancesId, String targetContainerId, String targetProcessId, Map&lt;String, String&gt; nodeMapping);
}</pre>
						</p></div><p>
						You can migrate a single process instance or multiple process instances at once. If you migrate multiple process instances, each instance is migrated in a separate transaction to ensure that the migrations do not affect each other.
					</p><p>
						After migration is completed, the <code class="literal">migrate</code> method returns a <code class="literal">MigrationReport</code> object that contains the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The start and end dates of the migration.
							</li><li class="listitem">
								The migration outcome (success or failure).
							</li><li class="listitem">
								A log entry of the <code class="literal">INFO</code>, <code class="literal">WARN</code>, or <code class="literal">ERROR</code> type. The <code class="literal">ERROR</code> message terminates the migration.
							</li></ul></div><p>
						The following example shows a process instance migration:
					</p><div class="formalpara"><p class="title"><strong>Migrating a process instance in a KIE Server deployment</strong></p><p>
							
<pre class="programlisting language-java">import org.kie.server.api.model.admin.MigrationReportInstance;
import org.kie.server.api.marshalling.MarshallingFormat;
import org.kie.server.client.KieServicesClient;
import org.kie.server.client.KieServicesConfiguration;

public class ProcessInstanceMigrationTest{

	private static final String SOURCE_CONTAINER = "com.redhat:MigrateMe:1.0";
  private static final String SOURCE_PROCESS_ID = "MigrateMe.MigrateMev1";
	private static final String TARGET_CONTAINER = "com.redhat:MigrateMe:2";
  private static final String TARGET_PROCESS_ID = "MigrateMe.MigrateMeV2";

	public static void main(String[] args) {

		KieServicesConfiguration config = KieServicesFactory.newRestConfiguration("http://HOST:PORT/kie-server/services/rest/server", "USERNAME", "PASSWORD");
		config.setMarshallingFormat(MarshallingFormat.JSON);
		KieServicesClient client = KieServicesFactory.newKieServicesClient(config);

		long sourcePid = client.getProcessClient().startProcess(SOURCE_CONTAINER, SOURCE_PROCESS_ID);

    // Use the 'report' object to return migration results.
		MigrationReportInstance report = client.getAdminClient().migrateProcessInstance(SOURCE_CONTAINER, sourcePid,TARGET_CONTAINER, TARGET_PROCESS_ID);

		System.out.println("Was migration successful:" + report.isSuccessful());

		client.getProcessClient().abortProcessInstance(TARGET_CONTAINER, sourcePid);

	}
}</pre>
						</p></div><h5 id="known_limitations_of_process_instance_migration">Known limitations of process instance migration</h5><p>
						The following situations can cause a failure of the migration or incorrect migration:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A new or modified task requires inputs that are not available in the migrated process instance.
							</li><li class="listitem">
								You modify the tasks prior to the active task where the changes have an impact on further processing.
							</li><li class="listitem">
								You remove a human task that is currently active. To replace a human task, you must map it to another human task.
							</li><li class="listitem">
								You add a new task parallel to the single active task. As all branches in an <code class="literal">AND</code> gateway are not activated, the process gets stuck.
							</li><li class="listitem">
								You remove active timer events (these events are not changed in the database).
							</li><li class="listitem">
								You fix or update inputs and outputs in an active task (the task data is not migrated).
							</li></ul></div><p>
						If you apply mapping to a task node, only the task node name and description are mapped. Other task fields, including the <code class="literal">TaskName</code> variable, are not mapped to the new task.
					</p></section><section class="section" id="deployment-versions-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.9. Deployments and different process versions</h3></div></div></div><p>
						The deployment service puts business assets into an execution environment. However, in some cases additional management is required to make the assets available in the correct context. Notably, if you deploy several versions of the same process, you must ensure that process instances use the correct version.
					</p><h5 id="activation_and_deactivation_of_deployments">Activation and Deactivation of deployments</h5><p>
						In some cases, a number of process instances are running on a deployment, and then you add a new version of the same process to the runtime environment.
					</p><p>
						You might decide that new instances of this process definition must use the new version while the existing active instances should continue with the previous version.
					</p><p>
						To enable this scenario, use the following methods of the deployment service:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">activate</code>: Activates a deployment so it can be available for interaction. You can list its process definitions and start new process instances for this deployment.
							</li><li class="listitem">
								<code class="literal">deactivate</code>: Deactivates a deployment. Disables the option to list process definitions and to start new process instances of processes in the deployment. However, you can continue working with the process instances that are already active, for example, signal events and interact with user tasks.
							</li></ul></div><p>
						You can use this feature for smooth transition between project versions without the need for process instance migration.
					</p><h5 id="invocation_of_the_latest_version_of_a_process">Invocation of the latest version of a process</h5><p>
						If you need to use the latest version of the project’s process, you can use the <code class="literal">latest</code> keyword to interact with several operations in services. This approach is supported only when the process identifier remains the same in all versions.
					</p><p>
						The following example explains the feature.
					</p><p>
						The initial deployment unit is <code class="literal">org.jbpm:HR:1.0</code>. It contains the first version of a hiring process.
					</p><p>
						After several weeks, you develop a new version and deploy it to the execution server as <code class="literal">org.jbpm:HR.2.0</code>. It includes version 2 of the hiring process.
					</p><p>
						If you want to call the process and ensure that you use the latest version, you can use the following deployment ID:
					</p><pre class="screen">org.jbpm.HR:latest</pre><p>
						If you use this deployment ID, the process engine finds the latest available version of the project. It uses the following identifiers:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">groupId</code>: <code class="literal">org.jbpm</code>
							</li><li class="listitem">
								<code class="literal">artifactId</code>: <code class="literal">HR</code>
							</li></ul></div><p>
						The version numbers are compared by Maven rules to find the latest version.
					</p><p>
						The following code example shows deployment of multiple versions and interacting with the latest version:
					</p><div class="formalpara"><p class="title"><strong>Deploying multiple versions of a process and interacting with the latest version</strong></p><p>
							
<pre class="programlisting language-java">KModuleDeploymentUnit deploymentUnitV1 = new KModuleDeploymentUnit("org.jbpm", "HR", "1.0");
deploymentService.deploy(deploymentUnitV1);

long processInstanceId = processService.startProcess("org.jbpm:HR:LATEST", "customtask");
ProcessInstanceDesc piDesc = runtimeDataService.getProcessInstanceById(processInstanceId);

// We have started a process with the project version 1
assertEquals(deploymentUnitV1.getIdentifier(), piDesc.getDeploymentId());

// Next we deploy version 2
KModuleDeploymentUnit deploymentUnitV2 = new KModuleDeploymentUnit("org.jbpm", "HR", "2.0");
deploymentService.deploy(deploymentUnitV2);

processInstanceId = processService.startProcess("org.jbpm:HR:LATEST", "customtask");
piDesc = runtimeDataService.getProcessInstanceById(processInstanceId);

// This time we have started a process with the project version 2
assertEquals(deploymentUnitV2.getIdentifier(), piDesc.getDeploymentId());</pre>
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This feature is also available in the KIE Server REST API. When sending a request with a deployment ID, you can use <code class="literal">LATEST</code> as the version identifier.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/deploying_and_managing_red_hat_process_automation_manager_services#kie-server-commands-con_kie-apis"><span class="emphasis"><em>Interacting with Red Hat Process Automation Manager using KIE APIs</em></span></a>
							</li></ul></div></section><section class="section" id="deployment-synchronization-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.3.10. Deployment synchronization</h3></div></div></div><p>
						Process engine services include a deployment synchronizer that stores available deployments into a database, including the deployment descriptor for every deployment.
					</p><p>
						The synhronizer also monitors this table to keep it in sync with other installations that might be using the same data source. This functionality is especially important when running in a cluster or when Business Central and a custom application must operate on the same artifacts.
					</p><p>
						By default, when running core services, you must configure synchronization. For EJB and CDI extensions, synchronization is enabled automatically.
					</p><p>
						The following code sample configures synchronization:
					</p><div class="formalpara"><p class="title"><strong>Configuring synchronization</strong></p><p>
							
<pre class="programlisting language-java">TransactionalCommandService commandService = new TransactionalCommandService(emf);

DeploymentStore store = new DeploymentStore();
store.setCommandService(commandService);

DeploymentSynchronizer sync = new DeploymentSynchronizer();
sync.setDeploymentService(deploymentService);
sync.setDeploymentStore(store);

DeploymentSyncInvoker invoker = new DeploymentSyncInvoker(sync, 2L, 3L, TimeUnit.SECONDS);
invoker.start();
....
invoker.stop();</pre>
						</p></div><p>
						With this configuration, deployments are synchronized every three seconds with an initial delay of two seconds.
					</p></section></section><section class="section" id="threads-process-con_process-engine"><div class="titlepage"><div><div><h2 class="title">66.4. Threads in the process engine</h2></div></div></div><p>
					We can refer to two types of multi-threading: <span class="emphasis"><em>logical</em></span> and <span class="emphasis"><em>technical</em></span>. <span class="emphasis"><em>Technical multi-threading</em></span> involves multiple threads or processes that are started, for example, by a Java or C program. <span class="emphasis"><em>Logical multi-threading</em></span> happens in a BPM process, for example, after the process reaches a parallel gateway. In execution logic, the original process splits into two processes that run in a parallel fashion.
				</p><p>
					Process engine code implements logical multi-threading using one technical thread.
				</p><p>
					The reason for this design choice is that multiple (technical) threads must be able to communicate state information to each other if they are working on the same process. This requirement brings a number of complications. The extra logic required for safe communication between threads, as well as the extra overhead required to avoid race conditions and deadlocks, can negate any performance benefit of using such threads.
				</p><p>
					In general, the process engine executes actions in series. For example, when the process engine encounters a script task in a process, it executes the script synchronously and waits for it to complete before continuing execution. In the same way, if a process encounters a parallel gateway, the process engine sequentially triggers each of the outgoing branches, one after the other.
				</p><p>
					This is possible because execution is almost always instantaneous, meaning that it is extremely fast and produces almost no overhead. As a result, sequential execution does not create any effects that a user can notice.
				</p><p>
					Any code in a process that you supply is also executed synchronously and the process engine waits for it to finish before continuing the process. For example, if you use a <code class="literal">Thread.sleep(…​)</code> as part of a custom script, the process engine thread is blocked during thre sleep period.
				</p><p>
					When a process reaches a service task, the process engine also invokes the handler for the task synchronously and waits for the <code class="literal">completeWorkItem(…​)</code> method to return before continuing execution. If your service handler is not instantaneous, implement the asynchronous execution independently in your code.
				</p><p>
					For example, your service task might invoke an external service. The delay in invoking this service remotely and waiting for the results might be significant. Therefore, invoke this service asynchronously. Your handler must only invoke the service and then return from the method, then notify the process engine later when the results are available. In the meantime, the process engine can continue execution of the process.
				</p><p>
					Human tasks are a typical example of a service that needs to be invoked asynchronously. A human task requires a human actor to respond to a request, and the process engine must not wait for this response.
				</p><p>
					When a human task node is triggered, the human task handler only creates a new task on the task list of the assigned actor. The process engine is then able to continue execution on the rest of the process, if necessary. The handler notifies the process engine asynchronously when the user has completed the task.
				</p></section><section class="section" id="event-listeners-con_process-engine"><div class="titlepage"><div><div><h2 class="title">66.5. Event Listeners in the process engine</h2></div></div></div><p>
					You can develop a class that implements the <code class="literal">ProcessEventListener</code> interface. This class can listen to process-related events, such as starting or completing a process or entering and leaving a node.
				</p><p>
					The process engine passes an event object to this class. The object provides access to related information, like the process instance and node instance linked to the event.
				</p><p>
					The following list shows the different methods of the <code class="literal">ProcessEventListener</code> interface:
				</p><div class="formalpara"><p class="title"><strong>Methods of the <code class="literal">ProcessEventListener</code> interface</strong></p><p>
						
<pre class="programlisting language-java">public interface ProcessEventListener {

  void beforeProcessStarted( ProcessStartedEvent event );
  void afterProcessStarted( ProcessStartedEvent event );
  void beforeProcessCompleted( ProcessCompletedEvent event );
  void afterProcessCompleted( ProcessCompletedEvent event );
  void beforeNodeTriggered( ProcessNodeTriggeredEvent event );
  void afterNodeTriggered( ProcessNodeTriggeredEvent event );
  void beforeNodeLeft( ProcessNodeLeftEvent event );
  void afterNodeLeft( ProcessNodeLeftEvent event );
  void beforeVariableChanged(ProcessVariableChangedEvent event);
  void afterVariableChanged(ProcessVariableChangedEvent event);

}</pre>
					</p></div><p>
					The <code class="literal">before</code> and <code class="literal">after</code> event calls typically act like a stack. If event A directly causes event B, the following sequence of calls happens:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Before A
						</li><li class="listitem">
							Before B
						</li><li class="listitem">
							After B
						</li><li class="listitem">
							After A
						</li></ul></div><p>
					For example, if leaving node X triggers node Y, all event calls related to triggering node Y occur between the <code class="literal">beforeNodeLeft</code> and <code class="literal">afterNodeLeft</code> calls for node X.
				</p><p>
					In the same way, if starting a process directly causes some nodes to start, all <code class="literal">nodeTriggered</code> and <code class="literal">nodeLeft</code> event calls occur between the <code class="literal">beforeProcessStarted</code> and <code class="literal">afterProcessStarted</code> calls.
				</p><p>
					This approach reflects cause and effect relationships between events. However, the timing and order of <code class="literal">after</code> event calls are not always intuitive. For example, an <code class="literal">afterProcessStarted</code> call can happen after the <code class="literal">afterNodeLeft</code> calls for some nodes in the process.
				</p><p>
					In general, to be notified when a particular event occurs, use the <code class="literal">before</code> call for the event. Use an <code class="literal">after</code> call only if you want to make sure that all processing related to this event has ended, for example, when you want to be notified when all steps associated with starting a particular process instance have been completed.
				</p><p>
					Depending on the type of node, some nodes might only generate <code class="literal">nodeLeft</code> calls and others might only generate <code class="literal">nodeTriggered</code> calls. For example, catch intermediate event nodes do not generate <code class="literal">nodeTriggered</code> calls, because they are not triggered by another process node. Similarly, throw intermediate event nodes do not generate <code class="literal">nodeLeft</code> calls, as these nodes do not have an outgoing connection to another node.
				</p><p>
					The <code class="literal">KieSession</code> class implements the <code class="literal">RuleRuntimeEventManager</code> interface that provides methods for registering, removing, and listing event listeners, as shown in the following list.
				</p><div class="formalpara"><p class="title"><strong>Methods of the <code class="literal">RuleRuntimeEventManager</code> interface</strong></p><p>
						
<pre class="programlisting language-java">    void addEventListener(AgendaEventListener listener);
    void addEventListener(RuleRuntimeEventListener listener);
    void removeEventListener(AgendaEventListener listener);
    void removeEventListener(RuleRuntimeEventListener listener);
    Collection&lt;AgendaEventListener&gt;	getAgendaEventListeners();
    Collection&lt;RuleRuntimeEventListener&gt; getRuleRintimeEventListeners();</pre>
					</p></div><p>
					However, in a typical case, do not use these methods.
				</p><p>
					If you are using the <code class="literal">RuntimeManager</code> interface, you can use the <code class="literal">RuntimeEnvironment</code> class to register event listeners.
				</p><p>
					If you are using the Services API, you can add fully qualified class names of event listeners to the <code class="literal">META-INF/services/org.jbpm.services.task.deadlines.NotificationListener</code> file in your project. The Services API also registers some default listeners, including <code class="literal">org.jbpm.services.task.deadlines.notifications.impl.email.EmailNotificationListener</code>, which can send email notifications for events.
				</p><p>
					To exclude a default listener, you can add the fully qualified name of the listener to the <code class="literal">org.kie.jbpm.notification_listeners.exclude</code> JVM system property.
				</p><section class="section" id="runtime-logger-listener-con_process-engine"><div class="titlepage"><div><div><h3 class="title">66.5.1. <code class="literal">KieRuntimeLogger</code> event listener</h3></div></div></div><p>
						The <code class="literal">KieServices</code> package contains the <code class="literal">KieRuntimeLogger</code> event listener that you can add to your KIE session. You can use this listener to create an audit log. This log contains all the different events that occurred at runtime.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							These loggers are intended for debugging purposes. They might be too detailed for business-level process analysis.
						</p></div></div><p>
						The listener implements the following logger types:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Console logger: This logger writes out all the events to the console. The fully qualified class name for this logger is <code class="literal">org.drools.core.audit.WorkingMemoryConsoleLogger</code>.
							</li><li class="listitem"><p class="simpara">
								File logger: This logger writes out all the events to a file using an XML representation. You can use the log file in an IDE to generate a tree-based visualization of the events that occurred during execution. The fully qualified class name for this logger is <code class="literal">org.drools.core.audit.WorkingMemoryFileLogger</code>.
							</p><p class="simpara">
								The file logger writes the events to disk only when closing the logger or when the number of events in the logger reaches a predefined level. Therefore, it is not suitable for debugging processes at runtime.
							</p></li><li class="listitem">
								Threaded file logger: This logger writes the events to a file after a specified time interval. You can use this logger to visualize the progress in real time while debugging processes. The fully qualified class name for this logger is <code class="literal">org.drools.core.audit.ThreadedWorkingMemoryFileLogger</code>.
							</li></ul></div><p>
						When creating a logger, you must pass the KIE session as an argument. The file loggers also require the name of the log file to be created. The threaded file logger requires the interval in milliseconds after which the events are saved.
					</p><p>
						Always close the logger at the end of your application.
					</p><p>
						The following example shows the use of the file logger.
					</p><div class="formalpara"><p class="title"><strong>Using the file logger</strong></p><p>
							
<pre class="programlisting language-java">  import org.kie.api.KieServices;
  import org.kie.api.logger.KieRuntimeLogger;
  ...
  KieRuntimeLogger logger = KieServices.Factory.get().getLoggers().newFileLogger(ksession, "test");
  // add invocations to the process engine here,
  // e.g. ksession.startProcess(processId);
  ...
  logger.close();</pre>
						</p></div><p>
						The log file that is created by the file-based loggers contains an XML-based overview of all the events that occurred during the runtime of the process. You can use the <span class="emphasis"><em>Audit View</em></span> in the <span class="emphasis"><em>Drools Eclipse plugin</em></span> to open the file and visualize the events as a tree. Events that occur between the <code class="literal">before</code> and <code class="literal">after</code> calls of an event are shown as children of that event.
					</p><p>
						The following screenshot shows a simple example. A process is started, resulting in the activation of the Start node, an Action node, and an End node, after which the process is completed.
					</p><div class="figure" id="idm140093622820704"><p class="title"><strong>Figure 66.2. Audit view of a process engine runtime log</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/CoreEngine/AuditView.png" alt="AuditView"/></div></div></div></section></section><section class="section" id="process-engine-configuration-ref_process-engine"><div class="titlepage"><div><div><h2 class="title">66.6. Process engine configuration</h2></div></div></div><p>
					You can use several control parameters available to alter the process engine default behavior to suit the requirements of your environment.
				</p><p>
					Set these parameters as JVM system properties, usually with the <code class="literal">-D</code> option when starting a program such as an application server.
				</p><div class="table" id="idm140093622813392"><p class="title"><strong>Table 66.1. Control parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 25%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093622806704" scope="col">Name</th><th align="left" valign="top" id="idm140093622805616" scope="col">Possible values</th><th align="left" valign="top" id="idm140093622804528" scope="col">Default value</th><th align="left" valign="top" id="idm140093622803440" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.ut.jndi.lookup</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528"> </td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative JNDI name to be used when there is no access to the default name (<code class="literal">java:comp/UserTransaction</code>).
								</p>
								<p>
									NOTE: The name must be valid for the given runtime environment. Do not use this variable if there is no access to the default user transaction JNDI name.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.enable.multi.con</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									<code class="literal">true</code>|<code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Enable multiple incoming and outgoing sequence flows support for activities
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.business.calendar.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									/<code class="literal">jbpm.business.calendar.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative class path location of the business calendar configuration file
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.overdue.timer.delay</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									Long
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									2000
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Specifies the delay for overdue timers to allow proper initialization, in milliseconds
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.process.name.comparator</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528"> </td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative comparator class to enable starting a process by name, by default the <code class="literal">NumberVersionComparator</code> comparator is used
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.loop.level.disabled</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									<code class="literal">true</code>|<code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">true</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Enable or disable loop iteration tracking for advanced loop support when using XOR gateways
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.mail.session</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">mail</code>/<code class="literal">jbpmMailSession</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative JNDI name for the mail session used by Task Deadlines
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.usergroup.callback.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									/<code class="literal">jbpm.usergroup.callback.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative class path location for a user group callback implementation (LDAP, DB)
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.user.group.mapping</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">${jboss.server.config.dir}/roles.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative location of the <code class="literal">roles.properties</code> file for <code class="literal">JBossUserGroupCallbackImpl</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.user.info.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									/<code class="literal">jbpm.user.info.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative class path location of the user info configuration (used by <code class="literal">LDAPUserInfoImpl</code>)
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.jbpm.ht.user.separator</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">,</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Alternative separator of actors and groups for user tasks
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.quartz.properties</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528"> </td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Location of the <a class="link" href="#service-quartz-con_process-engine" title="66.3.5. Quartz-based timer service">Quartz configiration file</a> to activate the Quartz-based timer service
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">jbpm.data.dir</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">${jboss.server.data.dir}</code> if available, otherwise <code class="literal">${java.io.tmpdir}</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Location to store data files produced by the process engine
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.executor.pool.size</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									Integer
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">1</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Thread pool size for the process engine executor
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.executor.retry.count</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									Integer
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									3
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Number of retries attempted by the process engine executor in case of an error
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.executor.interval</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									Integer
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									0
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Frequency used to check for pending jobs by the process engine executor, in seconds. If the value is <code class="literal">0</code>, the check is run once, during the startup of the executor.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.executor.disabled</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									<code class="literal">true</code>|<code class="literal">false</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">true</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Disable the process engine executor
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.store.services.class</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528">
								<p>
									<code class="literal">org.drools.persistence.jpa.KnowledgeStoreServiceImpl</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Fully qualified name of the class that implements <code class="literal">KieStoreServices</code> that is responsible for bootstrapping <code class="literal">KieSession</code> instances
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.jbpm.notification_listeners.exclude</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528"> </td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Fully qualified names of event listeners that must be excluded even if they would otherwise be used. Separate multiple names with commas. For example, you can add <code class="literal">org.jbpm.services.task.deadlines.notifications.impl.email.EmailNotificationListener</code> to exclude the default email notification listener.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm140093622806704">
								<p>
									<code class="literal">org.kie.jbpm.notification_listeners.include</code>
								</p>
								</td><td align="left" valign="top" headers="idm140093622805616">
								<p>
									String
								</p>
								</td><td align="left" valign="top" headers="idm140093622804528"> </td><td align="left" valign="top" headers="idm140093622803440">
								<p>
									Fully qualified names of event listeners that must be included. Separate multiple names with commas. If you set this property, only the listeners in this property are included and all other listeners are excluded.
								</p>
								</td></tr></tbody></table></div></div></section></section><section class="chapter" id="persistence-con_process-engine"><div class="titlepage"><div><div><h2 class="title">Chapter 67. Persistence and transactions in the process engine</h2></div></div></div><p>
				The process engine implements persistence for process states. The implementation uses the JPA framework with an SQL database backend. It can also store audit log information in the database.
			</p><p>
				The process engine also enables transactional execution of processes using the JTA framework, relying on the persistence backend to support the transactions.
			</p><section class="section" id="persistence-processstate-con_process-engine"><div class="titlepage"><div><div><h2 class="title">67.1. Persistence of process runtime states</h2></div></div></div><p>
					The process engine supports persistent storage of the runtime state of running process instances. Because it stores the runtime states, it can continue execution of a process instance if the process engine stopped or encountered a problem at any point.
				</p><p>
					The process engine also persistently stores the process definitions and the history logs of current and previous process states.
				</p><p>
					You can use the <code class="literal">persistence.xml</code> file, specified by the JPA framework, to configure persistence in an SQL database. You can plug in different persistence strategies. For more information about the <code class="literal">persistence.xml</code> file, see <a class="xref" href="#persistence-configuration-file-con_process-engine" title="67.4.1. Configuration in the persistence.xml file">Section 67.4.1, “Configuration in the <code class="literal">persistence.xml</code> file”</a>.
				</p><p>
					By default, if you do not configure persistence in the process engine, process information, including process instance states, is not made persistent.
				</p><p>
					When the process engine starts a process, it creates a <span class="emphasis"><em>process instance</em></span>, which represents the execution of the process in that specific context. For example, when executing a process that processes a sales order, one process instance is created for each sales request.
				</p><p>
					The process instance contains the current runtime state and context of a process, including current values of any process variables. However, it does not include information about the history of past states of the process, as this information is not required for ongoing execution of a process.
				</p><p>
					When the runtime state of process instances is made persistent, you can restore the state of execution of all running processes in case the process engine fails or is stopped. You can also remove a particular process instance from memory and then restore it at a later time.
				</p><p>
					If you configure the process engine to use persistence, it automatically stores the runtime state into the database. You do not need to trigger persistence in the code.
				</p><p>
					When you restore the state of the process engine from a database, all instances are automatically restored to their last recorded state. Process instances automatically resume execution if they are triggered, for example, by an expired timer, the completion of a task that was requested by the process instance, or a signal being sent to the process instance. You do not need to load separate instances and trigger their execution manually.
				</p><p>
					The process engine also automatically reloads process instances on demand.
				</p><section class="section" id="safepoints-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.1.1. Safe points for persistence</h3></div></div></div><p>
						The process engine saves the state of a process instance to persistent storage at <span class="emphasis"><em>safe points</em></span> during the execution of the process.
					</p><p>
						When a process instance is started or resumes execution from a previous wait state, the process engine continues the execution until no more actions can be performed. If no more actions can be performed, it means that the process has completed or else has reached a wait state. If the process contains several parallel paths, all the paths must reach a wait state.
					</p><p>
						This point in the execution of the process is considered a safe point. At this point, the process engine stores the state of the process instance, and of any other process instances that were affected by the execution, to persistent storage.
					</p></section></section><section class="section" id="auditlog-con_process-engine"><div class="titlepage"><div><div><h2 class="title">67.2. The persistent audit log</h2></div></div></div><p>
					The process engine can store information about the execution of process instances, including the successive historical states of the instances.
				</p><p>
					This information can be useful in many cases. For example, you might want to verify which actions have been executed for a particular process instance or to monitor and analyze the efficiency of a particular process.
				</p><p>
					However, storing history information in the runtime database would result in the database rapidly increasing in size and would also affect the performance of the persistence layer. Therefore, history log information is stored separately.
				</p><p>
					The process engine creates a log based on events that it generates during execution of processes. It uses the event listener mechanism to receive events and extract the necessary information, then persists this information to a database. The <code class="literal">jbpm-audit</code> module contains an event listener that stores process-related information in a database using JPA.
				</p><p>
					You can use filters to limit the scope of the logged information.
				</p><section class="section" id="auditlog-datamodel-ref_process-engine"><div class="titlepage"><div><div><h3 class="title">67.2.1. The process engine audit log data model</h3></div></div></div><p>
						You can query process engine audit log information to use it in different scenarios, for example, creating a history log for one specific process instance or analyzing the performance of all instances of a specific process.
					</p><p>
						The audit log data model is a default implementation. Depending on your use cases, you might also define your own data model for storing the information you require. You can use process event listeners to extract the information.
					</p><p>
						The data model contains three entities: one for process instance information, one for node instance information, and one for process variable instance information.
					</p><p>
						The <code class="literal">ProcessInstanceLog</code> table contains the basic log information about a process instance.
					</p><div class="table" id="idm140093622614688"><p class="title"><strong>Table 67.1. ProcessInstanceLog table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093629018480" scope="col">Field</th><th align="left" valign="top" id="idm140093629017392" scope="col">Description</th><th align="left" valign="top" id="idm140093629016304" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The primary key and ID of the log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">correlationKey</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The correlation of this process instance
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">duration</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										Actual duration of this process instance since its start date
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">end_date</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										When applicable, the end date of the process instance
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">externalId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										Optional external identifier used to correlate to some elements, for example, a deployment ID
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">user_identity</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										Optional identifier of the user who started the process instance
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">outcome</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The outcome of the process instance. This field contains the error code if the process instance was finished with an error event.
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">parentProcessInstanceId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The process instance ID of the parent process instance, if applicable
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">processid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The ID of the process
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">processinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The process instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">processname</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The name of the process
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">processtype</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The type of the instance (process or case)
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">processversion</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The version of the process
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">sla_due_date</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The due date of the process according to the service level agreement (SLA)
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">slaCompliance</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The level of compliance with the SLA
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">start_date</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The start date of the process instance
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr><tr><td align="left" valign="top" headers="idm140093629018480">
									<p>
										<code class="literal">status</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093629017392">
									<p>
										The status of the process instance that maps to the process instance state
									</p>
									</td><td align="left" valign="top" headers="idm140093629016304"> </td></tr></tbody></table></div></div><p>
						The <code class="literal">NodeInstanceLog</code> table contains more information about which nodes were executed inside each process instance. Whenever a node instance is entered from one of its incoming connections or is exited through one of its outgoing connections, information about the event is stored in this table.
					</p><div class="table" id="idm140093628925120"><p class="title"><strong>Table 67.2. NodeInstanceLog table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628919344" scope="col">Field</th><th align="left" valign="top" id="idm140093628918256" scope="col">Description</th><th align="left" valign="top" id="idm140093628917168" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The primary key and ID of the log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">connection</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										Actual identifier of the sequence flow that led to this node instance
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">log_date</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The date of the event
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">externalId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										Optional external identifier used to correlate to some elements, for example, a deployment ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">nodeid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The node ID of the corresponding node in the process definition
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">nodeinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The node instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">nodename</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The name of the node
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">nodetype</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The type of the node
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">processid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The ID of the process that the process instance is executing
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">processinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The process instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">sla_due_date</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The due date of the node according to the service level agreement (SLA)
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">slaCompliance</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The level of compliance with the SLA
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">type</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The type of the event (0 = enter, 1 = exit)
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">workItemId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										(Optional, only for certain node types) The identifier of the work item
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">nodeContainerId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The identifier of the container, if the node is inside an embedded sub-process node
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr><tr><td align="left" valign="top" headers="idm140093628919344">
									<p>
										<code class="literal">referenceId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628918256">
									<p>
										The reference identifier
									</p>
									</td><td align="left" valign="top" headers="idm140093628917168"> </td></tr></tbody></table></div></div><p>
						The <code class="literal">VariableInstanceLog</code> table contains information about changes in variable instances. By default, the process engine generates log entries after a variable changes its value. The process engine can also log entries before the changes.
					</p><div class="table" id="idm140093628830544"><p class="title"><strong>Table 67.3. VariableInstanceLog table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628824768" scope="col">Field</th><th align="left" valign="top" id="idm140093628823680" scope="col">Description</th><th align="left" valign="top" id="idm140093628822592" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The primary key and ID of the log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">externalId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										Optional external identifier used to correlate to some elements, for example, a deployment ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">log_date</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The date of the event
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">processid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The ID of the process that the process instance is executing
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">processinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The process instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">oldvalue</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The previous value of the variable at the time that the log is made
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">value</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The value of the variable at the time that the log is made
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">variableid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The variable ID in the process definition
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr><tr><td align="left" valign="top" headers="idm140093628824768">
									<p>
										<code class="literal">variableinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628823680">
									<p>
										The ID of the variable instance
									</p>
									</td><td align="left" valign="top" headers="idm140093628822592"> </td></tr></tbody></table></div></div><p>
						The <code class="literal">AuditTaskImpl</code> table contains information about user tasks.
					</p><div class="table" id="idm140093628772368"><p class="title"><strong>Table 67.4. AuditTaskImpl table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628766592" scope="col">Field</th><th align="left" valign="top" id="idm140093628765504" scope="col">Description</th><th align="left" valign="top" id="idm140093628764416" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										The primary key and ID of the task log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">activationTime</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Time when this task was activated
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">actualOwner</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Actual owner assigned to this task. This value is set set only when the owner claims the task.
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">createdBy</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										User who created this task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">createdOn</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Date when the task was created
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">deploymentId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										The ID of the deployment of which this task is a part
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">description</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Description of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">dueDate</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Due date set on this task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">name</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Name of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">parentId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Parent task ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">priority</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Priority of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">processId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Process definition ID to which this task belongs
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">processInstanceId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Process instance ID with which this task is associated
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">processSessionId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										KIE session ID used to create this task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">status</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Current status of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">taskId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Identifier of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">workItemId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										Identifier of the work item assigned on the process side to this task ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr><tr><td align="left" valign="top" headers="idm140093628766592">
									<p>
										<code class="literal">lastModificationDate</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628765504">
									<p>
										The date and time when the process instance state was last recorded in the persistence database
									</p>
									</td><td align="left" valign="top" headers="idm140093628764416"> </td></tr></tbody></table></div></div><p>
						The <code class="literal">BAMTaskSummary</code> table collects information about tasks that is used by the BAM engine to build charts and dashboards.
					</p><div class="table" id="idm140093628669888"><p class="title"><strong>Table 67.5. BAMTaskSummary table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628664112" scope="col">Field</th><th align="left" valign="top" id="idm140093628663024" scope="col">Description</th><th align="left" valign="top" id="idm140093628661936" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">pk</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										The primary key and ID of the log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">createdDate</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Date when the task was created
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">duration</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Duration since the task was created
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">endDate</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Date when the task reached an end state (complete, exit, fail, skip)
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">processinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										The process instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">startDate</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Date when the task was started
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">status</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Current status of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">taskId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Identifier of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">taskName</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										Name of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">userId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										User ID assigned to the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr><tr><td align="left" valign="top" headers="idm140093628664112">
									<p>
										<code class="literal">optlock</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628663024">
									<p>
										The version field that serves as its optimistic lock value
									</p>
									</td><td align="left" valign="top" headers="idm140093628661936"> </td></tr></tbody></table></div></div><p>
						The <code class="literal">TaskVariableImpl</code> table contains information about task variable instances.
					</p><div class="table" id="idm140093628602352"><p class="title"><strong>Table 67.6. TaskVariableImpl table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628596576" scope="col">Field</th><th align="left" valign="top" id="idm140093628595488" scope="col">Description</th><th align="left" valign="top" id="idm140093628594400" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										The primary key and ID of the log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">modificationDate</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										Date when the variable was modified most recently
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">name</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										Name of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">processid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										The ID of the process that the process instance is executing
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">processinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										The process instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">taskId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										Identifier of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">type</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										Type of the variable: either input or output of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr><tr><td align="left" valign="top" headers="idm140093628596576">
									<p>
										<code class="literal">value</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628595488">
									<p>
										Variable value
									</p>
									</td><td align="left" valign="top" headers="idm140093628594400"> </td></tr></tbody></table></div></div><p>
						The <code class="literal">TaskEvent</code> table contains information about changes in task instances. Operations such as <code class="literal">claim</code>, <code class="literal">start</code>, and <code class="literal">stop</code> are stored in this table to provide a timeline view of events that happened to the given task.
					</p><div class="table" id="idm140093628548480"><p class="title"><strong>Table 67.7. TaskEvent table fields</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm140093628542720" scope="col">Field</th><th align="left" valign="top" id="idm140093628541632" scope="col">Description</th><th align="left" valign="top" id="idm140093628540544" scope="col">Nullable</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">id</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										The primary key and ID of the log entity
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544">
									<p>
										NOT NULL
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">logTime</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Date when this event was saved
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">message</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Log event message
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">processinstanceid</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										The process instance ID
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">taskId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Identifier of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">type</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Type of the event. Types correspond to life cycle phases of the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">userId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										User ID assigned to the task
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">workItemId</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Identifier of the work item to which the task is assigned
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">optlock</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										The version field that serves as its optimistic lock value
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">correlationKey</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Correlation key of the process instance
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr><tr><td align="left" valign="top" headers="idm140093628542720">
									<p>
										<code class="literal">processType</code>
									</p>
									</td><td align="left" valign="top" headers="idm140093628541632">
									<p>
										Type of the process instance (process or case)
									</p>
									</td><td align="left" valign="top" headers="idm140093628540544"> </td></tr></tbody></table></div></div></section><section class="section" id="log-to-database-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.2.2. Configuration for storing the process events log in a database</h3></div></div></div><p>
						To log process history information in a database with a default data model, you must register the logger on your session.
					</p><div class="formalpara"><p class="title"><strong>Registering the logger on your KIE session</strong></p><p>
							
<pre class="programlisting language-java">KieSession ksession = ...;
ksession.addProcessEventListener(AuditLoggerFactory.newInstance(Type.JPA, ksession, null));

// invoke methods for your session here</pre>
						</p></div><p>
						To specify the database for storing the information, you must modify the <code class="literal">persistence.xml</code> file to include the audit log classes: <code class="literal">ProcessInstanceLog</code>, <code class="literal">NodeInstanceLog</code>, and <code class="literal">VariableInstanceLog</code>.
					</p><div class="formalpara"><p class="title"><strong>Modified <code class="literal">persistence.xml</code> file that includes the audit log classes</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;

&lt;persistence
  version="2.0"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd
  http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"
  xmlns="http://java.sun.com/xml/ns/persistence"
  xmlns:orm="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;

  &lt;persistence-unit name="org.jbpm.persistence.jpa" transaction-type="JTA"&gt;
    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
    &lt;jta-data-source&gt;jdbc/jbpm-ds&lt;/jta-data-source&gt;
    &lt;mapping-file&gt;META-INF/JBPMorm.xml&lt;/mapping-file&gt;
    &lt;class&gt;org.drools.persistence.info.SessionInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.persistence.processinstance.ProcessInstanceInfo&lt;/class&gt;
    &lt;class&gt;org.drools.persistence.info.WorkItemInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.persistence.correlation.CorrelationKeyInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.persistence.correlation.CorrelationPropertyInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.runtime.manager.impl.jpa.ContextMappingInfo&lt;/class&gt;

    &lt;class&gt;org.jbpm.process.audit.ProcessInstanceLog&lt;/class&gt;
    &lt;class&gt;org.jbpm.process.audit.NodeInstanceLog&lt;/class&gt;
    &lt;class&gt;org.jbpm.process.audit.VariableInstanceLog&lt;/class&gt;

    &lt;properties&gt;
      &lt;property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/&gt;
      &lt;property name="hibernate.max_fetch_depth" value="3"/&gt;
      &lt;property name="hibernate.hbm2ddl.auto" value="update"/&gt;
      &lt;property name="hibernate.show_sql" value="true"/&gt;
      &lt;property name="hibernate.connection.release_mode" value="after_transaction"/&gt;
      &lt;property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossStandAloneJtaPlatform"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre>
						</p></div></section><section class="section" id="log-to-jms-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.2.3. Configuration for sending the process events log to a JMS queue</h3></div></div></div><p>
						When the process engine stores events in the database with the default audit log implementation, the database operation is completed synchronously, within the same transaction as the actual execution of the process instance. This operation takes time, and on highly loaded systems it might have some impact on database performance, especially when both the history log and the runtime data are stored in the same database.
					</p><p>
						As an alternative, you can use the JMS-based logger that the process engine provides. You can configure this logger to submit process log entries as messages to a JMS queue, instead of directly persisting them in the database.
					</p><p>
						You can configure the JMS logger to be transactional, in order to avoid data inconsistencies if a process engine transaction is rolled back.
					</p><div class="formalpara"><p class="title"><strong>Using the JMS audit logger</strong></p><p>
							
<pre class="programlisting language-java">ConnectionFactory factory = ...;
Queue queue = ...;
StatefulKnowledgeSession ksession = ...;
Map&lt;String, Object&gt; jmsProps = new HashMap&lt;String, Object&gt;();
jmsProps.put("jbpm.audit.jms.transacted", true);
jmsProps.put("jbpm.audit.jms.connection.factory", factory);
jmsProps.put("jbpm.audit.jms.queue", queue);
ksession.addProcessEventListener(AuditLoggerFactory.newInstance(Type.JMS, ksession, jmsProps));

// invoke methods one your session here</pre>
						</p></div><p>
						This is just one of the possible ways to configure JMS audit logger. You can use the <code class="literal">AuditLoggerFactory</code> class to set additional configuration parameters.
					</p></section><section class="section" id="variables-auditing-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.2.4. Auditing of variables</h3></div></div></div><p>
						By default, values of process and task variables are stored in audit tables as string representations. To create string representations of non-string variable types, the process engine calls the <code class="literal">variable.toString()</code> method. If you use a custom class for a variable, you can implement this method for the class. In many cases this representation is sufficient.
					</p><p>
						However, sometimes a string representation in the logs might not be sufficient, especially when there is a need for efficient queries by process or task variables. For example, a <code class="literal">Person</code> object, used as a value for a variable, might have the following structure:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">Person</code> object, used as a process or task variable value</strong></p><p>
							
<pre class="programlisting language-java">public class Person implements Serializable {

    private static final long serialVersionUID = -5172443495317321032L;
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }
}</pre>
						</p></div><p>
						The <code class="literal">toString()</code> method provides a human-readable format. However, it might not be sufficient for a search. A sample string value is <code class="literal">Person [name="john", age="34"]</code>. Searching through a large number of such strings to find people of age 34 would make a database query inefficient.
					</p><p>
						To enable more efficient searching, you can audit variables using <code class="literal">VariableIndexer</code> objects, which extract relevant parts of the variable for storage in the audit log.
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">VariableIndexer</code> interface</strong></p><p>
							
<pre class="programlisting language-java">/**
 * Variable indexer that transforms a variable instance into another representation (usually string)
 * for use in log queries.
 *
 * @param &lt;V&gt; type of the object that will represent the indexed variable
 */
public interface VariableIndexer&lt;V&gt; {

    /**
     * Tests if this indexer can index a given variable
     *
     * NOTE: only one indexer can be used for a given variable
     *
     * @param variable variable to be indexed
     * @return true if the variable should be indexed with this indexer
     */
    boolean accept(Object variable);

    /**
     * Performs an index/transform operation on the variable. The result of this operation can be
     * either a single value or a list of values, to support complex type separation.
     * For example, when the variable is of the type Person that has name, address, and phone fields,
     * the indexer could build three entries out of it to represent individual fields:
     * person = person.name
     * address = person.address.street
     * phone = person.phone
     * this configuration allows advanced queries for finding relevant entries.
     * @param name name of the variable
     * @param variable actual variable value
     * @return
     */
    List&lt;V&gt; index(String name, Object variable);
}</pre>
						</p></div><p>
						The default indexer uses the <code class="literal">toString()</code> method to produce a single audit entry for a single variable. Other indexers can return a list of objects from indexing a single variable.
					</p><p>
						To enable efficient queries for the <code class="literal">Person</code> type, you can build a custom indexer that indexes a <code class="literal">Person</code> instance into separate audit entries, one representing the name and another representing the age.
					</p><div class="formalpara"><p class="title"><strong>Sample indexer for the <code class="literal">Person</code> type</strong></p><p>
							
<pre class="programlisting language-java">public class PersonTaskVariablesIndexer implements TaskVariableIndexer {

    @Override
    public boolean accept(Object variable) {
        if (variable instanceof Person) {
            return true;
        }
        return false;
    }

    @Override
    public List&lt;TaskVariable&gt; index(String name, Object variable) {

        Person person = (Person) variable;
        List&lt;TaskVariable&gt; indexed = new ArrayList&lt;TaskVariable&gt;();

        TaskVariableImpl personNameVar = new TaskVariableImpl();
        personNameVar.setName("person.name");
        personNameVar.setValue(person.getName());

        indexed.add(personNameVar);

        TaskVariableImpl personAgeVar = new TaskVariableImpl();
        personAgeVar.setName("person.age");
        personAgeVar.setValue(person.getAge()+"");

        indexed.add(personAgeVar);

        return indexed;
    }

}</pre>
						</p></div><p>
						The process engine can use this indexer to index values when they are of the <code class="literal">Person</code> type, while all other variables are indexed with the default <code class="literal">toString()</code> method. Now, to query for process instances or tasks that refer to a person with age 34, you can use the following query:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								variable name: <code class="literal">person.age</code>
							</li><li class="listitem">
								variable value: <code class="literal">34</code>
							</li></ul></div><p>
						As a <code class="literal">LIKE</code> type query is not used, the database server can optimize the query and make it efficient on a large set of data.
					</p><h5 id="custom_indexers">Custom indexers</h5><p>
						The process engine supports indexers for both process and task variables. However, it uses different interfaces for the indexers, because they must produce different types of objects that represent an audit view of the variable.
					</p><p>
						You must implement the following interfaces to build custom indexers:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For process variables: <code class="literal">org.kie.internal.process.ProcessVariableIndexer</code>
							</li><li class="listitem">
								For task variables: <code class="literal">org.kie.internal.task.api.TaskVariableIndexer</code>
							</li></ul></div><p>
						You must implement two methods for either of the interfaces:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">accept</code>: Indicates whether a type is handled by this indexer. The process engine expects that only one indexer can index a given variable value, so it uses the first indexer that accepts the type.
							</li><li class="listitem">
								<code class="literal">index</code>: Indexes a value, producing a object or list of objects (usually strings) for inclusion in the audit log.
							</li></ul></div><p>
						After implementing the interface, you must package this implementation as a JAR file and list the implementation in one of the following files:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For process variables, the <code class="literal">META-INF/services/org.kie.internal.process.ProcessVariableIndexer</code> file, which lists fully qualified class names of process variable indexers (single class name per line)
							</li><li class="listitem">
								For task variables, the <code class="literal">META-INF/services/org.kie.internal.task.api.TaskVariableIndexer</code> file, which lists fully qualified class names of task variable indexers (single class name per line)
							</li></ul></div><p>
						The <code class="literal">ServiceLoader</code> mechanism discovers the indexers using these files. When indexing a process or task variable, the process engine examines the registered indexers to find any indexer that accepts the value of the variable. If no other indexer accepts the value, the process engine applies the default indexer that uses the <code class="literal">toString()</code> method.
					</p></section></section><section class="section" id="transactions-con_process-engine"><div class="titlepage"><div><div><h2 class="title">67.3. Transactions in the process engine</h2></div></div></div><p>
					The process engine supports Java Transaction API (JTA) transactions.
				</p><p>
					The current version of the process engine does not support pure local transactions.
				</p><p>
					If you do not provide transaction boundaries inside your application, the process engine automatically executes each method invocation on the process engine in a separate transaction.
				</p><p>
					Optionally, you can specify the transaction boundaries in the application code, for example, to combine multiple commands into one transaction.
				</p><section class="section" id="transaction-register-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.3.1. Registration of a transaction manager</h3></div></div></div><p>
						You must register a transaction manager in the environment to use user-defined transactions.
					</p><p>
						The following sample code registers the transaction manager and uses JTA calls to specify transaction boundaries.
					</p><div class="formalpara"><p class="title"><strong>Registering a transaction manager and using transactions</strong></p><p>
							
<pre class="programlisting language-java">// Create the entity manager factory
EntityManagerFactory emf = EntityManagerFactoryManager.get().getOrCreate("org.jbpm.persistence.jpa");
TransactionManager tm = TransactionManagerServices.getTransactionManager();

// Set up the runtime environment
RuntimeEnvironment environment = RuntimeEnvironmentBuilder.Factory.get()
.newDefaultBuilder()
.addAsset(ResourceFactory.newClassPathResource("MyProcessDefinition.bpmn2"), ResourceType.BPMN2)
    .addEnvironmentEntry(EnvironmentName.TRANSACTION_MANAGER, tm)
    .get();

// Get the KIE session
RuntimeManager manager = RuntimeManagerFactory.Factory.get().newPerRequestRuntimeManager(environment);
RuntimeEngine runtime = manager.getRuntimeEngine(ProcessInstanceIdContext.get());
KieSession ksession = runtime.getKieSession();

// Start the transaction
UserTransaction ut = InitialContext.doLookup("java:comp/UserTransaction");
ut.begin();

// Perform multiple commands inside one transaction
ksession.insert( new Person( "John Doe" ) );
ksession.startProcess("MyProcess");

// Commit the transaction
ut.commit();</pre>
						</p></div><p>
						You must provide a <code class="literal">jndi.properties</code> file in you root class path to create a JNDI <code class="literal">InitialContextFactory</code> object, because transaction-related objects like <code class="literal">UserTransaction</code>, <code class="literal">TransactionManager</code>, and <code class="literal">TransactionSynchronizationRegistry</code> are registered in JNDI.
					</p><p>
						If your project includes the <code class="literal">jbpm-test</code> module, this file is already included by default.
					</p><p>
						Otherwise, you must create the <code class="literal">jndi.properties</code> file with the following content:
					</p><div class="formalpara"><p class="title"><strong>Content of the <code class="literal">jndi.properties</code> file</strong></p><p>
							
<pre class="programlisting language-properties">java.naming.factory.initial=org.jbpm.test.util.CloseSafeMemoryContextFactory
org.osjava.sj.root=target/test-classes/config
org.osjava.jndi.delimiter=/
org.osjava.sj.jndi.shared=true</pre>
						</p></div><p>
						This configuration assumes that the <code class="literal">simple-jndi:simple-jndi</code> artifact is present in the class path of your project. You can also use a different JNDI implementation.
					</p><p>
						By default, the Narayana JTA transaction manager is used. If you want to use a different JTA transaction manager, you can change the <code class="literal">persistence.xml</code> file to use the required transaction manager. For example, if your application runs on Red Hat JBoss EAP version 7 or later, you can use the JBoss transaction manager. In this case, change the transaction manager property in the <code class="literal">persistence.xml</code> file:
					</p><div class="formalpara"><p class="title"><strong>Transaction manager property in the <code class="literal">persistence.xml</code> file for the JBoss transaction manager</strong></p><p>
							
<pre class="programlisting language-properties">&lt;property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform" /&gt;</pre>
						</p></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Using the Singleton strategy of the <code class="literal">RuntimeManager</code> class with JTA transactions (<code class="literal">UserTransaction</code> or CMT) creates a race condition. This race condition can result in an <code class="literal">IllegalStateException</code> exception with a message similar to <code class="literal">Process instance XXX is disconnected</code>.
						</p><p>
							To avoid this race condition, explicitly synchronize around the <code class="literal">KieSession</code> instance when invoking the transaction in the user application code.
						</p><pre class="programlisting language-java">synchronized (ksession) {
    try {
        tx.begin();

        // use ksession
        // application logic

        tx.commit();
    } catch (Exception e) {
        //...
    }
}</pre></div></div></section><section class="section" id="transaction-cmt-proc_process-engine"><div class="titlepage"><div><div><h3 class="title">67.3.2. Configuring container-managed transactions</h3></div></div></div><p>
						If you embed the process engine in an application that executes in container-managed transaction (CMT) mode, for example, EJB beans, you must complete additional configuration. This configuration is especially important if the application runs on an application server that does not allow a CMT application to access a <code class="literal">UserTransaction</code> instance from JNDI, for example, WebSphere Application Server.
					</p><p>
						The default transaction manager implementation in the process engine relies on <code class="literal">UserTransaction</code> to query transaction status and then uses the status to determine whether to start a transaction. In environments that prevent access to a <code class="literal">UserTransaction</code> instance, this implementation fails.
					</p><p>
						To enable proper execution in CMT environments, the process engine provides a dedicated transaction manager implementation: <code class="literal">org.jbpm.persistence.jta.ContainerManagedTransactionManager</code>. This transaction manager expects that the transaction is active and always returns <code class="literal">ACTIVE</code> when the <code class="literal">getStatus()</code> method is invoked. Operations such as <code class="literal">begin</code>, <code class="literal">commit</code>, and <code class="literal">rollback</code> are no-op methods, because the transaction manager cannot affect these operations in container-managed transaction mode.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							During process execution your code must propagate any exceptions thrown by the engine to the container to ensure that the container rolls transactions back when necessary.
						</p></div></div><p>
						To configure this transaction manager, complete the steps in this procedure.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In your code, insert the transaction manager and persistence context manager into the environment before creating or loading a session:
							</p><div class="formalpara"><p class="title"><strong>Inserting the transaction manager and persistence context manager into the environment</strong></p><p>
									
<pre class="programlisting language-java">Environment env = EnvironmentFactory.newEnvironment();
env.set(EnvironmentName.ENTITY_MANAGER_FACTORY, emf);
env.set(EnvironmentName.TRANSACTION_MANAGER, new ContainerManagedTransactionManager());
env.set(EnvironmentName.PERSISTENCE_CONTEXT_MANAGER, new JpaProcessPersistenceContextManager(env));
env.set(EnvironmentName.TASK_PERSISTENCE_CONTEXT_MANAGER, new JPATaskPersistenceContextManager(env));</pre>
								</p></div></li><li class="listitem"><p class="simpara">
								In the <code class="literal">persistence.xml</code> file, configure the JPA provider. The following example uses <code class="literal">hibernate</code> and WebSphere Application Server.
							</p><div class="formalpara"><p class="title"><strong>Configuring the JPA provider in the <code class="literal">persistence.xml</code> file</strong></p><p>
									
<pre class="programlisting language-java">&lt;property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.CMTTransactionFactory"/&gt;
&lt;property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.WebSphereJtaPlatform"/&gt;</pre>
								</p></div></li><li class="listitem"><p class="simpara">
								To dispose a KIE session, do not dispose it directly. Instead, execute the <code class="literal">org.jbpm.persistence.jta.ContainerManagedTransactionDisposeCommand</code> command. This commands ensures that the session is disposed at the completion of the current transaction. In the following example, <code class="literal">ksession</code> is the <code class="literal">KieSession</code> object that you want to dispose.
							</p><div class="formalpara"><p class="title"><strong>Disposing a KIE session using the <code class="literal">ContainerManagedTransactionDisposeCommand</code> command</strong></p><p>
									
<pre class="programlisting language-java">ksession.execute(new ContainerManagedTransactionDisposeCommand());</pre>
								</p></div><p class="simpara">
								Directly disposing the session causes an exception at the completion of the transaction, because the process engine registers transaction synchronization to clean up the session state.
							</p></li></ol></div></section></section><section class="section" id="persistence-configuration-con_process-engine"><div class="titlepage"><div><div><h2 class="title">67.4. Configuration of persistence in the process engine</h2></div></div></div><p>
					If you use the process engine without configuring any persistence, it does not save runtime data to any database; no in-memory database is available by default. You can use this mode if it is required for performance reasons or when you want to manage persistence yourself.
				</p><p>
					To use JPA persistence in the process engine, you must configure it.
				</p><p>
					Configuration usually requires adding the necessary dependencies, configuring a data source, and creating the process engine classes with persistence configured.
				</p><section class="section" id="persistence-configuration-file-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.4.1. Configuration in the <code class="literal">persistence.xml</code> file</h3></div></div></div><p>
						To use JPA persistence, you must add a <code class="literal">persistence.xml</code> persistence configuration to your class path to configure JPA to use Hibernate and the H2 database (or any other database that you prefer). Place this file in the <code class="literal">META-INF</code> directory of your project.
					</p><div class="formalpara"><p class="title"><strong>Sample <code class="literal">persistence.xml</code> file</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;persistence
      version="2.0"
      xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd
      http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"
      xmlns="http://java.sun.com/xml/ns/persistence"
      xmlns:orm="http://java.sun.com/xml/ns/persistence/orm"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;

  &lt;persistence-unit name="org.jbpm.persistence.jpa" transaction-type="JTA"&gt;
    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
    &lt;jta-data-source&gt;jdbc/jbpm-ds&lt;/jta-data-source&gt;
    &lt;mapping-file&gt;META-INF/JBPMorm.xml&lt;/mapping-file&gt;
    &lt;class&gt;org.drools.persistence.info.SessionInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.persistence.processinstance.ProcessInstanceInfo&lt;/class&gt;
    &lt;class&gt;org.drools.persistence.info.WorkItemInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.persistence.correlation.CorrelationKeyInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.persistence.correlation.CorrelationPropertyInfo&lt;/class&gt;
    &lt;class&gt;org.jbpm.runtime.manager.impl.jpa.ContextMappingInfo&lt;/class&gt;

    &lt;properties&gt;
      &lt;property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/&gt;
      &lt;property name="hibernate.max_fetch_depth" value="3"/&gt;
      &lt;property name="hibernate.hbm2ddl.auto" value="update"/&gt;
      &lt;property name="hibernate.show_sql" value="true"/&gt;
      &lt;property name="hibernate.connection.release_mode" value="after_transaction"/&gt;
            &lt;property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossStandAloneJtaPlatform"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre>
						</p></div><p>
						The example refers to a <code class="literal">jdbc/jbpm-ds</code> data source. For instructions about configuring a data source, see <a class="xref" href="#persistence-datasources-con_process-engine" title="67.4.2. Configuration of data sources for process engine persistence">Section 67.4.2, “Configuration of data sources for process engine persistence”</a>.
					</p></section><section class="section" id="persistence-datasources-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.4.2. Configuration of data sources for process engine persistence</h3></div></div></div><p>
						To configure JPA persistence in the process engine, you must provide a data source, which represents a database backend.
					</p><p>
						If you run your application in an application server, such as Red Hat JBoss EAP, you can use the application server to set up data sources, for example, by adding a data source configuration file in the <code class="literal">deploy</code> directory. For instructions about creating data sources, see the documentaion for the application server.
					</p><p>
						If you deploy your application to Red Hat JBoss EAP, you can create a data source by creating a configuration file in the <code class="literal">deploy</code> directory:
					</p><div class="formalpara"><p class="title"><strong>Example data source configuration file for Red Hat JBoss EAP</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;datasources&gt;
  &lt;local-tx-datasource&gt;
    &lt;jndi-name&gt;jdbc/jbpm-ds&lt;/jndi-name&gt;
    &lt;connection-url&gt;jdbc:h2:tcp://localhost/~/test&lt;/connection-url&gt;
    &lt;driver-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/driver-class&gt;
    &lt;user-name&gt;sa&lt;/user-name&gt;
    &lt;password&gt;&lt;/password&gt;
  &lt;/local-tx-datasource&gt;
&lt;/datasources&gt;</pre>
						</p></div><p>
						If your application runs in a plain Java environment, you can use Narayana and Tomcat DBCP by using the <code class="literal">DataSourceFactory</code> class from the <code class="literal">kie-test-util</code> module supplied by Red Hat Process Automation Manager. See the following code fragment. This example uses the H2 in-memory database in combination with Narayana and Tomcat DBCP.
					</p><div class="formalpara"><p class="title"><strong>Example code configuring an H2 in-memory database data source</strong></p><p>
							
<pre class="programlisting language-java">Properties driverProperties = new Properties();
driverProperties.put("user", "sa");
driverProperties.put("password", "sa");
driverProperties.put("url", "jdbc:h2:mem:jbpm-db;MVCC=true");
driverProperties.put("driverClassName", "org.h2.Driver");
driverProperties.put("className", "org.h2.jdbcx.JdbcDataSource");
PoolingDataSourceWrapper pdsw = DataSourceFactory.setupPoolingDataSource("jdbc/jbpm-ds", driverProperties);</pre>
						</p></div></section><section class="section" id="persistence-dependencies-ref_process-engine"><div class="titlepage"><div><div><h3 class="title">67.4.3. Dependencies for persistence</h3></div></div></div><p>
						Persistence requires certain JAR artifact dependencies.
					</p><p>
						The <code class="literal">jbpm-persistence-jpa.jar</code> file is always required. This file contains the code for saving the runtime state whenever necessary.
					</p><p>
						Depending on the persistence solution and database you are using, you might need additional dependencies. The default configuration combination includes the following components:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Hibernate as the JPA persistence provider
							</li><li class="listitem">
								H2 in-memory database
							</li><li class="listitem">
								Narayana for JTA-based transaction management
							</li><li class="listitem">
								Tomcat DBCP for connection pooling capabilities
							</li></ul></div><p>
						This configuration requires the following additional dependencies:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">jbpm-persistence-jpa</code> (<code class="literal">org.jbpm</code>)
							</li><li class="listitem">
								<code class="literal">drools-persistence-jpa</code> (<code class="literal">org.drools</code>)
							</li><li class="listitem">
								<code class="literal">persistence-api</code> (<code class="literal">javax.persistence</code>)
							</li><li class="listitem">
								<code class="literal">hibernate-entitymanager</code> (<code class="literal">org.hibernate</code>)
							</li><li class="listitem">
								<code class="literal">hibernate-annotations</code> (<code class="literal">org.hibernate</code>)
							</li><li class="listitem">
								<code class="literal">hibernate-commons-annotations</code> (<code class="literal">org.hibernate</code>)
							</li><li class="listitem">
								<code class="literal">hibernate-core</code> (<code class="literal">org.hibernate</code>)
							</li><li class="listitem">
								<code class="literal">commons-collections</code> (<code class="literal">commons-collections</code>)
							</li><li class="listitem">
								<code class="literal">dom4j</code> (<code class="literal">org.dom4j</code>)
							</li><li class="listitem">
								<code class="literal">jta</code> (<code class="literal">javax.transaction</code>)
							</li><li class="listitem">
								<code class="literal">narayana-jta</code> (<code class="literal">org.jboss.narayana.jta</code>)
							</li><li class="listitem">
								<code class="literal">tomcat-dbcp</code> (<code class="literal">org.apache.tomcat</code>)
							</li><li class="listitem">
								<code class="literal">jboss-transaction-api_1.2_spec</code> (<code class="literal">org.jboss.spec.javax.transaction</code>)
							</li><li class="listitem">
								<code class="literal">javassist</code> (<code class="literal">javassist</code>)
							</li><li class="listitem">
								<code class="literal">slf4j-api</code> (<code class="literal">org.slf4j</code>)
							</li><li class="listitem">
								<code class="literal">slf4j-jdk14</code> (<code class="literal">org.slf4j</code>)
							</li><li class="listitem">
								<code class="literal">simple-jndi</code> (<code class="literal">simple-jndi</code>)
							</li><li class="listitem">
								<code class="literal">h2</code> (<code class="literal">com.h2database</code>)
							</li><li class="listitem">
								<code class="literal">jbpm-test</code> (<code class="literal">org.jbpm</code>) only for testing, do not include this artifact in the production application
							</li></ul></div></section><section class="section" id="persistence-kiesession-proc_process-engine"><div class="titlepage"><div><div><h3 class="title">67.4.4. Creating a KIE session with persistence</h3></div></div></div><p>
						If your code creates KIE sessions directly, you can use the <code class="literal">JPAKnowledgeService</code> class to create your KIE session. This approach provides full access to the underlying configuration.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a KIE session using the <code class="literal">JPAKnowledgeService</code> class, based on a KIE base, a KIE session configuration (if necessary), and an environment. The environment must contain a reference to the Entity Manager Factory that you use for persistence.
							</p><div class="formalpara"><p class="title"><strong>Creating a KIE session with persistence</strong></p><p>
									
<pre class="programlisting language-java">// create the entity manager factory and register it in the environment
EntityManagerFactory emf =
    Persistence.createEntityManagerFactory( "org.jbpm.persistence.jpa" );
Environment env = KnowledgeBaseFactory.newEnvironment();
env.set( EnvironmentName.ENTITY_MANAGER_FACTORY, emf );

// create a new KIE session that uses JPA to store the runtime state
StatefulKnowledgeSession ksession = JPAKnowledgeService.newStatefulKnowledgeSession( kbase, null, env );
int sessionId = ksession.getId();

// invoke methods on your method here
ksession.startProcess( "MyProcess" );
ksession.dispose();</pre>
								</p></div></li><li class="listitem"><p class="simpara">
								To re-create a session from the database based on a specific session ID, use the <code class="literal">JPAKnowledgeService.loadStatefulKnowledgeSession()</code> method:
							</p><div class="formalpara"><p class="title"><strong>Re-creating a KIE session from the persistence database</strong></p><p>
									
<pre class="programlisting language-java">// re-create the session from database using the sessionId
ksession = JPAKnowledgeService.loadStatefulKnowledgeSession(sessionId, kbase, null, env );</pre>
								</p></div></li></ol></div></section><section class="section" id="persistence-runtimemanager-con_process-engine"><div class="titlepage"><div><div><h3 class="title">67.4.5. Persistence in the runtime manager</h3></div></div></div><p>
						If your code uses the <code class="literal">RuntimeManager</code> class, use the <code class="literal">RuntimeEnvironmentBuilder</code> class to configure the environment for persistence. By default, the runtime manager searches for the <code class="literal">org.jbpm.persistence.jpa</code> persistence unit.
					</p><p>
						The following example creates a <code class="literal">KieSession</code> with an empty context.
					</p><div class="formalpara"><p class="title"><strong>Creating a KIE session with an empty context using the runtime manager</strong></p><p>
							
<pre class="programlisting language-java">RuntimeEnvironmentBuilder builder = RuntimeEnvironmentBuilder.Factory.get()
        .newDefaultBuilder()
        .knowledgeBase(kbase);
RuntimeManager manager = RuntimeManagerFactory.Factory.get()
        .newSingletonRuntimeManager(builder.get(), "com.sample:example:1.0");
RuntimeEngine engine = manager.getRuntimeEngine(EmptyContext.get());
KieSession ksession = engine.getKieSession();</pre>
						</p></div><p>
						The prevous example requires a KIE base as the <code class="literal">kbase</code> parameter. You can use a <code class="literal">kmodule.xml</code> KJAR descriptor on the class path to buld the KIE base.
					</p><div class="formalpara"><p class="title"><strong>Building a KIE base from a <code class="literal">kmodule.xml</code> KJAR descriptor</strong></p><p>
							
<pre class="programlisting language-java">KieServices ks = KieServices.Factory.get();
KieContainer kContainer = ks.getKieClasspathContainer();
KieBase kbase = kContainer.getKieBase("kbase");</pre>
						</p></div><p>
						A <code class="literal">kmodule.xml</code> descriptor file can include an attribute for resource packages to scan to find and deploy process engine workflows.
					</p><div class="formalpara"><p class="title"><strong>Sample <code class="literal">kmodule.xml</code> descriptor file</strong></p><p>
							
<pre class="programlisting language-xml">&lt;kmodule xmlns="http://jboss.org/kie/6.0.0/kmodule"&gt;
  &lt;kbase name="kbase" packages="com.sample"/&gt;
&lt;/kmodule&gt;</pre>
						</p></div><p>
						To control the persistence, you can use the <code class="literal">RuntimeEnvironmentBuilder::entityManagerFactory</code> methods.
					</p><div class="formalpara"><p class="title"><strong>Controlling configuration of persistence in the runtime manager</strong></p><p>
							
<pre class="programlisting language-java">EntityManagerFactory emf = Persistence.createEntityManagerFactory("org.jbpm.persistence.jpa");

RuntimeEnvironment runtimeEnv = RuntimeEnvironmentBuilder.Factory
        .get()
        .newDefaultBuilder()
        .entityManagerFactory(emf)
        .knowledgeBase(kbase)
        .get();

StatefulKnowledgeSession ksession = (StatefulKnowledgeSession) RuntimeManagerFactory.Factory.get()
        .newSingletonRuntimeManager(runtimeEnv)
        .getRuntimeEngine(EmptyContext.get())
        .getKieSession();</pre>
						</p></div><p>
						After creating the <code class="literal">ksession</code> KIE session in this example, you can call methods in <code class="literal">ksession</code>, for example, <code class="literal">StartProcess()</code>. The process engine persists the runtime state in the configured data source.
					</p><p>
						You can restore a process instance from persistent storage by using the process instance ID. The runtime manager automatically re-creates the required session.
					</p><div class="formalpara"><p class="title"><strong>Re-creating a KIE session from the persistence database using a process instance ID</strong></p><p>
							
<pre class="programlisting language-java">RuntimeEngine runtime = manager.getRuntimeEngine(ProcessInstanceIdContext.get(processInstanceId));

KieSession session = runtime.getKieSession();</pre>
						</p></div></section></section><section class="section" id="process-variables-persist-proc_process-engine"><div class="titlepage"><div><div><h2 class="title">67.5. Persisting process variables in a separate database schema in Red Hat Process Automation Manager</h2></div></div></div><p>
					When you create process variables to use within the processes that you define, Red Hat Process Automation Manager stores those process variables as binary data in a default database schema. You can persist process variables in a separate database schema for greater flexibility in maintaining and implementing your process data.
				</p><p>
					For example, persisting your process variables in a separate database schema can help you perform the following tasks:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Maintain process variables in human-readable format
						</li><li class="listitem">
							Make the variables available to services outside of Red Hat Process Automation Manager
						</li><li class="listitem">
							Clear the log of the default database tables in Red Hat Process Automation Manager without losing process variable data
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						This procedure applies to process variables only. This procedure does not apply to case variables.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have defined processes in Red Hat Process Automation Manager for which you want to implement variables.
						</li><li class="listitem">
							If you want to persist variables in a database schema outside of Red Hat Process Automation Manager, you have created a data source and the separate database schema that you want to use. For information about creating data sources, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.10/html-single/managing_red_hat_process_automation_manager_and_kie_server_settings#managing-business-central-data-sources-con"><span class="emphasis"><em>Configuring Business Central settings and properties</em></span></a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the data object file that you use as a process variable, add the following elements to configure variable persistence:
						</p><div class="formalpara"><p class="title"><strong>Example Person.java object configured for variable persistence</strong></p><p>
								
<pre class="programlisting language-java">@javax.persistence.Entity  <span id="CO1-1"/><span class="callout">1</span>
@javax.persistence.Table(name = "Person")  <span id="CO1-2"/><span class="callout">2</span>
public class Person extends org.drools.persistence.jpa.marshaller.VariableEntity  <span id="CO1-3"/><span class="callout">3</span>
implements java.io.Serializable {  <span id="CO1-4"/><span class="callout">4</span>

	static final long serialVersionUID = 1L;

	@javax.persistence.GeneratedValue(strategy = javax.persistence.GenerationType.AUTO, generator = "PERSON_ID_GENERATOR")
	@javax.persistence.Id  <span id="CO1-5"/><span class="callout">5</span>
	@javax.persistence.SequenceGenerator(name = "PERSON_ID_GENERATOR", sequenceName = "PERSON_ID_SEQ")
	private java.lang.Long id;

	private java.lang.String name;

	private java.lang.Integer age;

	public Person() {
	}

	public java.lang.Long getId() {
		return this.id;
	}

	public void setId(java.lang.Long id) {
		this.id = id;
	}

	public java.lang.String getName() {
		return this.name;
	}

	public void setName(java.lang.String name) {
		this.name = name;
	}

	public java.lang.Integer getAge() {
		return this.age;
	}

	public void setAge(java.lang.Integer age) {
		this.age = age;
	}

	public Person(java.lang.Long id, java.lang.String name,
			java.lang.Integer age) {
		this.id = id;
		this.name = name;
		this.age = age;
	}

}</pre>
							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Configures the data object as a persistence entity.
								</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Defines the database table name used for the data object.
								</div></dd><dt><a href="#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Creates a separate <code class="literal">MappedVariable</code> mapping table that maintains the relationship between this data object and the associated process instance. If you do not need this relationship maintained, you do not need to extend the <code class="literal">VariableEntity</code> class. Without this extension, the data object is still persisted, but contains no additional data.
								</div></dd><dt><a href="#CO1-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									Configures the data object as a serializable object.
								</div></dd><dt><a href="#CO1-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									Sets a persistence ID for the object.
								</div></dd></dl></div><p class="simpara">
							To make the data object persistable using Business Central, navigate to the data object file in your project, click the <span class="strong strong"><strong>Persistence</strong></span> icon in the upper-right corner of the window, and configure the persistence behavior:
						</p><div class="figure" id="idm140093630407936"><p class="title"><strong>Figure 67.1. Persistence configuration in Business Central</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/Persistence/persistence-in-central.png" alt="persistence in central"/></div></div></div></li><li class="listitem"><p class="simpara">
							In the <code class="literal">pom.xml</code> file of your project, add the following dependency for persistence support. This dependency contains the <code class="literal">VariableEntity</code> class that you configured in your data object.
						</p><div class="formalpara"><p class="title"><strong>Project dependency for persistence</strong></p><p>
								
<pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.drools&lt;/groupId&gt;
  &lt;artifactId&gt;drools-persistence-jpa&lt;/artifactId&gt;
  &lt;version&gt;${rhpam.version}&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</pre>
							</p></div></li><li class="listitem"><p class="simpara">
							In the <code class="literal">~/META-INF/kie-deployment-descriptor.xml</code> file of your project, configure the JPA marshalling strategy and a persistence unit to be used with the marshaller. The JPA marshalling strategy and persistence unit are required for objects defined as entities.
						</p><div class="formalpara"><p class="title"><strong>JPA marshaller and persistence unit configured in the kie-deployment-descriptor.xml file</strong></p><p>
								
<pre class="programlisting language-xml">&lt;marshalling-strategy&gt;
  &lt;resolver&gt;mvel&lt;/resolver&gt;
  &lt;identifier&gt;new org.drools.persistence.jpa.marshaller.JPAPlaceholderResolverStrategy("myPersistenceUnit", classLoader)&lt;/identifier&gt;
  &lt;parameters/&gt;
&lt;/marshalling-strategy&gt;</pre>
							</p></div></li><li class="listitem"><p class="simpara">
							In the <code class="literal">~/META-INF</code> directory of your project, create a <code class="literal">persistence.xml</code> file that specifies in which data source you want to persist the process variable:
						</p><div class="formalpara"><p class="title"><strong>Example persistence.xml file with data source configuration</strong></p><p>
								
<pre class="programlisting language-xml">&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:orm="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"&gt;
    &lt;persistence-unit name="myPersistenceUnit" transaction-type="JTA"&gt;
        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;
        &lt;jta-data-source&gt;java:jboss/datasources/ExampleDS&lt;/jta-data-source&gt;  <span id="CO2-1"/><span class="callout">1</span>
        &lt;class&gt;org.space.example.Person&lt;/class&gt;
        &lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;
        &lt;properties&gt;
            &lt;property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/&gt;
            &lt;property name="hibernate.max_fetch_depth" value="3"/&gt;
            &lt;property name="hibernate.hbm2ddl.auto" value="update"/&gt;
            &lt;property name="hibernate.show_sql" value="true"/&gt;
            &lt;property name="hibernate.id.new_generator_mappings" value="false"/&gt;
            &lt;property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform"/&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre>
							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Sets the data source in which the process variable is persisted
								</div></dd></dl></div><p class="simpara">
							To configure the marshalling strategy, persistence unit, and data source using Business Central, navigate to project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Deployments</strong></span> → <span class="strong strong"><strong>Marshalling Strategies</strong></span> and to project <span class="strong strong"><strong>Settings</strong></span> → <span class="strong strong"><strong>Persistence</strong></span>:
						</p><div class="figure" id="idm140093630380928"><p class="title"><strong>Figure 67.2. JPA marshaller configuration in Business Central</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/Persistence/jpa-marhsalling-strategy.png" alt="jpa marhsalling strategy"/></div></div></div><div class="figure" id="idm140093630377040"><p class="title"><strong>Figure 67.3. Persistence unit and data source configuration in Business Central</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/_images/Persistence/persistence-unit.png" alt="persistence unit"/></div></div></div></li></ol></div></section></section><section class="chapter" id="integration-java-con_process-engine"><div class="titlepage"><div><div><h2 class="title">Chapter 68. Integration with Java frameworks</h2></div></div></div><p>
				You can integrate the process engine with several industry-standard Java frameworks, such as Apache Maven, CDI, Spring, and EJB..
			</p><section class="section" id="integration-maven-con_process-engine"><div class="titlepage"><div><div><h2 class="title">68.1. Integration with Apache Maven</h2></div></div></div><p>
					The process engine uses Maven for two main purposes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							To create KJAR artifacts, which are deployment units that the process engine can install into a runtime environment for execution
						</li><li class="listitem">
							To manage dependencies for building applications that embed the process engine
						</li></ul></div><section class="section" id="integration-maven-kjar-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.1.1. Maven artifacts as deployment units</h3></div></div></div><p>
						The process engine provides a mechanism to deploy processes from Apache Maven artifacts. These artifacts are in the JAR file format and are known as <span class="emphasis"><em>KJAR files</em></span>, or informally <span class="emphasis"><em>KJARs</em></span>. A KJAR file includes a descriptor that defines a KIE base and KIE session. It also contains the business assets, including process definitions, that the process engine can load into the KIE base.
					</p><p>
						The descriptor of a KJAR file is represented by an XML file named <code class="literal">kie-deployment-descriptor.xml</code>. The descriptor can be empty, in which case the default configuration applies. It can also provide custom configuration for the KIE base and KIE session.
					</p><div class="formalpara"><p class="title"><strong>An empty <code class="literal">kie-deployment-descriptor.xml</code> descriptor</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;deployment-descriptor xsi:schemaLocation="http://www.jboss.org/jbpm deployment-descriptor.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    &lt;persistence-unit&gt;org.jbpm.domain&lt;/persistence-unit&gt;
    &lt;audit-persistence-unit&gt;org.jbpm.domain&lt;/audit-persistence-unit&gt;
    &lt;audit-mode&gt;JPA&lt;/audit-mode&gt;
    &lt;persistence-mode&gt;JPA&lt;/persistence-mode&gt;
    &lt;runtime-strategy&gt;SINGLETON&lt;/runtime-strategy&gt;
    &lt;marshalling-strategies/&gt;
    &lt;event-listeners/&gt;
    &lt;task-event-listeners/&gt;
    &lt;globals/&gt;
    &lt;work-item-handlers /&gt;
    &lt;environment-entries/&gt;
    &lt;configurations/&gt;
    &lt;required-roles/&gt;
    &lt;remoteable-classes/&gt;
&lt;/deployment-descriptor&gt;</pre>
						</p></div><p>
						With an empty <code class="literal">kie-deployment-descriptor.xml</code> descriptor, the following default configuration applies:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								A single default KIE base is created with the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										It contains all assets from all packages in the KJAR file
									</li><li class="listitem">
										Its event processing mode is set to <code class="literal">cloud</code>
									</li><li class="listitem">
										Its equality behaviour is set to <code class="literal">identity</code>
									</li><li class="listitem">
										Its declarative agenda is disabled
									</li><li class="listitem">
										For CDI applications, its scope is set to <code class="literal">ApplicationScope</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								A single default stateless KIE session is created with the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										It is bound to the single KIE base
									</li><li class="listitem">
										Its clock type is set to <code class="literal">real time</code>
									</li><li class="listitem">
										For CDI applications, its scope is set to <code class="literal">ApplicationScope</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								A single default stateful KIE session is created with the following characteristics:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										It is bound to the single KIE base
									</li><li class="listitem">
										Its clock type is set to <code class="literal">real time</code>
									</li><li class="listitem">
										For CDI applications, its scope is set to <code class="literal">ApplicationScope</code>
									</li></ul></div></li></ul></div><p>
						If you do not want to use the defaults, you can change all configuration settings using the <code class="literal">kie-deployment-descriptor.xml</code> file. You can find the complete specification of all elements for this file in the <a class="link" href="https://github.com/kiegroup/droolsjbpm-knowledge/blob/7.48.0.Final/kie-internal/src/main/resources/deployment-descriptor.xsd">XSD schema</a>.
					</p><p>
						The following sample shows a custom <code class="literal">kie-deployment-descriptor.xml</code> file that configures the runtime engine. This example configures the most common options and includes a single work item handler. You can also use the <code class="literal">kie-deployment-descriptor.xml</code> file to configure other options.
					</p><div class="formalpara"><p class="title"><strong>Sample custom <code class="literal">kie-deployment-descriptor.xml</code> file</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;deployment-descriptor xsi:schemaLocation="http://www.jboss.org/jbpm deployment-descriptor.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    &lt;persistence-unit&gt;org.jbpm.domain&lt;/persistence-unit&gt;
    &lt;audit-persistence-unit&gt;org.jbpm.domain&lt;/audit-persistence-unit&gt;
    &lt;audit-mode&gt;JPA&lt;/audit-mode&gt;
    &lt;persistence-mode&gt;JPA&lt;/persistence-mode&gt;
    &lt;runtime-strategy&gt;SINGLETON&lt;/runtime-strategy&gt;
    &lt;marshalling-strategies/&gt;
    &lt;event-listeners/&gt;
    &lt;task-event-listeners/&gt;
    &lt;globals/&gt;
    &lt;work-item-handlers&gt;
        &lt;work-item-handler&gt;
            &lt;resolver&gt;mvel&lt;/resolver&gt;
            &lt;identifier&gt;new org.jbpm.process.workitem.bpmn2.ServiceTaskHandler(ksession, classLoader)&lt;/identifier&gt;
            &lt;parameters/&gt;
            &lt;name&gt;Service Task&lt;/name&gt;
        &lt;/work-item-handler&gt;
    &lt;/work-item-handlers&gt;
    &lt;environment-entries/&gt;
    &lt;configurations/&gt;
    &lt;required-roles/&gt;
    &lt;remoteable-classes/&gt;
&lt;/deployment-descriptor&gt;</pre>
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you use the <code class="literal">RuntimeManager</code> class, this class creates <code class="literal">KieSession</code> instances, not the <code class="literal">KieContainer</code> class. However, the <code class="literal">kie-deployment-descriptor.xml</code> model is always used as a base of the construction process. The <code class="literal">KieContainer</code> class always creates the <code class="literal">KieBase</code> instance.
						</p></div></div><p>
						You can reference KJAR artifacts, like any other Maven artifacts, using the GAV (group, artifact, version) value. When deploying units from KJAR files, the process engine uses the GAV value as the release ID in the KIE API. You can use the GAV value to deploy KJAR artifacts into a runtime environment, for example, a KIE Server.
					</p></section><section class="section" id="integration-maven-dependency-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.1.2. Dependency management with Maven</h3></div></div></div><p>
						When you build projects that embed the process engine, use Apache Maven to configure all dependencies required by the process engine.
					</p><p>
						The process engine provides a set of BOMs (Bills of Material) to simplify declaring artifact dependencies.
					</p><p>
						Use the top-level <code class="literal">pom.xml</code> file of your project to define dependency management for embedding the process engine, as shown in the following example. The example includes the main runtime dependencies, which are applicable whether the application is deployed on an application server, in a servlet container, or as a standalone application.
					</p><p>
						This example also includes version properties for components that applications using the process engine commonly need. Adjust the list of components and versions as necessary. You can view the third-party dependency versions that the product team tests in the <a class="link" href="https://github.com/kiegroup/droolsjbpm-build-bootstrap/blob/7.48.0.Final/pom.xml">parent <code class="literal">pom.xml</code> file in the Github repository</a>.
					</p><div class="formalpara"><p class="title"><strong>Maven dependency management settings for embedding the process engine</strong></p><p>
							
<pre class="programlisting language-xml">  &lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;version.org.drools&gt;7.48.0.Final-redhat-00002&lt;/version.org.drools&gt;
    &lt;version.org.jbpm&gt;7.48.0.Final-redhat-00002&lt;/version.org.jbpm&gt;
    &lt;hibernate.version&gt;5.3.17.Final&lt;/hibernate.version&gt;
    &lt;hibernate.core.version&gt;5.3.17.Final&lt;/hibernate.core.version&gt;
    &lt;slf4j.version&gt;1.7.26&lt;/slf4j.version&gt;
    &lt;jboss.javaee.version&gt;1.0.0.Final&lt;/jboss.javaee.version&gt;
    &lt;logback.version&gt;1.2.9&lt;/logback.version&gt;
    &lt;h2.version&gt;1.3.173&lt;/h2.version&gt;
    &lt;narayana.version&gt;5.9.0.Final&lt;/narayana.version&gt;
    &lt;jta.version&gt;1.0.1.Final&lt;/jta.version&gt;
    &lt;junit.version&gt;4.13.1&lt;/junit.version&gt;
  &lt;/properties&gt;
  &lt;dependencyManagement&gt;
    &lt;dependencies&gt;
      &lt;!-- define Drools BOM --&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.drools&lt;/groupId&gt;
        &lt;artifactId&gt;drools-bom&lt;/artifactId&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;version&gt;${version.org.drools}&lt;/version&gt;
        &lt;scope&gt;import&lt;/scope&gt;
      &lt;/dependency&gt;
      &lt;!-- define jBPM BOM --&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
        &lt;artifactId&gt;jbpm-bom&lt;/artifactId&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;version&gt;${version.org.jbpm}&lt;/version&gt;
        &lt;scope&gt;import&lt;/scope&gt;
      &lt;/dependency&gt;
    &lt;/dependencies&gt;
  &lt;/dependencyManagement&gt;</pre>
						</p></div><p>
						In modules that use the process engine Java API (KIE API), declare the necessary process engine dependencies and other components that the modules require, as in the following example:
					</p><div class="formalpara"><p class="title"><strong>Dependencies for modules that use the KIE API</strong></p><p>
							
<pre class="programlisting language-xml">    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-flow&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-flow-builder&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-bpmn2&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-persistence-jpa&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-human-task-core&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-runtime-manager&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
      &lt;version&gt;${slf4j.version}&lt;/version&gt;
    &lt;/dependency&gt;</pre>
						</p></div><p>
						If your application uses persistence and transactions, you must add artifacts that implement the JTA and JPA frameworks. Additional dependencies are required for testing the workflow components before actual deployment.
					</p><p>
						The following example defines the dependencies that include Hibernate for JPA, the H2 database for persistence, Narayana for JTA, and the components needed for testing. This example uses the <code class="literal">test</code> scope. Adjust this example as necessary for your application. For production use, remove the <code class="literal">test</code> scope.
					</p><div class="formalpara"><p class="title"><strong>Example test module dependencies for the process engine</strong></p><p>
							
<pre class="programlisting language-xml">    &lt;!-- test dependencies --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jbpm&lt;/groupId&gt;
      &lt;artifactId&gt;jbpm-shared-services&lt;/artifactId&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
      &lt;version&gt;${logback.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;${junit.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
      &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
      &lt;version&gt;${hibernate.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
      &lt;version&gt;${hibernate.core.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.h2database&lt;/groupId&gt;
      &lt;artifactId&gt;h2&lt;/artifactId&gt;
      &lt;version&gt;${h2.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;jboss-transaction-api_1.2_spec&lt;/groupId&gt;
      &lt;artifactId&gt;org.jboss.spec.javax.transaction&lt;/artifactId&gt;
      &lt;version&gt;${jta.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.narayana.jta&lt;/groupId&gt;
      &lt;artifactId&gt;narayana-jta&lt;/artifactId&gt;
      &lt;version&gt;${narayana.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;</pre>
						</p></div><p>
						With this configuration you can embed the process engine in your application and use the KIE API to interact with processes, rules, and events.
					</p><h5 id="maven_repositories">Maven repositories</h5><p>
						To use Red Hat product versions of Maven dependencies, you must configure the Red Hat JBoss Enterprise Maven repository in the top-level <code class="literal">pom.xml</code> file. For information about this repository, see <a class="link" href="https://access.redhat.com/maven-repository">JBoss Enterprise Maven Repository</a>.
					</p><p>
						Alternatively, download the <code class="literal">rhpam-7.10.0-maven-repository.zip</code> product deliverable file from the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=rhpam&amp;productChanged=yes">Software Downloads</a> page of the Red Hat Customer Portal and make the contents of this file available as a local Maven repository.
					</p></section></section><section class="section" id="integration-cdi-con_process-engine"><div class="titlepage"><div><div><h2 class="title">68.2. Integration with CDI</h2></div></div></div><p>
					The process engine supports integration with CDI automatically. You can use most of its API in the CDI framework without any modification.
				</p><p>
					The process engine also provides some dedicated modules that are designed specifically for CDI containers. The most important module is <code class="literal">jbpm-services-cdi</code>, which provides CDI wrappers for process engine services. You can use these wrappers to integrate the process engine in CDI applications. The module provides the following set of services:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">DeploymentService</code>
						</li><li class="listitem">
							<code class="literal">ProcessService</code>
						</li><li class="listitem">
							<code class="literal">UserTaskService</code>
						</li><li class="listitem">
							<code class="literal">RuntimeDataService</code>
						</li><li class="listitem">
							<code class="literal">DefinitionService</code>
						</li></ul></div><p>
					These services are available for injection in any other CDI bean.
				</p><section class="section" id="cdi-deployment-service-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.2.1. Deployment service for CDI</h3></div></div></div><p>
						The <code class="literal">DeploymentService</code> service deploys and undeploys deployment units in the runtime environment. When you deploy a unit using this service, the deployment unit becomes ready for execution and a <code class="literal">RuntimeManager</code> instance is created for it. You can also use the <code class="literal">DeploymentService</code> to retrieve the following objects:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">RuntimeManager</code> instance for a given deployment ID
							</li><li class="listitem">
								The <code class="literal">DeployedUnit</code> instance that represents the complete deployment unit for the given deployment ID
							</li><li class="listitem">
								The list of all deployed units known to the deployment service
							</li></ul></div><p>
						By default, the deployment service does not save information about deployed units to any persistent storage. In the CDI framework, the component that uses the service can save and restore deployment unit information, for example, using a database, file, system, or repository.
					</p><p>
						The deployment service fires CDI events on deployment and undeployment. The component that uses the service can process these events to store deployments and remove them from the store when they are undeployed.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A <code class="literal">DeploymentEvent</code> with the <code class="literal">@Deploy</code> qualifier is fired on deployment of a unit
							</li><li class="listitem">
								A <code class="literal">DeploymentEvent</code> with the <code class="literal">@Undeploy</code> qualifier is fired on undeployment of a unit
							</li></ul></div><p>
						You can use the CDI observer mechanism to get notification on these events.
					</p><p>
						The following example receives notification on deployment of a unit and can save the deployment:
					</p><div class="formalpara"><p class="title"><strong>Example of processing of a deployment event</strong></p><p>
							
<pre class="programlisting language-java">    public void saveDeployment(@Observes @Deploy DeploymentEvent event) {
        // Store deployed unit information
        DeployedUnit deployedUnit = event.getDeployedUnit();
    }</pre>
						</p></div><p>
						The following example receives notification on deployment of a unit and can remove the deployment from storage:
					</p><div class="formalpara"><p class="title"><strong>Example of processing of an undeployment event</strong></p><p>
							
<pre class="programlisting language-java">    public void removeDeployment(@Observes @Undeploy DeploymentEvent event) {
        // Remove deployment with the ID event.getDeploymentId()
    }</pre>
						</p></div><p>
						Several implementations of the <code class="literal">DeploymentService</code> service are possible, so you must use qualifiers to instruct the CDI container to inject a particular implementation. A matching implementation of <code class="literal">DeploymentUnit</code> must exist for every implementation of <code class="literal">DeploymentService</code>.
					</p><p>
						The process engine provides the the <code class="literal">KmoduleDeploymentService</code> implementation. This implementation is designed to work with <code class="literal">KmoduleDeploymentUnits</code>, which are small descriptors that are included in a KJAR file. This implementation is the typical solution for most use cases. The qualifier for this implementation is <code class="literal">@Kjar</code>.
					</p></section><section class="section" id="cdi-form-provider-service-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.2.2. Form provider service for CDI</h3></div></div></div><p>
						The <code class="literal">FormProviderService</code> service provides access to form representations, which are usually displayed on the user interface for both process forms and user task forms.
					</p><p>
						The service relies on the concept of isolated form providers that can provide different capabilities and be backed by different technologies. The <code class="literal">FormProvider</code> interface describes the contract for implementations of form providers.
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">FormProvider</code> interface</strong></p><p>
							
<pre class="programlisting language-java">public interface FormProvider {

    int getPriority();

    String render(String name, ProcessDesc process, Map&lt;String, Object&gt; renderContext);

    String render(String name, Task task, ProcessDesc process, Map&lt;String, Object&gt; renderContext);
}</pre>
						</p></div><p>
						Implementations of the <code class="literal">FormProvider</code> interface must define a priority value. When the <code class="literal">FormProviderService</code> service needs to render a form, it calls the available providers in their priority order.
					</p><p>
						The lower the priority value, the higher priority the provider gets. For example, a provider with a priority of 5 is evaluated before a provider with a priority of 10. For each required form, the service iterates over the available providers in the order of their priority, until one of them delivers the content. In the worst-case scenario, a simple text-based form is returned.
					</p><p>
						The process engine provides the following implementations of <code class="literal">FormProvider</code>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A provider that delivers forms created in the Form Modeller tool, with a priority of 2
							</li><li class="listitem">
								A FreeMarker-based implementation that supports process and task forms, with a priority of 3
							</li><li class="listitem">
								The default forms provider, returning a simple text-based form, used as a last resort if no other provider delivers any content, with a priority of 1000
							</li></ul></div></section><section class="section" id="cdi-runtime-data-service-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.2.3. Runtime data service for CDI</h3></div></div></div><p>
						The <code class="literal">RuntimeDataService</code> service provides access to data that is available at runtime, including the following data:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The available processes to be executed, with various filters
							</li><li class="listitem">
								The active process instances, with various filters
							</li><li class="listitem">
								The process instance history
							</li><li class="listitem">
								The process instance variables
							</li><li class="listitem">
								The active and completed nodes of process instance
							</li></ul></div><p>
						The default implementation of <code class="literal">RuntimeDataService</code> observes deployment events and indexes all deployed processes to expose them to the calling components.
					</p></section><section class="section" id="cdi-definition-service-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.2.4. Definition service for CDI</h3></div></div></div><p>
						The <code class="literal">DefinitionService</code> service provides access to process details that are stored as part of BPMN2 XML definitions.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Before using any method that provides information, invoke the <code class="literal">buildProcessDefinition()</code> method to populate the repository with process information that is retrieved from the BPMN2 content.
						</p></div></div><p>
						The <code class="literal">BPMN2DataService</code> implementation provides access to the following data:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The overall description of the process for the given process definition
							</li><li class="listitem">
								The collection of all user tasks found in the process definition
							</li><li class="listitem">
								The information about the defined inputs for a user task node
							</li><li class="listitem">
								The information about defined outputs for a user task node
							</li><li class="listitem">
								The IDs of reusable processes (call activity) that are defined within a given process definition
							</li><li class="listitem">
								The information about process variables that are defined within a given process definition
							</li><li class="listitem"><p class="simpara">
								The information about all organizational entities (users and groups) that are included in the process definition. Depending on the particular process definition, the returned values for users and groups can contain the following information:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The actual user or group name
									</li><li class="listitem">
										The process variable that is used to get the actual user or group name on runtime, for example, <code class="literal">#{manager}</code>
									</li></ul></div></li></ul></div></section><section class="section" id="cdi-integration-configuration-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.2.5. CDI integration configuration</h3></div></div></div><p>
						To use the <code class="literal">jbpm-services-cdi</code> module in your CDI framework, you must provide some beans to satisfy the dependencies of the included service implementations.
					</p><p>
						Several beans can be required, depending on the usage scenario:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The entity manager and entity manager factory
							</li><li class="listitem">
								The user group callback for human tasks
							</li><li class="listitem">
								The identity provider to pass authenticated user information to the services
							</li></ul></div><p>
						When running in a JEE environment, such as Red Hat JBoss EAP, the following producer bean satisfies all requirements of the <code class="literal">jbpm-services-cdi</code> module.
					</p><div class="formalpara"><p class="title"><strong>The producer bean that satisfies all requirements of the <code class="literal">jbpm-services-cdi</code> module in a JEE environment</strong></p><p>
							
<pre class="programlisting language-java">public class EnvironmentProducer {

    @PersistenceUnit(unitName = "org.jbpm.domain")
    private EntityManagerFactory emf;

    @Inject
    @Selectable
    private UserGroupInfoProducer userGroupInfoProducer;

    @Inject
    @Kjar
    private DeploymentService deploymentService;

    @Produces
    public EntityManagerFactory getEntityManagerFactory() {
        return this.emf;
    }

    @Produces
    public org.kie.api.task.UserGroupCallback produceSelectedUserGroupCalback() {
        return userGroupInfoProducer.produceCallback();
    }

    @Produces
    public UserInfo produceUserInfo() {
        return userGroupInfoProducer.produceUserInfo();
    }

    @Produces
    @Named("Logs")
    public TaskLifeCycleEventListener produceTaskAuditListener() {
        return new JPATaskLifeCycleEventListener(true);
    }

    @Produces
    public DeploymentService getDeploymentService() {
        return this.deploymentService;
    }

    @Produces
    public IdentityProvider produceIdentityProvider {
        return new IdentityProvider() {
             // implement IdentityProvider
        };
    }
}</pre>
						</p></div><p>
						The <code class="literal">beans.xml</code> file for the application must enable a proper alternative for user group info callback. This alternative is taken based on the <code class="literal">@Selectable</code> qualifier.
					</p><div class="formalpara"><p class="title"><strong>Definition of the alternative for user group info callback in the <code class="literal">beans.xml</code> file`</strong></p><p>
							
<pre class="programlisting language-xml">&lt;beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee https://docs.jboss.org/cdi/beans_1_0.xsd"&gt;

  &lt;alternatives&gt;
    &lt;class&gt;org.jbpm.kie.services.cdi.producer.JAASUserGroupInfoProducer&lt;/class&gt;
  &lt;/alternatives&gt;

&lt;/beans&gt;</pre>
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							<code class="literal">org.jbpm.kie.services.cdi.producer.JAASUserGroupInfoProducer</code> is an example value. This value is usually a good fit for Red Hat JBoss EAP, as it reuses security settings on the application server, regardless of which security method the server uses, for example, LDAP or database.
						</p></div></div><p>
						Optionally, you can provide several other producers to deliver <code class="literal">WorkItemHandlers</code> and <code class="literal">Process</code>, <code class="literal">Agenda</code>, <code class="literal">WorkingMemory</code> event listeners. You can provide these components by implementing the following interfaces:
					</p><div class="formalpara"><p class="title"><strong>Work item handler producer interface for process engine integration with CDI</strong></p><p>
							
<pre class="programlisting language-java">/**
 * Enables providing custom implementations to deliver WorkItem name and WorkItemHandler instance pairs
 * for the runtime.
 * &lt;br/&gt;
 * This interface is invoked by the RegisterableItemsFactory implementation (in particular InjectableRegisterableItemsFactory
 * in the CDI framework) for every KieSession. Always return new instances of objects to avoid unexpected
 * results.
 *
 */
public interface WorkItemHandlerProducer {

    /**
     * Returns map of work items(key = work item name, value = work item handler instance)
     * to be registered on KieSession
     * &lt;br/&gt;
     * The following parameters might be given:
     * &lt;ul&gt;
     *  &lt;li&gt;ksession&lt;/li&gt;
     *  &lt;li&gt;taskService&lt;/li&gt;
     *  &lt;li&gt;runtimeManager&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * @param identifier - identifier of the owner - usually the RuntimeManager. This parameter allows the producer to filter out
     * and provide valid instances for a given owner
     * @param params - the owner might provide some parameters, usually KieSession, TaskService, RuntimeManager instances
     * @return map of work item handler instances (always return new instances when this method is invoked)
     */
    Map&lt;String, WorkItemHandler&gt; getWorkItemHandlers(String identifier, Map&lt;String, Object&gt; params);
}</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Event listener producer interface for process engine integration with CDI</strong></p><p>
							
<pre class="programlisting language-java">/**
 * Enables defining custom producers for known EventListeners. There might be several
 * implementations that might provide a different listener instance based on the context in which they are executed.
 * &lt;br/&gt;
 * This interface is invoked by the RegisterableItemsFactory implementation (in particular, InjectableRegisterableItemsFactory
 * in the CDI framework) for every KieSession. Always return new instances of objects to avoid unexpected results.
 *
 * @param &lt;T&gt; type of the event listener - ProcessEventListener, AgendaEventListener, WorkingMemoryEventListener
 */
public interface EventListenerProducer&lt;T&gt; {

    /**
     * Returns list of instances for given (T) type of listeners
     * &lt;br/&gt;
     * Parameters that might be given are:
     * &lt;ul&gt;
     *  &lt;li&gt;ksession&lt;/li&gt;
     *  &lt;li&gt;taskService&lt;/li&gt;
     *  &lt;li&gt;runtimeManager&lt;/li&gt;
     * &lt;/ul&gt;
     * @param identifier - identifier of the owner - usually RuntimeManager. This parameter allows the producer to filter out
     * and provide valid instances for given owner
     * @param params - the owner might provide some parameters, usually KieSession, TaskService, RuntimeManager instances
     * @return list of listener instances (always return new instances when this method is invoked)
     */
    List&lt;T&gt; getEventListeners(String identifier, Map&lt;String, Object&gt;  params);
}</pre>
						</p></div><p>
						The beans implementing these two interfaces are collected at runtime and invoked when the <code class="literal">RuntimeManager</code> class builds a <code class="literal">KieSession</code> instance.
					</p><section class="section" id="cdi-runtime-manager-con_process-engine"><div class="titlepage"><div><div><h4 class="title">68.2.5.1. Runtime manager as a CDI bean</h4></div></div></div><p>
							You can inject the <code class="literal">RuntimeManager</code> class as a CDI bean into any other CDI bean within your application. The <code class="literal">RuntimeEnvironment</code> class must be properly produced to enable correct initialization of the <code class="literal">RuntimeManager</code> instance.
						</p><p>
							The following CDI qualifiers reference the existing runtime manager strategies:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">@Singleton</code>
								</li><li class="listitem">
									<code class="literal">@PerRequest</code>
								</li><li class="listitem">
									<code class="literal">@PerProcessInstance</code>
								</li></ul></div><p>
							For more information about the runtime manager, see <a class="xref" href="#runtime-manager-con_process-engine" title="66.2. Runtime manager">Section 66.2, “Runtime manager”</a>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Though you can inject the <code class="literal">RuntimeManager</code> class directly, the solution for most use cases for frameworks such as CDI, EJB, or Spring is using services. The process engine services implement many best practices for using the runtime manager.
							</p></div></div><p>
							To use the runtime manager, you must add the <code class="literal">RuntimeEnvironment</code> class to the producer that is defined in the <a class="xref" href="#cdi-integration-configuration-con_process-engine" title="68.2.5. CDI integration configuration">Section 68.2.5, “CDI integration configuration”</a> section.
						</p><div class="formalpara"><p class="title"><strong>The producer bean that provides the <code class="literal">RuntimeEnvironment</code> class</strong></p><p>
								
<pre class="programlisting language-java">public class EnvironmentProducer {

    //Add the same producers as for services

    @Produces
    @Singleton
    @PerRequest
    @PerProcessInstance
    public RuntimeEnvironment produceEnvironment(EntityManagerFactory emf) {

        RuntimeEnvironment environment = RuntimeEnvironmentBuilder.Factory.get()
                .newDefaultBuilder()
                .entityManagerFactory(emf)
                .userGroupCallback(getUserGroupCallback())
                .registerableItemsFactory(InjectableRegisterableItemsFactory.getFactory(beanManager, null))
                .addAsset(ResourceFactory.newClassPathResource("BPMN2-ScriptTask.bpmn2"), ResourceType.BPMN2)
                .addAsset(ResourceFactory.newClassPathResource("BPMN2-UserTask.bpmn2"), ResourceType.BPMN2)
                .get();
        return environment;
    }
}</pre>
							</p></div><p>
							In this example, a single producer method is capable of providing the <code class="literal">RuntimeEnvironment</code> class for all runtime manager strategies by specifying all qualifiers on the method level.
						</p><p>
							When the complete producer is available, the <code class="literal">RuntimeManager</code> class can be injected into a CDI bean in the application:
						</p><div class="formalpara"><p class="title"><strong>Injecting the <code class="literal">RuntimeManager</code> class</strong></p><p>
								
<pre class="programlisting language-java">public class ProcessEngine {

    @Inject
    @Singleton
    private RuntimeManager singletonManager;

    public void startProcess() {

        RuntimeEngine runtime = singletonManager.getRuntimeEngine(EmptyContext.get());
        KieSession ksession = runtime.getKieSession();

        ProcessInstance processInstance = ksession.startProcess("UserTask");

        singletonManager.disposeRuntimeEngine(runtime);
    }
}</pre>
							</p></div><p>
							If you inject the <code class="literal">RuntimeManager</code> class, only one instance of <code class="literal">RuntimeManager</code> might exist in the application. In typical cases, use the <code class="literal">DeploymentService</code> service, which creates <code class="literal">RuntimeManager</code> instances as necessary.
						</p><p>
							As an alternative to <code class="literal">DeploymentService</code>, you can inject the <code class="literal">RuntimeManagerFactory</code> class and then the application can use it to create <code class="literal">RuntimeManager</code> instances. In this case, the <code class="literal">EnvironmentProducer</code> definition is still required. The following example shows a simple ProcessEngine bean.
						</p><div class="formalpara"><p class="title"><strong>Example ProcessEngine bean</strong></p><p>
								
<pre class="programlisting language-java">public class ProcessEngine {

    @Inject
    private RuntimeManagerFactory managerFactory;

    @Inject
    private EntityManagerFactory emf;

    @Inject
    private BeanManager beanManager;

    public void startProcess() {
        RuntimeEnvironment environment = RuntimeEnvironmentBuilder.Factory.get()
                .newDefaultBuilder()
                .entityManagerFactory(emf)
                .addAsset(ResourceFactory.newClassPathResource("BPMN2-ScriptTask.bpmn2"), ResourceType.BPMN2)
                .addAsset(ResourceFactory.newClassPathResource("BPMN2-UserTask.bpmn2"), ResourceType.BPMN2)
                .registerableItemsFactory(InjectableRegisterableItemsFactory.getFactory(beanManager, null))
                .get();

        RuntimeManager manager = managerFactory.newSingletonRuntimeManager(environment);
        RuntimeEngine runtime = manager.getRuntimeEngine(EmptyContext.get());
        KieSession ksession = runtime.getKieSession();

        ProcessInstance processInstance = ksession.startProcess("UserTask");

        manager.disposeRuntimeEngine(runtime);
        manager.close();
    }

}</pre>
							</p></div></section></section></section><section class="section" id="integration-spring-con_process-engine"><div class="titlepage"><div><div><h2 class="title">68.3. Integration with Spring</h2></div></div></div><p>
					While there are several ways to use the process engine with the Spring framework, two approaches are most frequently used
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Direct use of the Runtime Manager API
						</li><li class="listitem">
							Use of process engine services
						</li></ul></div><p>
					Both approaches are tested and valid.
				</p><p>
					If your application needs to use only one runtime manager, use the direct Runtime Manager API, because it is the simplest way to use the process engine within a Spring application.
				</p><p>
					If your application needs to use multiple instances of the runtime manager, use process engine services, which encapsulate best practices by providing a dynamic runtime environment.
				</p><section class="section" id="spring-runtime-manager-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.3.1. Direct use of the runtime manager API in Spring</h3></div></div></div><p>
						The runtime manager manages the process engine and task service in sychronization. For more information about the runtime manager, see <a class="xref" href="#runtime-manager-con_process-engine" title="66.2. Runtime manager">Section 66.2, “Runtime manager”</a>.
					</p><p>
						To set up the runtime manager in the Spring framework, use the following factory beans:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.kie.spring.factorybeans.RuntimeEnvironmentFactoryBean</code>
							</li><li class="listitem">
								<code class="literal">org.kie.spring.factorybeans.RuntimeManagerFactoryBean</code>
							</li><li class="listitem">
								<code class="literal">org.kie.spring.factorybeans.TaskServiceFactoryBean</code>
							</li></ul></div><p>
						These factory beans provide a standard way to configure the <code class="literal">spring.xml</code> file for your Spring application.
					</p><section class="section" id="runtimeenvironmentfactorybean-ref_process-engine"><div class="titlepage"><div><div><h4 class="title">68.3.1.1. <code class="literal">RuntimeEnvironmentFactoryBean</code> bean</h4></div></div></div><p>
							The <code class="literal">RuntimeEnvironmentFactoryBean</code> factory bean produces instances of <code class="literal">RuntimeEnvironment</code>. These instances are required for creating <code class="literal">RuntimeManager</code> instances.
						</p><p>
							The bean supports creating the following types of <code class="literal">RuntimeEnvironment</code> instances with different default configurations:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">DEFAULT</code>: The default, or most common, configuration for the runtime manager
								</li><li class="listitem">
									<code class="literal">EMPTY</code>: A completely empty environment that you can configure manually
								</li><li class="listitem">
									<code class="literal">DEFAULT_IN_MEMORY</code>: The same configuration as DEFAULT, but without persistence of the runtime engine
								</li><li class="listitem">
									<code class="literal">DEFAULT_KJAR</code>: The same configuration as DEFAULT, but assets are loaded from KJAR artifacts, which are identified by the release ID or the GAV value
								</li><li class="listitem">
									<code class="literal">DEFAULT_KJAR_CL</code>: The configuration is built from the <code class="literal">kmodule.xml</code> descriptor in a KJAR artifact
								</li></ul></div><p>
							Mandatory properties depends on the selected type, however, knowledge information must be present for all types. This requirement means that one of the following kinds of information must be provided:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">knowledgeBase</code>
								</li><li class="listitem">
									<code class="literal">assets</code>
								</li><li class="listitem">
									<code class="literal">releaseId</code>
								</li><li class="listitem">
									<code class="literal">groupId, artifactId, version</code>
								</li></ul></div><p>
							For the <code class="literal">DEFAULT</code>, <code class="literal">DEFAULT_KJAR</code>, and <code class="literal">DEFAULT_KJAR_CL</code> types, you must also configure persistence by providing the following parameters:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Entity manager factory
								</li><li class="listitem">
									Transaction manager
								</li></ul></div><p>
							The transaction manager must be the Spring transaction manager, because persistence and transaction support is configured based on this transaction manager.
						</p><p>
							Optionally, you can provide an <code class="literal">EntityManager</code> instance instead of creating a new instance from <code class="literal">EntityManagerFactory</code>, for example, you might use a shared entity manager from Spring.
						</p><p>
							All other properties are optional. They can override defaults that are determined by the selected type of the runtime environment.
						</p></section><section class="section" id="runtimemanagerfactorybean-ref_process-engine"><div class="titlepage"><div><div><h4 class="title">68.3.1.2. <code class="literal">RuntimeManagerFactoryBean</code> bean</h4></div></div></div><p>
							The <code class="literal">RuntimeManagerFactoryBean</code> factory bean produces <code class="literal">RuntimeManager</code> instances of a given type, based on the provided <code class="literal">RuntimeEnvironment</code> instance.
						</p><p>
							The supported types correspond to runtime manager stategies:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">SINGLETON</code>
								</li><li class="listitem">
									<code class="literal">PER_REQUEST</code>
								</li><li class="listitem">
									<code class="literal">PER_PROCESS_INSTANCE</code>
								</li></ul></div><p>
							The default type, when no type is specified, is <code class="literal">SINGLETON</code>.
						</p><p>
							The identifier is a mandatory property, because every runtime manager must be uniquely identified. All instances created by this factory are cached, so they can be properly disposed using the destroy method (<code class="literal">close()</code>).
						</p></section><section class="section" id="taskservicefactorybean-ref_process-engine"><div class="titlepage"><div><div><h4 class="title">68.3.1.3. <code class="literal">TaskServiceFactoryBean</code> bean</h4></div></div></div><p>
							The <code class="literal">TaskServiceFactoryBean</code> factory bean produces an instance of <code class="literal">TaskService</code> based on given properties. You must provide the following mandatory properties:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Entity manager factory
								</li><li class="listitem">
									Transaction manager
								</li></ul></div><p>
							The transaction manager must be the Spring transaction manager, because persistence and transaction support is configured based on this transaction manager.
						</p><p>
							Optionally, you can provide an <code class="literal">EntityManager</code> instance instead of creating a new instance from <code class="literal">EntityManagerFactory</code>, for example, you might use a shared entity manager from Spring.
						</p><p>
							You can also set additional optional properties for the task service instance:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">userGroupCallback</code>: The implementation of <code class="literal">UserGroupCallback</code> that the task service must use, the default value is <code class="literal">MVELUserGroupCallbackImpl</code>
								</li><li class="listitem">
									<code class="literal">userInfo</code>: The implementation of <code class="literal">UserInfo</code> that the task service must use, the default value is <code class="literal">DefaultUserInfo</code>
								</li><li class="listitem">
									<code class="literal">listener</code>: A list of <code class="literal">TaskLifeCycleEventListener</code> listeners which must be notified upon various operations on tasks
								</li></ul></div><p>
							This factory bean creates a single instance of the task service. By design, this instance must be shared across all beans in the Spring environment.
						</p></section><section class="section" id="spring-sample-runtimemanager-proc_process-engine"><div class="titlepage"><div><div><h4 class="title">68.3.1.4. Configuring a sample runtime manager with a Spring application</h4></div></div></div><p>
							The following procedure is an example of complete configuration for a single runtime manager within a Spring application.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Configure the entity manager factory and the transaction manager:
								</p><div class="formalpara"><p class="title"><strong>Configuring the entity manager factory and the transaction manager in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;bean id="jbpmEMF" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
  &lt;property name="persistenceUnitName" value="org.jbpm.persistence.spring.jta"/&gt;
&lt;/bean&gt;

&lt;bean id="jbpmEM" class="org.springframework.orm.jpa.support.SharedEntityManagerBean"&gt;
  &lt;property name="entityManagerFactory" ref="jbpmEMF"/&gt;
&lt;/bean&gt;

&lt;bean id="narayanaUserTransaction" factory-method="userTransaction" class="com.arjuna.ats.jta.UserTransaction" /&gt;

&lt;bean id="narayanaTransactionManager" factory-method="transactionManager" class="com.arjuna.ats.jta.TransactionManager" /&gt;

&lt;bean id="jbpmTxManager" class="org.springframework.transaction.jta.JtaTransactionManager"&gt;
  &lt;property name="transactionManager" ref="narayanaTransactionManager" /&gt;
  &lt;property name="userTransaction" ref="narayanaUserTransaction" /&gt;
&lt;/bean&gt;</pre>
									</p></div><p class="simpara">
									These settings define the following persistence configuration:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											JTA transaction manager (backed by Narayana JTA - for unit tests or servlet containers)
										</li><li class="listitem">
											Entity manager factory for the <code class="literal">org.jbpm.persistence.spring.jta</code> persistence unit
										</li></ul></div></li><li class="listitem"><p class="simpara">
									Configure the business process resource:
								</p><div class="formalpara"><p class="title"><strong>Configuring the business process resource in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;bean id="process" factory-method="newClassPathResource" class="org.kie.internal.io.ResourceFactory"&gt;
  &lt;constructor-arg&gt;
    &lt;value&gt;jbpm/processes/sample.bpmn&lt;/value&gt;
  &lt;/constructor-arg&gt;
&lt;/bean&gt;</pre>
									</p></div><p class="simpara">
									These settings define a single process that is to be available for execution. The name of the resource is <code class="literal">sample.bpmn</code> and it must be available on the class path. You can use the class path as a simple way to include resources for trying out the process engine.
								</p></li><li class="listitem"><p class="simpara">
									Configure the <code class="literal">RuntimeEnvironment</code> instance with the entity manager, transaction manager, and resources:
								</p><div class="formalpara"><p class="title"><strong>Configuring the <code class="literal">RuntimeEnvironment</code> instance in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;bean id="runtimeEnvironment" class="org.kie.spring.factorybeans.RuntimeEnvironmentFactoryBean"&gt;
  &lt;property name="type" value="DEFAULT"/&gt;
  &lt;property name="entityManagerFactory" ref="jbpmEMF"/&gt;
  &lt;property name="transactionManager" ref="jbpmTxManager"/&gt;
  &lt;property name="assets"&gt;
    &lt;map&gt;
      &lt;entry key-ref="process"&gt;&lt;util:constant static-field="org.kie.api.io.ResourceType.BPMN2"/&gt;&lt;/entry&gt;
    &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre>
									</p></div><p class="simpara">
									These settings define a default runtime environment for the runtime manager.
								</p></li><li class="listitem"><p class="simpara">
									Create a <code class="literal">RuntimeManager</code> instance based on the environment:
								</p><pre class="programlisting language-xml">&lt;bean id="runtimeManager" class="org.kie.spring.factorybeans.RuntimeManagerFactoryBean" destroy-method="close"&gt;
  &lt;property name="identifier" value="spring-rm"/&gt;
  &lt;property name="runtimeEnvironment" ref="runtimeEnvironment"/&gt;
&lt;/bean&gt;</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Result</strong></p><p>
								After these steps you can use the runtime manager to execute processes in the Spring environment, using the <code class="literal">EntityManagerFactory</code> class and the JTA transaction manager.
							</p></div><p>
							You can find complete Spring configuration files for different strategies in the <a class="link" href="https://github.com/kiegroup/droolsjbpm-integration/blob/7.48.0.Final/kie-spring/src/test/resources/jbpm/jta-emf/">repository</a>.
						</p></section><section class="section" id="spring-runtimemanager-additionalconfig-con_process-engine"><div class="titlepage"><div><div><h4 class="title">68.3.1.5. Additional configuration options for the runtime manager in the Spring framework</h4></div></div></div><p>
							In addition to the configuration with the <code class="literal">EntityManagerFactory</code> class and the JTA transaction manager, as described in <a class="xref" href="#spring-sample-runtimemanager-proc_process-engine" title="68.3.1.4. Configuring a sample runtime manager with a Spring application">Section 68.3.1.4, “Configuring a sample runtime manager with a Spring application”</a>, you can use other configuration options for the runtime manager in the Spring framework:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									JTA and the <code class="literal">SharedEntityManager</code> class
								</li><li class="listitem">
									Local Persistence Unit and the <code class="literal">EntityManagerFactory</code> class
								</li><li class="listitem">
									Local Persistence Unit and <code class="literal">SharedEntityManager</code> class
								</li></ul></div><p>
							If your application is configured with a Local Persistence Unit and uses the <code class="literal">AuditService</code> service to query process engine history data, you must add the <code class="literal">org.kie.api.runtime.EnvironmentName.USE_LOCAL_TRANSACTIONS</code> environment entry to the <code class="literal">RuntimeEnvironment</code> instance configuration:
						</p><div class="formalpara"><p class="title"><strong><code class="literal">RuntimeEnvironment</code> instance configuration for a Local Persistence Unit in the <code class="literal">spring.xml</code> file</strong></p><p>
								
<pre class="programlisting language-xml">&lt;bean id="runtimeEnvironment" class="org.kie.spring.factorybeans.RuntimeEnvironmentFactoryBean"&gt;
...
    &lt;property name="environmentEntries" ref="env" /&gt;
  &lt;/bean&gt;
  ...

  &lt;util:map id="env" key-type="java.lang.String" value-type="java.lang.Object"&gt;
		&lt;entry&gt;
			&lt;key&gt;
				&lt;util:constant
					static-field="org.kie.api.runtime.EnvironmentName.USE_LOCAL_TRANSACTIONS" /&gt;
			&lt;/key&gt;
			&lt;value&gt;true&lt;/value&gt;
		&lt;/entry&gt;
	&lt;/util:map&gt;</pre>
							</p></div><p>
							You can find more examples of configuration options in the repository: <a class="link" href="https://github.com/kiegroup/droolsjbpm-integration/tree/7.48.0.Final/kie-spring/src/test/resources/jbpm">configuration files</a> and <a class="link" href="https://github.com/kiegroup/droolsjbpm-integration/tree/7.48.0.Final/kie-spring/src/test/java/org/kie/spring/jbpm">test cases</a>.
						</p></section></section><section class="section" id="spring-process-services-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.3.2. Process engine services with Spring</h3></div></div></div><p>
						You might want to create a dynamic Spring application, where you can add and remove business assets such as process definitions, data model, rules, and forms without restarting the application.
					</p><p>
						In this case, use process engine services. Process engine services are designed as framework-agnostic, and separate modules bring in the required framework-specific addons.
					</p><p>
						The <code class="literal">jbpm-kie-services</code> module contains the code logic of the services. A Spring application can consume these pure Java services.
					</p><p>
						The only code you must add to your Spring application to configure process engine services is the implementation of the <code class="literal">IdentityProvider</code> interface. This implementation depends on your security configuration. The following example implementation uses Spring Security, though it might not cover all available security features for a Spring application.
					</p><div class="formalpara"><p class="title"><strong>Implementation of the <code class="literal">IdentityProvider</code> interface using Spring Security</strong></p><p>
							
<pre class="programlisting language-java">import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import org.kie.internal.identity.IdentityProvider;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.context.SecurityContextHolder;

public class SpringSecurityIdentityProvider implements IdentityProvider {

	public String getName() {

		Authentication auth = SecurityContextHolder.getContext().getAuthentication();
		if (auth != null &amp;&amp; auth.isAuthenticated()) {
			return auth.getName();
		}
		return "system";
	}

	public List&lt;String&gt; getRoles() {
		Authentication auth = SecurityContextHolder.getContext().getAuthentication();
		if (auth != null &amp;&amp; auth.isAuthenticated()) {
			List&lt;String&gt; roles = new ArrayList&lt;String&gt;();

			for (GrantedAuthority ga : auth.getAuthorities()) {
				roles.add(ga.getAuthority());
			}

			return roles;
		}

		return Collections.emptyList();
	}

	public boolean hasRole(String role) {
		return false;
	}

}</pre>
						</p></div><section class="section" id="spring-process-services-config-proc_process-engine"><div class="titlepage"><div><div><h4 class="title">68.3.2.1. Configuring process engine services with a Spring application</h4></div></div></div><p>
							The following procedure is an example of complete configuration for process engine services within a Spring application.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Configure transactons:
								</p><div class="formalpara"><p class="title"><strong>Configuring transactions in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;context:annotation-config /&gt;
&lt;tx:annotation-driven /&gt;
&lt;tx:jta-transaction-manager /&gt;

&lt;bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager" /&gt;</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									Configure JPA and persistence:
								</p><div class="formalpara"><p class="title"><strong>Configuring JPA and persistence in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" depends-on="transactionManager"&gt;
   &lt;property name="persistenceXmlLocation" value="classpath:/META-INF/jbpm-persistence.xml" /&gt;
&lt;/bean&gt;</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									Configure security and user and group information providers:
								</p><div class="formalpara"><p class="title"><strong>Configuring security and user and group information providers in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;util:properties id="roleProperties" location="classpath:/roles.properties" /&gt;

&lt;bean id="userGroupCallback" class="org.jbpm.services.task.identity.JBossUserGroupCallbackImpl"&gt;
  &lt;constructor-arg name="userGroups" ref="roleProperties"&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;

&lt;bean id="identityProvider" class="org.jbpm.spring.SpringSecurityIdentityProvider"/&gt;</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									Configure the runtime manager factory. This factory is Spring context aware, so it can interact with the Spring container in correct way and support the necessary services, including the transactional command service and the task service:
								</p><div class="formalpara"><p class="title"><strong>Configuring the runtime manager factory in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;bean id="runtimeManagerFactory" class="org.kie.spring.manager.SpringRuntimeManagerFactoryImpl"&gt;
  &lt;property name="transactionManager" ref="transactionManager"/&gt;
  &lt;property name="userGroupCallback" ref="userGroupCallback"/&gt;
&lt;/bean&gt;

&lt;bean id="transactionCmdService" class="org.jbpm.shared.services.impl.TransactionalCommandService"&gt;
  &lt;constructor-arg name="emf" ref="entityManagerFactory"&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;

&lt;bean id="taskService" class="org.kie.spring.factorybeans.TaskServiceFactoryBean" destroy-method="close"&gt;
  &lt;property name="entityManagerFactory" ref="entityManagerFactory"/&gt;
  &lt;property name="transactionManager" ref="transactionManager"/&gt;
  &lt;property name="userGroupCallback" ref="userGroupCallback"/&gt;
  &lt;property name="listeners"&gt;
    &lt;list&gt;
      &lt;bean class="org.jbpm.services.task.audit.JPATaskLifeCycleEventListener"&gt;
        &lt;constructor-arg value="true"/&gt;
      &lt;/bean&gt;
    &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre>
									</p></div></li><li class="listitem"><p class="simpara">
									Configure process engine services as Spring beans:
								</p><div class="formalpara"><p class="title"><strong>Configuring process engine services as Spring beans in the <code class="literal">spring.xml</code> file</strong></p><p>
										
<pre class="programlisting language-xml">&lt;!-- Definition service --&gt;
&lt;bean id="definitionService" class="org.jbpm.kie.services.impl.bpmn2.BPMN2DataServiceImpl"/&gt;

&lt;!-- Runtime data service --&gt;
&lt;bean id="runtimeDataService" class="org.jbpm.kie.services.impl.RuntimeDataServiceImpl"&gt;
  &lt;property name="commandService" ref="transactionCmdService"/&gt;
  &lt;property name="identityProvider" ref="identityProvider"/&gt;
  &lt;property name="taskService" ref="taskService"/&gt;
&lt;/bean&gt;

&lt;!-- Deployment service --&gt;
&lt;bean id="deploymentService" class="org.jbpm.kie.services.impl.KModuleDeploymentService" depends-on="entityManagerFactory" init-method="onInit"&gt;
  &lt;property name="bpmn2Service" ref="definitionService"/&gt;
  &lt;property name="emf" ref="entityManagerFactory"/&gt;
  &lt;property name="managerFactory" ref="runtimeManagerFactory"/&gt;
  &lt;property name="identityProvider" ref="identityProvider"/&gt;
  &lt;property name="runtimeDataService" ref="runtimeDataService"/&gt;
&lt;/bean&gt;

&lt;!-- Process service --&gt;
&lt;bean id="processService" class="org.jbpm.kie.services.impl.ProcessServiceImpl" depends-on="deploymentService"&gt;
  &lt;property name="dataService" ref="runtimeDataService"/&gt;
  &lt;property name="deploymentService" ref="deploymentService"/&gt;
&lt;/bean&gt;

&lt;!-- User task service --&gt;
&lt;bean id="userTaskService" class="org.jbpm.kie.services.impl.UserTaskServiceImpl" depends-on="deploymentService"&gt;
  &lt;property name="dataService" ref="runtimeDataService"/&gt;
  &lt;property name="deploymentService" ref="deploymentService"/&gt;
&lt;/bean&gt;

&lt;!-- Register the runtime data service as a listener on the deployment service so it can receive notification about deployed and undeployed units --&gt;
&lt;bean id="data" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean" depends-on="deploymentService"&gt;
  &lt;property name="targetObject" ref="deploymentService"&gt;&lt;/property&gt;
  &lt;property name="targetMethod"&gt;&lt;value&gt;addListener&lt;/value&gt;&lt;/property&gt;
  &lt;property name="arguments"&gt;
  &lt;list&gt;
      &lt;ref bean="runtimeDataService"/&gt;
  &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre>
									</p></div></li></ol></div><div class="formalpara"><p class="title"><strong>Result</strong></p><p>
								Your Spring application can use process engine services.
							</p></div></section></section></section><section class="section" id="integration-ejb-con_process-engine"><div class="titlepage"><div><div><h2 class="title">68.4. Integration with EJB</h2></div></div></div><p>
					The process engine provides a complete integration layer for Enterprise Java Beans (EJB). This layer supports both local and remote EJB interaction.
				</p><p>
					The following modules provide EJB services:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">jbpm-services-ejb-api</code>: The API module that extends the <code class="literal">jbpm-services-api</code> module with EJB-specific interfaces and objects
						</li><li class="listitem">
							<code class="literal">jbpm-services-ejb-impl</code>: An EJB extension for core services
						</li><li class="listitem">
							<code class="literal">jbpm-services-ejb-timer</code>: A process engine Scheduler Service implementation based on the EJB Timer Service
						</li><li class="listitem">
							<code class="literal">jbpm-services-ejb-client</code>: An EJB remote client implementation for remote interaction, which supports Red Hat JBoss EAP by default
						</li></ul></div><p>
					The EJB layer is based on process engine services. It provides almost the same capabilities as the core module, though some limitations exist if you use the remote interface.
				</p><p>
					The main limitation affects the deployment service, which, if it is used as a remote EJB service, supports only the following methods:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">deploy()</code>
						</li><li class="listitem">
							<code class="literal">undeploy()</code>
						</li><li class="listitem">
							<code class="literal">activate()</code>
						</li><li class="listitem">
							<code class="literal">deactivate()</code>
						</li><li class="listitem">
							<code class="literal">isDeployed()</code>
						</li></ul></div><p>
					Other methods are excluded because they return instances of runtime objects, such as <code class="literal">RuntimeManager</code>, which can not be used over the remote interface.
				</p><p>
					All other services provide the same functionality over EJB as the versions included in the core module.
				</p><section class="section" id="ejb-implementations-ref_process-engine"><div class="titlepage"><div><div><h3 class="title">68.4.1. Implementations for EJB services</h3></div></div></div><p>
						As an extension of process engine core services, EJB services provide EJB-based execution semantic and are based on various EJB-specific features.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">DeploymentServiceEJBImpl</code> is implemented as an EJB singleton with container-managed concurrency. Its lock type is set to <code class="literal">write</code>.
							</li><li class="listitem">
								<code class="literal">DefinitionServiceEJBImpl</code> is implemented as an EJB singleton with container-managed concurrency. Its overall lock type is set to <code class="literal">read</code> and for the <code class="literal">buildProcessDefinition()</code> method the lock type is set to <code class="literal">write</code>.
							</li><li class="listitem">
								<code class="literal">ProcessServiceEJBImpl</code> is implemented as a stateless session bean.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">RuntimeDataServiceEJBImpl</code> is implemented as an EJB singleton. For the majority of methods the lock type is set to <code class="literal">read</code>. For the following methods the lock type is set to <code class="literal">write</code>:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">onDeploy()</code>
									</li><li class="listitem">
										<code class="literal">onUnDeploy()</code>
									</li><li class="listitem">
										<code class="literal">onActivate()</code>
									</li><li class="listitem">
										<code class="literal">onDeactivate()</code>
									</li></ul></div></li><li class="listitem">
								<code class="literal">UserTaskServiceEJBImpl</code> is implemented as a stateless session bean.
							</li></ul></div><h4 id="transactions">Transactions</h4><p>
						The EJB container manages transactions in EJB services. For this reason, you do not need to set up any transaction manager or user transaction within your application code.
					</p><h4 id="identity_provider">Identity provider</h4><p>
						The default identity provider is based on the <code class="literal">EJBContext</code> interface and relies on caller principal information for both name and roles. The <code class="literal">IdentityProvider</code> interface provides two methods related to roles:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">getRoles()</code> returns an empty list, because the <code class="literal">EJBContext</code> interface does not provide an option to fetch all roles for a particular user
							</li><li class="listitem">
								<code class="literal">hasRole()</code> delegates to the <code class="literal">isCallerInRole()</code> method of the context
							</li></ul></div><p>
						To ensure that valid information is available to the EJB environment, you must follow standard JEE security practices to authenticate and authorize users. If no authentication or authorization is configured for EJB services, an anonymous user is always assumed.
					</p><p>
						If you use a different security model, you can use CDI-style injection for the <code class="literal">IdentityProvider</code> object for EJB services. In this case, create a valid CDI bean that implements the <code class="literal">org.kie.internal.identity.IdentityProvider</code> interface and make this bean available for injection with your application. This implementation will take precedence over the <code class="literal">EJBContext</code>-based identity provider.
					</p><h4 id="deployment_synchronization">Deployment synchronization</h4><p>
						Deployment synchronization is enabled by default and attempts to synchronize any deployments every 3 seconds. It is implemented as an EJB singleton with container-managed concurrency. Its lock type is set to <code class="literal">write</code>. It uses the EJB timer service to schedule synchronization jobs.
					</p><h4 id="ejb_scheduler_service">EJB scheduler service</h4><p>
						The process engine uses the scheduler service to handle time-based activities such as timer events and deadlines. When running in an EJB environment, the process engine uses a scheduler based on the EJB timer service. It registers this scheduler for all <code class="literal">RuntimeManager</code> instances.
					</p><p>
						You might need to use configuration specific to an application server to support cluster operation.
					</p><h4 id="literal_usergroupcallback_literal_and_literal_userinfo_literal_implementation_selection"><code class="literal">UserGroupCallback</code> and <code class="literal">UserInfo</code> implementation selection</h4><p>
						The required implementation of <code class="literal">UserGroupCallback</code> and <code class="literal">UserInfo</code> interfaces might differ for various applications. These interfaces can not be injected with EJB directly. You can use the following system properties to select existing implementations or use custom implementations of these interfaces for the process engine:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">org.jbpm.ht.callback</code>: This property selects the implementation for the <code class="literal">UserGroupCallback</code> interface:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">mvel</code>: The default implementation, typically used for testing.
									</li><li class="listitem">
										<code class="literal">ldap</code>: The LDAP-based implementation. This implementation requires additional configuration in the <code class="literal">jbpm.usergroup.callback.properties</code> file.
									</li><li class="listitem">
										<code class="literal">db</code>: The database-based implementation. This implementation requires additional configuration in the <code class="literal">jbpm.usergroup.callback.properties</code> file.
									</li><li class="listitem">
										<code class="literal">jaas</code>: An implementation that requests user information from the container.
									</li><li class="listitem">
										<code class="literal">props</code>: A simple property-based callback. This implementation requires an additional properties file that contains all users and groups.
									</li><li class="listitem">
										<code class="literal">custom</code>: A custom implementation. You must provide the fully-qualified class name of the implementation in the <code class="literal">org.jbpm.ht.custom.callback</code> system property.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">org.jbpm.ht.userinfo</code>: This property selects the implementation for the <code class="literal">UserInfo</code> interface:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">ldap</code>: The LDAP-based implementation. This implementation requires additional configuration in the <code class="literal">jbpm-user.info.properties</code> file.
									</li><li class="listitem">
										<code class="literal">db</code>: The database-based implementation. This implementation requires additional configuration in the <code class="literal">jbpm-user.info.properties</code> file.
									</li><li class="listitem">
										<code class="literal">props</code>: A simple property-based implementation. This implementation requires an additional properties file that contains all user information.
									</li><li class="listitem">
										<code class="literal">custom</code>: A custom implementation. You must provide the fully-qualified class name of the implementation in the <code class="literal">org.jbpm.ht.custom.userinfo</code> system property.
									</li></ul></div></li></ul></div><p>
						Typically, set the system properties in the startup configuration of the application server or JVM. You can also set the properties in the code before using the services. For example, you can provide a custom <code class="literal">@Startup</code> bean that configures these system properties.
					</p></section><section class="section" id="ejb-interfaces-local-ref_process-engine"><div class="titlepage"><div><div><h3 class="title">68.4.2. Local EJB interfaces</h3></div></div></div><p>
						The following local EJB service interfaces extend core services:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.DefinitionServiceEJBLocal</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.DeploymentServiceEJBLocal</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.ProcessServiceEJBLocal</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.RuntimeDataServiceEJBLocal</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.UserTaskServiceEJBLocal</code>
							</li></ul></div><p>
						You must use these interfaces as injection points and annotate them with <code class="literal">@EJB</code>:
					</p><div class="formalpara"><p class="title"><strong>Using local EJB service interfaces</strong></p><p>
							
<pre class="programlisting language-java">@EJB
private DefinitionServiceEJBLocal bpmn2Service;

@EJB
private DeploymentServiceEJBLocal deploymentService;

@EJB
private ProcessServiceEJBLocal processService;

@EJB
private RuntimeDataServiceEJBLocal runtimeDataService;</pre>
						</p></div><p>
						After injecting these interfaces, invoke operations on them in the same way as on core modules. No restrictions exist for using local interfaces.
					</p></section><section class="section" id="ejb-interfaces-remote-ref_process-engine"><div class="titlepage"><div><div><h3 class="title">68.4.3. Remote EJB interfaces</h3></div></div></div><p>
						The following dedicated remote EJB interfaces extend core services:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.DefinitionServiceEJBRemote</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.DeploymentServiceEJBRemote</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.ProcessServiceEJBRemote</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.RuntimeDataServiceEJBRemote</code>
							</li><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.api.UserTaskServiceEJBRemote</code>
							</li></ul></div><p>
						You can use these interfaces in the same way as local interfaces, with the exception of handling custom types.
					</p><p>
						You can define custom types in two ways. <span class="emphasis"><em>Globally</em></span> defined types are available on application classpath and included in the enterprise application. If you define a type <span class="emphasis"><em>locally to the deployment unit</em></span>, the type is declared in a project dependency (for example, in a KJAR file) and is resolved at deployment time.
					</p><p>
						Globally-available types do not require any special handling. The EJB container automatically marshalls the data when handling remote requests. However, local custom types are not visible to the EJB container by default.
					</p><p>
						The process engine EJB services provide a mechanism to work with custom types. They provide the following two additional types:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">org.jbpm.services.ejb.remote.api.RemoteObject</code>: A serializable wrapper class for single-value parameters
							</li><li class="listitem"><p class="simpara">
								<code class="literal">org.jbpm.services.ejb.remote.api.RemoteMap</code>: A dedicated <code class="literal">java.util.Map</code> implementation to simplify remote invocation of service methods that accept custom object input. The internal implementation of the map holds content that is already serialized, in order to avoid additional serialization at sending time.
							</p><p class="simpara">
								This implementation does not include some of the methods of <code class="literal">java.util.Map</code> that are usually not used when sending data.
							</p></li></ul></div><p>
						These special objects perform eager serialization to bytes using an <code class="literal">ObjectInputStream</code> object. They remove the need for serialization of data in the EJB client/container. Because no serialization is needed, it is not necessary to share the custom data model with the EJB container.
					</p><p>
						The following example code works with local types and remote EJB services:
					</p><div class="formalpara"><p class="title"><strong>Using local types with remote EJB services</strong></p><p>
							
<pre class="programlisting language-java">// Start a process with custom types via remote EJB

Map&lt;String, Object&gt; parameters = new RemoteMap();
Person person = new org.jbpm.test.Person("john", 25, true);
parameters.put("person", person);

Long processInstanceId = processService.startProcess(deploymentUnit.getIdentifier(), "custom-data-project.work-on-custom-data", parameters);

// Fetch task data and complete a task with custom types via remote EJB
Map&lt;String, Object&gt; data = userTaskService.getTaskInputContentByTaskId(taskId);

Person fromTaskPerson = data.get("_person");
fromTaskPerson.setName("John Doe");

RemoteMap outcome = new RemoteMap();
outcome.put("person_", fromTaskPerson);

userTaskService.complete(taskId, "john", outcome);</pre>
						</p></div><p>
						In a similar way, you can use the <code class="literal">RemoteObject</code> class to send an event to a process instance:
					</p><pre class="programlisting language-java">// Send an event with a custom type via remote EJB
Person person = new org.jbpm.test.Person("john", 25, true);

RemoteObject myObject = new RemoteObject(person);

processService.signalProcessInstance(processInstanceId, "MySignal", myObject);</pre></section><section class="section" id="ejb-remote-client-con_process-engine"><div class="titlepage"><div><div><h3 class="title">68.4.4. Remote EJB client</h3></div></div></div><p>
						Remote client support is provided by implementation of the <code class="literal">ClientServiceFactory</code> interface that is a facade for application server specific code:
					</p><div class="formalpara"><p class="title"><strong>Definition of the <code class="literal">ClientServiceFactory</code> interface</strong></p><p>
							
<pre class="programlisting language-java">/**
 * Generic service factory used for remote lookups that are usually container specific.
 *
 */
public interface ClientServiceFactory {

	/**
	 * Returns unique name of given factory implementation
	 * @return
	 */
	String getName();

	/**
	 * Returns remote view of given service interface from selected application
	 * @param application application identifier on the container
	 * @param serviceInterface remote service interface to be found
	 * @return
	 * @throws NamingException
	 */
	&lt;T&gt; T getService(String application, Class&lt;T&gt; serviceInterface) throws NamingException;
}</pre>
						</p></div><p>
						You can dynamically register implementations using the <code class="literal">ServiceLoader</code> mechanism. By default, only one implementation is available in Red Hat JBoss EAP.
					</p><p>
						Each <code class="literal">ClientServiceFactory</code> implementation must provide a name. This name is used to register it within the client registry. You can look up implementations by name.
					</p><p>
						The following code gets the default Red Hat JBoss EAP remote client:
					</p><div class="formalpara"><p class="title"><strong>Getting the default Red Hat JBoss EAP remote client</strong></p><p>
							
<pre class="programlisting language-java">// Retrieve a valid client service factory
ClientServiceFactory factory = ServiceFactoryProvider.getProvider("JBoss");

// Set the application variable to the module name
String application = "sample-war-ejb-app";

// Retrieve the required service from the factory
DeploymentServiceEJBRemote deploymentService = factory.getService(application, DeploymentServiceEJBRemote.class);</pre>
						</p></div><p>
						After retrieving a service you can use its methods.
					</p><p>
						When working with Red Hat JBoss EAP and the remote client you can add the following Maven dependency to bring in all EJB client libraries:
					</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;
  &lt;artifactId&gt;jboss-as-ejb-client-bom&lt;/artifactId&gt;
  &lt;version&gt;7.3.4.Final&lt;/version&gt; &lt;!-- use the valid version for the server you run on --&gt;
  &lt;optional&gt;true&lt;/optional&gt;
  &lt;type&gt;pom&lt;/type&gt;
&lt;/dependency&gt;</pre></section></section><section class="section" id="integration-osgi-con_process-engine"><div class="titlepage"><div><div><h2 class="title">68.5. Integration with OSGi</h2></div></div></div><p>
					All core process engine JAR files and core dependencies are OSGi-enabled. The following additional process engine JAR files are also OSGI-enabled:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							jbpm-flow
						</li><li class="listitem">
							jbpm-flow-builder
						</li><li class="listitem">
							jbpm-bpmn2
						</li></ul></div><p>
					OSGi-enabled JAR files contain <code class="literal">MANIFEST.MF</code> files in the <code class="literal">META-INF</code> directory. These files contain data such as the required dependencies. You can add such JAR files to an OSGi environment.
				</p><p>
					For additional information about the OSGi infrastructure, see the <a class="link" href="https://www.osgi.org/developer/where-to-start/">OSGi documentation</a>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Support for integration with the OSGi framework is deprecated. It does not receive any new enhancements or features and will be removed in a future release.
					</p></div></div></section></section></div><section class="appendix" id="versioning-information"><div class="titlepage"><div><div><h1 class="title">Appendix A. Versioning information</h1></div></div></div><p>
			Documentation last updated on Monday, January 18, 2021.
		</p></section><section class="appendix" id="author-group"><div class="titlepage"><div><div><h1 class="title">Appendix B. Contact information</h1></div></div></div><p>
			Red Hat Process Automation Manager documentation team: <a class="link" href="mailto:brms-docs@redhat.com">brms-docs@redhat.com</a>
		</p></section><div><div xml:lang="en-US" class="legalnotice" id="idm140093644975968"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2021 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>